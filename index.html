<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>幻舞梦境</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="幻舞梦境">
<meta property="og:url" content="http://ovwane.me/index.html">
<meta property="og:site_name" content="幻舞梦境">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="幻舞梦境">
  
    <link rel="alternative" href="/atom.xml" title="幻舞梦境" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
     
      <meta name="baidu-site-verification" content="3rC08I0Cp6" />
    
     
      <meta name="google-site-verification" content="rn8f25RzFQoiByt8ezg9E17KZIElbIlwJ4y-EKSlWbA" />
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">幻舞梦境</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">首页</a></li>
                        
                            <li><a href="/WebGuide">导航</a></li>
                        
                            <li><a href="/ovwane_love">Love</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/ovwane" title="github">github</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Ansible/" style="font-size: 11.43px;">Ansible</a> <a href="/tags/Bind/" style="font-size: 10px;">Bind</a> <a href="/tags/Cacti/" style="font-size: 10px;">Cacti</a> <a href="/tags/CentOS/" style="font-size: 20px;">CentOS</a> <a href="/tags/Cobbler/" style="font-size: 10px;">Cobbler</a> <a href="/tags/DHCP/" style="font-size: 10px;">DHCP</a> <a href="/tags/Django/" style="font-size: 12.86px;">Django</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Elasticsearch/" style="font-size: 10px;">Elasticsearch</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Gitlab/" style="font-size: 11.43px;">Gitlab</a> <a href="/tags/HAProxy/" style="font-size: 10px;">HAProxy</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Homebrew/" style="font-size: 10px;">Homebrew</a> <a href="/tags/JDK/" style="font-size: 10px;">JDK</a> <a href="/tags/Jenkins/" style="font-size: 12.86px;">Jenkins</a> <a href="/tags/KVM/" style="font-size: 10px;">KVM</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 12.86px;">Linux</a> <a href="/tags/MariaDB/" style="font-size: 10px;">MariaDB</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 10px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.14px;">Nginx</a> <a href="/tags/Oh-My-Zsh/" style="font-size: 10px;">Oh My Zsh</a> <a href="/tags/OpenLDAP/" style="font-size: 10px;">OpenLDAP</a> <a href="/tags/OpenStack/" style="font-size: 10px;">OpenStack</a> <a href="/tags/PHP/" style="font-size: 11.43px;">PHP</a> <a href="/tags/PXE/" style="font-size: 10px;">PXE</a> <a href="/tags/Python/" style="font-size: 15.71px;">Python</a> <a href="/tags/RHEL7/" style="font-size: 10px;">RHEL7</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Requests/" style="font-size: 10px;">Requests</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Samba/" style="font-size: 10px;">Samba</a> <a href="/tags/Scrapy/" style="font-size: 11.43px;">Scrapy</a> <a href="/tags/Scrapyd/" style="font-size: 10px;">Scrapyd</a> <a href="/tags/SpiderKeeper/" style="font-size: 10px;">SpiderKeeper</a> <a href="/tags/Squid/" style="font-size: 10px;">Squid</a> <a href="/tags/Supervisor/" style="font-size: 10px;">Supervisor</a> <a href="/tags/Tomcat/" style="font-size: 14.29px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Xadmin/" style="font-size: 10px;">Xadmin</a> <a href="/tags/Zabbix/" style="font-size: 10px;">Zabbix</a> <a href="/tags/cacti/" style="font-size: 10px;">cacti</a> <a href="/tags/dovecot/" style="font-size: 10px;">dovecot</a> <a href="/tags/httpd/" style="font-size: 11.43px;">httpd</a> <a href="/tags/iSCSI/" style="font-size: 10px;">iSCSI</a> <a href="/tags/k8s/" style="font-size: 10px;">k8s</a> <a href="/tags/kickstart/" style="font-size: 10px;">kickstart</a> <a href="/tags/macOS/" style="font-size: 14.29px;">macOS</a> <a href="/tags/nagios/" style="font-size: 10px;">nagios</a> <a href="/tags/postfix/" style="font-size: 10px;">postfix</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/sshd/" style="font-size: 10px;">sshd</a> <a href="/tags/uWSGI/" style="font-size: 10px;">uWSGI</a> <a href="/tags/vsftpd/" style="font-size: 10px;">vsftpd</a> <a href="/tags/zabbix/" style="font-size: 10px;">zabbix</a> <a href="/tags/历史/" style="font-size: 18.57px;">历史</a> <a href="/tags/情感/" style="font-size: 10px;">情感</a> <a href="/tags/监控/" style="font-size: 12.86px;">监控</a> <a href="/tags/自己/" style="font-size: 10px;">自己</a> <a href="/tags/运维/" style="font-size: 10px;">运维</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/">name</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">纯海迷、爱运动、爱交友、爱旅行、喜欢接触新鲜事物、迎接新的挑战，更爱游离于错综复杂的编码与逻辑中</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">幻舞梦境</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">幻舞梦境</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">首页</a></li>
                
                    <li><a href="/WebGuide">导航</a></li>
                
                    <li><a href="/ovwane_love">Love</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/ovwane" title="github">github</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-速记笔记-因为要去上海面试了没那么多时间" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/速记笔记-因为要去上海面试了没那么多时间/" class="article-date">
      <time datetime="2017-11-29T08:17:59.987Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="0165"><a href="#0165" class="headerlink" title="0165"></a>0165</h1><h1 id="0171"><a href="#0171" class="headerlink" title="0171"></a>0171</h1><h1 id="0183"><a href="#0183" class="headerlink" title="0183"></a>0183</h1><h1 id="0188"><a href="#0188" class="headerlink" title="0188"></a>0188</h1><h1 id="0193"><a href="#0193" class="headerlink" title="0193"></a>0193</h1><h1 id="0197"><a href="#0197" class="headerlink" title="0197"></a>0197</h1><h1 id="0209"><a href="#0209" class="headerlink" title="0209"></a>0209</h1><h1 id="0247"><a href="#0247" class="headerlink" title="0247"></a>0247</h1><h1 id="0261"><a href="#0261" class="headerlink" title="0261"></a>0261</h1><h1 id="0313"><a href="#0313" class="headerlink" title="0313"></a>0313</h1><p>TCP/UDP 端口号（1~65535)<br>TCP三次握手<br>1、Client to Server Syn=1,Seq=0<br>2、Server to Client Syn=1,Ack=1,Seq=0<br>3、Client to Server Ack=1，Seq=Seq+1</p>
<p>三次握手之后tcp状态变成established。</p>
<p>TCP四次挥手<br>1、主机A fin=1,seq=seq<br>2、主机B seq=seq,ack=主机A的seq+1<br>3、主机B 数据传输完毕，fin=1，seq=seq<br>4、主机A seq=seq，ack=主机B的seq+1</p>
<p>TCP的11种状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">三次握手涉及的状态</span><br><span class="line">CLOSED、SYN_SENT、SYN_RCVD、ESTABLISHED</span><br><span class="line"></span><br><span class="line">四次挥手涉及的状态</span><br><span class="line">FIN_WAIT1、CLOSE_WAIT、FIN_WAIT2、LAST_ACK、TIME_WAIT</span><br><span class="line"></span><br><span class="line">CLOSING</span><br></pre></td></tr></table></figure>
<p>tcp三次握手的状态<br>1、一开始，建立连接之前服务器和客户端的状态都是CLOSED。<br>2、服务器创建socket后开始监听，变成LISTEN状态。<br>3、客户端请求建立连接，向服务器发送syn报文，客户端的状态变为SYN_SENT。<br>4、服务器收到客户端的报文后向客户端发送ACK和SYN报文，此时服务器状态变为SYN——RCVD。<br>5、客户端收到服务器的ACK和SYN报文，就向服务器发送ACK报文，客户端状态变成ESTABLISHED。</p>
<p>tcp四次断开的状态<br>1、客户端先向服务器发送FIN报文，请求断开连接，其状态变成FIN_WAIT1。<br>2、服务器收到客户端FIN报文后，服务器向客户端发送ACK报文，服务器状态变为CLOSE_WAIT。<br>3、客户端收到服务器ACK报文后，进入FIN_WAIT2状态，此时连接已经断开一半了。如果服务器还有数据发送给客户端，就会继续发送。<br>4、服务器发送数据完成后，就发送FIN报文给客户端，服务器状态变为LAST_ACK状态。<br>5、客户端收到服务器的FIN报文，马上发送ACK报文给服务器，此时客户端进入TIME_WAIT状态。<br>6、客服端等待2MSL长的时间后进入CLOSED状态。服务器收到客户端的ACK报文就进入COLSED状态。</p>
<p>CLOSING状态<br>1、客户端向服务器发送FIN报文，没有收到服务器的ACK报文，直接收到了服务器的FIN报文。然后客户端状态变成CLOSING状态。</p>
<blockquote>
<p>这种情况发生在服务器发送ACK丢报的时候，因为网络传输有时会有意外。</p>
</blockquote>
<p>socket socket的五元组<br>源ip<br>源端口<br>目标ip<br>目标端口<br>tcp/udp</p>
<h1 id="0314"><a href="#0314" class="headerlink" title="0314"></a>0314</h1><h2 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h2><h1 id="0317"><a href="#0317" class="headerlink" title="0317"></a>0317</h1><h1 id="0325"><a href="#0325" class="headerlink" title="0325"></a>0325</h1><h1 id="0326"><a href="#0326" class="headerlink" title="0326"></a>0326</h1><h1 id="0327"><a href="#0327" class="headerlink" title="0327"></a>0327</h1><p>作为linux运维，打开网站服务器访问慢，如何排错</p>
<h1 id="0328"><a href="#0328" class="headerlink" title="0328"></a>0328</h1><p>局域网机器无法上网如何解决？<br>硬件 IP DNS<br>ping 域名 确认 dns 浏览器问题<br>ping ip网关 确认物理链路问题<br>查看IP<br>网卡 网线<br>交换机环路</p>
<blockquote>
<p>1、态度<br>2、技术</p>
</blockquote>
<h1 id="0329"><a href="#0329" class="headerlink" title="0329"></a>0329</h1><p>网站访问速度慢</p>
<p>网站带宽问题<br>服务器CPU过高<br>内容资源过大<br>用户的带宽问题<br>网站代码问题<br>南北互联<br>网站遭受攻击</p>
<p>1、自己把自己当作用户去测试</p>
<p>网络没问题</p>
<p>查看服务器服务 连接数，负载高。CPU高，IO高</p>
<p>带宽问题</p>
<p>网站调用别的第三方服务慢</p>
<p>用户的线路和服务器线路不同</p>
<p>集群架构问题</p>
<p>Web服务器问题<br>数据库问题<br>存储问题</p>
<h1 id="0331"><a href="#0331" class="headerlink" title="0331"></a>0331</h1><p>tcp/ip协议<br>http协议<br>机器无法上网<br>网站打开慢<br>dns解析</p>
<p>OSI 7层 TCP/IP 四层</p>
<p>如何查看已知端口被占用的服务名城</p>
<p>route 如何添加一个网络路由</p>
<blockquote>
<p>解答要专业、规范</p>
</blockquote>
<h1 id="0332"><a href="#0332" class="headerlink" title="0332"></a>0332</h1><h1 id="0340"><a href="#0340" class="headerlink" title="0340"></a>0340</h1><h1 id="0356"><a href="#0356" class="headerlink" title="0356"></a>0356</h1><h1 id="0394"><a href="#0394" class="headerlink" title="0394"></a>0394</h1><h1 id="0395"><a href="#0395" class="headerlink" title="0395"></a>0395</h1><h1 id="0442"><a href="#0442" class="headerlink" title="0442"></a>0442</h1><h2 id="expect"><a href="#expect" class="headerlink" title="expect"></a>expect</h2><p>非交互式功能实战<br><a href="http://oldboy.blog.51cto.com/256140/1205715" target="_blank" rel="noopener">轻松实现远程批量拷贝文件脚本（女学生作品）</a></p>
<h2 id="安装expect"><a href="#安装expect" class="headerlink" title="安装expect"></a>安装expect</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install expect</span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>创建用户<br>生成密钥<br>分发密钥</p>
<p>ssh-keygen -t dsa -P ‘’ -f ~/.ssh/id_dsa &gt;/dev/null 2&gt;&amp;1</p>
<p>vi fenfa_sshkey.exp<br>spawn ssh-copy-id -i<br>expect</p>
<h2 id="实现把脚本当前目录下的文件拷贝到所有服务器的任意目录"><a href="#实现把脚本当前目录下的文件拷贝到所有服务器的任意目录" class="headerlink" title="实现把脚本当前目录下的文件拷贝到所有服务器的任意目录"></a>实现把脚本当前目录下的文件拷贝到所有服务器的任意目录</h2><p>下面是来自老男孩培训初级第14期第六节课的批量分发管理服务器课程的女学生的作品（详细注释）<br>在大多数男同学还在迷糊的时候，该女同学已经完整的读懂并注释了全部的脚本，老男孩非常感慨，大家都有此努力的学习态度何愁运维不牛呢？<br>脚本内容及注释如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[binzai@ssh-server scripts]$ cat fenfa_host.sh   #→实现把脚本当前目录下的文件拷贝到所有服务器的任意目录</span><br><span class="line">#!/bin/sh</span><br><span class="line">. /etc/init.d/functions</span><br><span class="line">file=&quot;$1&quot;   #→传参文件</span><br><span class="line">remote_dir=&quot;$2&quot;   #→远程服务器目录</span><br><span class="line">if [ $# -ne 2 ];then      #→如果传的参数不等于2个，那么就打印如下报错信息。</span><br><span class="line">#→ $#：获取当前shell命令行中的参数的总个数</span><br><span class="line">#→ -ne：不等于</span><br><span class="line">echo &quot;usage:$0 argv1 argv2&quot;</span><br><span class="line">#→$0：首个参数（fenfa_host.sh）</span><br><span class="line">echo &quot;must have two argvs.&quot;</span><br><span class="line">exit</span><br><span class="line">fi</span><br><span class="line">for ip in $(cat /home/binzai/scripts/all_iplist.txt)</span><br><span class="line">#→$()：在脚本里引用全局变量</span><br><span class="line">do</span><br><span class="line">scp -P22 -r -p $file binzai@$ip:~ &gt;/dev/null 2&gt;&amp;1 &amp;&amp;\</span><br><span class="line">#→将hosts文件传到binzai家目录下，如果没有传递过去，将丢弃到/dev/null</span><br><span class="line">ssh -p 22 -t binzai@$ip sudo rsync -avz -P $file $remote_dir &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">#→通过ssh通道执行sudo命令将hosts文件拷贝到/etc目录下</span><br><span class="line">if [ $? -eq 0 ];then   #→如果上次执行结果返回值等于0，则执行OK。如果不等于0，则执行NO</span><br><span class="line">#→$?：上次执行结果的返回值</span><br><span class="line">#→-eq：等于</span><br><span class="line">action &quot;$ip is successful.&quot; /bin/true</span><br><span class="line">else</span><br><span class="line">action &quot;$ip is failure.&quot; /bin/false</span><br><span class="line">fi</span><br><span class="line">done</span><br><span class="line">‍</span><br></pre></td></tr></table></figure>
<p>补充shell变量知识：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$0 获取当前执行的shell脚本的文件名，包括路径</span><br><span class="line">$n 获取当前执行的shell脚本的第n个参数值，n=1..9，当n为0时表示脚本的文件名，如果n大于9用大括号括起来 &#123;10&#125;</span><br><span class="line">$* 获取当前shell的所有参数，将所有的命令行参数视为单个字符串，相当于“$1$2$3”…….注意与$#的区别</span><br><span class="line">$# 获取当前shell命令行中参数的总个数</span><br><span class="line">$@ 这个程序的所有参数”$1” “$2” “$3” “……” ，这是将参数传递给其他程序的最佳方式，因为他会保留所有内嵌在每个参数里的任何空白。</span><br><span class="line">$? 是上次执行结果的返回值</span><br><span class="line">0是正确，非0是错误</span><br><span class="line">$()是引用全局命令（在脚本里面引用命令）</span><br></pre></td></tr></table></figure>
<p>执行效果：</p>
<p>老男孩老师补充：<br>1）以上为基础的脚本，没什么难度，主要是感慨下学生的努力态度。<br>2）本脚本需要借助SSH KEY或者补充expect实现。</p>
<h2 id="这是一个无需做任何配置一键就实现批量分发密钥和文件的脚本："><a href="#这是一个无需做任何配置一键就实现批量分发密钥和文件的脚本：" class="headerlink" title="这是一个无需做任何配置一键就实现批量分发密钥和文件的脚本："></a>这是一个无需做任何配置一键就实现批量分发密钥和文件的脚本：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># this scripts comes from oldboy trainning&apos;s student.</span><br><span class="line"># e_mail:70271111@qq.com</span><br><span class="line"># qqinfo:49000448</span><br><span class="line"># function: remote dis ssh key.</span><br><span class="line"># version:1.1</span><br><span class="line">################################################</span><br><span class="line"># oldboy trainning info.</span><br><span class="line"># QQ 80042789 70271111</span><br><span class="line"># site:http://www.etiantian.org</span><br><span class="line"># blog:http://oldboy.blog.51cto.com</span><br><span class="line"># oldboy trainning QQ group: 208160987 45039636</span><br><span class="line">################################################</span><br><span class="line">. /etc/init.d/functions</span><br><span class="line">file=&quot;$1&quot;</span><br><span class="line">remote_dir=&quot;$2&quot;</span><br><span class="line">if [[ $# -ne 2 ]];then</span><br><span class="line">echo  &quot;usage:$0 argv2&quot;</span><br><span class="line">echo &quot;must have one argvs&quot;</span><br><span class="line">exit</span><br><span class="line">fi</span><br><span class="line">function KNOWN_HOST_REBUILD()</span><br><span class="line">&#123;</span><br><span class="line">#确保本机存在known_hosts列表</span><br><span class="line">[ ! -e ~/.ssh/known_hosts ] &amp;&amp; mkdir -p ~/.ssh/ &amp;&amp; touch ~/.ssh/known_hosts</span><br><span class="line">local i=$1</span><br><span class="line">sed -i &quot;/^$&#123;i&#125; /d&quot; ~/.ssh/known_hosts</span><br><span class="line">expect -c &quot;</span><br><span class="line">spawn /usr/bin/ssh oldboy@$&#123;i&#125; echo ok;</span><br><span class="line">expect \&quot;*yes/no)?\&quot;;</span><br><span class="line">send \&quot;yes\r\&quot;;</span><br><span class="line">expect eof &quot; &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">return 0</span><br><span class="line">[[ $? -ne 0 ]] &amp;&amp; echo &quot;$i know host rebuild fail,maybe the server connect error&quot;</span><br><span class="line">&#125;</span><br><span class="line">function PASS_PASSWD()</span><br><span class="line">&#123;</span><br><span class="line">ip=$1</span><br><span class="line">expect -c &quot;</span><br><span class="line">set timeout -1</span><br><span class="line">spawn ssh-copy-id -i id_dsa oldboy@$ip</span><br><span class="line">expect \&quot;*password:\&quot;</span><br><span class="line">send \&quot;oldboy123\r\&quot;</span><br><span class="line">expect eof&quot; &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line">function FENFA_id_dsa()</span><br><span class="line">&#123;</span><br><span class="line">for ip in `awk &apos;/^[^#]/&#123;print $1&#125;&apos; all_client.txt`</span><br><span class="line">do</span><br><span class="line">KNOWN_HOST_REBUILD $ip</span><br><span class="line">PASS_PASSWD $ip</span><br><span class="line">if [[ $? -eq 0 ]];then</span><br><span class="line">action &quot;$ip send id_dsa is successful&quot; /bin/true</span><br><span class="line">else</span><br><span class="line">action &quot;$ip send id_dsa is failed copied&quot; /bin/false</span><br><span class="line">fi</span><br><span class="line">done</span><br><span class="line">&#125;</span><br><span class="line">function FENFA_config()</span><br><span class="line">&#123;</span><br><span class="line">for ip in `awk &apos;/^[^#]/&#123;print $1&#125;&apos; all_client.txt`</span><br><span class="line">do</span><br><span class="line">port=$(grep $ip all_client.txt|awk &apos;&#123;print $2&#125;&apos;)</span><br><span class="line">scp -P$&#123;port&#125; -r -p $&#123;file&#125; oldboy@$&#123;ip&#125;:~ &gt;/dev/null 2&gt;&amp;1 &amp;&amp; \</span><br><span class="line">ssh -p$&#123;port&#125; -t oldboy@$ip sudo rsync ~/`basename $&#123;file&#125;` $remote_dir &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">if [[ $? -eq 0 ]];then</span><br><span class="line">action &quot;$ip send $file is successful!!&quot; /bin/true</span><br><span class="line">else</span><br><span class="line">action &quot;$ip send $file is failed!!&quot; /bin/false</span><br><span class="line">fi</span><br><span class="line">done</span><br><span class="line">&#125;</span><br><span class="line">FENFA_id_dsa</span><br><span class="line">FENFA_config</span><br></pre></td></tr></table></figure>
<h1 id="0445"><a href="#0445" class="headerlink" title="0445"></a>0445</h1><h2 id="如何一键自动化期中50台规模集群网站搭建"><a href="#如何一键自动化期中50台规模集群网站搭建" class="headerlink" title="如何一键自动化期中50台规模集群网站搭建"></a>如何一键自动化期中50台规模集群网站搭建</h2><p>搭建yum仓库、ntp时间同步服务器<br>定制rpm包</p>
<h3 id="1-运维班方案-sshkey-expect"><a href="#1-运维班方案-sshkey-expect" class="headerlink" title="1.运维班方案 sshkey expect"></a>1.运维班方案 sshkey expect</h3><p>1.kickstart无人值守安装linux系统（自动创建用户、密码、优化）<br>2.分发机上创建密钥对、批量分发公钥（expect）<br>3.写安装部署及优化脚本、批量分发到各个服务器上，远程执行安装。</p>
<h3 id="2-高级架构师班-cobbler-saltstack"><a href="#2-高级架构师班-cobbler-saltstack" class="headerlink" title="2.高级架构师班 cobbler saltstack"></a>2.高级架构师班 cobbler saltstack</h3><p>1.cobbler无人值守安装linux系统（自动创建用户、密码、优化、salt客户端）<br>2.服务端salt上，创建认证，写配置来批量安装管理各个节点服务器应用。</p>
<h3 id="3-高级架构师班-kvm-openstack"><a href="#3-高级架构师班-kvm-openstack" class="headerlink" title="3.高级架构师班 kvm openstack"></a>3.高级架构师班 kvm openstack</h3><p>1.kvm虚拟化、根据不同的业务提前做好镜像（linux基础优化、salt客户端）<br>2.通过云计算工具openstack管理镜像，批量生成五个虚拟机。<br>3.服务端salt上，创建认证，写配置来批量安装管理各个节点服务器应用。</p>
<h3 id="4-高级架构师班-docker"><a href="#4-高级架构师班-docker" class="headerlink" title="4.高级架构师班 docker"></a>4.高级架构师班 docker</h3><h1 id="0446"><a href="#0446" class="headerlink" title="0446"></a>0446</h1><h2 id="自动化运维工具"><a href="#自动化运维工具" class="headerlink" title="自动化运维工具"></a>自动化运维工具</h2><p>0）业务需求分析<br>1）机房设备上下架<br>    1.弹性<br>    2.扩展性<br>    3.充分利用资源 80%以下 雪崩效应</p>
<p>2）系统初始化<br>3）应用环境初始化<br>4）应用的部署（调试、配置） saltstack ansible<br>5）业务代码发布 jenkins + ant + svn 灰度发布 集群<br>6）服务监控 应用监控 系统监控 硬件监控 zabbix<br>7）业务数据备份 </p>
<h1 id="0447"><a href="#0447" class="headerlink" title="0447"></a>0447</h1><h2 id="自动化发展的阶段"><a href="#自动化发展的阶段" class="headerlink" title="自动化发展的阶段"></a>自动化发展的阶段</h2><p>1）标准化<br>    目录标准化 /data/wwwroot /usr/loca/nginx</p>
<p>2）文档化<br>    宕机 应对方案</p>
<p>3）工具化</p>
<p>web化 工具平台化 CMBD API 开发要日志给他接口API就行。</p>
<p>服务化</p>
<p>智能化 AIOps</p>
<h1 id="0453"><a href="#0453" class="headerlink" title="0453"></a>0453</h1><h2 id="web服务基础"><a href="#web服务基础" class="headerlink" title="web服务基础"></a>web服务基础</h2><p>用户访问网站基本流程</p>
<p>打开浏览器<br>输入域名DNS<br>网站web服务器<br>返回数据给用户</p>
<h1 id="0454"><a href="#0454" class="headerlink" title="0454"></a>0454</h1><p>企业真实场景面试题：</p>
<p>1、用户访问网站流程框架<br>2、DNS解析原理<br>3、tcp/ip 三次握手原理<br>4、http协议原理（www服务的请求过程）请求细节，报文细节！<br>5、大规模网站集群架构细节<br>6、http协议原理（www服务器的响应过程）响应报文细节！<br>7、tcp/ip四次挥手过程原理</p>
<h1 id="0471"><a href="#0471" class="headerlink" title="0471"></a>0471</h1><h1 id="0478"><a href="#0478" class="headerlink" title="0478"></a>0478</h1><p>pv ip 并发</p>
<h1 id="0479"><a href="#0479" class="headerlink" title="0479"></a>0479</h1><p>如何理解并发</p>
<p>静态网站<br>Apache httpd 2.2 2.4<br>Nginx 1.6.2 1.13.3 Tenginx<br>Lighttpd</p>
<p>动态网站<br>PHP fastcgi Apache mod_php<br>tomcat 7.0 8.0<br>resin 3.0 3.1 4.0<br>IIS</p>
<blockquote>
<p>Python 比较火</p>
</blockquote>
<h1 id="0480"><a href="#0480" class="headerlink" title="0480"></a>0480</h1><p><a href="http://oldboy.blog.51cto.com/2561410/1731320" target="_blank" rel="noopener">要不要考认证</a></p>
<blockquote>
<p>学历是铜牌<br>能力是银牌<br>人脉是金牌<br>思维是王牌</p>
</blockquote>
<h1 id="0481"><a href="#0481" class="headerlink" title="0481"></a>0481</h1><p>日期：20160505</p>
<p>企业真实场景面试题：<br>1、描述从浏览器打开<a href="http://blog.oldboyedu.com地址回车发送请求看到页面的过程？" target="_blank" rel="noopener">http://blog.oldboyedu.com地址回车发送请求看到页面的过程？</a></p>
<p>笔试就画出来、</p>
<p>1、DNS ttl 递归 迭代<br>2、TCP 三次连接握手<br>HTTP 请求报文 get post http 1.1 http2.0<br>TCP 四次挥手 fin ack 服务的 fin ack time_wait</p>
<h1 id="0483"><a href="#0483" class="headerlink" title="0483"></a>0483</h1><p>用户访问网站流程框架<br>1、DNS解析原理<br>2、tcp/ip三次握手（tcp的11种状态）<br>3、http协议原理请求get post http协议<br>4、大规模服务器集群架构细节<br>5、hhtp协议原理响应过程<br>6、tcp/ip四次挥手</p>
<p><a href="http://edu.csdn.net/course/detail/2278" target="_blank" rel="noopener">亿级PV超大型网站集群架构图形化深度揭秘讲解</a></p>
<blockquote>
<p>象棋与运维的碰撞</p>
</blockquote>
<h1 id="0484"><a href="#0484" class="headerlink" title="0484"></a>0484</h1><h2 id="成功-信念（目标）-价值观（方法）-努力（行动）-坚持"><a href="#成功-信念（目标）-价值观（方法）-努力（行动）-坚持" class="headerlink" title="成功=信念（目标）+价值观（方法）+努力（行动）+坚持"></a>成功=信念（目标）+价值观（方法）+努力（行动）+坚持</h2><h1 id="0485"><a href="#0485" class="headerlink" title="0485"></a>0485</h1><h1 id="0491"><a href="#0491" class="headerlink" title="0491"></a>0491</h1><h1 id="0523"><a href="#0523" class="headerlink" title="0523"></a>0523</h1><h2 id="LNMP环境应用实践"><a href="#LNMP环境应用实践" class="headerlink" title="LNMP环境应用实践"></a>LNMP环境应用实践</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">locatin ~* \.php$&#123;&#125;</span><br><span class="line">	fastcgi_pass ip:9000</span><br></pre></td></tr></table></figure>
<p>nginx 通过fastcgi请求php解析php页面</p>
<h1 id="0524"><a href="#0524" class="headerlink" title="0524"></a>0524</h1><p>MySQL简介</p>
<h1 id="0525"><a href="#0525" class="headerlink" title="0525"></a>0525</h1><p>yum<br>二进制</p>
<p>MySQL 5.6 AliSQL 5.6</p>
<h1 id="0526"><a href="#0526" class="headerlink" title="0526"></a>0526</h1><p>MySQL 安装方式</p>
<p>二进制安装包<br>源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">mysql.tar.gz mysql.tar.gz.md5</span><br><span class="line"></span><br><span class="line">md5sum -c mysql.tar.gz</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#创建mysql用户名</span><br><span class="line">useradd -s /sbin/nologin mysql -M</span><br><span class="line">mysql——install_db --basedir --datadir --user</span><br><span class="line">mysqld_safe</span><br><span class="line"></span><br><span class="line">lsof -i :3306</span><br><span class="line"></span><br><span class="line">PATH=&quot;/app/mysql/bin:$PATH&quot;</span><br><span class="line">echo &quot;export PATH=/app/mysql/bin:$PATH&quot; &gt;&gt;/etc/profile</span><br></pre></td></tr></table></figure>
<h1 id="0527"><a href="#0527" class="headerlink" title="0527"></a>0527</h1><p>mysql数据库安装步骤总结</p>
<p>修改mysql 密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -uroot password &quot;oldboy&quot;</span><br><span class="line">mysqladmin -uroot -p password &quot;oldboy&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>你用行动做了很多第一次，所以难忘。</p>
</blockquote>
<h1 id="0528"><a href="#0528" class="headerlink" title="0528"></a>0528</h1><p>常见故障</p>
<blockquote>
<p>推我、鼓励我、说我</p>
</blockquote>
<h1 id="0529"><a href="#0529" class="headerlink" title="0529"></a>0529</h1><p>FastCGI</p>
<p>CGI通用网关接口</p>
<p>FastCGI接口 socket：文件socket，IP socket</p>
<p>LNMP运行过程和解析原理</p>
<blockquote>
<p>架构师有销售能力<br>让一个人痛苦的能力就是你营销的能力！</p>
</blockquote>
<h1 id="0530"><a href="#0530" class="headerlink" title="0530"></a>0530</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -lntup|egrep &quot;nginx|mysql&quot;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lib库 -devel的包</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zlib gd freetype libpng libxml libcurl libconv libmcrypt mhash</span><br></pre></td></tr></table></figure>
<h1 id="0531"><a href="#0531" class="headerlink" title="0531"></a>0531</h1><p>源码编译安装php<br>–enable-fpm<br>–with-fpm-user=www</p>
<p>ldconfig</p>
<p>make -j</p>
<h1 id="0532"><a href="#0532" class="headerlink" title="0532"></a>0532</h1><p>php.ini php-fpm.ini<br>sbin/php-fpm</p>
<h1 id="0533"><a href="#0533" class="headerlink" title="0533"></a>0533</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location ~ .*\,(php|php5)?$ &#123;</span><br><span class="line">	root html/blog;</span><br><span class="line">	fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">	fastcgi_index index.php;</span><br><span class="line">	include fastcgi.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;php</span><br><span class="line">	phpinfo();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;php</span><br><span class="line">	$link_id=mysql_connect(&apos;localhost&apos;,&apos;root&apos;,&apos;oldboy&apos;) or mysql_error();</span><br><span class="line">	if($link_id)&#123;</span><br><span class="line">		echo &quot;mysql successful by oldboy!&quot;;</span><br><span class="line">	else</span><br><span class="line">		echo mysql_error();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h1 id="0535"><a href="#0535" class="headerlink" title="0535"></a>0535</h1><p>mysql 语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">system whoami；</span><br><span class="line"></span><br><span class="line">grant all on *.* to wordpress@&apos;localhost&apos; identified by &apos;123456&apos;；</span><br><span class="line">select user from mysql.user;</span><br><span class="line">show grant for wordpress@&apos;localhost&apos;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<p>bo-blog<br>wordpress<br>discuz</p>
<h1 id="0536"><a href="#0536" class="headerlink" title="0536"></a>0536</h1><p>总结</p>
<p>wordpress 网址静态化</p>
<h1 id="0537"><a href="#0537" class="headerlink" title="0537"></a>0537</h1><p>日期：20160517</p>
<p>主机名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">负载均衡 lb01 </span><br><span class="line">负载均衡 lb02</span><br><span class="line">web服务 web01</span><br><span class="line">web服务 web02</span><br><span class="line">数据库主 dbm01</span><br><span class="line">文件系统 nfs01</span><br><span class="line">备份 backup01</span><br><span class="line">监控 跳板机 m01</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p wordpress &lt;bak.sql </span><br><span class="line">mysql -uroot -p -e “show databases like &apos;wordpress&apos;;&quot;</span><br><span class="line"></span><br><span class="line">grant all on wordpress.* to wordpress@&apos;172.16.1.%&apos; identified by &apos;123456&apos;;</span><br><span class="line">#修改数据库信息 </span><br><span class="line">vi wp-config.php</span><br><span class="line"></span><br><span class="line">use wordpress;</span><br><span class="line">show tables;</span><br><span class="line">select * from old_post\G;</span><br></pre></td></tr></table></figure>
<h1 id="0538"><a href="#0538" class="headerlink" title="0538"></a>0538</h1><p>将blog的资源文件迁移到nfs</p>
<h1 id="0555"><a href="#0555" class="headerlink" title="0555"></a>0555</h1><p>nginx 负载均衡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">upstream server_pools &#123;</span><br><span class="line">	ip_hash;</span><br><span class="line">	server 10.0.0.7:80 weight=1;</span><br><span class="line">	server 10.0.0.8:80 weight=1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="0556"><a href="#0556" class="headerlink" title="0556"></a>0556</h1><p>架构需求</p>
<p>架构设想</p>
<p>架构计划清单</p>
<p>架构逻辑图</p>
<p>硬件及IP规划</p>
<p>软件规划<br>    统一软件类型<br>    统一软件版本<br>    统一配置文件</p>
<p>必备lib和其他工具<br>    编译安装<br>    yum安装<br>    工具</p>
<p>目录规划</p>
<p>用户规划</p>
<p>自动化部署心脏—分发服务器</p>
<p>用数据说话—有图有真相<br>    shell脚本<br>    expect脚本<br>    python脚本</p>
<p>自动部署标准流程图</p>
<p>架构展望—怎么优化，更高效，更快速</p>
<blockquote>
<p>相信自己，不要给自己设限。<br>——李扬 2015-03-19</p>
</blockquote>
<h1 id="0557"><a href="#0557" class="headerlink" title="0557"></a>0557</h1>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-老男孩Linux培训第28期笔记101-200" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/老男孩Linux培训第28期笔记101-200/" class="article-date">
      <time datetime="2017-11-29T08:17:59.983Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="—"><a href="#—" class="headerlink" title="—"></a>—</h2><h1 id="0101"><a href="#0101" class="headerlink" title="0101"></a>0101</h1><p>完成期中架构老师带你们去玩</p>
<h1 id="0102"><a href="#0102" class="headerlink" title="0102"></a>0102</h1><h2 id="表达"><a href="#表达" class="headerlink" title="表达"></a>表达</h2><p>2016/3/11 18:01:32</p>
<blockquote>
<ol>
<li>觉得会了是不够，还要表达出来，交流，尽可能教给不会的人！</li>
<li>表达出来，是一次将知识装进潜意识的过程。</li>
<li>只有把知识装进潜意识里，将来才能迅速取出来用。</li>
</ol>
</blockquote>
<p>听课，就是把知识放入意识的过程，潜意识层面的知识不是你的，放到潜意识里，真正的学会了。<br>只有把知识装入潜意识了，将来才能迅速取出来用。</p>
<p>潜意识：信念 价值观 行动</p>
<p>让老板加薪<br>信念：让他相信你牛逼，相信对公司的贡献大，对他忠诚。<br>价值观：方法有了<br>行动：才可能有结果。</p>
<h1 id="0103"><a href="#0103" class="headerlink" title="0103"></a>0103</h1><p>重要子目录说明<br>网卡配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/etc/sysconfig/network-scripts/ifcfg-eth&#123;0-?&#125;</span><br><span class="line">DEVICE=eth1 设备名字</span><br><span class="line">ONBOOT=yes 开机启动</span><br><span class="line">BOOTPROTO=static 静态协议</span><br><span class="line">IPADDR=192.168.33.3 主机地址</span><br><span class="line">NETMASK=255.255.255.0 子网掩码</span><br><span class="line">GATEWAY=192.168.33.1 网关</span><br><span class="line">DNS1=114.114.114.114</span><br><span class="line">DNS2=8.8.8.8</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#查看网关IP</span><br><span class="line">route -n</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#重启所有网卡</span><br><span class="line">/etc/init.f/network restart</span><br><span class="line">#开启eth0网卡</span><br><span class="line">ipup eth0</span><br></pre></td></tr></table></figure>
<p>blkid</p>
<h1 id="0104"><a href="#0104" class="headerlink" title="0104"></a>0104</h1><p>DNS配置<br>/etc/resolv.conf</p>
<p>网卡的dns重启后会覆盖resolv.conf的dns配置</p>
<h1 id="0105"><a href="#0105" class="headerlink" title="0105"></a>0105</h1><p>/etc/hosts</p>
<p>hosts 企业里的作用：<br>1、开发，产品，测试等人员，用于通过正式的域名测试产品。<br>2、服务器之间的调用可以用域名（内部的DNS），方便迁移。</p>
<h1 id="0106"><a href="#0106" class="headerlink" title="0106"></a>0106</h1><p>/etc/sysconfig/network</p>
<p>配置主机名和网关</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HOSTNAME=oldboy</span><br><span class="line"></span><br><span class="line">hostname oldboy</span><br></pre></td></tr></table></figure>
<h1 id="0107"><a href="#0107" class="headerlink" title="0107"></a>0107</h1><p>/etc/fstab</p>
<p>实现开机要挂载的文件系统的一个文件</p>
<h1 id="0108"><a href="#0108" class="headerlink" title="0108"></a>0108</h1><p>/etc/rc.local</p>
<p>用于存放开机自启动程序命令的文件。<br>chkconfig一般用来管理yum/rpm安装的程序。</p>
<p>自己开发的程序一般习惯把启动命令放入/etc/rc.local。</p>
<p>企业里如何用：chkconfig和/etc/rc.local，可以选择/etc/rc.local做服务器的档案记录。</p>
<p>/etc/inittab</p>
<p>设定系统启动时init进程将把系统设置成什么样的runlevel，运行级别及加载相关的级别对应启动文件配置</p>
<h1 id="0109"><a href="#0109" class="headerlink" title="0109"></a>0109</h1><p>刚毕业学生拿到offer<br>11*12 五险一金4000交。</p>
<p>回去总结</p>
<p>目录<br>1、nginx会话保持的问题<br>    1.1 实现会话（session）保持的几种方法：<br>        1.1.1 ip_hash：<br>        1.1.2 url_hash：<br>    1.2 当后端服务器后，可以采用下面的方法：<br>        1.2.1 一致性HASH算法<br>        1.2.2 基于Memcached储存session<br>2、数据库主琴技了，开发怎么处理<br>3、反向代理的硬件配置<br>4、压力测试怎么做的</p>
<p> /etc/exports 设定NFS网络文件系统用的配置文件。</p>
<p> /etc/init.d 这个目录是用来存放系统或服务器通过rpm/yum安装的软件默认的开机启动脚本的目录以 SystemV模式启动的脚本。</p>
<p> /etc/init.d/链接到/etc/rc.d/init.d目录</p>
<p> /etc/xinit.d 如果服务是通过xinetd模式运行的，他的脚本要放在/etc/xinit.d目录下，PXE+kickstart的tftp会用到/etc/xinit.d</p>
<p> /etc/profile 系统全局环境变量<br>~/.bash_profile ~/.bashrc 用户环境变量</p>
<p> /etc/profile.d 加载系统登录程序的一个目录，命令或文件独立存放，以文件的形式存在（*.sh)，要加可执行权限。</p>
<p> /etc/profile.d 登录后执行的脚本所在地<br> /etc/motd 登录后显示的提示字符串。</p>
<h1 id="0110"><a href="#0110" class="headerlink" title="0110"></a>0110</h1><p>/etc/issue 登录前提示<br>/etc/motd 登录后提示<br> /etc/redhat-release 版本信息<br> /usr/local 通过源码编译的软件存放闻之<br> /usr/src 内核源码存放位置<br> /var 系统默认日志文件<br> /var/log/message 日志文件，按周轮训切割日志。<br> /var/log/secure 登录日志。<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dmesg 查看系统信息</span><br><span class="line"></span><br><span class="line">ifup ifdown 启动和停止网卡</span><br></pre></td></tr></table></figure></p>
<p><a href="http://yangrong.blog.51cto.com/6945369/1288072" target="_blank" rel="noopener">往期学生有关目录结构的总结</a></p>
<p> /proc<br> /proc/version<br> /proc/cpuinfo<br> /proc/meminfo<br> /proc/loadavg<br> /proc/mount</p>
<h1 id="0111"><a href="#0111" class="headerlink" title="0111"></a>0111</h1><p>课后作业<br>总结，上机考试</p>
<h1 id="0112"><a href="#0112" class="headerlink" title="0112"></a>0112</h1><p>老男孩教育linux运维就业班第一关课后学习效果能力上机大考查</p>
<ol>
<li>创建目录/data/oldboy，并且在该目录下创建文件oldboy.txt，然后在文件oldboy.txt 里写入内容“inet addr：10.0.0.8  Bcast:10.0.0.255 Mask:255.255.255.0”（不包含引号）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/oldboy</span><br><span class="line">cd /data/oldboy</span><br><span class="line">touch oldboy.txt</span><br><span class="line">echo &quot;inet addr：10.0.0.8  Bcast:10.0.0.255 Mask:255.255.255.0&quot;&gt;oldboy.txt</span><br></pre></td></tr></table></figure>
<ol>
<li>将题1中的oldboy.txt文件内容通过命令过滤只输出如下内容。10.0.0.8  10.0.0.255 255.255.255.0</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol>
<li>将题1中的oldboy目录移动到/tmp目录，并将/etc/passwd文件复制到/tmp/oldboy下。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -r /data/oldboy /tmp/</span><br><span class="line">cp /etc/passwd /tmp/oldboy/</span><br></pre></td></tr></table></figure>
<ol>
<li>在题三的基础上，使用awk取passwd文件的第10行到20行的第三列重定向到/tmp/oldboy/test.txt文件里</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F&apos;:&apos; &apos;NR&gt;=10 &amp;&amp; NR&lt;=20 &#123;print $3&#125;&apos; /tmp/oldboy/passwd&gt;/tmp/oldboy/test.txt</span><br></pre></td></tr></table></figure>
<ol>
<li>在题3的基础上要求用命令rm删除文件时提示如下禁止使用rm的提示，并使该效果永久生效。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;alias rm=&quot;echo not use rm commond&quot;&quot;&gt;&gt;~/.bashrc</span><br></pre></td></tr></table></figure>
<ol>
<li>在题3的基础上，删除/tmp/oldboy下除passwd以外的其他文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /tmp/oldboy -type f ! -name &quot;passwd&quot; -exec rm -f &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<ol>
<li>在题3的基础上，请打印/etc/passwd文件中的第2-5行（不低于三种方法）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">head -5 passwd|tail -3</span><br><span class="line">grep 2 -C 5 passwd</span><br><span class="line">sed &apos;2,5p&apos; passwd</span><br></pre></td></tr></table></figure>
<ol>
<li>在题3的基础上，使用命令调换root位置和/bin/bash位置？即将所有的第一列和最后一列位置调换？例：<br>默认root:x:0:0:/root:/bin/bash 修改后为 /bin/bash：0:0:/root:root</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">9. 把/data目录及其子目录下所有以扩展名.txt结尾的文件中包含oldgir的字符串全部替换为oldboy</span><br></pre></td></tr></table></figure>
<p>find /data -type f -name “*.txt”|xargs sed -i ‘s/oldgirl/oldboy/g’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">10. 查找/oldboy下所有7天以前log结尾的大于1M的文件移动/tmp下</span><br></pre></td></tr></table></figure></p>
<p>find /oldboy -type f -date +7 size +1M -name “*.log” -exec mv {} /tmp \;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">11. 什么是linux的运行级别，请描述linux的运行级别不同数字的含义？（附加题）</span><br></pre></td></tr></table></figure></p>
<p>0 关机<br>1 单用户<br>2 没有nfs的多用户<br>3 多用户<br>4 未定义<br>5 图形化x11<br>6 重启<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 0113</span><br><span class="line">## 第一题</span><br></pre></td></tr></table></figure></p>
<p>mkdir -p /data/oldboy<br>touch /data/oldboy/oldboy.txt<br>ifconfig|sed -n ‘2p’&gt;/data/oldboy/oldboy.txt<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第二题</span><br></pre></td></tr></table></figure></p>
<p>awk -F “[ :]+” ‘{print $3,$5,$7}’ oldboy.txt</p>
<p>-F 分割符 这次有两个分割符空格和分号所以使用[]+<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第三题</span><br></pre></td></tr></table></figure></p>
<p>mv /data/oldboy /tmp<br>cp /etc/passwd /tmp/oldboy<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第四题</span><br></pre></td></tr></table></figure></p>
<p>cd /tmp/oldboy<br>awk -F “:” ‘NR&gt;9 &amp;&amp; NR&lt;21{print $3}’ passwd&gt;test.txt<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第五题</span><br></pre></td></tr></table></figure></p>
<p>echo “alias rm=”Do not use rm command.””&gt;&gt; /etc/profile ~/.bashrc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第六题</span><br></pre></td></tr></table></figure></p>
<p>ls|grep -v passwd|xargs rm -f<br>find /tmp/oldboy -type f ! -name “passwd” -exec rm -f {} \;<br>find /tmp/oldboy -type f ! -name “passwd”|xargs rm -f<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第七题</span><br></pre></td></tr></table></figure></p>
<p>head -5 /etc/passwd|tail -4<br>sed -n ‘2,5p’ /etc/passwd<br>awk ‘NR&gt;1 &amp;&amp; NR&lt;6’ /etc/passwd<br>cat -n passwd|grep “\s2\s” -A 3<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 0114</span><br><span class="line">## 第八题</span><br></pre></td></tr></table></figure></p>
<p>awk -F “:” ‘NR==1{print $7”:”$2”:”$3”:”$4”:”$5”:”$6”:”$1}’ passwd<br>sed -ir ‘s#(.<em>):x(.</em>):(.*)#\3\2\1#g’ passwd<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第九题</span><br></pre></td></tr></table></figure></p>
<p>find /data -type f -name “*.txt”|xargs sed -i ‘s/oldgirl/oldboy/g’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第十题</span><br></pre></td></tr></table></figure></p>
<p>dd if=/tmp/ss.txt of =/dev/zero bs=1 count=1.1M</p>
<p>find /oldboy -type f -name “*.log” -size +1M -mtime +7 -exec mv {} /tmp \;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 0115</span><br><span class="line">## 第十一题</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第十二题</span><br></pre></td></tr></table></figure>
<p>buffer 互联网写入硬盘，先缓存到内存<br>cache 硬盘读取数据，先缓存到内存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 第十三题</span><br></pre></td></tr></table></figure></p>
<p>~<br>-<br>.<br>..<br>|<br>&gt;</p>
<blockquote>
<p>&gt;<br>&lt;<br>&lt;&lt;<br>!<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 0116</span><br><span class="line">郭玉祥 未来的大神</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>xargs<br>xargs -n 1 分组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[企业面试题：查找/oldboy下所有7天以前以log结尾的文件移动/tmp下。](http://oldboy.blog.51cto.com/blog/2561410/1750481)</span><br><span class="line"></span><br><span class="line">企业必考面试题：查找/oldboy目录下所有7天以前的以log结尾的文件移动到/tmp下。 </span><br><span class="line">要求：请给出至少三种实现方法，有能力的朋友试试看！</span><br><span class="line"></span><br><span class="line">工作做事给老大，给面试官多种方案，让领导有多种选择，才叫有能力，</span><br><span class="line">只有一种方法，让老大没得选择，不叫有能力；</span><br><span class="line">有两种方法，让老大左右为难，也不叫有能力；</span><br><span class="line">有两种以上方法，可以让老大有选择的余地，才叫有能力；</span><br><span class="line">有选择才叫有能力！</span><br><span class="line"></span><br><span class="line">&gt;老男孩教育教学理念就是所有学生做事，都要给出两种以上的方法！</span><br><span class="line">去企业面试也是如此！如果同一个问题你给出了多种方法，直接秒杀其他竞争对手，</span><br><span class="line">这也是老男孩教育学生持续高薪，多年来秒杀所有同行linux培训机构的核心思想所在。</span><br><span class="line">---------老男孩老师</span><br><span class="line"></span><br><span class="line">&gt;更高级的运维思想，在公司的岗位上，要努力做到让领导别无选择，做到了再自己的岗位上让你的领导别无选择，你拿高薪就是轻而易举的事！如何做到让领导别无选择，见老男孩运维思想新篇（2016最新面授和在线课程运维思想更新80%以上，招招让你秒杀其他运维竞争者）！</span><br><span class="line">技术的提升只是量的积累，思想的提升才是质的飞跃！</span><br><span class="line">---------老男孩老师</span><br></pre></td></tr></table></figure></p>
<p>mv <code>find /oldboy -type f &quot;*.log&quot; -mtime ＋7</code> /tmp/<br>find /oldboy -type f -name “.log” -mtime ＋7 -exec mv {} /tmp \;<br>find /oldboy -type f -name “.log” -mtime ＋7 |xargs -i mv {} /tmp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">ls -l|awk &apos;&#123;print $7 &quot; &quot; $9 &quot; &quot;strftime(&quot;%d&quot;)&#125;&apos;|awk &apos;&#123;if($1＋7&lt;$3) print (&quot;mv &quot; $2 &quot; /tmp/&quot;)&#125;&apos;|bash</span><br><span class="line"></span><br><span class="line">find /oldboy/ -mtime ＋7 -type f -name &quot;*.log&quot;|sed -r &apos;s#(.*)#mv \1 /tmp/#&apos;|bash</span><br></pre></td></tr></table></figure></p>
<h1 id="0117"><a href="#0117" class="headerlink" title="0117"></a>0117</h1><blockquote>
<p>看一遍就理解了、就明白了那就不正常了。</p>
<p>大家听一遍就会了、那你凭什么拿1万多的工资。</p>
</blockquote>
<h1 id="0118"><a href="#0118" class="headerlink" title="0118"></a>0118</h1><p>总结的经验：</p>
<p>1、学会总结是学好运维的重要前提。</p>
<p>2、通过案例或例子来总结一个技术点或者命令。</p>
<p>3、画一张逻辑图，形象的卡通记忆这个知识技术点。</p>
<p>4、通过管道过滤数据时，最好先输出结果，然后回退再使用管道看着结果过滤。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">linux三剑客正则表达式</span><br><span class="line">	^ 以什么开头的，例子：^d 以d开头的。</span><br><span class="line">	$ 以什么结尾的，例子：/$ 以斜杠结尾的。</span><br><span class="line">	</span><br><span class="line">ls list 列出文件和目录</span><br><span class="line">	-F 给不同文件加标示</span><br><span class="line">	-p 只给目录加标示</span><br><span class="line"></span><br><span class="line">-maxdepath 查找深度 tree -L 类似</span><br><span class="line">find ./* -maxdepath 1 -type d</span><br><span class="line">find ./* -maxdepath 1 -type d -name &quot;.&quot;</span><br><span class="line"></span><br><span class="line">awk &apos;(if$2&gt;1) print $0&apos;</span><br><span class="line"></span><br><span class="line">awk</span><br></pre></td></tr></table></figure>
<p>查找目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ls -l|grep &quot;^d&quot;</span><br><span class="line">ls -l|awk &apos;&#123;if($2&gt;1) print $0&#125;&apos;</span><br><span class="line">ls -F|grep &quot;^d&quot;</span><br><span class="line">ls -F|grep &quot;/$&quot;</span><br><span class="line">find . -maxdepath 1 -type d ! -name &quot;.&quot;</span><br></pre></td></tr></table></figure>
<p>/etc/passwd</p>
<p>NR 行数 NF行尾一列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &quot;:&quot; &apos;NR==1 &#123;print $1,$4,$NF&#125;&apos; /etc/passwd</span><br></pre></td></tr></table></figure>
<p><a href="http://oldboy.blog.51cto.com/2561410/830451" target="_blank" rel="noopener">老男孩浅谈如何看待运维？</a></p>
<p>老男孩语录-老男孩浅谈如何看待运维？<br>运维，很容易从字面理解为运营、维护。<br>大部分朋友认为，在互联网公司中linux系统运维的工作就是安装系统，部署服务</p>
<h2 id="处理紧急故障，为公司开发人员及其它部门提供支持。同时负责内外网的网络稳定。"><a href="#处理紧急故障，为公司开发人员及其它部门提供支持。同时负责内外网的网络稳定。" class="headerlink" title="处理紧急故障，为公司开发人员及其它部门提供支持。同时负责内外网的网络稳定。"></a>处理紧急故障，为公司开发人员及其它部门提供支持。同时负责内外网的网络稳定。</h2><p>没错，上面的工作的确是运维的一部分工作，但并不是全部，或者说是中小公司低级的运维劳动。<br>在老男孩看来，除了上面的角色外，运维人员还是管理、制度、规范、流程的制定和推行、监督角色。<br>运维的核心是运维思想，非运维技术本身（如部署服务等，这是部分朋友的误区）。<br>上百台以上的服务器的规模如果没有好的管理流程、规范、制度策略，是无法协调工作的。<br>上千台、上万台更是如此。<br>运维流程、运维规范、运维制度、自动化、智能化、批量部署、批量管理、网站架构优化、监控预警、流量及日志分析统计、成本控制（注意字眼是控制，不是节省）<br>才是真正的运维人员需要做的。<br>如何推进并完善上面的工作，提升工作效率，提升团队以一当十的战斗力才是最核心的内容。<br>运维的宗旨：保护数据安全、7*24小时网络稳定、用户体验良好（用户包括内部的员工、外部的网站用户）<br>所以，我们做什么都不要离开运维的宗旨，否则，你的工作都可能是徒劳的无用功（起码和目标没直接对接）。<br>有经验的运维人员会先思考在动作，经验不足的运维人员会先做，遇到问题在思考，这是完全不同的层次和境界。<br>试想盖一座大楼如果先盖好在思考，那还能盖好么？<br>所以，请别轻易说你精通什么什么服务，会多少多少软件，那只是几块砖头、几袋水泥、几根钢筋而已。<br>盖好大楼，这些仅仅是基本的元素，运维同样是如此！</p>
<p><a href="http://oldboy.blog.51cto.com/blog/2561410/1740750" target="_blank" rel="noopener">2016打算做运维的人员必知必晓的知识</a></p>
<p>（1）运维人员要谨记的6个字：<br>运维人员做事需遵循：简单、易用、高效<br>（2）运维人员服务的3大宗旨：<br>1、企业数据安全保障。<br>2、7*24小时业务持续提供服务。<br>3、不断提升用户感受、体验。<br>（3）初中级运维的日常涉及工作:<br>1、评估产品需求及发展需求，设计网站架构。<br>2、选择IDC公司、云产品，CDN等产品。<br>3、采购服务器、安装系统、配置服务、服务器IDC上架。<br>4、调试网络、优化系统及服务。<br>5、上线代码、配合研发搭建环境、调试、测试代码。<br>6、监控硬件、软件及各种业务应用。<br>7、配置收集日志和，根据日志信息报警及优化系统及服务<br>8、解决日常问题，如硬件（服务器、交换机、硬件、网络）、软件（网络服务）、各类业务服务故障。<br>9、编写自动化脚本(Shell,Python)，自动化部署服务。<br>（4）高级运维涉及的工作:<br>1、监控带宽、流量、并发、业务接口等关键资源及访问信息的变化趋势。<br>2、根据相应趋势变化不断优化网站架构。<br>3、设计各类解决方案，解决公司业务发展中的遇到的网站瓶颈。<br>4、编写各种自动化脚本(Shell,Python)，自动化部署优化服务。<br>5、开发自动化部署和管理平台（CMDB），实现平台化运维。<br>5、开发运维管理平台、及运维工具产品，提升服务效率。<br>6、制定运维流程、规范、制度，并有序推进。<br>7、研究先进运维理念、模式，确保业务持续稳定、有序。</p>
<h1 id="0119"><a href="#0119" class="headerlink" title="0119"></a>0119</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -l|sed -n &apos;/^d/p&apos;</span><br><span class="line">ls -lF|sed -n &apos;/\/$/p&apos;</span><br></pre></td></tr></table></figure>
<h1 id="0120"><a href="#0120" class="headerlink" title="0120"></a>0120</h1><p>date</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ls -lrt </span><br><span class="line">	-t 	按修改时间排序，最新的再最下面</span><br><span class="line">	-r 反转排序</span><br><span class="line">	--color=auto 显示颜色</span><br><span class="line"></span><br><span class="line">grep --color=auto 关键字加颜色</span><br></pre></td></tr></table></figure>
<blockquote>
<p>女生最喜欢的是抱、解决被爱的需求<br>女孩子心思</p>
</blockquote>
<h2 id="访问日志按天切割-只保留7天的。"><a href="#访问日志按天切割-只保留7天的。" class="headerlink" title="访问日志按天切割 只保留7天的。"></a>访问日志按天切割 只保留7天的。</h2><p>生成测试环境</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /app/apache/</span><br><span class="line">cd /app/apache</span><br><span class="line">for n in `seq 14`;do date -s &quot;2016/01/$n&quot;; touch access_www_$(date +%F).log;done</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for n in `seq 14`</span><br><span class="line">do</span><br><span class="line">	date -s &quot;2014/08/$n&quot;</span><br><span class="line">	touch access_www_`(date +%F)`.log</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">date -s &quot;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find /app/logs/ -type f -mtime +7|xargs rm -f</span><br><span class="line">find /app/logs/ -type f -mtime +7 -exec rm -f &#123;&#125; \;</span><br><span class="line">rm -f `find /app/logs/ -type f -mtime +7`</span><br></pre></td></tr></table></figure>
<p>按周覆盖日志 apache日志</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CustomLog &quot;|/usr/loca/sbin/cronolog /app/logs/access_www_%w.log&quot; combined</span><br></pre></td></tr></table></figure>
<h1 id="0121"><a href="#0121" class="headerlink" title="0121"></a>0121</h1><p>调试系统服务 /var/log/messages</p>
<p>tail -f </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> `seq 1000`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$n</span>&gt;&gt;a.txt</span><br><span class="line">	sleep 1</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p><a href="http://blog.oldboyedu.com/java-tomcat/" target="_blank" rel="noopener">JAVA企业级应用TOMCAT实战</a></p>
<h1 id="0122"><a href="#0122" class="headerlink" title="0122"></a>0122</h1><p>打印行号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">echo stu&#123;1..20&#125;|xargs -n 1&gt;nginx.conf</span><br><span class="line">echo &quot;&quot;&gt;&gt;nginx.conf</span><br><span class="line">echo &quot;stu21&quot;&gt;&gt;nginx.conf</span><br><span class="line"></span><br><span class="line">cat -n</span><br><span class="line">nl 显示行号,不显示空格。空格行不计数。</span><br><span class="line">grep -n .</span><br><span class="line">vi -c set:nu </span><br><span class="line">awk &apos;&#123;print NR,$0&#125;&apos;</span><br><span class="line">#sed -n &quot;/N:1,20/p&quot;</span><br><span class="line">sed = nginx.conf|sed &apos;N:s/\n/ /&apos;</span><br><span class="line"></span><br><span class="line">more 按页显示，可以翻页，只能往下翻页，</span><br><span class="line">less 按页显示，可以翻页，可以上下翻页，b可以退回一屏</span><br></pre></td></tr></table></figure>
<h1 id="0123"><a href="#0123" class="headerlink" title="0123"></a>0123</h1><p>nfs仅在3级开启</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig nfs off</span><br><span class="line">chkconfig nfs on 3</span><br></pre></td></tr></table></figure>
<h2 id="如何优化linux系统"><a href="#如何优化linux系统" class="headerlink" title="如何优化linux系统"></a>如何优化linux系统</h2><p> 01）不用root，添加普通用户，通过sudo授权<br> 02）更改默认ssh服务端口，禁止root用户远程连接<br> 03）定时自动更新服务器时间。<br> 04）配置yum源为国内的<br> 05）关闭selinux和iptables<br> 06）调整文件limit.conf<br> 07）定时自动清理/var/spool/clientmquene目录垃圾，防止inode节点被占满，centos6.4默认没有sendmail。可以不配置。<br> 08）精简开机自启动服务（crond，sshd，network，rsyslog）<br> 09）linux内核参数优化/etc/sysctl.conf，执行sysctl -p生效<br> 10）更改字符集<br> 11）锁定关键系统文件<br> chattr +i /etc/passwd /etc/shadow /etc/group /etc/gshadow /wtc/inittab<br> 12）清空/etc/issue，除去系统及内核版本登录前的屏幕显示<br> 13）清楚无用的默认系统账号或组</p>
<p> 更多优化细节<a href="http://oldboy.blog.51cto.com/2561410/988726" target="_blank" rel="noopener">oldboy</a></p>
<p>特别提示：本文适合于11期第10此小综合架构考试系统优化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">一、Linux优化（安全+性能=32条）.................................................................................. 3</span><br><span class="line">1.服务器硬件采购优化............................................................................................... 3</span><br><span class="line">1.1 硬件供货商选择........................................................................................... 3</span><br><span class="line">1.2主要硬件部件选择......................................................................................... 3</span><br><span class="line">1.3定制化采购硬件............................................................................................ 3</span><br><span class="line">2.磁盘RAID选择、mount 及文件系统优化................................................................ 3</span><br><span class="line">2.1 磁盘类型接口选择优化................................................................................. 3</span><br><span class="line">2.2 hdparm优化.................................................................................................. 4</span><br><span class="line">2.3磁盘挂载(mount)优化.................................................................................... 4</span><br><span class="line">2.4 RAID选择优化............................................................................................... 4</span><br><span class="line">3.操作系统选择优化.................................................................................................. 5</span><br><span class="line">4.最小化软件包安装优化........................................................................................... 5</span><br><span class="line">5.禁止开机自启动无用服务........................................................................................ 5</span><br><span class="line">6.禁止root通过SSH远程登录并更改SSH端口............................................................ 6</span><br><span class="line">7. chattr锁定关键系统文件........................................................................................ 7</span><br><span class="line">8.内核优化（/etc/sysctl.conf）................................................................................... 7</span><br><span class="line">9.1 lvs/haproxy负载均衡代理内核参数配置.......................................................... 7</span><br><span class="line">9.2 nginx/apache生产内核参数优化案例.............................................................. 8</span><br><span class="line">9.3 squid/varnish/nginx proxy生产内核优化案例.................................................... 8</span><br><span class="line">9.4内核参数优化特别说明.................................................................................. 9</span><br><span class="line">10.增加系统文件描述符............................................................................................. 9</span><br><span class="line">11.配置sudo对普通用户权限精细控制....................................................................... 9</span><br><span class="line">12.禁ping(非必须).................................................................................................... 10</span><br><span class="line">13.关闭多余的控制台(非必须).................................................................................. 10</span><br><span class="line">14.清除多余的系统虚拟账号(非必须)........................................................................ 10</span><br><span class="line">15.配置防火墙iptables和SELinux.............................................................................. 11</span><br><span class="line">16. grub加密码(非必须)............................................................................................ 11</span><br><span class="line">17.设置/etc/hosts.deny、/etc/hosts.allow(非必须)...................................................... 12</span><br><span class="line">18.配置YUM安装源................................................................................................. 12</span><br><span class="line">19.禁止键盘重启（/etc/inittab），使用字符模式level 3............................................ 12</span><br><span class="line">20. /tmp临时目录安全............................................................................................. 12</span><br><span class="line">21.用户口令8位以上、定期更换、动态口令等........................................................ 13</span><br><span class="line">22.注销账号的时间，命令的历史记录数................................................................... 13</span><br><span class="line">23.删除登录信息(非必须)......................................................................................... 13</span><br><span class="line">24.安装系统性能监控软件监控调试软件................................................................... 13</span><br><span class="line">25.防病毒软件clamav，入侵检测ids、Tripwire。..................................................... 14</span><br><span class="line">26.配置服务器和互联网时间同步............................................................................. 14</span><br><span class="line">27.配置系统日志审计............................................................................................... 14</span><br><span class="line">28.操作系统磁盘分区划分优化................................................................................. 14</span><br><span class="line">29.负载均衡集群架构不同设备选型优化................................................................... 16</span><br><span class="line">29.1负载均衡器硬件选择及raid级别................................................................ 16</span><br><span class="line">29.2 WEB层硬件选择及raid级别....................................................................... 16</span><br><span class="line">29.3 数据库层硬件选择及raid级别(适合mysql和oracle)................................... 16</span><br><span class="line">29.4 存储层硬件选择及raid级别...................................................................... 16</span><br><span class="line">29.4.1数据备份硬件选择及raid级别.......................................................... 16</span><br><span class="line">29.4.2共享存储NFS硬件选择及raid级别................................................... 16</span><br><span class="line">30 linux服务器尽量少配外网IP地址......................................................................... 16</span><br><span class="line">31.linux系统一键优化脚本....................................................................................... 17</span><br><span class="line">32.linux一键安装（snmp,nagios,cacti,puppet等）客户端脚本.................................... 24</span><br></pre></td></tr></table></figure>
<p><a href="http://oldboy.blog.51cto.com/2561410/950730" target="_blank" rel="noopener">awk</a><br><a href="http://oldboy.blog.51cto.com/2561410/949365" target="_blank" rel="noopener">sed</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">wc </span><br><span class="line">	-l 显示line数</span><br><span class="line">	-w 显示单词数</span><br><span class="line">	-c </span><br><span class="line">	-L 显示标准字符数</span><br><span class="line">```	</span><br><span class="line"></span><br><span class="line"># 0124</span><br><span class="line">11k</span><br><span class="line"></span><br><span class="line">马自强</span><br><span class="line"></span><br><span class="line">笔记</span><br><span class="line">记笔记</span><br><span class="line"></span><br><span class="line">学会做人，学会感恩！</span><br><span class="line"></span><br><span class="line">学会老师的思想</span><br><span class="line"></span><br><span class="line"># 0125</span><br><span class="line">自启动</span><br></pre></td></tr></table></figure>
<p>vi /etc/rc.local<br>/etc/init.d/sshd start<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">chkconfig 设置服务开机自启动</span><br><span class="line"></span><br><span class="line">chkconfig --level 345 on 启动服务的级别</span><br><span class="line">chkconfig --list 显示所有的服务</span><br><span class="line">chkconfig --list sshd</span><br></pre></td></tr></table></figure></p>
<h1 id="0126"><a href="#0126" class="headerlink" title="0126"></a>0126</h1><p>开机启动流程</p>
<p>BIOS<br>MBR bootloader 446byte<br>GRUB<br>加载kernel</p>
<h1 id="INIT进程-进程号为1"><a href="#INIT进程-进程号为1" class="headerlink" title="INIT进程 进程号为1"></a>INIT进程 进程号为1</h1><p>inittab 选择init level<br>/etc/rc..d/rc.sysvinit fstab rc.local<br>/etc/rc.d/rc</p>
<p>mingetty 进程</p>
<h1 id="0127"><a href="#0127" class="headerlink" title="0127"></a>0127</h1><p>/etc/rc.d/rc.sysvinit</p>
<p>chkconfig -add 添加自定义开机项</p>
<h1 id="0128"><a href="#0128" class="headerlink" title="0128"></a>0128</h1><p>精简开机系统启动</p>
<p>sshd<br>crond<br>network<br>rsyslog<br>sysstat</p>
<p>实现思路：</p>
<p>先全部关掉</p>
<p>然后再开启需要的</p>
<p>操作实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">egrep &quot;3306|80&quot; /etc/services</span><br><span class="line"></span><br><span class="line"> awk &apos;&#123;print &quot;chkconfig&quot;,$1,&quot;off&quot;&#125;&apos;</span><br></pre></td></tr></table></figure>
<p>生产案例：优化精简开机自启动服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list|grep 3:on|grep -vE &quot;crond|sshd|network|rsyslog|sysstat&quot;|awk &apos;&#123;print &quot;chkconfig&quot; $1 &quot;off&quot;&#125;&apos;|bash</span><br></pre></td></tr></table></figure>
<h1 id="0130"><a href="#0130" class="headerlink" title="0130"></a>0130</h1>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-老男孩Linux培训第28期笔记201-300" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/老男孩Linux培训第28期笔记201-300/" class="article-date">
      <time datetime="2017-11-29T08:17:59.983Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>老男孩Linux培训第28期笔记001-100.md</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-老男孩Linux培训第28期笔记301-400" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/老男孩Linux培训第28期笔记301-400/" class="article-date">
      <time datetime="2017-11-29T08:17:59.983Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>老男孩Linux培训第28期笔记001-100.md</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-老男孩Linux培训第28期笔记401-565" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/老男孩Linux培训第28期笔记401-565/" class="article-date">
      <time datetime="2017-11-29T08:17:59.983Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>老男孩Linux培训第28期笔记001-100.md</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-crawl_spider 环境配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/crawl_spider 环境配置/" class="article-date">
      <time datetime="2017-11-29T08:17:59.975Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><code>mkvirtualenv crawl_spider --python=/Users/jinlong/.pyenv/versions/3.6.3/bin/python</code></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Vim安装配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/Vim安装配置/" class="article-date">
      <time datetime="2017-11-29T08:17:59.975Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Vim安装配置"><a href="#Vim安装配置" class="headerlink" title="Vim安装配置"></a>Vim安装配置</h1><p><a href="http://www.jianshu.com/p/a0b452f8f720" target="_blank" rel="noopener">Vim配置、插件和使用技巧</a></p>
<h2 id="安装-Vim"><a href="#安装-Vim" class="headerlink" title="安装 Vim"></a>安装 <a href="http://www.vim.org/" target="_blank" rel="noopener">Vim</a></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y vim-common vim-enhanced vim-minimal vim-filesystem</span><br></pre></td></tr></table></figure>
<h2 id="配置插件管理器-Vundle"><a href="#配置插件管理器-Vundle" class="headerlink" title="配置插件管理器 Vundle"></a>配置插件管理器 <a href="https://github.com/VundleVim/Vundle.vim" target="_blank" rel="noopener">Vundle</a></h2><h3 id="安装Vundle"><a href="#安装Vundle" class="headerlink" title="安装Vundle"></a>安装Vundle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></table></figure>
<p><a href="http://zuyunfei.com/2013/04/12/killer-plugin-of-vim-vundle/" target="_blank" rel="noopener">vim中的杀手级插件: vundle</a></p>
<h3 id="配置-vimrc"><a href="#配置-vimrc" class="headerlink" title="配置 ~/.vimrc"></a>配置 ~/.vimrc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; ~/.vimrc &lt;&lt; EOF</span><br><span class="line"><span class="built_in">set</span> nocompatible              <span class="string">" be iMproved, required</span></span><br><span class="line"><span class="string">filetype off                  "</span> required</span><br><span class="line"></span><br><span class="line"><span class="string">" set the runtime path to include Vundle and initialize</span></span><br><span class="line"><span class="string">set rtp+=~/.vim/bundle/Vundle.vim</span></span><br><span class="line"><span class="string">call vundle#begin()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> Vundle manage Vundle, required</span><br><span class="line">Plugin <span class="string">'VundleVim/Vundle.vim'</span></span><br><span class="line"></span><br><span class="line"><span class="string">" Color schemes</span></span><br><span class="line"><span class="string">Plugin 'tomasr/molokai'</span></span><br><span class="line"><span class="string">Plugin 'altercation/vim-colors-solarized'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> Status Color schemes</span><br><span class="line">Plugin <span class="string">'vim-airline/vim-airline'</span></span><br><span class="line">Plugin <span class="string">'vim-airline/vim-airline-themes'</span></span><br><span class="line"></span><br><span class="line"><span class="string">" plugin on GitHub repo</span></span><br><span class="line"><span class="string">"</span> Plugin <span class="string">'tpope/vim-fugitive'</span></span><br><span class="line"><span class="string">" plugin from http://vim-scripts.org/vim/scripts.html</span></span><br><span class="line"><span class="string">"</span> Plugin <span class="string">'L9'</span></span><br><span class="line"><span class="string">" Git plugin not hosted on GitHub</span></span><br><span class="line"><span class="string">"</span> Plugin <span class="string">'git://git.wincent.com/command-t.git'</span></span><br><span class="line"><span class="string">" git repos on your local machine (i.e. when working on your own plugin)</span></span><br><span class="line"><span class="string">"</span> Plugin <span class="string">'file:///home/gmarik/path/to/plugin'</span></span><br><span class="line"><span class="string">" The sparkup vim script is in a subdirectory of this repo called vim.</span></span><br><span class="line"><span class="string">"</span> Pass the path to <span class="built_in">set</span> the runtimepath properly.</span><br><span class="line"><span class="string">" Plugin 'rstacruz/sparkup', &#123;'rtp': 'vim/'&#125;</span></span><br><span class="line"><span class="string">"</span> Install L9 and avoid a Naming conflict <span class="keyword">if</span> you<span class="string">'ve already installed a</span></span><br><span class="line"><span class="string">" different version somewhere else.</span></span><br><span class="line"><span class="string">" Plugin '</span>ascenator/L9<span class="string">', &#123;'</span>name<span class="string">': '</span>newL9<span class="string">'&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">" All of your Plugins must be added before the following line</span></span><br><span class="line"><span class="string">call vundle#end()            " required</span></span><br><span class="line"><span class="string">filetype plugin indent on    " required</span></span><br><span class="line"><span class="string">" To ignore plugin indent changes, instead use:</span></span><br><span class="line"><span class="string">"filetype plugin on</span></span><br><span class="line"><span class="string">" Put your non-Plugin stuff after this line</span></span><br><span class="line"><span class="string">" solarized start</span></span><br><span class="line"><span class="string">"let g:solarized_termcolors=256</span></span><br><span class="line"><span class="string">"let g:solarized_termtrans=1</span></span><br><span class="line"><span class="string">"let g:solarized_contrast="normal"</span></span><br><span class="line"><span class="string">"let g:solarized_visibility="normal"</span></span><br><span class="line"><span class="string">"syntax enable</span></span><br><span class="line"><span class="string">"set background=dark</span></span><br><span class="line"><span class="string">"colorscheme solarized</span></span><br><span class="line"><span class="string">" solarized end</span></span><br><span class="line"><span class="string">" molokai start</span></span><br><span class="line"><span class="string">let g:molokai_original = 1</span></span><br><span class="line"><span class="string">let g:rehash256 = 1</span></span><br><span class="line"><span class="string">colorscheme molokai</span></span><br><span class="line"><span class="string">" molokai end</span></span><br><span class="line"><span class="string">" Airline theme start</span></span><br><span class="line"><span class="string">let g:airline_theme='</span>molokai<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_powerline_fonts = 1</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#enabled = 1</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#buffer_nr_show = 1</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#left_sep = '</span> <span class="string">'</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#left_alt_sep = '</span>|<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline#extensions#whitespace#enabled = 0</span></span><br><span class="line"><span class="string">let g:airline#extensions#whitespace#symbol = '</span>!<span class="string">'</span></span><br><span class="line"><span class="string">if !exists('</span>g:airline_symbols<span class="string">')</span></span><br><span class="line"><span class="string">  let g:airline_symbols = &#123;&#125;</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string">" unicode symbols</span></span><br><span class="line"><span class="string">let g:airline_left_sep = '</span>»<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_left_sep = '</span>▶<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_right_sep = '</span>«<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_right_sep = '</span>◀<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.crypt = '</span>🔒<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.linenr = '</span>☰<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.linenr = '</span>␊<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.linenr = '</span>␤<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.linenr = '</span>¶<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.maxlinenr = '</span><span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.maxlinenr = '</span>㏑<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.branch = '</span>⎇<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.paste = '</span>ρ<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.paste = '</span>Þ<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.paste = '</span>∥<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.spell = '</span>Ꞩ<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.notexists = '</span>∄<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.whitespace = '</span>Ξ<span class="string">'</span></span><br><span class="line"><span class="string">" Airline theme end</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"><span class="string">set laststatus=2</span></span><br><span class="line"><span class="string">set t_Co=256</span></span><br><span class="line"><span class="string">set encoding=utf-8</span></span><br><span class="line"><span class="string">set syntax enable</span></span><br><span class="line"><span class="string">set syntax on</span></span><br><span class="line"><span class="string">set number</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>
<h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim +PluginInstall +qall</span><br></pre></td></tr></table></figure>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot; Brief help</span><br><span class="line">&quot; :PluginList       - lists configured plugins</span><br><span class="line">&quot; :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate</span><br><span class="line">&quot; :PluginSearch foo - searches for foo; append `!` to refresh local cache</span><br><span class="line">&quot; :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal</span><br><span class="line">&quot; see :h vundle for more details or wiki for FAQ</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#安装插件 Install Plugins:</span><br><span class="line"></span><br><span class="line">Launch vim and run :PluginInstall</span><br></pre></td></tr></table></figure>
<h2 id="Vim插件"><a href="#Vim插件" class="headerlink" title="Vim插件"></a>Vim插件</h2><h3 id="pathogen类似于Vundle"><a href="#pathogen类似于Vundle" class="headerlink" title="pathogen类似于Vundle"></a><a href="https://github.com/tpope/vim-pathogen" target="_blank" rel="noopener">pathogen</a>类似于Vundle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.vim/autoload ~/.vim/bundle &amp;&amp; \</span><br><span class="line">curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi .vimrc</span><br><span class="line"></span><br><span class="line">execute pathogen#infect()</span><br><span class="line">syntax on</span><br><span class="line">filetype plugin indent on</span><br></pre></td></tr></table></figure>
<h3 id="vim-airline"><a href="#vim-airline" class="headerlink" title="vim-airline"></a><a href="https://github.com/vim-airline/vim-airline" target="_blank" rel="noopener">vim-airline</a></h3><h3 id="vim-airline-themes"><a href="#vim-airline-themes" class="headerlink" title="vim-airline-themes"></a><a href="https://github.com/vim-airline/vim-airline-themes" target="_blank" rel="noopener">vim-airline-themes</a></h3><h2 id="Vim主题"><a href="#Vim主题" class="headerlink" title="Vim主题"></a>Vim主题</h2><h3 id="Solarized"><a href="#Solarized" class="headerlink" title="Solarized"></a><a href="http://ethanschoonover.com/solarized" target="_blank" rel="noopener">Solarized</a></h3><p><a href="https://github.com/altercation/vim-colors-solarized" target="_blank" rel="noopener">Solarized Colorscheme for Vim</a></p>
<h3 id="Molokai"><a href="#Molokai" class="headerlink" title="Molokai"></a>Molokai</h3><p><a href="https://github.com/tomasr/molokai" target="_blank" rel="noopener">Molokai Color Scheme for Vim</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/hello-world/" class="article-date">
      <time datetime="2017-11-29T08:17:59.975Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/29/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Python" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/Python/" class="article-date">
      <time datetime="2017-11-29T08:17:59.971Z" itemprop="datePublished">2017-11-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>优秀Python开发者</p>
<p>Flask和Requests的作者<br>Celery作者Ask Solem<br>Django<br>kombu</p>
<p>爬虫<br>刚开始写爬虫用的是urllib2，后来知道了requests，惊为天人。刚开始解析网页用的是re，后来知道了BeautifulSoup，解析页面不能再轻松。再后来看别人的爬虫，知道了scrapy，被这个框架惊艳到了。之后遇到了一些有验证码的网站，于是知道了PIL。但后来知道了opencv，pybrain。当在爬虫中用上人工神经网络识别出验证码，兴奋得守在爬虫旁边看他爬完全站。再后来知道了threading，知道了celery。不断的学习，不断的接触和知道更多的东西，爬虫与反爬虫的对抗会一直进行下去。</p>
<p>作者：bsdr<br>链接：<a href="https://www.zhihu.com/question/38192299/answer/75884957" target="_blank" rel="noopener">https://www.zhihu.com/question/38192299/answer/75884957</a><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<p>requests<br>BeautifulSoup<br>opencv<br>pybrain<br>threading<br>celery</p>
<p>scrapy<br>selenium<br>phantomjs</p>
<p>python学习手册 第四版</p>
<p>python核心编程 第二版</p>
<p>开始不用学，进阶学习<br>ORM<br>ElasticSearch</p>
<p>不用存储，爬去数据发送邮件</p>
<p>抓去顺序</p>
<p>开放的API<br>手机APP的API<br>Android的API实现抓取知乎的数据<br>HTML</p>
<p>抓包工具<br>Charles</p>
<p>lxml<br>xpath</p>
<p>前端知识</p>
<p>运维-&gt;运维开发-&gt;Web开发-&gt;数据分析-&gt;需要数据写爬虫</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Python爬虫学习实践笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/23/Python爬虫学习实践笔记/" class="article-date">
      <time datetime="2017-11-23T22:09:39.000Z" itemprop="datePublished">2017-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/23/Python爬虫学习实践笔记/">Python爬虫学习实践笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <blockquote>
<p>Python 3.6.3</p>
</blockquote>
<p>环境创建</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv crawl_spider --python=/Users/jinlong/.pyenv/versions/3.6.3/bin/python</span><br></pre></td></tr></table></figure>
<p>安装库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests==2.18.4 beautifulsoup4==4.6.0</span><br></pre></td></tr></table></figure>
<p><a href="http://python-requests.org/" target="_blank" rel="noopener">Requests</a></p>
<p><a href="https://www.crummy.com/software/BeautifulSoup/" target="_blank" rel="noopener">Beautiful Soup</a></p>
<p>lxml和BeautifulSoup的区别</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2017 幻舞梦境
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-39498261-3', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?1bb44bf25fea8f000a1397f9b5438de7";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>