<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>å¹»èˆæ¢¦å¢ƒ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="å¹»èˆæ¢¦å¢ƒ">
<meta property="og:url" content="https://ovwane.icu/page/43/index.html">
<meta property="og:site_name" content="å¹»èˆæ¢¦å¢ƒ">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¹»èˆæ¢¦å¢ƒ">
  
    <link rel="alternative" href="/atom.xml" title="å¹»èˆæ¢¦å¢ƒ" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
     
      <meta name="baidu-site-verification" content="3rC08I0Cp6">
    
     
      <meta name="google-site-verification" content="rn8f25RzFQoiByt8ezg9E17KZIElbIlwJ4y-EKSlWbA">
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- åŠ è½½ç‰¹æ•ˆ -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet">
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">å¹»èˆæ¢¦å¢ƒ</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        <li>å‹æƒ…é“¾æ¥</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">åšå®¢é¦–é¡µ</a></li>
                        
                            <li><a href="/archives">åšå®¢å½’æ¡£</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/ovwane" title="github">github</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Ansible/" style="font-size: 11.67px;">Ansible</a> <a href="/tags/Bind/" style="font-size: 10px;">Bind</a> <a href="/tags/Cacti/" style="font-size: 10px;">Cacti</a> <a href="/tags/CentOS/" style="font-size: 20px;">CentOS</a> <a href="/tags/Cobbler/" style="font-size: 10px;">Cobbler</a> <a href="/tags/DHCP/" style="font-size: 10px;">DHCP</a> <a href="/tags/Django/" style="font-size: 10px;">Django</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Gitlab/" style="font-size: 11.67px;">Gitlab</a> <a href="/tags/HAProxy/" style="font-size: 10px;">HAProxy</a> <a href="/tags/Hexo/" style="font-size: 11.67px;">Hexo</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Jenkins/" style="font-size: 11.67px;">Jenkins</a> <a href="/tags/KVM/" style="font-size: 10px;">KVM</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/MariaDB/" style="font-size: 10px;">MariaDB</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 10px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 16.67px;">Nginx</a> <a href="/tags/Oh-My-Zsh/" style="font-size: 10px;">Oh My Zsh</a> <a href="/tags/OpenLDAP/" style="font-size: 10px;">OpenLDAP</a> <a href="/tags/OpenStack/" style="font-size: 10px;">OpenStack</a> <a href="/tags/PHP/" style="font-size: 11.67px;">PHP</a> <a href="/tags/PXE/" style="font-size: 10px;">PXE</a> <a href="/tags/Python/" style="font-size: 13.33px;">Python</a> <a href="/tags/RHEL7/" style="font-size: 10px;">RHEL7</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Samba/" style="font-size: 10px;">Samba</a> <a href="/tags/Scrapy/" style="font-size: 10px;">Scrapy</a> <a href="/tags/Scrapyd/" style="font-size: 10px;">Scrapyd</a> <a href="/tags/SpiderKeeper/" style="font-size: 10px;">SpiderKeeper</a> <a href="/tags/Squid/" style="font-size: 10px;">Squid</a> <a href="/tags/Subversion/" style="font-size: 10px;">Subversion</a> <a href="/tags/Supervisor/" style="font-size: 10px;">Supervisor</a> <a href="/tags/Tomcat/" style="font-size: 13.33px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Zabbix/" style="font-size: 10px;">Zabbix</a> <a href="/tags/Zsh/" style="font-size: 10px;">Zsh</a> <a href="/tags/cacti/" style="font-size: 10px;">cacti</a> <a href="/tags/dovecot/" style="font-size: 10px;">dovecot</a> <a href="/tags/httpd/" style="font-size: 11.67px;">httpd</a> <a href="/tags/iSCSI/" style="font-size: 10px;">iSCSI</a> <a href="/tags/k8s/" style="font-size: 10px;">k8s</a> <a href="/tags/kickstart/" style="font-size: 10px;">kickstart</a> <a href="/tags/macOS/" style="font-size: 16.67px;">macOS</a> <a href="/tags/nagios/" style="font-size: 10px;">nagios</a> <a href="/tags/postfix/" style="font-size: 10px;">postfix</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/sshd/" style="font-size: 10px;">sshd</a> <a href="/tags/uWSGI/" style="font-size: 10px;">uWSGI</a> <a href="/tags/vsftpd/" style="font-size: 10px;">vsftpd</a> <a href="/tags/zabbix/" style="font-size: 10px;">zabbix</a> <a href="/tags/å†å²/" style="font-size: 18.33px;">å†å²</a> <a href="/tags/å­¦ä¹ ç¬”è®°/" style="font-size: 10px;">å­¦ä¹ ç¬”è®°</a> <a href="/tags/æƒ…æ„Ÿ/" style="font-size: 10px;">æƒ…æ„Ÿ</a> <a href="/tags/ç”Ÿæ´»/" style="font-size: 10px;">ç”Ÿæ´»</a> <a href="/tags/ç›‘æ§/" style="font-size: 13.33px;">ç›‘æ§</a> <a href="/tags/ç½‘ç»œ/" style="font-size: 10px;">ç½‘ç»œ</a> <a href="/tags/è‡ªå·±/" style="font-size: 10px;">è‡ªå·±</a> <a href="/tags/è¿ç»´/" style="font-size: 10px;">è¿ç»´</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/">name</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">çº¯æµ·è¿·ã€çˆ±è¿åŠ¨ã€çˆ±äº¤å‹ã€çˆ±æ—…è¡Œã€å–œæ¬¢æ¥è§¦æ–°é²œäº‹ç‰©ã€è¿æ¥æ–°çš„æŒ‘æˆ˜ï¼Œæ›´çˆ±æ¸¸ç¦»äºé”™ç»¼å¤æ‚çš„ç¼–ç ä¸é€»è¾‘ä¸­</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">å¹»èˆæ¢¦å¢ƒ</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">å¹»èˆæ¢¦å¢ƒ</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">åšå®¢é¦–é¡µ</a></li>
                
                    <li><a href="/archives">åšå®¢å½’æ¡£</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/ovwane" title="github">github</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-macOS å®‰è£…é…ç½®NVM" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/03/macOS å®‰è£…é…ç½®NVM/" class="article-date">
      <time datetime="2016-10-03T02:06:00.000Z" itemprop="datePublished">2016-10-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/03/macOS å®‰è£…é…ç½®NVM/">macOS å®‰è£…é…ç½®NVM</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>macOS å®‰è£…é…ç½®NVM<br>macOS 10.12.6<br>macOS 10.13</p>
<h3 id="å®‰è£…NVM-Node-Version-Manager"><a href="#å®‰è£…NVM-Node-Version-Manager" class="headerlink" title="å®‰è£…NVM(Node Version Manager)"></a>å®‰è£…<a href="https://github.com/creationix/nvm" target="_blank" rel="noopener">NVM(Node Version Manager)</a></h3><hr>
<p>éœ€è¦è®¿é—®<a href="https://github.com/creationix/nvm#install-script" target="_blank" rel="noopener">NVM</a>ç«™ç‚¹æŸ¥çœ‹æœ€æ–°ç‰ˆçš„å®‰è£…NVM shellè„šæœ¬ã€‚</p>
<blockquote>
<p>å®‰è£… NVM  # æ­¤è„šæœ¬ä¸ä¸€å®šæ˜¯æœ€æ–°çš„ã€‚è¯·è®¿é—®NVMç«™ç‚¹æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬çš„NVMã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.35.0/install.sh | bash</span><br></pre></td></tr></table></figure>
<p>æ£€æŸ¥ ~/.zshrc æ–‡ä»¶å†…æ˜¯å¦æœ‰ä¸‹é¢çš„å†…å®¹ï¼Œæ²¡æœ‰çš„è¯æ·»åŠ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#NVM start</span><br><span class="line">export NVM_DIR=&quot;$HOME/.nvm&quot;</span><br><span class="line">[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm</span><br><span class="line">[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion</span><br><span class="line">#NVM end</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…-node"><a href="#å®‰è£…-node" class="headerlink" title="å®‰è£… node"></a>å®‰è£… node</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥çœ‹å¯ä»¥å®‰è£…çš„nodeç‰ˆæœ¬</span><br><span class="line">nvm ls-remote</span><br><span class="line"></span><br><span class="line">#å®‰è£… node stable</span><br><span class="line">nvm install stable</span><br><span class="line"></span><br><span class="line">#å®‰è£… node v8.2.1</span><br><span class="line">nvm install 8.2.1 # å®‰è£…çš„npmç‰ˆæœ¬æ˜¯5.3.0</span><br><span class="line"></span><br><span class="line">#è®¾ç½®é»˜è®¤ node</span><br><span class="line">nvm alias default 8.2.1</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°npm</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g npm</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>1.<a href="http://www.cnblogs.com/Don/p/4672287.html" target="_blank" rel="noopener">http://www.cnblogs.com/Don/p/4672287.html</a><br>2.<a href="http://www.kancloud.cn/summer/nodejs-install/71975" target="_blank" rel="noopener">http://www.kancloud.cn/summer/nodejs-install/71975</a><br>3.<a href="https://npm.taobao.org/" target="_blank" rel="noopener">https://npm.taobao.org/</a><br>4.<a href="http://cnodejs.org/topic/5338c5db7cbade005b023c98" target="_blank" rel="noopener">http://cnodejs.org/topic/5338c5db7cbade005b023c98</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><a class="article-category-link" href="/categories/æŠ€æœ¯/macOS/">macOS</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macOS/">macOS</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Vimå®‰è£…é…ç½®" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/08/Vimå®‰è£…é…ç½®/" class="article-date">
      <time datetime="2016-08-08T05:20:00.000Z" itemprop="datePublished">2016-08-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Vimå®‰è£…é…ç½®"><a href="#Vimå®‰è£…é…ç½®" class="headerlink" title="Vimå®‰è£…é…ç½®"></a>Vimå®‰è£…é…ç½®</h1><p><a href="http://www.jianshu.com/p/a0b452f8f720" target="_blank" rel="noopener">Vimé…ç½®ã€æ’ä»¶å’Œä½¿ç”¨æŠ€å·§</a></p>
<h2 id="å®‰è£…-Vim"><a href="#å®‰è£…-Vim" class="headerlink" title="å®‰è£… Vim"></a>å®‰è£… <a href="http://www.vim.org/" target="_blank" rel="noopener">Vim</a></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y vim-common vim-enhanced vim-minimal vim-filesystem</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®æ’ä»¶ç®¡ç†å™¨-Vundle"><a href="#é…ç½®æ’ä»¶ç®¡ç†å™¨-Vundle" class="headerlink" title="é…ç½®æ’ä»¶ç®¡ç†å™¨ Vundle"></a>é…ç½®æ’ä»¶ç®¡ç†å™¨ <a href="https://github.com/VundleVim/Vundle.vim" target="_blank" rel="noopener">Vundle</a></h2><h3 id="å®‰è£…Vundle"><a href="#å®‰è£…Vundle" class="headerlink" title="å®‰è£…Vundle"></a>å®‰è£…Vundle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></table></figure>
<p><a href="http://zuyunfei.com/2013/04/12/killer-plugin-of-vim-vundle/" target="_blank" rel="noopener">vimä¸­çš„æ€æ‰‹çº§æ’ä»¶: vundle</a></p>
<h3 id="é…ç½®-vimrc"><a href="#é…ç½®-vimrc" class="headerlink" title="é…ç½® ~/.vimrc"></a>é…ç½® ~/.vimrc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; ~/.vimrc &lt;&lt; EOF</span><br><span class="line"><span class="built_in">set</span> nocompatible              <span class="string">" be iMproved, required</span></span><br><span class="line"><span class="string">filetype off                  "</span> required</span><br><span class="line"></span><br><span class="line"><span class="string">" set the runtime path to include Vundle and initialize</span></span><br><span class="line"><span class="string">set rtp+=~/.vim/bundle/Vundle.vim</span></span><br><span class="line"><span class="string">call vundle#begin()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> <span class="built_in">let</span> Vundle manage Vundle, required</span><br><span class="line">Plugin <span class="string">'VundleVim/Vundle.vim'</span></span><br><span class="line"></span><br><span class="line"><span class="string">" Color schemes</span></span><br><span class="line"><span class="string">Plugin 'tomasr/molokai'</span></span><br><span class="line"><span class="string">Plugin 'altercation/vim-colors-solarized'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span> Status Color schemes</span><br><span class="line">Plugin <span class="string">'vim-airline/vim-airline'</span></span><br><span class="line">Plugin <span class="string">'vim-airline/vim-airline-themes'</span></span><br><span class="line"></span><br><span class="line"><span class="string">" plugin on GitHub repo</span></span><br><span class="line"><span class="string">"</span> Plugin <span class="string">'tpope/vim-fugitive'</span></span><br><span class="line"><span class="string">" plugin from http://vim-scripts.org/vim/scripts.html</span></span><br><span class="line"><span class="string">"</span> Plugin <span class="string">'L9'</span></span><br><span class="line"><span class="string">" Git plugin not hosted on GitHub</span></span><br><span class="line"><span class="string">"</span> Plugin <span class="string">'git://git.wincent.com/command-t.git'</span></span><br><span class="line"><span class="string">" git repos on your local machine (i.e. when working on your own plugin)</span></span><br><span class="line"><span class="string">"</span> Plugin <span class="string">'file:///home/gmarik/path/to/plugin'</span></span><br><span class="line"><span class="string">" The sparkup vim script is in a subdirectory of this repo called vim.</span></span><br><span class="line"><span class="string">"</span> Pass the path to <span class="built_in">set</span> the runtimepath properly.</span><br><span class="line"><span class="string">" Plugin 'rstacruz/sparkup', &#123;'rtp': 'vim/'&#125;</span></span><br><span class="line"><span class="string">"</span> Install L9 and avoid a Naming conflict <span class="keyword">if</span> you<span class="string">'ve already installed a</span></span><br><span class="line"><span class="string">" different version somewhere else.</span></span><br><span class="line"><span class="string">" Plugin '</span>ascenator/L9<span class="string">', &#123;'</span>name<span class="string">': '</span>newL9<span class="string">'&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">" All of your Plugins must be added before the following line</span></span><br><span class="line"><span class="string">call vundle#end()            " required</span></span><br><span class="line"><span class="string">filetype plugin indent on    " required</span></span><br><span class="line"><span class="string">" To ignore plugin indent changes, instead use:</span></span><br><span class="line"><span class="string">"filetype plugin on</span></span><br><span class="line"><span class="string">" Put your non-Plugin stuff after this line</span></span><br><span class="line"><span class="string">" solarized start</span></span><br><span class="line"><span class="string">"let g:solarized_termcolors=256</span></span><br><span class="line"><span class="string">"let g:solarized_termtrans=1</span></span><br><span class="line"><span class="string">"let g:solarized_contrast="normal"</span></span><br><span class="line"><span class="string">"let g:solarized_visibility="normal"</span></span><br><span class="line"><span class="string">"syntax enable</span></span><br><span class="line"><span class="string">"set background=dark</span></span><br><span class="line"><span class="string">"colorscheme solarized</span></span><br><span class="line"><span class="string">" solarized end</span></span><br><span class="line"><span class="string">" molokai start</span></span><br><span class="line"><span class="string">let g:molokai_original = 1</span></span><br><span class="line"><span class="string">let g:rehash256 = 1</span></span><br><span class="line"><span class="string">colorscheme molokai</span></span><br><span class="line"><span class="string">" molokai end</span></span><br><span class="line"><span class="string">" Airline theme start</span></span><br><span class="line"><span class="string">let g:airline_theme='</span>molokai<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_powerline_fonts = 1</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#enabled = 1</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#buffer_nr_show = 1</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#left_sep = '</span> <span class="string">'</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#left_alt_sep = '</span>|<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline#extensions#whitespace#enabled = 0</span></span><br><span class="line"><span class="string">let g:airline#extensions#whitespace#symbol = '</span>!<span class="string">'</span></span><br><span class="line"><span class="string">if !exists('</span>g:airline_symbols<span class="string">')</span></span><br><span class="line"><span class="string">  let g:airline_symbols = &#123;&#125;</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string">" unicode symbols</span></span><br><span class="line"><span class="string">let g:airline_left_sep = '</span>Â»<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_left_sep = '</span>â–¶<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_right_sep = '</span>Â«<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_right_sep = '</span>â—€<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.crypt = '</span>ğŸ”’<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.linenr = '</span>â˜°<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.linenr = '</span>âŠ<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.linenr = '</span></span><br><span class="line"><span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.linenr = '</span>Â¶<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.maxlinenr = '</span><span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.maxlinenr = '</span>ã‘<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.branch = '</span>â‡<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.paste = '</span>Ï<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.paste = '</span>Ã<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.paste = '</span>âˆ¥<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.spell = '</span>ê¨<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.notexists = '</span>âˆ„<span class="string">'</span></span><br><span class="line"><span class="string">let g:airline_symbols.whitespace = '</span>Î<span class="string">'</span></span><br><span class="line"><span class="string">" Airline theme end</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"><span class="string">set laststatus=2</span></span><br><span class="line"><span class="string">set t_Co=256</span></span><br><span class="line"><span class="string">set encoding=utf-8</span></span><br><span class="line"><span class="string">set syntax enable</span></span><br><span class="line"><span class="string">set syntax on</span></span><br><span class="line"><span class="string">set number</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim +PluginInstall +qall</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot; Brief help</span><br><span class="line">&quot; :PluginList       - lists configured plugins</span><br><span class="line">&quot; :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate</span><br><span class="line">&quot; :PluginSearch foo - searches for foo; append `!` to refresh local cache</span><br><span class="line">&quot; :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal</span><br><span class="line">&quot; see :h vundle for more details or wiki for FAQ</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#å®‰è£…æ’ä»¶ Install Plugins:</span><br><span class="line"></span><br><span class="line">Launch vim and run :PluginInstall</span><br></pre></td></tr></table></figure>
<h2 id="Vimæ’ä»¶"><a href="#Vimæ’ä»¶" class="headerlink" title="Vimæ’ä»¶"></a>Vimæ’ä»¶</h2><h3 id="pathogenç±»ä¼¼äºVundle"><a href="#pathogenç±»ä¼¼äºVundle" class="headerlink" title="pathogenç±»ä¼¼äºVundle"></a><a href="https://github.com/tpope/vim-pathogen" target="_blank" rel="noopener">pathogen</a>ç±»ä¼¼äºVundle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.vim/autoload ~/.vim/bundle &amp;&amp; \</span><br><span class="line">curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi .vimrc</span><br><span class="line"></span><br><span class="line">execute pathogen#infect()</span><br><span class="line">syntax on</span><br><span class="line">filetype plugin indent on</span><br></pre></td></tr></table></figure>
<h3 id="vim-airline"><a href="#vim-airline" class="headerlink" title="vim-airline"></a><a href="https://github.com/vim-airline/vim-airline" target="_blank" rel="noopener">vim-airline</a></h3><h3 id="vim-airline-themes"><a href="#vim-airline-themes" class="headerlink" title="vim-airline-themes"></a><a href="https://github.com/vim-airline/vim-airline-themes" target="_blank" rel="noopener">vim-airline-themes</a></h3><h2 id="Vimä¸»é¢˜"><a href="#Vimä¸»é¢˜" class="headerlink" title="Vimä¸»é¢˜"></a>Vimä¸»é¢˜</h2><h3 id="Solarized"><a href="#Solarized" class="headerlink" title="Solarized"></a><a href="http://ethanschoonover.com/solarized" target="_blank" rel="noopener">Solarized</a></h3><p><a href="https://github.com/altercation/vim-colors-solarized" target="_blank" rel="noopener">Solarized Colorscheme for Vim</a></p>
<h3 id="Molokai"><a href="#Molokai" class="headerlink" title="Molokai"></a>Molokai</h3><p><a href="https://github.com/tomasr/molokai" target="_blank" rel="noopener">Molokai Color Scheme for Vim</a></p>
<h2 id="å®‰è£…vim"><a href="#å®‰è£…vim" class="headerlink" title="å®‰è£…vim"></a>å®‰è£…vim</h2><p>1.æ£€æŸ¥vimæ—§ç‰ˆæœ¬ï¼Œè‹¥å·²å­˜åœ¨ï¼Œå°†å…¶å¸è½½ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vim</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum remove vim* -y</span></span><br></pre></td></tr></table></figure>
<p>2.å®‰è£…ç»ˆç«¯å­—ç¬¦å¤„ç†åº“nucrses</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum install ncurses-devel -y</span></span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://codeload.github.com/vim/vim/tar.gz/v8.0.0134</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar zxf v8.0.0134</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> vim-8.0.0134/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./configure --prefix=/usr/<span class="built_in">local</span>/vim8</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> make &amp;&amp; make install</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $?</span></span><br></pre></td></tr></table></figure>
<p>å®‰è£…æˆåŠŸåï¼Œé€šè¿‡/usr/local/vim8/bin/vimè¿è¡Œvimå‘½ä»¤ã€‚å°†vimå‘½ä»¤è·¯å¾„æ·»åŠ åˆ°ç³»ç»ŸPATHç¯å¢ƒå˜é‡ï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œvimäº†ã€‚æœ¬æ–‡ä¸ä¿®æ”¹/etc/profileæ–‡ä»¶ï¼Œé€šè¿‡æ·»åŠ è„šæœ¬åˆ°/etc/profile.d/å®ç°ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/vim8/bin/vim /etc/profile.d/path.sh</span><br><span class="line">æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">export PATH=$PATH:/usr/local/vim8/bin/</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> /etc/profile.d/path.sh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim</span></span><br></pre></td></tr></table></figure>
<h2 id="vim-plug"><a href="#vim-plug" class="headerlink" title="vim-plug"></a><a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">vim-plug</a></h2><p>å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fLo ~/.vim/autoload/plug.vim --create-dirs \</span><br><span class="line">    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span><br></pre></td></tr></table></figure>
<p>é…ç½®</p>
<p>.vimrc</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; ~/.vimrc &lt;&lt;EOF</span><br><span class="line">" Specify a directory for plugins</span><br><span class="line">" - For Neovim: ~/.local/share/nvim/plugged</span><br><span class="line">" - Avoid using standard Vim directory names like 'plugin'</span><br><span class="line">call plug#begin('~/.vim/plugged')</span><br><span class="line"></span><br><span class="line">" Make sure you use single quotes</span><br><span class="line"></span><br><span class="line">" Shorthand notation; fetches https://github.com/junegunn/vim-easy-align</span><br><span class="line">" Plug 'junegunn/vim-easy-align'</span><br><span class="line"></span><br><span class="line">" Any valid git URL is allowed</span><br><span class="line">" Plug 'https://github.com/junegunn/vim-github-dashboard.git'</span><br><span class="line"></span><br><span class="line">" Multiple Plug commands can be written in a single line using | separators</span><br><span class="line">" Plug 'SirVer/ultisnips' | Plug 'honza/vim-snippets'</span><br><span class="line"></span><br><span class="line">" On-demand loading</span><br><span class="line">" Plug 'scrooloose/nerdtree', &#123; 'on':  'NERDTreeToggle' &#125;</span><br><span class="line">" Plug 'tpope/vim-fireplace', &#123; 'for': 'clojure' &#125;</span><br><span class="line"></span><br><span class="line">" Using a non-master branch</span><br><span class="line">" Plug 'rdnetto/YCM-Generator', &#123; 'branch': 'stable' &#125;</span><br><span class="line"></span><br><span class="line">" Using a tagged release; wildcard allowed (requires git 1.9.2 or above)</span><br><span class="line">Plug 'fatih/vim-go'  ", &#123; 'tag': '*' &#125;</span><br><span class="line"></span><br><span class="line">""</span><br><span class="line">Plug 'vim-airline/vim-airline'</span><br><span class="line">Plug 'vim-airline/vim-airline-themes'</span><br><span class="line"></span><br><span class="line">" Plugin options</span><br><span class="line">" Plug 'nsf/gocode', &#123; 'tag': 'v.20150303', 'rtp': 'vim' &#125;</span><br><span class="line"></span><br><span class="line">" Plugin outside ~/.vim/plugged with post-update hook</span><br><span class="line">" Plug 'junegunn/fzf', &#123; 'dir': '~/.fzf', 'do': './install --all' &#125;</span><br><span class="line"></span><br><span class="line">" Unmanaged plugin (manually installed and updated)</span><br><span class="line">" Plug '~/my-prototype-plugin'</span><br><span class="line"></span><br><span class="line">" Initialize plugin system</span><br><span class="line">call plug#end()</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>å®‰è£…æ’ä»¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim escæ¨¡å¼ä¸‹</span><br><span class="line">:PlugInstall</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/vim-airline/vim-airline" target="_blank" rel="noopener">vim-airline</a></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://blog.csdn.net/dinglinuX/article/details/53908313" target="_blank" rel="noopener">ç¼–è¯‘å®‰è£…vim-8.0 (centos)</a></p>
<p><a href="https://vimzijun.net/2016/09/21/vim-plug/" target="_blank" rel="noopener">vim å…¥å‘æŒ‡å—ï¼ˆäº”ï¼‰æ’ä»¶ Vim-Plug</a></p>
<p><a href="http://github.com/VundleVim/Vundle.vim" target="_blank" rel="noopener">Vundle</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.vimrc</span><br><span class="line"></span><br><span class="line">set nocompatible              &quot; be iMproved, required</span><br><span class="line">filetype off                  &quot; required</span><br><span class="line"></span><br><span class="line">&quot; set the runtime path to include Vundle and initialize</span><br><span class="line">set rtp+=~/.vim/bundle/Vundle.vim</span><br><span class="line">call vundle#begin()</span><br><span class="line">&quot; alternatively, pass a path where Vundle should install plugins</span><br><span class="line">&quot;call vundle#begin(&apos;~/some/path/here&apos;)</span><br><span class="line"></span><br><span class="line">&quot; let Vundle manage Vundle, required</span><br><span class="line">Plugin &apos;VundleVim/Vundle.vim&apos;</span><br><span class="line"></span><br><span class="line">&quot; The following are examples of different formats supported.</span><br><span class="line">&quot; Keep Plugin commands between vundle#begin/end.</span><br><span class="line">&quot; plugin on GitHub repo</span><br><span class="line">Plugin &apos;tpope/vim-fugitive&apos;</span><br><span class="line">&quot; plugin from http://vim-scripts.org/vim/scripts.html</span><br><span class="line">&quot; Plugin &apos;L9&apos;</span><br><span class="line">&quot; Git plugin not hosted on GitHub</span><br><span class="line">Plugin &apos;git://git.wincent.com/command-t.git&apos;</span><br><span class="line">&quot; git repos on your local machine (i.e. when working on your own plugin)</span><br><span class="line">Plugin &apos;file:///home/gmarik/path/to/plugin&apos;</span><br><span class="line">&quot; The sparkup vim script is in a subdirectory of this repo called vim.</span><br><span class="line">&quot; Pass the path to set the runtimepath properly.</span><br><span class="line">Plugin &apos;rstacruz/sparkup&apos;, &#123;&apos;rtp&apos;: &apos;vim/&apos;&#125;</span><br><span class="line">&quot; Install L9 and avoid a Naming conflict if you&apos;ve already installed a</span><br><span class="line">&quot; different version somewhere else.</span><br><span class="line">&quot; Plugin &apos;ascenator/L9&apos;, &#123;&apos;name&apos;: &apos;newL9&apos;&#125;</span><br><span class="line"></span><br><span class="line">&quot; All of your Plugins must be added before the following line</span><br><span class="line">call vundle#end()            &quot; required</span><br><span class="line">filetype plugin indent on    &quot; required</span><br><span class="line">&quot; To ignore plugin indent changes, instead use:</span><br><span class="line">&quot;filetype plugin on</span><br><span class="line">&quot;</span><br><span class="line">&quot; Brief help</span><br><span class="line">&quot; :PluginList       - lists configured plugins</span><br><span class="line">&quot; :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate</span><br><span class="line">&quot; :PluginSearch foo - searches for foo; append `!` to refresh local cache</span><br><span class="line">&quot; :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal</span><br><span class="line">&quot;</span><br><span class="line">&quot; see :h vundle for more details or wiki for FAQ</span><br><span class="line">&quot; Put your non-Plugin stuff after this line</span><br></pre></td></tr></table></figure>
<p>Install Plugins:</p>
<p>Launch <code>vim</code> and run <code>:PluginInstall</code></p>
<p>To install from command line: <code>vim +PluginInstall +qall</code></p>
<h3 id="è¯¦è§£"><a href="#è¯¦è§£" class="headerlink" title="è¯¦è§£"></a>è¯¦è§£</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">â€œæ˜¾ç¤ºè¡Œå·</span><br><span class="line">ã€€ã€€set nummber</span><br><span class="line">ã€€ã€€â€œè¯­æ³•é«˜äº®åº¦æ˜¾ç¤º</span><br><span class="line">ã€€ã€€ syntax on </span><br><span class="line">ã€€ã€€â€œä¸‹é¢ä¸¤è¡Œåœ¨è¿›è¡Œç¼–å†™ä»£ç æ—¶ï¼Œåœ¨æ ¼å¼å¯¹èµ·ä¸Šå¾ˆæœ‰ç”¨ï¼›</span><br><span class="line">ã€€ã€€â€œç¬¬ä¸€è¡Œï¼Œvimä½¿ç”¨è‡ªåŠ¨å¯¹èµ·ï¼Œä¹Ÿå°±æ˜¯æŠŠå½“å‰è¡Œçš„å¯¹èµ·æ ¼å¼åº”ç”¨åˆ°ä¸‹ä¸€è¡Œï¼›</span><br><span class="line">ã€€ã€€â€œç¬¬äºŒè¡Œï¼Œä¾æ®ä¸Šé¢çš„å¯¹èµ·æ ¼å¼ï¼Œæ™ºèƒ½çš„é€‰æ‹©å¯¹èµ·æ–¹å¼ï¼Œå¯¹äºç±»ä¼¼Cè¯­è¨€ç¼–</span><br><span class="line">ã€€ã€€â€œå†™ä¸Šå¾ˆæœ‰ç”¨</span><br><span class="line">ã€€ã€€set autoindent</span><br><span class="line">ã€€ã€€set smartindent</span><br><span class="line">ã€€ã€€â€œç¬¬ä¸€è¡Œè®¾ç½®tabé”®ä¸º4ä¸ªç©ºæ ¼ï¼Œç¬¬äºŒè¡Œè®¾ç½®å½“è¡Œä¹‹é—´äº¤é”™æ—¶ä½¿ç”¨4ä¸ªç©ºæ ¼</span><br><span class="line">ã€€ã€€set tabstop=4</span><br><span class="line">ã€€ã€€set shiftwidth=4</span><br><span class="line">ã€€ã€€â€œè®¾ç½®åŒ¹é…æ¨¡å¼ï¼Œç±»ä¼¼å½“è¾“å…¥ä¸€ä¸ªå·¦æ‹¬å·æ—¶ä¼šåŒ¹é…ç›¸åº”çš„é‚£ä¸ªå³æ‹¬å·</span><br><span class="line">ã€€ã€€set showmatch</span><br></pre></td></tr></table></figure>
<h3 id="ä¸»é¢˜é…è‰²"><a href="#ä¸»é¢˜é…è‰²" class="headerlink" title="ä¸»é¢˜é…è‰²"></a>ä¸»é¢˜é…è‰²</h3><p>[vim-colors-solarized</p>
<h3 id="Vimæ’ä»¶-1"><a href="#Vimæ’ä»¶-1" class="headerlink" title="Vimæ’ä»¶"></a>Vimæ’ä»¶</h3><p><a href="https://github.com/vim-airline/vim-airline" target="_blank" rel="noopener">vim-airline</a></p>
<p><a href="https://github.com/scrooloose/nerdtree" target="_blank" rel="noopener"><strong>nerdtree</strong></a></p>
<p><a href="https://github.com/Xuyuanp/nerdtree-git-plugin" target="_blank" rel="noopener">nerdtree-git-plugin</a></p>
<h2 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h2><p><a href="https://blog.csdn.net/ch717828/article/details/50843956" target="_blank" rel="noopener">Vimå¦‚ä½•ä¿å­˜éœ€è¦rootæƒé™çš„æ–‡ä»¶</a> , <a href="http://feihu.me/blog/2014/vim-write-read-only-file/" target="_blank" rel="noopener">ä»¥æ™®é€šç”¨æˆ·å¯åŠ¨çš„Vimå¦‚ä½•ä¿å­˜éœ€è¦rootæƒé™çš„æ–‡ä»¶</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:w !sudo tee %</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.jianshu.com/p/3066b3191cb1" target="_blank" rel="noopener">ä¸Šå¤ç¥å™¨vimæ’ä»¶ï¼šä½ çœŸçš„å­¦ä¼šç”¨NERDTreeäº†å—ï¼Ÿ</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ç½‘ç»œç«¯å£è¯¦è§£" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/20/ç½‘ç»œç«¯å£è¯¦è§£/" class="article-date">
      <time datetime="2016-07-20T11:41:06.000Z" itemprop="datePublished">2016-07-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/20/ç½‘ç»œç«¯å£è¯¦è§£/">ç½‘ç»œç«¯å£è¯¦ç»†</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="ç½‘ç»œç«¯å£è¯¦è§£"><a href="#ç½‘ç»œç«¯å£è¯¦è§£" class="headerlink" title="ç½‘ç»œç«¯å£è¯¦è§£"></a>ç½‘ç»œç«¯å£è¯¦è§£</h1><p>0|æ— æ•ˆç«¯å£,é€šå¸¸ç”¨äºåˆ†ææ“ä½œç³»ç»Ÿ<br>1|ä¼ è¾“æ§åˆ¶åè®®ç«¯å£æœåŠ¡å¤šè·¯å¼€å…³é€‰æ‹©å™¨<br>2|ç®¡ç†å®ç”¨ç¨‹åº<br>3|å‹ç¼©è¿›ç¨‹<br>5|è¿œç¨‹ä½œä¸šç™»å½•<br>7|å›æ˜¾<br>9|ä¸¢å¼ƒ<br>11|åœ¨çº¿ç”¨æˆ·<br>13|æ—¶é—´<br>17|æ¯æ—¥å¼•ç”¨<br>18|æ¶ˆæ¯å‘é€åè®®<br>19|å­—ç¬¦å‘ç”Ÿå™¨<br>20|FTPæ–‡ä»¶ä¼ è¾“åè®®(é»˜è®¤æ•°æ®å£)ã€€<br>21|FTPæ–‡ä»¶ä¼ è¾“åè®®(æ§åˆ¶)<br>22|SSHè¿œç¨‹ç™»å½•åè®®<br>23|telnet(ç»ˆç«¯ä»¿çœŸåè®®),æœ¨é©¬Tiny Telnet Serverå¼€æ”¾æ­¤ç«¯å£<br>24|é¢„ç•™ç»™ä¸ªäººç”¨é‚®ä»¶ç³»ç»Ÿ<br>25|SMTPæœåŠ¡å™¨æ‰€å¼€æ”¾çš„ç«¯å£ï¼Œç”¨äºå‘é€é‚®ä»¶<br>27|NSW ç”¨æˆ·ç³»ç»Ÿ FE<br> 29|MSG ICP<br> 31|MSGéªŒè¯,æœ¨é©¬Master Paradiseã€HackersParadiseå¼€æ”¾æ­¤ç«¯å£<br>33|æ˜¾ç¤ºæ”¯æŒåè®®<br>35|é¢„ç•™ç»™ä¸ªäººæ‰“å°æœºæœåŠ¡<br>37|æ—¶é—´<br>38|è·¯ç”±è®¿é—®åè®®<br>39|èµ„æºå®šä½åè®®<br>41|å›¾å½¢<br>42|ä¸»æœºåæœåŠ¡<br>43|who isæœåŠ¡<br>44|MPM(æ¶ˆæ¯å¤„ç†æ¨¡å—)æ ‡å¿—åè®®<br>45|æ¶ˆæ¯å¤„ç†æ¨¡å—ã€€<br>46|æ¶ˆæ¯å¤„ç†æ¨¡å—(é»˜è®¤å‘é€å£)<br>47|NI FTP<br> 48|æ•°ç éŸ³é¢‘åå°æœåŠ¡ã€€<br>49|TACACSç™»å½•ä¸»æœºåè®®<br>50|è¿œç¨‹é‚®ä»¶æ£€æŸ¥åè®®<br>51|IMP(æ¥å£ä¿¡æ¯å¤„ç†æœº)é€»è¾‘åœ°å€ç»´æŠ¤<br>52|æ–½ä¹ç½‘ç»œæœåŠ¡ç³»ç»Ÿæ—¶é—´åè®®<br>53|dnsåŸŸåæœåŠ¡å™¨<br>54|æ–½ä¹ç½‘ç»œæœåŠ¡ç³»ç»Ÿç¥¨æ®äº¤æ¢<br>55|ISIå›¾å½¢è¯­è¨€<br>56|æ–½ä¹ç½‘ç»œæœåŠ¡ç³»ç»ŸéªŒè¯<br>57|é¢„ç•™ä¸ªäººç”¨ç»ˆç«¯è®¿é—®<br>58|æ–½ä¹ç½‘ç»œæœåŠ¡ç³»ç»Ÿé‚®ä»¶<br>59|é¢„ç•™ä¸ªäººæ–‡ä»¶æœåŠ¡<br>60|æœªå®šä¹‰<br>61|NIé‚®ä»¶<br>62|å¼‚æ­¥é€šè®¯é€‚é…å™¨æœåŠ¡<br>63|whois++<br> 64|é€šè®¯æ¥å£<br>65|TACACSæ•°æ®åº“æœåŠ¡<br>66|Oracle SQL*NET<br> 67|å¼•å¯¼ç¨‹åºåè®®æœåŠ¡ç«¯<br>68|å¼•å¯¼ç¨‹åºåè®®å®¢æˆ·ç«¯<br>69|å°å‹æ–‡ä»¶ä¼ è¾“åè®®<br>70|ä¿¡æ¯æ£€ç´¢åè®®<br>71|è¿œç¨‹ä½œä¸šæœåŠ¡<br>72|è¿œç¨‹ä½œä¸šæœåŠ¡<br>73|è¿œç¨‹ä½œä¸šæœåŠ¡<br>74|è¿œç¨‹ä½œä¸šæœåŠ¡<br>75|é¢„ç•™ç»™ä¸ªäººæ‹¨å‡ºæœåŠ¡<br>76|åˆ†å¸ƒå¼å¤–éƒ¨å¯¹è±¡å­˜å‚¨<br>77|é¢„ç•™ç»™ä¸ªäººè¿œç¨‹ä½œä¸šè¾“å…¥æœåŠ¡<br>78|ä¿®æ­£TCP<br> 79|æŸ¥è¯¢è¿œç¨‹ä¸»æœºåœ¨çº¿ç”¨æˆ·ç­‰ä¿¡æ¯<br>80|http,ç”¨äºç½‘é¡µæµè§ˆ,æœ¨é©¬Executorå¼€æ”¾æ­¤ç«¯å£<br>81|HOST2åç§°æœåŠ¡<br>82|ä¼ è¾“å®ç”¨ç¨‹åº<br>83|æ¨¡å—åŒ–æ™ºèƒ½ç»ˆç«¯MLè®¾å¤‡<br>84|å…¬ç”¨è¿½è¸ªè®¾å¤‡<br>85|æ¨¡å—åŒ–æ™ºèƒ½ç»ˆç«¯MLè®¾å¤‡<br>86|Micro Focus Cobolç¼–ç¨‹è¯­è¨€<br>87|é¢„ç•™ç»™ä¸ªäººç»ˆç«¯è¿æ¥<br>88|Kerberroså®‰å…¨è®¤è¯ç³»ç»Ÿ<br>89|SU/MIT telnet(ç»ˆç«¯ä»¿çœŸç½‘å…³)<br>90|DNSIX å®‰å…¨å±æ€§æ ‡è®°å›¾<br>91|MIT Doverå‡è„±æœº<br>92|ç½‘ç»œæ‰“å°åè®®<br>93|è®¾å¤‡æ§åˆ¶åè®®<br>94|Tivoliå¯¹è±¡è°ƒåº¦<br>96|DIXIEåè®®è§„èŒƒ<br>97|å¿«é€Ÿè¿œç¨‹è™šæ‹Ÿæ–‡ä»¶åè®®<br>98|TACæ–°é—»åè®®<br>99|åé—¨ç¨‹åºncx99å¼€æ”¾æ­¤ç«¯å£<br>100|æœªçŸ¥ç”¨é€”<br>101|NIC ä¸»æœºåç§°æœåŠ¡<br>102|æ¶ˆæ¯ä¼ è¾“ä»£ç†<br>103|Genesis ç‚¹å¯¹ç‚¹ä¼ è¾“ç½‘ç»œ<br>105|ä¿¡ç®±åç§°æœåŠ¡<br>106|3COM-TSMUXå¼€æ”¾ç«¯å£<br>107|è¿œç¨‹TelnetæœåŠ¡<br>108|SNA ç½‘å…³è®¿é—®æœåŠ¡<br>109|POP2æœåŠ¡å™¨å¼€æ”¾æ­¤ç«¯å£,ç”¨äºæ¥æ”¶é‚®ä»¶<br>110|POP3æœåŠ¡å™¨å¼€æ”¾æ­¤ç«¯å£,ç”¨äºæ¥æ”¶é‚®ä»¶<br>111|SUNå…¬å¸çš„RPCæœåŠ¡æ‰€æœ‰ç«¯å£<br>112|McIDAS æ•°æ®ä¼ è¾“åè®®<br>113|è®¤è¯æœåŠ¡ï¼Œç”¨äºé‰´åˆ«TCPè¿æ¥çš„ç”¨æˆ·<br>114|éŸ³é¢‘æ–°é—»å¤šç‚¹æœåŠ¡<br>115|ç®€å•æ–‡ä»¶ä¼ è¾“æœåŠ¡<br>116|ANSA REX é€šçŸ¥<br>117|UUCP è·¯å¾„æœåŠ¡<br>118|SQL æœåŠ¡<br>119|NEWSæ–°é—»ç»„ä¼ è¾“åè®®ï¼Œæ‰¿è½½USENETé€šä¿¡<br>121|æœ¨é©¬BO jammerkillahVå¼€æ”¾ç«¯å£<br>122|SMAKYç½‘ç»œ<br>123|ç½‘ç»œæ—¶é—´åè®®ï¼Œè •è™«ç—…æ¯’ä¼šåˆ©ç”¨ï¼Œä¸€èˆ¬å…³é—­<br>128|GSS Xè®¸å¯è®¤è¯<br>129|å¯†ç ç”Ÿæˆå™¨åè®®<br>130|Ciscoè½¯ä»¶å¼€æ”¾ç«¯å£<br>131|Ciscoè½¯ä»¶å¼€æ”¾ç«¯å£<br>132|Ciscoè½¯ä»¶å¼€æ”¾ç«¯å£<br>133|ç»Ÿè®¡æœåŠ¡<br>134|INGRES-ç½‘ç»œæœåŠ¡<br>135|DCOMæœåŠ¡ï¼Œå†²å‡»æ³¢ç—…æ¯’åˆ©ç”¨ï¼Œä¸èƒ½å…³é—­<br>136|å‘½åç³»ç»Ÿ<br>137|NETBIOSåè®®åº”ç”¨ï¼Œä¸ºå…±äº«å¼€æ”¾<br>138|NETBIOSåè®®åº”ç”¨ï¼Œä¸ºå…±äº«å¼€æ”¾<br>139|NETBIOSåè®®åº”ç”¨ï¼Œä¸ºå…±äº«å¼€æ”¾<br>140|EMFISæ•°æ®æœåŠ¡<br>141|EMFISæ§åˆ¶æœåŠ¡<br>143|Interimé‚®ä»¶è®¿é—®åè®®<br>144|UMAè½¯ä»¶å¼€æ”¾ç«¯å£<br>145|UAACåè®®<br>149|AED 512ä»¿çœŸæœåŠ¡<br>150|SQL(ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€)-ç½‘ç»œ<br>152|åå°æ–‡ä»¶ä¼ è¾“åè®®<br>156|SQL(ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€)æœåŠ¡<br>158|PCé‚®ä»¶æœåŠ¡å™¨<br>159|NSS-è·¯ç”±<br>160|SGMP-é™·é˜±<br>161|ç®€å•ç½‘ç»œç®¡ç†åè®®<br>162|SNMPé™·é˜±<br>163|CMIP/TCP ç®¡ç†<br>164|CMIP/TCP ä»£ç†<br>166|Siriusç³»ç»Ÿ<br>169|å‘é€<br>170|ç½‘ç»œé™„è¨€<br>177|xæ˜¾ç¤ºç®¡ç†æ§åˆ¶åè®®ï¼Œå…¥ä¾µè€…é€šè¿‡å®ƒè®¿é—®X-windowsæ“ä½œå°<br>178|NextStep Window æœåŠ¡<br>179|è¾¹ç•Œç½‘å…³åè®®<br>180|å›¾è¡¨<br>181|ç»Ÿä¸€<br>184|OCæœåŠ¡å™¨<br>185|è¿œç¨‹-KIS<br> 186|KIS åè®®<br>187|åº”ç”¨é€šä¿¡æ¥å£<br>189|é˜Ÿåˆ—æ–‡ä»¶ä¼ è¾“<br>190|ç½‘å…³è¿›å…¥æ§åˆ¶åè®®<br>191|Prospero ç›®å½•æœåŠ¡<br>192|OSU ç½‘ç»œç›‘è§†ç³»ç»Ÿ<br>193|Spider è¿œç¨‹æ§åˆ¶åè®®<br>194|å¤šçº¿äº¤è°ˆåè®®<br>197|ç›®å½•åœ°å€æœåŠ¡<br>198|ç›®å½•åœ°å€æœåŠ¡ç›‘è§†å™¨<br>200|IBMç³»ç»Ÿèµ„æºæ§åˆ¶å™¨<br>201|AppleTalk(Macæœºæ‰€ç”¨çš„ç½‘ç»œåè®®)è·¯ç”±ä¿è¯<br>202|AppleTalk(Macæœºæ‰€ç”¨çš„ç½‘ç»œåè®®)Name Binding<br> 203|AppleTalk(Macæœºæ‰€ç”¨çš„ç½‘ç»œåè®®)æœªç”¨ç«¯å£<br>204|AppleTalk(Macæœºæ‰€ç”¨çš„ç½‘ç»œåè®®)å›æ˜¾<br>205|AppleTalk(Macæœºæ‰€ç”¨çš„ç½‘ç»œåè®®)æœªç”¨ç«¯å£<br>206|AppleTalk(Macæœºæ‰€ç”¨çš„ç½‘ç»œåè®®)åŒºä¿¡æ¯<br>207|AppleTalk(Macæœºæ‰€ç”¨çš„ç½‘ç»œåè®®)æœªç”¨ç«¯å£<br>208|AppleTalk(Macæœºæ‰€ç”¨çš„ç½‘ç»œåè®®)æœªç”¨ç«¯å£<br>209|å¿«é€Ÿé‚®ä»¶ä¼ è¾“åè®®<br>210|ANSI(ç¾å›½å›½å®¶æ ‡å‡†åä¼š)Z39.50<br> 211|Texas Instruments 914C/Gç»ˆç«¯<br>213|IPX(ä»¥å¤ªç½‘æ‰€ç”¨çš„åè®®)<br>218|Netixæ¶ˆæ¯è®°å½•åè®®<br>219|Unisys ARPs<br> 220|äº¤äº’é‚®ä»¶è®¿é—®åè®® v3<br> 223|è¯ä¹¦åˆ†å‘ä¸­å¿ƒ<br>224|masqæ‹¨å·å™¨<br>241|é¢„ç•™ç«¯å£ (224-241)<br> 245|é“¾æ¥<br>246|æ˜¾ç¤ºç³»ç»Ÿåè®®<br>257|å®‰å…¨ç”µå­äº¤æ˜“ç³»ç»Ÿ<br>258|Yak Winsock ä¸ªäººèŠå¤©<br>259|æœ‰æ•ˆçŸ­ç¨‹é¥æ§<br>260|å¼€æ”¾ç«¯å£<br>261|IIOP åŸºäºTLS/SSLçš„å‘½åæœåŠ¡<br>266|SCSI(å°å‹è®¡ç®—æœºç³»ç»Ÿæ¥å£)on ST<br> 267|Tobit DavidæœåŠ¡å±‚<br>268|Tobit Davidå¤åˆ¶<br>281|ä¸ªäººè¿ç»“<br>282|Cableç«¯å£A/X<br> 286|FXPé€šä¿¡<br>308|Novastorå¤‡ä»½<br>313|Magentaé€»è¾‘<br>318|PKIXæ—¶é—´æ ‡è®°<br>333|Texarå®‰å…¨ç«¯å£<br>344|Prosperoæ•°æ®å­˜å–åè®®<br>345|Perfåˆ†æå·¥ä½œå°<br>346|ZebraæœåŠ¡å™¨<br>347|FatmenæœåŠ¡å™¨<br>348|Cabletronç®¡ç†åè®®<br>358|Shrinkå¯ä¸Šç½‘å®¶ç”µåè®®<br>359|ç½‘ç»œå®‰å…¨é£é™©ç®¡ç†åè®®<br>362|SRSå‘é€<br>363|RSVPéš§é“<br>372|åˆ—è¡¨å¤„ç†<br>373|Legendå…¬å¸<br>374|Legendå…¬å¸<br>376|AmigaEnvoyç½‘ç»œæŸ¥è¯¢åè®®<br>377|NECå…¬å¸<br>378|NECå…¬å¸<br>379|TIA/EIA/IS-99è°ƒåˆ¶è§£è°ƒå™¨å®¢æˆ·ç«¯<br>380|TIA/EIA/IS-99è°ƒåˆ¶è§£è°ƒå™¨æœåŠ¡å™¨<br>381|hp(æƒ æ™®)æ€§èƒ½æ•°æ®æ”¶é›†å™¨<br>382|hp(æƒ æ™®)æ€§èƒ½æ•°æ®æ§åˆ¶èŠ‚ç‚¹<br>383|hp(æƒ æ™®)æ€§èƒ½æ•°æ®è­¦æŠ¥ç®¡ç†<br>384|è¿œç¨‹ç½‘ç»œæœåŠ¡å™¨ç³»ç»Ÿ<br>385|IBMåº”ç”¨ç¨‹åº<br>386|ASAä¿¡æ¯è·¯ç”±å™¨å®šä¹‰æ–‡ä»¶.<br>387|Appletalkæ›´æ–°è·¯ç”±.<br>389|è½»å‹ç›®å½•è®¿é—®åè®®<br>395|ç½‘ç»œç›‘è§†æ§åˆ¶åè®®<br>396|Novell(ç¾å›½Novellå…¬å¸)Netware(Novellå…¬å¸å‡ºçš„ç½‘ç»œæ“ä½œç³»ç»Ÿ)over IP<br> 400|å·¥ä½œç«™è§£å†³æ–¹æ¡ˆ<br>401|æŒç»­ç”µæº<br>402|Genieåè®®<br>406|äº¤äº’å¼é‚®ä»¶æ”¯æŒåè®®<br>408|Prosperoèµ„æºç®¡ç†ç¨‹åº<br>409|Prosperoèµ„æºèŠ‚ç‚¹ç®¡ç†.<br>410|DEC(æ•°æ®è®¾å¤‡å…¬å¸)è¿œç¨‹è°ƒè¯•åè®®<br>411|è¿œç¨‹MTåè®®<br>412|é™·é˜±åå®šç«¯å£<br>413|å­˜å‚¨ç®¡ç†æœåŠ¡åè®®<br>414|ä¿¡æ¯æŸ¥è¯¢<br>415|Bç½‘ç»œ<br>423|IBMæ“ä½œè®¡åˆ’å’Œæ§åˆ¶å¼€ç«¯<br>424|IBMæ“ä½œè®¡åˆ’å’Œæ§åˆ¶è¿½è¸ª<br>425|æ™ºèƒ½è®¡ç®—æœºè¾…åŠ©è®¾è®¡<br>427|æœåŠ¡èµ·ä½ç½®<br>434|ç§»åŠ¨ipä»£ç†<br>435|ç§»åŠ¨ipç®¡ç†<br>443|åŸºäºTLS/SSLçš„ç½‘é¡µæµè§ˆç«¯å£ï¼Œèƒ½æä¾›åŠ å¯†å’Œé€šè¿‡å®‰å…¨ç«¯å£ä¼ è¾“çš„å¦ä¸€ç§HTTP<br> 444|ç®€å•ç½‘ç»œå†…å­˜åˆ†é¡µåè®®<br>445|Microsoft-DSï¼Œä¸ºå…±äº«å¼€æ”¾ï¼Œéœ‡è¡æ³¢ç—…æ¯’åˆ©ç”¨ï¼Œä¸€èˆ¬åº”å…³é—­<br>446|DDM-è¿œç¨‹å…³ç³»æ•°æ®åº“è®¿é—®<br>447|DDM-åˆ†å¸ƒå¼æ–‡ä»¶ç®¡ç†<br>448|DDM-ä½¿ç”¨å®‰å…¨è®¿é—®è¿œç¨‹æ•°æ®åº“<br>456|æœ¨é©¬HACKERS PARADISEå¼€æ”¾æ­¤ç«¯å£<br>458|apple quick timeè½¯ä»¶å¼€æ”¾ç«¯å£<br>459|ampr-rcmdå‘½ä»¤<br>464|kå¯†ç æœåŠ¡<br>469|å¹¿æ’­æ§åˆ¶åè®®<br>470|scx-ä»£ç†<br>472|ljk-ç™»é™†<br>481|PhæœåŠ¡<br>487|ç®€å•å¼‚æ­¥æ–‡ä»¶ä¼ è¾“<br>489|nest-åè®®<br>491|go-ç™»é™†<br>499|ISO ILLåè®®<br>500|Internetå¯†é’¥äº¤æ¢ï¼ŒLsasså¼€æ”¾ç«¯å£ï¼Œä¸èƒ½å…³é—­<br>509|é™·é˜±<br>510|FirstClassåè®®<br>512|è¿œç¨‹è¿›ç¨‹æ‰§è¡Œ<br>513|è¿œç¨‹ç™»é™†<br>514|cmdå‘½ä»¤<br>515|spooler<br> 516|å¯è§†åŒ–æ•°æ®<br>518|äº¤è°ˆ<br>519|unixæ—¶é—´<br>520|æ‰©å±•æ–‡ä»¶åç§°æœåŠ¡å™¨<br>525|æ—¶é—´æœåŠ¡<br>526|æ–°æ—¥æœŸ<br>529|åœ¨çº¿èŠå¤©ç³»ç»ŸæœåŠ¡<br>530|è¿œç¨‹è¿‡ç¨‹è°ƒç”¨<br>531|èŠå¤©<br>532|è¯»æ–°é—»<br>533|ç´§æ€¥å¹¿æ’­ç«¯å£<br>534|MegaMediaç®¡ç†ç«¯<br>537|ç½‘ç»œæµåª’ä½“åè®®<br>542|å•†ä¸š<br>543|Kerberos(è½¯ä»¶)v4/v5<br> 544|krcmdå‘½ä»¤<br>546|DHCPv6 å®¢æˆ·ç«¯<br>547|DHCPv6 æœåŠ¡å™¨<br>552|è®¾å¤‡å…±äº«<br>554|Real Time Streamæ§åˆ¶åè®®<br>555|æœ¨é©¬PhAse1.0ã€Stealth Spyã€IniKillerå¼€æ”¾æ­¤ç«¯å£<br>556|è¿œè·ç¦»æ–‡ä»¶æœåŠ¡å™¨<br>563|åŸºäºTLS/SSLçš„ç½‘ç»œæ–°é—»ä¼ è¾“åè®®<br>564|plan 9æ–‡ä»¶æœåŠ¡<br>565|whoamiæŸ¥è¯¢<br>566|streettalk<br> 567|banyan-rpc(è¿œç¨‹è¿‡ç¨‹è°ƒç”¨)<br>568|DPAæˆå‘˜èµ„æ ¼<br>569|MSNæˆå‘˜èµ„æ ¼<br>570|demon(è°ƒè¯•ç›‘ç£ç¨‹åº)<br>571|udemon(è°ƒè¯•ç›‘ç£ç¨‹åº)<br>572|å£°çº³<br>573|banyan-è´µå®¾<br>574|FTPè½¯ä»¶ä»£ç†ç³»ç»Ÿ<br>581|Bundle Discovery åè®®<br>582|SCCå®‰å…¨<br>583|Philipsè§†é¢‘ä¼šè®®<br>584|å¯†é’¥æœåŠ¡å™¨<br>585|IMAP4+SSL (Use 993 instead)<br> 586|å¯†ç æ›´æ”¹<br>587|ç”³è¯·<br>589|Eyeè¿ç»“<br>595|CABåè®®<br>597|PTCåç§°æœåŠ¡<br>598|SCOç½‘ç»œæœåŠ¡å™¨ç®¡ç†3<br> 599|Aeolon Coreåè®®<br>600|Sun IPC(è¿›ç¨‹é—´é€šè®¯)æœåŠ¡å™¨<br>601|å¯é ç³»ç»Ÿç™»é™†æœåŠ¡<br>604|é€šé“<br>606|Crayç»Ÿä¸€èµ„æºç®¡ç†<br>608|å‘é€äºº-ä¼ é€’/æä¾› æ–‡ä»¶ä¼ è¾“å™¨<br>609|npmp-é™·é˜±<br>610|npmp-æœ¬åœ°<br>611|npmp-gui( å›¾å½¢ç”¨æˆ·ç•Œé¢)<br>612|HMMPæŒ‡å¼•<br>613|HMMPæ“ä½œ<br>614|SSL(åŠ å¯†å¥—æ¥å­—åè®®å±‚)shell(å£³)<br>615|Interneté…ç½®ç®¡ç†<br>616|SCO(Unixç³»ç»Ÿ)ç³»ç»Ÿç®¡ç†æœåŠ¡å™¨<br>617|SCOæ¡Œé¢ç®¡ç†æœåŠ¡å™¨<br>619|Compaq(åº·æŸå…¬å¸)EVM<br> 620|SCOæœåŠ¡å™¨ç®¡ç†<br>623|ASFè¿œç¨‹ç®¡ç†æ§åˆ¶åè®®<br>624|Cryptoç®¡ç†<br>631|IPP (Internetæ‰“å°åè®®)<br>633|æœåŠ¡æ›´æ–°(Sterlingè½¯ä»¶)<br>637|å±€åŸŸç½‘æœåŠ¡å™¨<br>641|repcmdå‘½ä»¤<br>647|DHCP(åŠ¨æ€ä¸»æœºé…ç½®åè®®)Failover<br> 648|æ³¨å†Œç™»è®°åè®®(RRP)<br> 649|Cadview-3dè½¯ä»¶åè®®<br>666|æœ¨é©¬Attack FTPã€Satanz Backdoorå¼€æ”¾æ­¤ç«¯å£<br>808|ccproxy http/gopher/ftp (over http)åè®®<br>1001|æœ¨é©¬Silencerï¼ŒWebExå¼€æ”¾ç«¯å£<br>1011|æœ¨é©¬Dolyå¼€æ”¾ç«¯å£<br>1024|åŠ¨æ€ç«¯å£çš„å¼€å§‹,æœ¨é©¬yaiå¼€æ”¾ç«¯å£<br>1025|inetinfo.exe(äº’è”ç½‘ä¿¡æ¯æœåŠ¡)æœ¨é©¬netspyå¼€æ”¾ç«¯å£<br>1026|inetinfo.exe(äº’è”ç½‘ä¿¡æ¯æœåŠ¡)<br>1027|åº”ç”¨å±‚ç½‘å…³æœåŠ¡<br>1030|åº”ç”¨å±‚ç½‘å…³æœåŠ¡<br>1031|BBN IAD<br> 1033|æœ¬åœ°ç½‘ç»œä¿¡æ¯ç«¯å£<br>1034|åŒæ­¥é€šçŸ¥<br>1036|å®‰å…¨éƒ¨åˆ†ä¼ è¾“åè®®<br>1070|æœ¨é©¬Psyber Streamï¼ŒStreaming Audioå¼€æ”¾ç«¯å£<br>1071|ç½‘ç»œæœåŠ¡å¼€æ”¾ç«¯å£<br>1074|ç½‘ç»œæœåŠ¡å¼€æ”¾ç«¯å£<br>1080|Socksè¿™ä¸€åè®®ä»¥é€šé“æ–¹å¼ç©¿è¿‡é˜²ç«å¢™ï¼Œå…è®¸é˜²ç«å¢™åé¢çš„äººé€šè¿‡ä¸€ä¸ªIPåœ°å€è®¿é—®INTERNET<br> 1110|å¡å·´æ–¯åŸºåç—…æ¯’è½¯ä»¶å¼€æ”¾æ­¤ç«¯å£<br>1125|å¡å·´æ–¯åŸºåç—…æ¯’è½¯ä»¶å¼€æ”¾æ­¤ç«¯å£<br>1203|è®¸å¯è¯ç”Ÿæ•ˆç«¯å£<br>1204|ç™»é™†è¯·æ±‚ç›‘å¬ç«¯å£<br>1206|Anthonyæ•°æ®ç«¯å£<br>1222|SNI R&amp;Dç½‘ç»œç«¯å£<br>1233|æ™®éçš„é™„å½•æœåŠ¡å™¨ç«¯å£<br>1234|æœ¨é©¬SubSeven2.0ã€Ultors Trojanå¼€æ”¾æ­¤ç«¯å£<br>1243|æœ¨é©¬SubSeven1.0/1.9å¼€æ”¾æ­¤ç«¯å£<br>1245|æœ¨é©¬Vodooï¼ŒGabanBusï¼ŒNetBusï¼ŒVodooå¼€æ”¾æ­¤ç«¯å£<br>1273|EMC-ç½‘å…³ç«¯å£<br>1289|JWalkæœåŠ¡å™¨ç«¯å£<br>1290|WinJaæœåŠ¡å™¨ç«¯å£<br>1333|å¯†ç ç­–ç•¥(ç½‘ç»œæœåŠ¡)(svchost.exe)<br> 1334|ç½‘ç»œæœåŠ¡(svchost.exe)<br> 1335|æ•°å­—å…¬æ­£åè®®<br>1336|å³æ—¶èŠå¤©åè®®(svchost.exe)<br> 1349|æ³¨å†Œç½‘ç»œåè®®ç«¯å£<br>1350|æ³¨å†Œç½‘ç»œåè®®ç«¯å£<br>1371|å¯Œå£«é€šé…ç½®åè®®ç«¯å£<br>1372|å¯Œå£«é€šé…ç½®åè®®ç«¯å£<br>1374|EPIè½¯ä»¶ç³»ç»Ÿç«¯å£<br>1376|IBMä¸ªäºº-ä¸ªäººè½¯ä»¶ç«¯å£<br>1377|Cichlidè®¸å¯è¯ç®¡ç†ç«¯å£<br>1378|Elanè®¸å¯è¯ç®¡ç†ç«¯å£<br>1380|Telesisç½‘ç»œè®¸å¯è¯ç®¡ç†ç«¯å£<br>1381|è‹¹æœç½‘ç»œè®¸å¯è¯ç®¡ç†ç«¯å£<br>1386|CheckSum è®¸å¯è¯ç®¡ç†ç«¯å£<br>1387|ç³»ç»Ÿå¼€æ”¾ç«¯å£(rundll32.exe)<br> 1388|æ•°æ®åº“é«˜é€Ÿç¼“å­˜ç«¯å£<br>1389|æ–‡æ¡£ç®¡ç†ç«¯å£<br>1390|å­˜å‚¨æ§åˆ¶å™¨ç«¯å£<br>1391|å­˜å‚¨å™¨å­˜å–æœåŠ¡å™¨ç«¯å£<br>1392|æ‰“å°ç®¡ç†ç«¯å£<br>1393|ç½‘ç»œç™»é™†æœåŠ¡å™¨ç«¯å£<br>1394|ç½‘ç»œç™»é™†å®¢æˆ·ç«¯ç«¯å£<br>1395|PCå·¥ä½œç«™ç®¡ç†è½¯ä»¶ç«¯å£<br>1396|DVLæ´»è·ƒé‚®ä»¶ç«¯å£<br>1397|éŸ³é¢‘æ´»è·ƒé‚®ä»¶ç«¯å£<br>1398|è§†é¢‘æ´»è·ƒé‚®ä»¶ç«¯å£<br>1399|Cadkeyè®¸å¯è¯ç®¡ç†ç«¯å£<br>1433|Microsoftçš„SQLæœåŠ¡å¼€æ”¾ç«¯å£<br>1434|Microsoftçš„SQLæœåŠ¡ç›‘è§†ç«¯å£<br>1492|æœ¨é©¬FTP99CMPå¼€æ”¾æ­¤ç«¯å£<br>1509|æœ¨é©¬Psyber Streaming Serverå¼€æ”¾æ­¤ç«¯å£<br>1512|Microsoft Windowsç½‘ç»œåç§°æœåŠ¡<br>1524|è®¸å¤šæ”»å‡»è„šæœ¬å®‰è£…ä¸€ä¸ªåé—¨SHELLäºè¿™ä¸ªç«¯å£<br>1600|æœ¨é©¬Shivka-Burkaå¼€æ”¾æ­¤ç«¯å£<br>1645|è¿œç¨‹è®¤è¯æ‹¨å·ç”¨æˆ·æœåŠ¡<br>1701|ç¬¬2å±‚éš§é“åè®®<br>1731|NetMeetingéŸ³é¢‘è°ƒç”¨æ§åˆ¶<br>1801|Microsoftæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨<br>1807|æœ¨é©¬SpySenderå¼€æ”¾æ­¤ç«¯å£<br>1900|å¯è¢«åˆ©ç”¨ddosæ”»å‡»ï¼Œä¸€èˆ¬å…³é—­<br>1912|é‡‘å±±è¯éœ¸å¼€æ”¾æ­¤ç«¯å£<br>1981|æœ¨é©¬ShockRaveå¼€æ”¾æ­¤ç«¯å£<br>1999|æœ¨é©¬BackDoor,yaiå¼€æ”¾æ­¤ç«¯å£<br>2000|æœ¨é©¬GirlFriend 1.3ã€Millenium 1.0å¼€æ”¾æ­¤ç«¯å£<br>2001|æœ¨é©¬Millenium 1.0ã€Trojan Cow,é»‘æ´2001å¼€æ”¾æ­¤ç«¯å£<br>2003|GNU æŸ¥è¯¢<br>2023|æœ¨é©¬Pass Ripperå¼€æ”¾æ­¤ç«¯å£<br>2049|NFSç¨‹åºå¸¸è¿è¡Œäºæ­¤ç«¯å£<br>2115|æœ¨é©¬Bugså¼€æ”¾æ­¤ç«¯å£<br>2140|æœ¨é©¬Deep Throat 1.0/3.0ï¼ŒThe Invasorå¼€æ”¾æ­¤ç«¯å£<br>2500|åº”ç”¨å›ºå®šç«¯å£ä¼šè¯å¤åˆ¶çš„RPCå®¢æˆ·<br>2504|ç½‘ç»œå¹³è¡¡è´Ÿè·<br>2565|æœ¨é©¬Strikerå¼€æ”¾æ­¤ç«¯å£<br>2583|æœ¨é©¬Wincrash 2.0å¼€æ”¾æ­¤ç«¯å£<br>2801|æœ¨é©¬Phineas Phuckerå¼€æ”¾æ­¤ç«¯å£<br>2847|è¯ºé¡¿åç—…æ¯’æœåŠ¡å¼€æ”¾æ­¤ç«¯å£<br>3024|æœ¨é©¬WinCrashå¼€æ”¾æ­¤ç«¯å£<br>3128|squid httpä»£ç†æœåŠ¡å™¨å¼€æ”¾æ­¤ç«¯å£<br>3129|æœ¨é©¬Master Paradiseå¼€æ”¾æ­¤ç«¯å£<br>3150|æœ¨é©¬The Invasor,deep throatå¼€æ”¾æ­¤ç«¯å£<br>3210|æœ¨é©¬SchoolBuså¼€æ”¾æ­¤ç«¯å£<br>3306|MySQLå¼€æ”¾æ­¤ç«¯å£<br>3333|æœ¨é©¬Prosiakå¼€æ”¾æ­¤ç«¯å£<br>3389|WINDOWS 2000ç»ˆç«¯å¼€æ”¾æ­¤ç«¯å£<br>3456|inetinfo.exe(äº’è”ç½‘ä¿¡æ¯æœåŠ¡)å¼€æ”¾ç«¯å£ï¼ŒVATé»˜è®¤æ•°æ®<br>3457|VATé»˜è®¤æ§åˆ¶<br>3527|Microsoftæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨<br>3700|æœ¨é©¬Portal of Doomå¼€æ”¾æ­¤ç«¯å£<br>3996|æœ¨é©¬RemoteAnythingå¼€æ”¾æ­¤ç«¯å£<br>4000|è…¾è®¯QQå®¢æˆ·ç«¯å¼€æ”¾æ­¤ç«¯å£<br>4060|æœ¨é©¬RemoteAnythingå¼€æ”¾æ­¤ç«¯å£<br>4092|æœ¨é©¬WinCrashå¼€æ”¾æ­¤ç«¯å£<br>4133|NUTS BootpæœåŠ¡å™¨<br>4134|NIFTY-Serve HMIåè®®<br>4141|WorkflowæœåŠ¡å™¨<br>4142|æ–‡æ¡£æœåŠ¡å™¨<br>4143|æ–‡æ¡£å¤åˆ¶<br>4145|VVRæ§åˆ¶<br>4321|è¿œç¨‹Who IsæŸ¥è¯¢<br>4333|å¾®å‹sqlæœåŠ¡å™¨<br>4349|æ–‡ä»¶ç³»ç»Ÿç«¯å£è®°å½•<br>4350|ç½‘ç»œè®¾å¤‡<br>4351|PLCYç½‘ç»œæœåŠ¡<br>4453|NSSè­¦æŠ¥ç®¡ç†<br>4454|NSSä»£ç†ç®¡ç†<br>4455|PRèŠå¤©ç”¨æˆ·<br>4456|PRèŠå¤©æœåŠ¡å™¨<br>4457|PRæ³¨å†Œ<br>4480|Proxy+ HTTPä»£ç†ç«¯å£<br>4500|Lsasså¼€æ”¾ç«¯å£ï¼Œä¸èƒ½å…³é—­<br>4547|Lannerè®¸å¯ç®¡ç†<br>4555|RSIPç«¯å£<br>4590|æœ¨é©¬ICQTrojanå¼€æ”¾æ­¤ç«¯å£<br>4672|è¿œç¨‹æ–‡ä»¶è®¿é—®æœåŠ¡å™¨<br>4752|ç®€å•ç½‘ç»œéŸ³é¢‘æœåŠ¡å™¨<br>4800|Iconaå¿«é€Ÿæ¶ˆæ¯ç³»ç»Ÿ<br>4801|Iconaç½‘ç»œèŠå¤©<br>4802|Iconaè®¸å¯ç³»ç»ŸæœåŠ¡å™¨<br>4848|AppæœåŠ¡å™¨-Admin HTTP<br> 4849|AppæœåŠ¡å™¨-Admin HTTPS<br> 4950|æœ¨é©¬IcqTrojanå¼€æ”¾5000ç«¯å£<br>5000|æœ¨é©¬blazer5ï¼ŒSockets de Troieå¼€æ”¾5000ç«¯å£ï¼Œä¸€èˆ¬åº”å…³é—­<br>5001|æœ¨é©¬Sockets de Troieå¼€æ”¾5001ç«¯å£<br>5006|wsmæœåŠ¡å™¨<br>5007|wsmæœåŠ¡å™¨ssl<br> 5022|miceæœåŠ¡å™¨<br>5050|å¤šåª’ä½“ä¼šè®®æ§åˆ¶åè®®<br>5051|ITAä»£ç†<br>5052|ITAç®¡ç†<br>5137|MyCTSæœåŠ¡å™¨ç«¯å£<br>5150|Ascendé€šé“ç®¡ç†åè®®<br>5154|BZFlagæ¸¸æˆæœåŠ¡å™¨<br>5190|America-Online(ç¾å›½åœ¨çº¿)<br>5191|AmericaOnline1(ç¾å›½åœ¨çº¿)<br>5192|AmericaOnline2(ç¾å›½åœ¨çº¿)<br>5193|AmericaOnline3(ç¾å›½åœ¨çº¿)<br>5222|Jabberå®¢æˆ·ç«¯è¿æ¥<br>5225|HP(æƒ æ™®å…¬å¸)æœåŠ¡å™¨<br>5226|HP(æƒ æ™®å…¬å¸)<br>5232|SGIç»˜å›¾è½¯ä»¶ç«¯å£<br>5250|iç½‘å…³<br>5264|3Comç½‘ç»œç«¯å£1<br> 5265|3Comç½‘ç»œç«¯å£2<br> 5269|JabberæœåŠ¡å™¨è¿æ¥<br>5306|Sun MCç»„<br>5321|æœ¨é©¬Sockets de Troieå¼€æ”¾5321ç«¯å£<br>5400|æœ¨é©¬Blade Runnerå¼€æ”¾æ­¤ç«¯å£<br>5401|æœ¨é©¬Blade Runnerå¼€æ”¾æ­¤ç«¯å£<br>5402|æœ¨é©¬Blade Runnerå¼€æ”¾æ­¤ç«¯å£<br>5405|ç½‘ç»œæ”¯æŒ<br>5409|Salientæ•°æ®æœåŠ¡å™¨<br>5410|Salientç”¨æˆ·ç®¡ç†<br>5415|NSæœåŠ¡å™¨<br>5416|SNSç½‘å…³<br>5417|SNSä»£ç†<br>5421|ç½‘ç»œæ”¯æŒ2<br> 5423|è™šæ‹Ÿç”¨æˆ·<br>5427|SCO-PEER-TTA(Unixç³»ç»Ÿ)<br>5432|PostgreSQLæ•°æ®åº“<br>5550|æœ¨é©¬xtcpå¼€æ”¾æ­¤ç«¯å£<br>5569|æœ¨é©¬Robo-Hackå¼€æ”¾æ­¤ç«¯å£<br>5599|å…¬å¸è¿œç¨‹å®‰å…¨å®‰è£…<br>5600|å…¬å¸å®‰å…¨ç®¡ç†<br>5601|å…¬å¸å®‰å…¨ä»£ç†<br>5631|pcANYWHERE(è½¯ä»¶)æ•°æ®<br>5632|pcANYWHERE(è½¯ä»¶)æ•°æ®<br>5673|JACLæ¶ˆæ¯æœåŠ¡å™¨<br>5675|V5UAåº”ç”¨ç«¯å£<br>5676|RAç®¡ç†<br>5678|è¿œç¨‹å¤åˆ¶ä»£ç†è¿æ¥<br>5679|ç›´æ¥ç”µç¼†è¿æ¥<br>5720|MS-æ‰§ç…§<br>5729|Openmailç”¨æˆ·ä»£ç†å±‚<br>5730|Steltorâ€™sæ—¥å†è®¿é—®<br>5731|netscape(ç½‘æ™¯)suiteware<br> 5732|netscape(ç½‘æ™¯)suiteware<br> 5742|æœ¨é©¬WinCrash1.03å¼€æ”¾æ­¤ç«¯å£<br>5745|fcopy-æœåŠ¡å™¨<br>5746|fcopys-æœåŠ¡å™¨<br>5755|OpenMail(é‚®ä»¶æœåŠ¡å™¨)æ¡Œé¢ç½‘å…³æœåŠ¡å™¨<br>5757|OpenMail(é‚®ä»¶æœåŠ¡å™¨)X.500ç›®å½•æœåŠ¡å™¨<br>5766|OpenMail (é‚®ä»¶æœåŠ¡å™¨)NewMailæœåŠ¡å™¨<br>5767|OpenMail (é‚®ä»¶æœåŠ¡å™¨)è¯·æ±‚ä»£ç†æ›¾(å®‰å…¨)<br>5768|OpenMail(é‚®ä»¶æœåŠ¡å™¨) CMTSæœåŠ¡å™¨<br>5777|DALIç«¯å£<br>5800|è™šæ‹Ÿç½‘ç»œè®¡ç®—<br>5801|è™šæ‹Ÿç½‘ç»œè®¡ç®—<br>5802|è™šæ‹Ÿç½‘ç»œè®¡ç®—HTTPè®¿é—®, d<br> 5803|è™šæ‹Ÿç½‘ç»œè®¡ç®—HTTPè®¿é—®, d<br> 5900|è™šæ‹Ÿç½‘ç»œè®¡ç®—æœºæ˜¾ç¤º0<br> 5901|è™šæ‹Ÿç½‘ç»œè®¡ç®—æœºæ˜¾ç¤º1<br> 5902|è™šæ‹Ÿç½‘ç»œè®¡ç®—æœºæ˜¾ç¤º2<br> 5903|è™šæ‹Ÿç½‘ç»œè®¡ç®—æœºæ˜¾ç¤º3<br> 6000|X Window ç³»ç»Ÿ<br>6001|X Window æœåŠ¡å™¨<br>6002|X Window æœåŠ¡å™¨<br>6003|X Window æœåŠ¡å™¨<br>6004|X Window æœåŠ¡å™¨<br>6005|X Window æœåŠ¡å™¨<br>6006|X Window æœåŠ¡å™¨<br>6007|X Window æœåŠ¡å™¨<br>6008|X Window æœåŠ¡å™¨<br>6009|X Window æœåŠ¡å™¨<br>6010|X Window ç³»ç»Ÿ<br>6011|X Window ç³»ç»Ÿ<br>6012|X Window ç³»ç»Ÿ<br>6013|X Window ç³»ç»Ÿ<br>6014|X Window ç³»ç»Ÿ<br>6015|X Window ç³»ç»Ÿ<br>6016|X Window ç³»ç»Ÿ<br>6017|X Window ç³»ç»Ÿ<br>6018|X Window ç³»ç»Ÿ<br>6019|X Window ç³»ç»Ÿ<br>6020|X Window ç³»ç»Ÿ<br>6021|X Window ç³»ç»Ÿ<br>6022|X Window ç³»ç»Ÿ<br>6023|X Window ç³»ç»Ÿ<br>6024|X Window ç³»ç»Ÿ<br>6025|X Window ç³»ç»Ÿ<br>6026|X Window ç³»ç»Ÿ<br>6027|X Window ç³»ç»Ÿ<br>6028|X Window ç³»ç»Ÿ<br>6029|X Window ç³»ç»Ÿ<br>6030|X Window ç³»ç»Ÿ<br>6031|X Window ç³»ç»Ÿ<br>6032|X Window ç³»ç»Ÿ<br>6033|X Window ç³»ç»Ÿ<br>6034|X Window ç³»ç»Ÿ<br>6035|X Window ç³»ç»Ÿ<br>6036|X Window ç³»ç»Ÿ<br>6037|X Window ç³»ç»Ÿ<br>6038|X Window ç³»ç»Ÿ<br>6039|X Window ç³»ç»Ÿ<br>6040|X Window ç³»ç»Ÿ<br>6041|X Window ç³»ç»Ÿ<br>6042|X Window ç³»ç»Ÿ<br>6043|X Window ç³»ç»Ÿ<br>6044|X Window ç³»ç»Ÿ<br>6045|X Window ç³»ç»Ÿ<br>6046|X Window ç³»ç»Ÿ<br>6047|X Window ç³»ç»Ÿ<br>6048|X Window ç³»ç»Ÿ<br>6049|X Window ç³»ç»Ÿ<br>6050|ARCserve ä»£ç†<br>6051|X Window ç³»ç»Ÿ<br>6052|X Window ç³»ç»Ÿ<br>6053|X Window ç³»ç»Ÿ<br>6054|X Window ç³»ç»Ÿ<br>6055|X Window ç³»ç»Ÿ<br>6056|X Window ç³»ç»Ÿ<br>6057|X Window ç³»ç»Ÿ<br>6058|X Window ç³»ç»Ÿ<br>6059|X Window ç³»ç»Ÿ<br>6060|X Window ç³»ç»Ÿ<br>6061|X Window ç³»ç»Ÿ<br>6062|X Window ç³»ç»Ÿ<br>6063|X Window ç³»ç»Ÿ<br>6267|æœ¨é©¬å¹¿å¤–å¥³ç”Ÿå¼€æ”¾æ­¤ç«¯å£<br>6400|æœ¨é©¬The tHingå¼€æ”¾æ­¤ç«¯å£<br>6401|seagate(ç¾å›½å¸Œæ·å…¬å¸)<br>6455|SKIPè¯ä¹¦æ¥å—<br>6456|SKIPè¯ä¹¦å‘é€<br>6471|LVisionè®¸å¯ç®¡ç†å™¨<br>6505|BoKSç®¡ç†ç§äººç«¯å£<br>6506|BoKSç®¡ç†å…¬å…±ç«¯å£<br>6507|BoKS DiræœåŠ¡å™¨,ç§äººç«¯å£<br>6508|BoKS DiræœåŠ¡å™¨,å…¬å…±ç«¯å£<br>6509|MGCS-MFPç«¯å£<br>6510|MCERç«¯å£<br>6566|SANEæ§åˆ¶ç«¯å£<br>6580|Parsecä¸»æœåŠ¡å™¨<br>6581|Parsecå¯¹ç­‰ç½‘ç»œ<br>6582|Parsecæ¸¸æˆæœåŠ¡å™¨<br>6588|AnalogX HTTPä»£ç†ç«¯å£<br>6631|Mitchellç”µä¿¡ä¸»æœº<br>6667|Internetå¤šçº¿äº¤è°ˆ<br>6668|Internetå¤šçº¿äº¤è°ˆ<br>6670|æœ¨é©¬Deep Throatå¼€æ”¾æ­¤ç«¯å£<br>6671|æœ¨é©¬Deep Throat 3.0å¼€æ”¾æ­¤ç«¯å£<br>6699|Napsteræ–‡ä»¶(MP3)å…±äº«æœåŠ¡<br>6701|KTI/ICADåç§°æœåŠ¡å™¨<br>6788|SMCè½¯ä»¶-HTTP<br> 6789|SMCè½¯ä»¶-HTTPS<br> 6841|Netmoè½¯ä»¶é»˜è®¤å¼€æ”¾ç«¯å£<br>6842|Netmo HTTPæœåŠ¡<br>6883|æœ¨é©¬DeltaSourceå¼€æ”¾æ­¤ç«¯å£<br>6939|æœ¨é©¬Indoctrinationå¼€æ”¾æ­¤ç«¯å£<br>6969|æœ¨é©¬Gatecrasherã€Priorityå¼€æ”¾æ­¤ç«¯å£<br>6970|realéŸ³é¢‘å¼€æ”¾æ­¤ç«¯å£<br>7000|æœ¨é©¬Remote Grabå¼€æ”¾æ­¤ç«¯å£<br>7002|ä½¿ç”¨è€…&amp; ç»„ æ•°æ®åº“<br>7003|éŸ³é‡å®šä½æ•°æ®åº“<br>7004|AFS/Kerberosè®¤è¯æœåŠ¡<br>7005|éŸ³é‡ç®¡ç†æœåŠ¡<br>7006|é”™è¯¯è§£é‡ŠæœåŠ¡<br>7007|Basicç›‘ç£è¿›ç¨‹<br>7008|æœåŠ¡å™¨-æœåŠ¡å™¨æ›´æ–°ç¨‹åº<br>7009|è¿œç¨‹ç¼“å­˜ç®¡ç†æœåŠ¡<br>7011|Talonè½¯ä»¶å‘ç°ç«¯å£<br>7012|Talonè½¯ä»¶å¼•æ“<br>7013|Microtalonå‘ç°<br>7014|Microtaloné€šä¿¡<br>7015|Talonç½‘ç»œæœåŠ¡å™¨<br>7020|DPæœåŠ¡<br>7021|DPæœåŠ¡ç®¡ç†<br>7100|Xå­—å‹æœåŠ¡<br>7121|è™šæ‹ŸåŸå‹è®¸å¯è¯ç®¡ç†<br>7300|æœ¨é©¬NetMonitorå¼€æ”¾æ­¤ç«¯å£<br>7301|æœ¨é©¬NetMonitorå¼€æ”¾æ­¤ç«¯å£<br>7306|æœ¨é©¬NetMonitorï¼ŒNetSpy1.0å¼€æ”¾æ­¤ç«¯å£<br>7307|æœ¨é©¬NetMonitorå¼€æ”¾æ­¤ç«¯å£<br>7308|æœ¨é©¬NetMonitorå¼€æ”¾æ­¤ç«¯å£<br>7323|SygateæœåŠ¡å™¨ç«¯<br>7511|æœ¨é©¬èªæ˜åŸºå› å¼€æ”¾æ­¤ç«¯å£<br>7588|Sunè®¸å¯è¯ç®¡ç†<br>7597|æœ¨é©¬Quazå¼€æ”¾æ­¤ç«¯å£<br>7626|æœ¨é©¬å†°æ²³å¼€æ”¾æ­¤ç«¯å£<br>7633|PMDFç®¡ç†<br>7674|iMQ SSLé€šé“<br>7675|iMQé€šé“<br>7676|æœ¨é©¬Giscierå¼€æ”¾æ­¤ç«¯å£<br>7720|Medå›¾è±¡å…¥å£<br>7743|Sakuraè„šæœ¬ä¼ é€’åè®®<br>7789|æœ¨é©¬ICKillerå¼€æ”¾æ­¤ç«¯å£<br>7797|Propelè¿æ¥å™¨ç«¯å£<br>7798|Propelç¼–ç å™¨ç«¯å£<br>8000|è…¾è®¯QQæœåŠ¡å™¨ç«¯å¼€æ”¾æ­¤ç«¯å£<br>8001|VCOMé€šé“<br>8007|Apache(ç±»ä¼¼iis)jServåè®®1.x<br> 8008|HTTP Alternate<br> 8009|Apache(ç±»ä¼¼iis)JServåè®®1.3<br> 8010|Wingateä»£ç†å¼€æ”¾æ­¤ç«¯å£<br>8011|æœ¨é©¬way2.4å¼€æ”¾æ­¤ç«¯å£<br>8022|OA-ç³»ç»Ÿ<br>8080|WWWä»£ç†å¼€æ”¾æ­¤ç«¯å£<br>8081|ICECapæ§åˆ¶å°<br>8082|BlackIce(é˜²æ­¢é»‘å®¢è½¯ä»¶)è­¦æŠ¥å‘é€åˆ°æ­¤ç«¯å£<br>8118|Privoxy HTTPä»£ç†<br>8121|Apolloæ•°æ®ç«¯å£<br>8122|Apolloè½¯ä»¶ç®¡ç†ç«¯å£<br>8181|Imail<br> 8225|æœ¨é©¬ç°é¸½å­å¼€æ”¾æ­¤ç«¯å£<br>8311|æœ¨é©¬åˆæ‹æƒ…äººå¼€æ”¾æ­¤ç«¯å£<br>8351|æœåŠ¡å™¨å¯»æ‰¾<br>8416|eSpeech Sessionåè®®<br>8417|eSpeech RTPåè®®<br>8473|è™šæ‹Ÿç‚¹å¯¹ç‚¹<br>8668|ç½‘ç»œåœ°å€è½¬æ¢<br>8786|Messageå®¢æˆ·ç«¯<br>8787|MessageæœåŠ¡å™¨<br>8954|Cumulusç®¡ç†ç«¯å£<br>9000|CSç›‘å¬<br>9001|ETLæœåŠ¡ç®¡ç†<br>9002|åŠ¨æ€idéªŒè¯<br>9021|PangolinéªŒè¯<br>9022|PrivateArkè¿œç¨‹ä»£ç†<br>9023|å®‰å…¨ç½‘ç»œç™»é™†-1<br> 9024|å®‰å…¨ç½‘ç»œç™»é™†-2<br> 9025|å®‰å…¨ç½‘ç»œç™»é™†-3<br> 9026|å®‰å…¨ç½‘ç»œç™»é™†-4<br> 9101|Baculaæ§åˆ¶å™¨<br>9102|Baculaæ–‡ä»¶åå°<br>9103|Baculaå­˜å‚¨é‚®ä»¶åå°<br>9111|DragonIDSæ§åˆ¶å°<br>9217|FSCé€šè®¯ç«¯å£<br>9281|è½¯ä»¶ä¼ é€ç«¯å£1<br> 9282|è½¯ä»¶ä¼ é€ç«¯å£2<br> 9346|CæŠ€æœ¯ç›‘å¬<br>9400|æœ¨é©¬Incommand 1.0å¼€æ”¾æ­¤ç«¯å£<br>9401|æœ¨é©¬Incommand 1.0å¼€æ”¾æ­¤ç«¯å£<br>9402|æœ¨é©¬Incommand 1.0å¼€æ”¾æ­¤ç«¯å£<br>9594|ä¿¡æ¯ç³»ç»Ÿ<br>9595|Ping DiscoveryæœåŠ¡<br>9800|WebDavæºç«¯å£<br>9801|Sakuraè„šæœ¬è½¬ç§»åè®®-2<br> 9802|WebDAV Source TLS/SSL<br> 9872|æœ¨é©¬Portal of Doomå¼€æ”¾æ­¤ç«¯å£<br>9873|æœ¨é©¬Portal of Doomå¼€æ”¾æ­¤ç«¯å£<br>9874|æœ¨é©¬Portal of Doomå¼€æ”¾æ­¤ç«¯å£<br>9875|æœ¨é©¬Portal of Doomå¼€æ”¾æ­¤ç«¯å£<br>9899|æœ¨é©¬InIkillerå¼€æ”¾æ­¤ç«¯å£<br>9909|åŸŸåæ—¶é—´<br>9911|SYPEComä¼ é€åè®®<br>9989|æœ¨é©¬iNi-Killerå¼€æ”¾æ­¤ç«¯å£<br>9990|OSM Appletç¨‹åºæœåŠ¡å™¨<br>9991|OSMäº‹ä»¶æœåŠ¡å™¨<br>10000|ç½‘ç»œæ•°æ®ç®¡ç†åè®®<br>10001|SCPæ„é€ ç«¯å£<br>10005|å®‰å…¨è¿œç¨‹ç™»é™†<br>10008|Octopuså¤šè·¯å™¨<br>10067|æœ¨é©¬iNi-Killerå¼€æ”¾æ­¤ç«¯å£<br>10113|NetIQç«¯ç‚¹<br>10115|NetIQç«¯ç‚¹<br>10116|NetIQVoIPé‰´å®šå™¨<br>10167|æœ¨é©¬iNi-Killerå¼€æ”¾æ­¤ç«¯å£<br>11000|æœ¨é©¬SennaSpyå¼€æ”¾æ­¤ç«¯å£<br>11113|é‡‘å±±è¯éœ¸å¼€æ”¾æ­¤ç«¯å£<br>11233|æœ¨é©¬Progenic trojanå¼€æ”¾æ­¤ç«¯å£<br>12076|æœ¨é©¬Telecommandoå¼€æ”¾æ­¤ç«¯å£<br>12223|æœ¨é©¬Hackâ€™99 KeyLoggerå¼€æ”¾æ­¤ç«¯å£<br>12345|æœ¨é©¬NetBus1.60/1.70ã€GabanBuså¼€æ”¾æ­¤ç«¯å£<br>12346|æœ¨é©¬NetBus1.60/1.70ã€GabanBuså¼€æ”¾æ­¤ç«¯å£<br>12361|æœ¨é©¬Whack-a-moleå¼€æ”¾æ­¤ç«¯å£<br>13223|PowWow å®¢æˆ·ç«¯ï¼Œæ˜¯Tribal Voiceçš„èŠå¤©ç¨‹åº<br>13224|PowWow æœåŠ¡å™¨ï¼Œæ˜¯Tribal Voiceçš„èŠå¤©ç¨‹åº<br>16959|æœ¨é©¬Subsevenå¼€æ”¾æ­¤ç«¯å£<br>16969|æœ¨é©¬Priorityå¼€æ”¾æ­¤ç«¯å£<br>17027|å¤–å‘è¿æ¥<br>19191|æœ¨é©¬è“è‰²ç«ç„°å¼€æ”¾æ­¤ç«¯å£<br>20000|æœ¨é©¬Millenniumå¼€æ”¾æ­¤ç«¯å£<br>20001|æœ¨é©¬Millenniumå¼€æ”¾æ­¤ç«¯å£<br>20034|æœ¨é©¬NetBus Proå¼€æ”¾æ­¤ç«¯å£<br>21554|æœ¨é©¬GirlFriendå¼€æ”¾æ­¤ç«¯å£<br>22222|æœ¨é©¬Prosiakå¼€æ”¾æ­¤ç«¯å£<br>23444|æœ¨é©¬ç½‘ç»œå…¬ç‰›å¼€æ”¾æ­¤ç«¯å£<br>23456|æœ¨é©¬Evil FTPã€Ugly FTPå¼€æ”¾æ­¤ç«¯å£<br>25793|Vocaltecåœ°å€æœåŠ¡å™¨<br>26262|K3è½¯ä»¶-æœåŠ¡å™¨<br>26263|K3è½¯ä»¶å®¢æˆ·ç«¯<br>26274|æœ¨é©¬Deltaå¼€æ”¾æ­¤ç«¯å£<br>27374|æœ¨é©¬Subseven 2.1å¼€æ”¾æ­¤ç«¯å£<br>30100|æœ¨é©¬NetSphereå¼€æ”¾æ­¤ç«¯å£<br>30129|æœ¨é©¬Masters Paradiseå¼€æ”¾æ­¤ç«¯å£<br>30303|æœ¨é©¬Socket23å¼€æ”¾æ­¤ç«¯å£<br>30999|æœ¨é©¬Kuangå¼€æ”¾æ­¤ç«¯å£<br>31337|æœ¨é©¬BO(Back Orifice)å¼€æ”¾æ­¤ç«¯å£<br>31338|æœ¨é©¬BO(Back Orifice)ï¼ŒDeepBOå¼€æ”¾æ­¤ç«¯å£<br>31339|æœ¨é©¬NetSpy DKå¼€æ”¾æ­¤ç«¯å£<br>31666|æœ¨é©¬BOWhackå¼€æ”¾æ­¤ç«¯å£<br>31789|Hack-a-tack<br> 32770|sun solaris RPCæœåŠ¡å¼€æ”¾æ­¤ç«¯å£<br>33333|æœ¨é©¬Prosiakå¼€æ”¾æ­¤ç«¯å£<br>33434|è·¯ç”±è·Ÿè¸ª<br>34324|æœ¨é©¬Tiny Telnet Serverã€BigGluckã€TNå¼€æ”¾æ­¤ç«¯å£<br>36865|KastenXè½¯ä»¶ç«¯å£<br>38201|Galaxy7è½¯ä»¶æ•°æ®é€šé“<br>39681|TurboNoteé»˜è®¤ç«¯å£<br>40412|æœ¨é©¬The Spyå¼€æ”¾æ­¤ç«¯å£<br>40421|æœ¨é©¬Masters Paradiseå¼€æ”¾æ­¤ç«¯å£<br>40422|æœ¨é©¬Masters Paradiseå¼€æ”¾æ­¤ç«¯å£<br>40423|æœ¨é©¬Masters Paradiseå¼€æ”¾æ­¤ç«¯å£<br>40426|æœ¨é©¬Masters Paradiseå¼€æ”¾æ­¤ç«¯å£<br>40843|CSCC é˜²ç«å¢™<br>43210|æœ¨é©¬SchoolBus 1.0/2.0å¼€æ”¾æ­¤ç«¯å£<br>43190|IP-PROVISION<br> 44321|PCPæœåŠ¡å™¨(pmcd)<br> 44322|PCPæœåŠ¡å™¨(pmcd)ä»£ç†<br>44334|å¾®å‹ä¸ªäººé˜²ç«å¢™ç«¯å£<br>44442|ColdFusionè½¯ä»¶ç«¯å£<br>44443|ColdFusionè½¯ä»¶ç«¯å£<br>44445|æœ¨é©¬Happypigå¼€æ”¾æ­¤ç«¯å£<br>45576|Eä»£æ—¶å…‰ä¸“ä¸šä»£ç†å¼€æ”¾æ­¤ç«¯å£<br>47262|æœ¨é©¬Deltaå¼€æ”¾æ­¤ç«¯å£<br>47624|Direct PlayæœåŠ¡å™¨<br>47806|ALCåè®®<br>48003|Nimbusç½‘å…³<br>50505|æœ¨é©¬Sockets de Troieå¼€æ”¾æ­¤ç«¯å£<br>50766|æœ¨é©¬Foreå¼€æ”¾æ­¤ç«¯å£<br>53001|æœ¨é©¬Remote Windows Shutdownå¼€æ”¾æ­¤ç«¯å£<br>54320|æœ¨é©¬bo2000å¼€æ”¾æ­¤ç«¯å£<br>54321|æœ¨é©¬SchoolBus 1.0/2.0å¼€æ”¾æ­¤ç«¯å£<br>61466|æœ¨é©¬Telecommandoå¼€æ”¾æ­¤ç«¯å£<br>65000|æœ¨é©¬Devil 1.03å¼€æ”¾æ­¤ç«¯å£<br>65301|PC Anywhereè½¯ä»¶å¼€æ”¾ç«¯å£</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-åšå®¢" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/20/åšå®¢/" class="article-date">
      <time datetime="2016-07-20T11:22:25.000Z" itemprop="datePublished">2016-07-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>è½æ ¼åšå®¢<br><a href="https://www.logcg.com/" target="_blank" rel="noopener">https://www.logcg.com/</a></p>
<p>çˆ±æƒ…å®ˆæœ›è€…<br><a href="http://www.waitsun.com/" target="_blank" rel="noopener">http://www.waitsun.com/</a></p>
<p><a href="http://blog.rickysu.com" target="_blank" rel="noopener">http://blog.rickysu.com</a></p>
<p>æ€è€ƒï¼Œè¡ŒåŠ¨ï¼Œå†æ€è€ƒï¼Œå†æ€»ç»“<br><a href="http://blog.csdn.net/philofly" target="_blank" rel="noopener">http://blog.csdn.net/philofly</a></p>
<p>å¼ ç ·é•“<br><a href="http://zhangshenjia.com/" target="_blank" rel="noopener">http://zhangshenjia.com/</a><br><a href="http://www.cnblogs.com/zhangshenjia/" target="_blank" rel="noopener">http://www.cnblogs.com/zhangshenjia/</a></p>
<p><a href="http://nosame.net/" target="_blank" rel="noopener">http://nosame.net/</a></p>
<p>é˜¿å †å“¥çš„åšå®¢<br><a href="http://blog.sina.com.cn/wangmeng" target="_blank" rel="noopener">http://blog.sina.com.cn/wangmeng</a></p>
<p>ï¿¼</p>
<p><a href="http://eheima.com/" target="_blank" rel="noopener">http://eheima.com/</a></p>
<p>ä¸œä¸œä¸œ é™ˆç…œä¸œçš„åšå®¢<br><a href="http://www.chenyudong.com/" target="_blank" rel="noopener">http://www.chenyudong.com/</a></p>
<p>Jerry Qu<br><a href="https://imququ.com/" target="_blank" rel="noopener">https://imququ.com/</a></p>
<p>Scott H. Young<br><a href="http://www.scotthyoung.com/blog/" target="_blank" rel="noopener">http://www.scotthyoung.com/blog/</a></p>
<p>QLChançš„åšå®¢<br><a href="http://blog.sina.com.cn/qlchan" target="_blank" rel="noopener">http://blog.sina.com.cn/qlchan</a></p>
<p>SHENLIYANG<br><a href="http://blog.chinaunix.net/uid/25508645.html" target="_blank" rel="noopener">http://blog.chinaunix.net/uid/25508645.html</a></p>
<p>æ–½æ˜Œæƒâ€“æ·˜å®å«éœ<br><a href="http://blog.chinaunix.net/uid/22312037.html" target="_blank" rel="noopener">http://blog.chinaunix.net/uid/22312037.html</a></p>
<p>å”å·§çš„æŠ€æœ¯åšå®¢<br><a href="http://blog.devtang.com/" target="_blank" rel="noopener">http://blog.devtang.com/</a></p>
<p>åœŸæœ¨å›å­ <a href="https://tumutanzi.com/" target="_blank" rel="noopener">https://tumutanzi.com/</a> è°­æ™ºå†›<br>ç‹å  <a href="http://www.yinwang.org/" target="_blank" rel="noopener">http://www.yinwang.org/</a><br>å¼ å®´ <a href="http://zyan.cc/" target="_blank" rel="noopener">http://zyan.cc/</a><br>æ›¾æœˆå¤© <a href="http://www.zengyuetian.com/" target="_blank" rel="noopener">http://www.zengyuetian.com/</a><br>æœˆå…‰åšå®¢ <a href="http://www.williamlong.info/" target="_blank" rel="noopener">http://www.williamlong.info/</a><br>å°èµ–å­ <a href="https://justyy.com/" target="_blank" rel="noopener">https://justyy.com/</a><br>å‹ºå­å…ˆç”Ÿ <a href="https://chenghouwen.com/" target="_blank" rel="noopener">https://chenghouwen.com/</a><br>å¸¸é˜³æ—¶å…‰ <a href="https://cyhour.com/" target="_blank" rel="noopener">https://cyhour.com/</a><br><a href="http://www.wswing.net/" target="_blank" rel="noopener">http://www.wswing.net/</a><br>ç‡•æ¸¡å¯’æ½­ <a href="http://hisherry.com/" target="_blank" rel="noopener">http://hisherry.com/</a><br>é˜®ä¸€å³° <a href="http://www.ruanyifeng.com/blog/" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/</a><br>ç‹å¨å¨ <a href="http://wangdaodao.com/" target="_blank" rel="noopener">http://wangdaodao.com/</a><br>è°·å¥¥ç«™é•¿ <a href="http://b.gkp.cc/" target="_blank" rel="noopener">http://b.gkp.cc/</a><br>éœç‚¬ <a href="http://blog.devep.net/virushuo/" target="_blank" rel="noopener">http://blog.devep.net/virushuo/</a><br>delphijâ€™s Chaos <a href="https://blog.delphij.net/" target="_blank" rel="noopener">https://blog.delphij.net/</a><br>Treri <a href="http://isay.me/" target="_blank" rel="noopener">http://isay.me/</a><br>åšå£«ç‰Œæ°‘å·¥ <a href="http://www.yue366.com/" target="_blank" rel="noopener">http://www.yue366.com/</a><br>å“²å°”å¤« <a href="http://www.zeove.com/" target="_blank" rel="noopener">http://www.zeove.com/</a><br>éšæœ›æ·¡æ€ <a href="http://www.lushaojun.com/" target="_blank" rel="noopener">http://www.lushaojun.com/</a><br>ä¸€è·¯ç‹‚é£™ <a href="http://www.ylkb.net/" target="_blank" rel="noopener">http://www.ylkb.net/</a><br>Leyar <a href="http://www.leyar.me/" target="_blank" rel="noopener">http://www.leyar.me/</a><br>å®‰é™çš„ç²‰ä¸ <a href="http://zhanggang.net/" target="_blank" rel="noopener">http://zhanggang.net/</a><br>è¥¿è¾¹ä¸€ä¸ªæœ¨å¤´ <a href="http://ximuing.com/" target="_blank" rel="noopener">http://ximuing.com/</a><br>Xhinker <a href="http://xhinker.com/" target="_blank" rel="noopener">http://xhinker.com/</a><br>zhiqiang <a href="http://zhiqiang.org/blog/" target="_blank" rel="noopener">http://zhiqiang.org/blog/</a><br>ä¸èƒ½å§ <a href="http://bunengba.com/" target="_blank" rel="noopener">http://bunengba.com/</a><br>æ–½ä¹é¥ <a href="https://shileyao.wordpress.com/" target="_blank" rel="noopener">https://shileyao.wordpress.com/</a><br>æ…§çœ¼ Wisdom Eyes <a href="http://www.zhangxinghui.com/" target="_blank" rel="noopener">http://www.zhangxinghui.com/</a><br>ä½ä»”å¿— <a href="http://www.jinbo123.com/" target="_blank" rel="noopener">http://www.jinbo123.com/</a><br>ç²¾å“åšå®¢ <a href="http://jingpin.org/" target="_blank" rel="noopener">http://jingpin.org/</a><br>XJPçš„ç¢ç¢å¿µ <a href="http://www.xjp.cc/" target="_blank" rel="noopener">http://www.xjp.cc/</a><br>å¤§é¹å¿— <a href="http://dapengde.com/" target="_blank" rel="noopener">http://dapengde.com/</a><br>åœŸæœ¨è¾¾äºº <a href="http://tumudaren.com/" target="_blank" rel="noopener">http://tumudaren.com/</a><br>æˆ´ç¿å¯ <a href="http://cn.derekyang.us/" target="_blank" rel="noopener">http://cn.derekyang.us/</a><br>dudoåšå®¢<a href="http://dudo.org/" target="_blank" rel="noopener">http://dudo.org/</a></p>
<p>åˆ˜æœªé¹<br><a href="http://mindhacks.cn/" target="_blank" rel="noopener">http://mindhacks.cn/</a></p>
<p>ChildhoodAndy<br><a href="http://dabing1022.github.io/" target="_blank" rel="noopener">http://dabing1022.github.io/</a></p>
<p>john-scalzi<br><a href="http://whatever.scalzi.com/" target="_blank" rel="noopener">http://whatever.scalzi.com/</a></p>
<p>Teckoo<br><a href="http://teckoo.com/" target="_blank" rel="noopener">http://teckoo.com/</a></p>
<p>æŸ³æš—èŠ±æ˜<br><a href="http://www.dehengxu.com/" target="_blank" rel="noopener">http://www.dehengxu.com/</a></p>
<p>å·©æœ‹<br><a href="http://lucida.me/" target="_blank" rel="noopener">http://lucida.me/</a></p>
<p>æ´»å°å‹‡<br><a href="http://www.atdevin.com/" target="_blank" rel="noopener">http://www.atdevin.com/</a></p>
<p>Cutsinå—éš¾è®°<br><a href="http://blog.moonless.net" target="_blank" rel="noopener">http://blog.moonless.net</a></p>
<p>é›ªè¯ºÂ·å¸•å¾·<br><a href="http://www.snowperd.com" target="_blank" rel="noopener">http://www.snowperd.com</a></p>
<p>Yusky<br><a href="https://yusky.me" target="_blank" rel="noopener">https://yusky.me</a></p>
<p>æµ·åº•è‹é¹°(tank)åšå®¢<br><a href="http://blog.51yip.com/" target="_blank" rel="noopener">http://blog.51yip.com/</a></p>
<p>DiggLife<br><a href="http://www.digglife.net/" target="_blank" rel="noopener">http://www.digglife.net/</a></p>
<p>é˜¿è¾›çš„ç½‘å¿—<br><a href="http://xinple.org/" target="_blank" rel="noopener">http://xinple.org/</a></p>
<p>ç¼–ç¨‹éšæƒ³å½•<br><a href="http://whatsdjgpp.github.io/" target="_blank" rel="noopener">http://whatsdjgpp.github.io/</a></p>
<p>ç…§ç‰›æ’<br><a href="http://www.zhaoniupai.com/" target="_blank" rel="noopener">http://www.zhaoniupai.com/</a></p>
<p>MWBæ—¥å¸¸ç¬”è®°<br><a href="http://blog.atime.me/" target="_blank" rel="noopener">http://blog.atime.me/</a></p>
<p>å²å¯’<br><a href="https://lvwenhan.com/" target="_blank" rel="noopener">https://lvwenhan.com/</a></p>
<p>æ±Ÿæ–°å®‡çš„åšå®¢<br><a href="http://www.cnblogs.com/php5/" target="_blank" rel="noopener">http://www.cnblogs.com/php5/</a></p>
<p>å¿—å­˜é«˜è¿œ<br><a href="http://www.ddazhi.com/" target="_blank" rel="noopener">http://www.ddazhi.com/</a></p>
<p>åˆ˜è£æ˜Ÿçš„åšå®¢<br><a href="https://www.liurongxing.com/" target="_blank" rel="noopener">https://www.liurongxing.com/</a></p>
<p>ä¿Šå½¦åšå®¢<br><a href="http://jybb.me/" target="_blank" rel="noopener">http://jybb.me/</a></p>
<p>å¾®å®‡å®™<br><a href="http://yzs.me/" target="_blank" rel="noopener">http://yzs.me/</a></p>
<p>æ˜å­¦çš„ç™½æ¿<br><a href="http://ksmx.me" target="_blank" rel="noopener">http://ksmx.me</a></p>
<p>D.H.Qçš„çƒ‚ç¬”å¤´<br><a href="http://dhq.me" target="_blank" rel="noopener">http://dhq.me</a></p>
<p>uniEagle<br><a href="http://blog.unieagle.net" target="_blank" rel="noopener">http://blog.unieagle.net</a></p>
<p>Sagacityâ€”â€”æ± å»ºå¼ºçš„BLOG<br><a href="http://www.cnblogs.com/chijianqiang/" target="_blank" rel="noopener">http://www.cnblogs.com/chijianqiang/</a></p>
<p>æœªæ¥çš„åšå®¢<br><a href="http://blog.sina.com.cn/ongamelive" target="_blank" rel="noopener">http://blog.sina.com.cn/ongamelive</a></p>
<p>è²åˆ©å…‹æ–¯çŒ«(Felix.mao)çš„ITæŠ€æœ¯ä¸“æ <br><a href="http://blog.csdn.net/maojudong" target="_blank" rel="noopener">http://blog.csdn.net/maojudong</a></p>
<p>æ¶æ„å¸ˆçš„æˆé•¿ä¹‹è·¯<br><a href="http://niyunjiu.iteye.com/" target="_blank" rel="noopener">http://niyunjiu.iteye.com/</a></p>
<p>æ¾èŠ±æ±Ÿä»¥å—</p>
<p><a href="http://www.cnblogs.com/iphone520/" target="_blank" rel="noopener">http://www.cnblogs.com/iphone520/</a></p>
<p><a href="http://www.blogjava.net/greatyuqing/" target="_blank" rel="noopener">http://www.blogjava.net/greatyuqing/</a><br><a href="http://nqdeng.github.io/7-days-nodejs/" target="_blank" rel="noopener">http://nqdeng.github.io/7-days-nodejs/</a><br><a href="http://www.code521.com/" target="_blank" rel="noopener">http://www.code521.com/</a><br><a href="http://www.yexi.ml/" target="_blank" rel="noopener">http://www.yexi.ml/</a><br><a href="http://blog.csdn.net/lord_is_layuping" target="_blank" rel="noopener">http://blog.csdn.net/lord_is_layuping</a></p>
<p>Snowolfçš„æ„å¢ƒç©ºé—´ï¼<br><a href="http://snowolf.iteye.com" target="_blank" rel="noopener">http://snowolf.iteye.com</a></p>
<p>IFATIMA<br><a href="http://ifatima.lofter.com" target="_blank" rel="noopener">http://ifatima.lofter.com</a></p>
<p>Rei<br><a href="http://chloerei.com" target="_blank" rel="noopener">http://chloerei.com</a></p>
<p><a href="mailto:Peter@Norvig.com" target="_blank" rel="noopener">Peter@Norvig.com</a><br><a href="http://norvig.com" target="_blank" rel="noopener">http://norvig.com</a></p>
<p>Brad Fitzpatrick<br><a href="http://bradfitz.com" target="_blank" rel="noopener">http://bradfitz.com</a></p>
<p>Paul Graham<br><a href="http://www.paulgraham.com/" target="_blank" rel="noopener">http://www.paulgraham.com/</a></p>
<p>ihower { blogging }<br><a href="https://ihower.tw/blog/" target="_blank" rel="noopener">https://ihower.tw/blog/</a></p>
<p>Ri Xu Online<br><a href="https://xuri.me/" target="_blank" rel="noopener">https://xuri.me/</a></p>
<p><a href="http://www.cnblogs.com/wuyinan0126/p/4604109.html" target="_blank" rel="noopener">http://www.cnblogs.com/wuyinan0126/p/4604109.html</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-macOS ä¸‹çš„ tree å‘½ä»¤" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/20/macOS ä¸‹çš„ tree å‘½ä»¤/" class="article-date">
      <time datetime="2016-07-20T11:21:22.000Z" itemprop="datePublished">2016-07-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="macä¸‹çš„treeå‘½ä»¤"><a href="#macä¸‹çš„treeå‘½ä»¤" class="headerlink" title="macä¸‹çš„treeå‘½ä»¤"></a>macä¸‹çš„treeå‘½ä»¤</h1><p>ã€€ã€€åœ¨é»˜è®¤å®‰è£…å®‰è£…çš„macä¸‹æ²¡æœ‰æ‰¾åˆ°treeå‘½ä»¤ï¼Œæ‰¾äº†ä¸€ä¸‹åŸæ¥æœ‰ä¸ªæ¯”è¾ƒæµæ°“çš„è§£å†³åŠæ³•ï¼š<br>find . -print | sed -e â€˜s;[^/]<em>/;|<strong><strong>;g;s;</strong></strong>|; |;gâ€™<br>ã€€ã€€è¿™ä¸ªå‘½ä»¤è¡Œè·‘èµ·æ¥ç±»ä¼¼å¹³å¸¸treeçš„æ•ˆæœï¼Œæ¯”å¦‚ï¼š<br>.<br>|<strong><strong>extra<br>| |</strong></strong>httpd-autoindex.conf<br>| |<strong><strong>httpd-dav.conf<br>| |</strong></strong>httpd-default.conf<br>| |<strong><strong>httpd-info.conf<br>| |</strong></strong>httpd-languages.conf<br>| |<strong><strong>httpd-manual.conf<br>| |</strong></strong>httpd-mpm.conf<br>| |<strong><strong>httpd-multilang-errordoc.conf<br>| |</strong></strong>httpd-ssl.conf<br>| |<strong><strong>httpd-userdir.conf<br>| |</strong></strong>httpd-vhosts.conf<br>|<strong><strong>httpd.conf<br>|</strong></strong>magic<br>|<strong><strong>mime.types<br>|</strong></strong>original<br>| |<strong><strong>extra<br>| | |</strong></strong>httpd-autoindex.conf<br>| | |<strong><strong>httpd-dav.conf<br>| | |</strong></strong>httpd-default.conf<br>| | |<strong><strong>httpd-info.conf<br>| | |</strong></strong>httpd-languages.conf<br>| | |<strong><strong>httpd-manual.conf<br>| | |</strong></strong>httpd-mpm.conf<br>| | |<strong><strong>httpd-multilang-errordoc.conf<br>| | |</strong></strong>httpd-ssl.conf<br>| | |<strong><strong>httpd-userdir.conf<br>| | |</strong></strong>httpd-vhosts.conf<br>| |<strong><strong>httpd.conf<br>|</strong></strong>other<br>| |<strong><strong>bonjour.conf<br>| |</strong></strong>php5.conf<br>|____users<br>ã€€ã€€å†™ä¸€ä¸ªaliasåˆ°~/.bash_profileé‡Œï¼Œå°±æ›´æ–¹ä¾¿äº†:<br>alias tree=â€find . -print | sed -e â€˜s;[^/]</em>/;|<strong><strong>;g;s;</strong></strong>|; |;gâ€™â€<br>ã€€ã€€è§‰å¾—æ–‡ç« æœ‰ç”¨ï¼Ÿç«‹å³ï¼š å’Œæœ‹å‹ä¸€èµ· å…±å­¦ä¹  å…±è¿›æ­¥</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Linuxå°±è¯¥è¿™ä¹ˆå­¦ç¬¬äº”æœŸåŸ¹è®­ç¬”è®°" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/04/Linuxå°±è¯¥è¿™ä¹ˆå­¦ç¬¬äº”æœŸåŸ¹è®­ç¬”è®°/" class="article-date">
      <time datetime="2016-07-04T11:03:50.000Z" itemprop="datePublished">2016-07-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/04/Linuxå°±è¯¥è¿™ä¹ˆå­¦ç¬¬äº”æœŸåŸ¹è®­ç¬”è®°/">Linuxå°±è¯¥è¿™ä¹ˆå­¦ç¬¬äº”æœŸåŸ¹è®­ç¬”è®°</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.linuxprobe.com/chapter-00.html" target="_blank" rel="noopener">Linuxå°±è¯¥è¿™ä¹ˆå­¦</a><a href="http://www.linuxprobe.com/tools" target="_blank" rel="noopener">è½¯ä»¶èµ„æºåº“</a></p>
<blockquote>
<p>æŠ€æœ¯æ˜¯ç”¨æ¥ä¸ºäººæœåŠ¡ï¼Œè€Œä¸äººé™åˆ¶äºè¿™ä¸ªæŠ€æœ¯å¿…é¡»è¦å­¦ä¼šå®ƒï¼Œè¦å­¦å°±è¦å­¦æœ‰ç”¨çš„ä¸œè¥¿ã€‚</p>
</blockquote>
<h2 id="ç¬¬ä¸€èŠ‚è¯¾"><a href="#ç¬¬ä¸€èŠ‚è¯¾" class="headerlink" title="ç¬¬ä¸€èŠ‚è¯¾"></a>ç¬¬ä¸€èŠ‚è¯¾</h2><h3 id="çº¢å¸½è®¤è¯-Red-Hat-Certified"><a href="#çº¢å¸½è®¤è¯-Red-Hat-Certified" class="headerlink" title="çº¢å¸½è®¤è¯ Red Hat Certified"></a>çº¢å¸½è®¤è¯ <a href="http://www.linuxprobe.com/redhat-certificate" target="_blank" rel="noopener">Red Hat Certified</a></h3><p>RHCSA(Red Hat Certified System Administor)<br>é’ˆå¯¹ç³»ç»Ÿçš„ç®¡ç†</p>
<p>RHCE(Red Hat Certified Engineer)<br>é’ˆå¯¹æœåŠ¡çš„ç®¡ç†</p>
<p>RHCA(Red Hat Certified Arch)<br>é’ˆå¯¹çº¢å¸½è‡ªå®¶äº§å“çš„ç®¡ç†</p>
<p>æ¨èå­¦ä¹ çš„RHCAæ–¹å‘ï¼š<br>401ã€436ã€318ã€413ã€442<br>å®‰å…¨ã€è°ƒä¼˜ã€openstackã€å‚¨å­˜</p>
<h3 id="ç¨»ç››å’Œå¤«çš„ä¹¦ã€Šæ´»æ³•ã€‹"><a href="#ç¨»ç››å’Œå¤«çš„ä¹¦ã€Šæ´»æ³•ã€‹" class="headerlink" title="ç¨»ç››å’Œå¤«çš„ä¹¦ã€Šæ´»æ³•ã€‹"></a>ç¨»ç››å’Œå¤«çš„ä¹¦ã€Šæ´»æ³•ã€‹</h3><blockquote>
<p>â€œå·¥ä½œé©¬é©¬è™è™ï¼Œåªæƒ³åœ¨å…´è¶£å’Œæ¸¸æˆä¸­å¯»è§…å¿«æ´»ï¼Œå……å…¶é‡åªèƒ½è·å¾—ä¸€æ—¶çš„å¿«æ„Ÿï¼Œç»ä¸èƒ½å°åˆ°ä»å¿ƒåº•æ¶Œå‡ºçš„æƒŠå–œå’Œå¿«ä¹ï¼Œä½†æ¥è‡ªå·¥ä½œçš„å–œæ‚¦å¹¶ä¸æƒ³ç³–æœé‚£æ ·â€“æ”¾è¿›å˜´é‡Œå°±ç”œå‘³åè¶³ï¼Œè€Œæ˜¯éœ€è¦ä»è‹¦åŠ³ä¸è‰°è¾›ä¸­æ¸—å‡ºï¼Œå› æ­¤å½“æˆ‘ä»¬èšç²¾ä¼šç¥ï¼Œå­œå­œä¸å€¦ï¼Œå®¢æœè‰°è¾›åçš„æˆå°±æ„Ÿï¼Œä¸–ä¸Šæ²¡æœ‰å“ªç§å–œæ‚¦å¯ä»¥ç±»æ¯”ã€‚â€</p>
</blockquote>
<blockquote>
<p>â€œæ›´ä½•å†µäººç±»ç”Ÿæ´»ä¸­å·¥ä½œå æ®äº†è¾ƒå¤§çš„æ¯”é‡ï¼Œå¦‚æœä¸èƒ½ä»åŠ³åŠ¨ä¸­ã€å·¥ä½œä¸­è·å¾—å……å®æ„Ÿï¼Œé‚£ä¹ˆå³ä½¿ä»åˆ«çš„åœ°æ–¹æ‰¾åˆ°å¿«ä¹ï¼Œæœ€ç»ˆæˆ‘ä»¬ä»ç„¶ä¼šæ„Ÿåˆ°ç©ºè™šå’Œç¼ºæ†¾ã€‚â€</p>
</blockquote>
<h3 id="å¼€æºå…±äº«ç²¾ç¥-å¸¸è§å¼€æºåè®®"><a href="#å¼€æºå…±äº«ç²¾ç¥-å¸¸è§å¼€æºåè®®" class="headerlink" title="å¼€æºå…±äº«ç²¾ç¥-å¸¸è§å¼€æºåè®®"></a>å¼€æºå…±äº«ç²¾ç¥-å¸¸è§å¼€æºåè®®</h3><h4 id="GPL"><a href="#GPL" class="headerlink" title="GPL"></a>GPL</h4><p>GPL(GNU General Public License)<br>å¤åˆ¶è‡ªç”±ï¼š<br>ä¼ æ’­è‡ªç”±ï¼š<br>æ”¶è´¹è‡ªç”±ï¼š<br>ä¿®æ”¹è‡ªç”±ï¼š</p>
<h4 id="BSD"><a href="#BSD" class="headerlink" title="BSD"></a>BSD</h4><p>BSD(Berkeley Software Distribution)</p>
<h4 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h4><p>Apache(Apache Licence Version)</p>
<h4 id="MPL"><a href="#MPL" class="headerlink" title="MPL"></a>MPL</h4><p>MPL(The Mozilla Public License)</p>
<h4 id="MIT"><a href="#MIT" class="headerlink" title="MIT"></a>MIT</h4><p>MIT(Massachusetts Instiute of Technology)<br>ç›®å‰é™åˆ¶æœ€å°‘çš„å¼€æºåè®®ä¹‹ä¸€ï¼Œåªéœ€è¦ç¨‹åºçš„å¼€å‘è€…åœ¨ä¿®æ”¹åçš„æºä»£ç ä¸­ä¿ç•™åŸä½œè€…çš„è®¸å¯ä¿¡æ¯ï¼Œæ‰€ä»¥æ¯”è¾ƒé€‚åˆäºå•†ä¸šè½¯ä»¶ã€‚ </p>
<h3 id="ä¸ºä»€ä¹ˆå­¦ä¹ Linuxç³»ç»Ÿï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå­¦ä¹ Linuxç³»ç»Ÿï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå­¦ä¹ Linuxç³»ç»Ÿï¼Ÿ"></a>ä¸ºä»€ä¹ˆå­¦ä¹ Linuxç³»ç»Ÿï¼Ÿ</h3><p>1991å¹´10æœˆä»½ç”±èŠ¬å…°èµ«å°”è¾›åŸºå¤§å­¦çš„åœ¨æ ¡ç”ŸLinus Torvaldsç¼–å†™äº†ä¸€æ¬¾å«åšLinuxçš„æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚<br>1995å¹´1æœˆä»½ç”±Bob Youngä¾æ®Linuxå†…æ ¸ï¼Œå¹¶é›†æˆäº†ä¼—å¤šçš„æºä»£ç å’Œç¨‹åºè½¯ä»¶ï¼Œåˆ›åŠäº†RedHatå…¬å¸å¹¶å¼€å§‹å‡ºå”®æŠ€æœ¯æœåŠ¡ã€‚</p>
<h3 id="å¸¸è§çš„Linuxå‘è¡Œç‰ˆ"><a href="#å¸¸è§çš„Linuxå‘è¡Œç‰ˆ" class="headerlink" title="å¸¸è§çš„Linuxå‘è¡Œç‰ˆ"></a>å¸¸è§çš„Linuxå‘è¡Œç‰ˆ</h3><p>RHEL(Red Hat Enterprise Linux)<br>CentOS(Community Enterprise Operating System)<br>Fedora</p>
<p>Debian<br>Ubuntu</p>
<p>openSUSE</p>
<p>Gentoo</p>
<h2 id="ç¬¬äºŒèŠ‚è¯¾"><a href="#ç¬¬äºŒèŠ‚è¯¾" class="headerlink" title="ç¬¬äºŒèŠ‚è¯¾"></a>ç¬¬äºŒèŠ‚è¯¾</h2><h3 id="VMware-Workstation-12"><a href="#VMware-Workstation-12" class="headerlink" title="VMware Workstation 12"></a>VMware Workstation 12</h3><p>VMware Workstation 12 å®‰è£… RHEL7.0</p>
<h3 id="é‡ç½®rootç”¨æˆ·å¯†ç "><a href="#é‡ç½®rootç”¨æˆ·å¯†ç " class="headerlink" title="é‡ç½®rootç”¨æˆ·å¯†ç "></a><a href="http://www.linuxprobe.com/chapter-01.html#14_root" target="_blank" rel="noopener">é‡ç½®rootç”¨æˆ·å¯†ç </a></h3><p>è¿›å…¥bootå¼•å¯¼ç•Œé¢</p>
<p>æŒ‰eé”®ç¼–è¾‘å¼•å¯¼ä¿¡æ¯</p>
<p>æŸ¥æ‰¾linux16å¼€å¤´çš„è¡Œå¹¶åœ¨è¡Œå°¾æ·»åŠ â€rd.breakâ€œå‚æ•°</p>
<p>æŒ‰crtl + xé”®</p>
<p>ä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount,rw /sysroot</span><br><span class="line">chroot /sysroot</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æ–°çš„rootå¯†ç "</span> | passwd --stdin root</span><br><span class="line">touch /.autorelabel</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h3 id="çº¢å¸½è½¯ä»¶åŒ…ç®¡ç†å™¨"><a href="#çº¢å¸½è½¯ä»¶åŒ…ç®¡ç†å™¨" class="headerlink" title="çº¢å¸½è½¯ä»¶åŒ…ç®¡ç†å™¨"></a>çº¢å¸½è½¯ä»¶åŒ…ç®¡ç†å™¨</h3><p>RPM(Redhat Package Manager)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…è½¯ä»¶</span></span><br><span class="line">rpm -ivh filename.rpm</span><br><span class="line"><span class="comment">#å‡çº§è½¯ä»¶</span></span><br><span class="line">rpm -Uvh filename.rpm</span><br><span class="line"><span class="comment">#å¸è½½è½¯ä»¶</span></span><br><span class="line">rpm -e filename.rpm</span><br><span class="line"><span class="comment">#æŸ¥è¯¢è½¯ä»¶çš„æè¿°ä¿¡æ¯</span></span><br><span class="line">rpm -qpi filename.rpm</span><br><span class="line"><span class="comment">#åˆ—å‡ºè½¯ä»¶çš„æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">rpm -qpl filename.rpm</span><br><span class="line"><span class="comment">#æŸ¥è¯¢æ–‡ä»¶å±äºå“ªä¸ªRPM</span></span><br><span class="line">rpm -qf filename</span><br></pre></td></tr></table></figure>
<h3 id="Yumè½¯ä»¶ä»“åº“"><a href="#Yumè½¯ä»¶ä»“åº“" class="headerlink" title="Yumè½¯ä»¶ä»“åº“"></a>Yumè½¯ä»¶ä»“åº“</h3><p>yumä»“åº“é…ç½®æ–‡ä»¶å‡é¡»ä»¥.repoç»“å°¾å¹¶å­˜æ”¾åœ¨/etc/yum.repos.d/ç›®å½•ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/etc/yum.repos.d/rhel.repo</span><br><span class="line"></span><br><span class="line">[rhel-media]:yumæºçš„åç§°ï¼Œå¯è‡ªå®šä¹‰ã€‚</span><br><span class="line">name=rhel7:yumä»“åº“çš„åç§°ï¼Œå¯è‡ªå®šä¹‰ã€‚</span><br><span class="line">baseurl=:æºçš„åœ°å€æä¾›ï¼ˆftpã€httpã€fileä¸‰ç§æ–¹å¼ï¼‰</span><br><span class="line">enable=1: è®¾ç½®æ­¤æºæ˜¯å¦å¯ç”¨ï¼Œ1ä¸ºå¯ç”¨ï¼Œ0ä¸ºç¦ç”¨ã€‚</span><br><span class="line">gpgcheck=1:è®¾ç½®æ­¤æºæ˜¯å¦æ ¡æ£€æ–‡ä»¶ï¼Œ1ä¸ºæ ¡æ£€ï¼Œ0ä¸ºä¸æ ¡æ£€ã€‚</span><br><span class="line">gpgkey=:è‹¥ä¸ºæ ¡æ£€æ–‡ä»¶è¯·æŒ‡å®šå…¬é’¥æ–‡ä»¶åœ°å€ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ›´æ–°</span></span><br><span class="line">yum update</span><br><span class="line"><span class="comment">#æ¸…ç†ç¼“å­˜</span></span><br><span class="line">yum clean all</span><br></pre></td></tr></table></figure>
<h3 id="Systemdåˆå§‹åŒ–è¿›ç¨‹"><a href="#Systemdåˆå§‹åŒ–è¿›ç¨‹" class="headerlink" title="Systemdåˆå§‹åŒ–è¿›ç¨‹"></a>Systemdåˆå§‹åŒ–è¿›ç¨‹</h3><h4 id="initå’Œsystemdè¿è¡Œçº§åˆ«å¯¹æ¯”"><a href="#initå’Œsystemdè¿è¡Œçº§åˆ«å¯¹æ¯”" class="headerlink" title="initå’Œsystemdè¿è¡Œçº§åˆ«å¯¹æ¯”"></a>initå’Œsystemdè¿è¡Œçº§åˆ«å¯¹æ¯”</h4><table>
<thead>
<tr>
<th>Sysvinitè¿è¡Œçº§åˆ«</th>
<th>Systemdç›®æ ‡åç§°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>runlevel0.target, poweroff.target</td>
<td>å…³æœº</td>
</tr>
<tr>
<td>1</td>
<td>runlevel1.taget, rescue.target</td>
<td>å•ç”¨æˆ·æ¨¡å¼</td>
</tr>
<tr>
<td>2</td>
<td>runlevel2.target, multi-user.target</td>
<td>ç­‰åŒäºçº§åˆ«3</td>
</tr>
<tr>
<td>3</td>
<td>runlevel3.target, multi-user.target</td>
<td>å¤šç”¨æˆ·çš„æ–‡æœ¬ç•Œé¢</td>
</tr>
<tr>
<td>4</td>
<td>runlevel4.target, multi-user.target</td>
<td>ç­‰åŒäºçº§åˆ«3</td>
</tr>
<tr>
<td>5</td>
<td>runlevel5.target, graphical.target</td>
<td>å¤šç”¨æˆ·çš„å›¾å½¢ç•Œé¢</td>
</tr>
<tr>
<td>6</td>
<td>runlevel6.target, reboot.target</td>
<td>é‡å¯</td>
</tr>
<tr>
<td>emergency</td>
<td>emergency.target</td>
<td>ç´§æ€¥shell</td>
</tr>
</tbody>
</table>
<h4 id="æŸ¥çœ‹è¿è¡Œç›®æ ‡"><a href="#æŸ¥çœ‹è¿è¡Œç›®æ ‡" class="headerlink" title="æŸ¥çœ‹è¿è¡Œç›®æ ‡"></a>æŸ¥çœ‹è¿è¡Œç›®æ ‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹è¿è¡Œç›®æ ‡</span></span><br><span class="line">runlevel</span><br><span class="line"><span class="comment">#æ›´æ”¹é»˜è®¤è¿è¡Œç›®æ ‡ï¼Œä¸ä¼šç«‹å³æ›´æ”¹è¿è¡Œç›®æ ‡ï¼Œé‡å¯åç”Ÿæ•ˆã€‚</span></span><br><span class="line">systemctl <span class="built_in">set</span>-default multi-user.target</span><br><span class="line">systemctl <span class="built_in">set</span>-default graphical.target</span><br><span class="line"><span class="comment">#ç«‹å³æ›´æ”¹è¿è¡Œçº§åˆ«é‡å¯åå¤±æ•ˆ</span></span><br><span class="line">systemctl isolate multi-user.target</span><br></pre></td></tr></table></figure>
<h3 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h3><p>sh<br>bash(Bourne-Again Shell)<br>zsh<br>csh</p>
<h3 id="æ‰§è¡ŒæŸ¥çœ‹å¸®åŠ©å‘½ä»¤"><a href="#æ‰§è¡ŒæŸ¥çœ‹å¸®åŠ©å‘½ä»¤" class="headerlink" title="æ‰§è¡ŒæŸ¥çœ‹å¸®åŠ©å‘½ä»¤"></a>æ‰§è¡ŒæŸ¥çœ‹å¸®åŠ©å‘½ä»¤</h3><h4 id="man"><a href="#man" class="headerlink" title="man"></a>man</h4><p>å‘½ä»¤åç§° å‘½ä»¤å‚æ•° å‘½ä»¤å¯¹è±¡<br>å‘½ä»¤å’Œå‚æ•°å’Œå¯¹è±¡ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼åˆ†å‰²<br>é•¿æ ¼å¼ man â€“help<br>çŸ­æ ¼å¼ man -h</p>
<p>manå‘½ä»¤çš„å¯ç”¨å¸®åŠ©æ–‡æ¡£åˆ†ç±»æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>ä»£ç </th>
<th>ä»£è¡¨å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>æ™®é€šçš„å‘½ä»¤</td>
</tr>
<tr>
<td>2</td>
<td>å†…æ ¸è°ƒç”¨çš„å‡½æ•°ä¸å·¥å…·</td>
</tr>
<tr>
<td>3</td>
<td>å¸¸è§çš„å‡½æ•°ä¸å‡½æ•°åº“</td>
</tr>
<tr>
<td>4</td>
<td>è®¾å¤‡æ–‡ä»¶çš„è¯´æ˜</td>
</tr>
<tr>
<td>5</td>
<td>é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>6</td>
<td>æ¸¸æˆ</td>
</tr>
<tr>
<td>7</td>
<td>æƒ¯ä¾‹ä¸åè®®</td>
</tr>
<tr>
<td>8</td>
<td>ç®¡ç†å‘˜å¯ç”¨çš„å‘½ä»¤</td>
</tr>
<tr>
<td>9</td>
<td>å†…æ ¸ç›¸å…³çš„æ–‡ä»¶</td>
</tr>
</tbody>
</table>
<p>å¸®åŠ©æ–‡æ¡£çš„ç›®å½•ç»“æ„ä¸æ“ä½œæ–¹æ³•</p>
<table>
<thead>
<tr>
<th>ç»“æ„åç§°</th>
<th>ä»£è¡¨æ„ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>NAME</td>
<td>å‘½ä»¤çš„åç§°</td>
</tr>
<tr>
<td>SYNOPSIS</td>
<td>å‚æ•°çš„å¤§è‡´ä½¿ç”¨æ–¹æ³•</td>
</tr>
<tr>
<td>DESCRIPTION</td>
<td>ä»‹ç»è¯´æ˜</td>
</tr>
<tr>
<td>EXAMPLES</td>
<td>æ¼”ç¤ºï¼ˆé™„å¸¦ç®€å•è¯´æ˜ï¼‰</td>
</tr>
<tr>
<td>OVERVIEW</td>
<td>æ¦‚è¿°</td>
</tr>
<tr>
<td>DEFAULTS</td>
<td>é»˜è®¤çš„åŠŸèƒ½</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>å…·ä½“çš„å¯ç”¨é€‰é¡¹ï¼ˆå¸¦ä»‹ç»ï¼‰</td>
</tr>
<tr>
<td>ENVIRONMENT</td>
<td>ç¯å¢ƒå˜é‡</td>
</tr>
<tr>
<td>FILES</td>
<td>ç”¨åˆ°çš„æ–‡ä»¶</td>
</tr>
<tr>
<td>SEE ALSO</td>
<td>ç›¸å…³çš„èµ„æ–™</td>
</tr>
<tr>
<td>HISTORY</td>
<td>ç»´æŠ¤å†å²ä¸è”ç³»æ–¹å¼</td>
</tr>
</tbody>
</table>
<p>manå‘½ä»¤çš„æ“ä½œæŒ‰é”®</p>
<table>
<thead>
<tr>
<th>æŒ‰é”®</th>
<th>ç”¨å¤„</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç©ºæ ¼é”®</td>
<td>å‘ä¸‹ç¿»ä¸€é¡µ</td>
</tr>
<tr>
<td>[Page Down]</td>
<td>å‘ä¸‹ç¿»ä¸€é¡µ</td>
</tr>
<tr>
<td>[Page Up]</td>
<td>å‘ä¸Šç¿»ä¸€é¡µ</td>
</tr>
<tr>
<td>[HOME]</td>
<td>ç›´æ¥å‰å¾€é¦–é¡µ</td>
</tr>
<tr>
<td>[END]</td>
<td>ç›´æ¥å‰å¾€å°¾é¡µ</td>
</tr>
<tr>
<td>/å…³é”®å­—</td>
<td>ä»ä¸Šè‡³ä¸‹æœç´¢æŸä¸ªå…³é”®å­—</td>
</tr>
<tr>
<td>?å…³é”®å­—</td>
<td>ä»ä¸‹è‡³ä¸Šæœç´¢æŸä¸ªå…³é”®å­—</td>
</tr>
<tr>
<td>n</td>
<td>å®šä½åˆ°ä¸‹ä¸€ä¸ªæœç´¢åˆ°çš„å…³é”®å­—</td>
</tr>
<tr>
<td>N</td>
<td>å®šä½åˆ°ä¸Šä¸€ä¸ªæœç´¢åˆ°çš„å…³é”®å­—</td>
</tr>
<tr>
<td>q</td>
<td>é€€å‡ºå¸®åŠ©æ–‡æ¡£</td>
</tr>
</tbody>
</table>
<h2 id="ç¬¬ä¸‰èŠ‚è¯¾"><a href="#ç¬¬ä¸‰èŠ‚è¯¾" class="headerlink" title="ç¬¬ä¸‰èŠ‚è¯¾"></a>ç¬¬ä¸‰èŠ‚è¯¾</h2><h3 id="å¸¸ç”¨ç³»ç»Ÿå·¥ä½œå‘½ä»¤"><a href="#å¸¸ç”¨ç³»ç»Ÿå·¥ä½œå‘½ä»¤" class="headerlink" title="å¸¸ç”¨ç³»ç»Ÿå·¥ä½œå‘½ä»¤"></a>å¸¸ç”¨ç³»ç»Ÿå·¥ä½œå‘½ä»¤</h3><h4 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"å­—ç¬¦ä¸²"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span></span><br></pre></td></tr></table></figure>
<h4 id="date"><a href="#date" class="headerlink" title="date"></a>date</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¼å¼åŒ–æ—¶é—´ %Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%Måˆ†%Sç§’</span></span><br><span class="line">date <span class="string">"+%Y-%m-%d %H:%M:%S"</span></span><br><span class="line"><span class="comment">#æ˜¾ç¤ºä»Šå¤©æ˜¯ä»Šå¹´çš„ç¬¬å‡ å¤©</span></span><br><span class="line">date <span class="string">"+%j"</span></span><br></pre></td></tr></table></figure>
<h4 id="reboot"><a href="#reboot" class="headerlink" title="reboot"></a>reboot</h4><p>é‡å¯</p>
<h4 id="halt"><a href="#halt" class="headerlink" title="halt"></a>halt</h4><h4 id="poweroff"><a href="#poweroff" class="headerlink" title="poweroff"></a>poweroff</h4><p>å…³æœº</p>
<h4 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é‡å¯</span></span><br><span class="line">shutdown -r now</span><br><span class="line"><span class="comment">#å…³æœº</span></span><br><span class="line">shutdown -h now</span><br></pre></td></tr></table></figure>
<h4 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŒ‡å®šä¸‹è½½æ–‡ä»¶ç›®å½•</span></span><br><span class="line">wget -O /path/to/file</span><br><span class="line"><span class="comment">#æ–­ç‚¹ç»­ä¼ </span></span><br><span class="line">wget -c</span><br></pre></td></tr></table></figure>
<h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -aux</span><br><span class="line">ps -ef</span><br></pre></td></tr></table></figure>
<h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">top - 22:45:42 up  1:20,  1 user,  load average: 0.00, 0.01, 0.01</span><br><span class="line">Tasks: 123 total,   2 running, 121 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.1 us,  0.0 sy,  0.0 ni, 99.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  3877776 total,  3598220 free,   121956 used,   157600 buff/cache</span><br><span class="line">KiB Swap:  4063228 total,  4063228 free,        0 used.  3537092 avail Mem</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">    1 root      20   0  193700   6836   4056 S   0.0  0.2   0:01.21 systemd</span><br><span class="line">    2 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kthreadd</span><br></pre></td></tr></table></figure>
<h4 id="pidof"><a href="#pidof" class="headerlink" title="pidof"></a>pidof</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pidof sshd</span><br></pre></td></tr></table></figure>
<h4 id="pgrep"><a href="#pgrep" class="headerlink" title="pgrep"></a>pgrep</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pgrep sshd</span><br></pre></td></tr></table></figure>
<h4 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9</span><br></pre></td></tr></table></figure>
<h4 id="killall"><a href="#killall" class="headerlink" title="killall"></a>killall</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall sshd</span><br></pre></td></tr></table></figure>
<h4 id="jobs"><a href="#jobs" class="headerlink" title="jobs"></a>jobs</h4><h4 id="fg"><a href="#fg" class="headerlink" title="fg"></a>fg</h4><h3 id="ç³»ç»ŸçŠ¶æ€æ£€æµ‹å‘½ä»¤"><a href="#ç³»ç»ŸçŠ¶æ€æ£€æµ‹å‘½ä»¤" class="headerlink" title="ç³»ç»ŸçŠ¶æ€æ£€æµ‹å‘½ä»¤"></a>ç³»ç»ŸçŠ¶æ€æ£€æµ‹å‘½ä»¤</h3><h4 id="ifconfig-ip"><a href="#ifconfig-ip" class="headerlink" title="ifconfig ip"></a>ifconfig ip</h4><h4 id="uname"><a href="#uname" class="headerlink" title="uname"></a>uname</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure>
<h4 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h4><h4 id="free"><a href="#free" class="headerlink" title="free"></a>free</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br><span class="line">free -m</span><br></pre></td></tr></table></figure>
<h4 id="who"><a href="#who" class="headerlink" title="who"></a>who</h4><h4 id="w"><a href="#w" class="headerlink" title="w"></a>w</h4><h4 id="id"><a href="#id" class="headerlink" title="id"></a>id</h4><h4 id="last"><a href="#last" class="headerlink" title="last"></a>last</h4><h4 id="history"><a href="#history" class="headerlink" title="history"></a>history</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#æ¸…é™¤å†å²è®°å½•ï¼Œå¿…é¡»é€€å‡ºç»ˆç«¯æ‰ä¼šæ¸…ç†æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚</span><br><span class="line">history -c</span><br><span class="line">#ï¼åŠ ä¸Šå†å²è®°å½•çš„æ•°å­—å·ï¼Œæ‰§è¡Œè¿™ä¸ªæ•°å­—åçš„å‘½ä»¤ã€‚</span><br><span class="line">!22</span><br></pre></td></tr></table></figure>
<h4 id="sosreport-åªç”¨RHELæœ‰è¿™ä¸ªå‘½ä»¤"><a href="#sosreport-åªç”¨RHELæœ‰è¿™ä¸ªå‘½ä»¤" class="headerlink" title="sosreport åªç”¨RHELæœ‰è¿™ä¸ªå‘½ä»¤"></a>sosreport åªç”¨RHELæœ‰è¿™ä¸ªå‘½ä»¤</h4><h3 id="å·¥ä½œç›®å½•åˆ‡æ¢å‘½ä»¤"><a href="#å·¥ä½œç›®å½•åˆ‡æ¢å‘½ä»¤" class="headerlink" title="å·¥ä½œç›®å½•åˆ‡æ¢å‘½ä»¤"></a>å·¥ä½œç›®å½•åˆ‡æ¢å‘½ä»¤</h3><h4 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h4><h4 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ‡æ¢åˆ°ç”¨æˆ·å®¶ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="comment">#åˆ‡æ¢åˆ°ä¸Šä¸€æ¬¡çš„ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> -</span><br></pre></td></tr></table></figure>
<h4 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h4><h3 id="æ–‡æœ¬æ–‡ä»¶ç¼–è¾‘å‘½ä»¤"><a href="#æ–‡æœ¬æ–‡ä»¶ç¼–è¾‘å‘½ä»¤" class="headerlink" title="æ–‡æœ¬æ–‡ä»¶ç¼–è¾‘å‘½ä»¤"></a>æ–‡æœ¬æ–‡ä»¶ç¼–è¾‘å‘½ä»¤</h3><h4 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h4><h4 id="more"><a href="#more" class="headerlink" title="more"></a>more</h4><h4 id="head"><a href="#head" class="headerlink" title="head"></a>head</h4><h4 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h4><h4 id="od-è½¬æ¢æ–‡æœ¬çš„å­—ç¬¦ç¼–ç "><a href="#od-è½¬æ¢æ–‡æœ¬çš„å­—ç¬¦ç¼–ç " class="headerlink" title="od è½¬æ¢æ–‡æœ¬çš„å­—ç¬¦ç¼–ç "></a>od è½¬æ¢æ–‡æœ¬çš„å­—ç¬¦ç¼–ç </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ˜¾ç¤ºäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶çš„åå…­è¿›åˆ¶</span></span><br><span class="line">od -t x /bin/ls</span><br></pre></td></tr></table></figure>
<h4 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰€æœ‰çš„a-zçš„å°å†™å­—æ¯è½¬æ¢ä¸ºA-Zçš„å¤§å†™å­—æ¯</span></span><br><span class="line">tr [a-z] [A-Z]</span><br></pre></td></tr></table></figure>
<h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><h4 id="stat"><a href="#stat" class="headerlink" title="stat"></a>stat</h4><h4 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-d åˆ†éš”ç¬¦ï¼šï¼Œ-f 1,2 ç¬¬ä¸€åˆ—å’Œç¬¬äºŒåˆ—</span></span><br><span class="line">cut -d : -f 1,2 /etc/passwd</span><br></pre></td></tr></table></figure>
<h4 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h4><h2 id="ç¬¬å››èŠ‚è¯¾"><a href="#ç¬¬å››èŠ‚è¯¾" class="headerlink" title="ç¬¬å››èŠ‚è¯¾"></a>ç¬¬å››èŠ‚è¯¾</h2><h3 id="æ–‡ä»¶ç›®å½•ç®¡ç†å‘½ä»¤"><a href="#æ–‡ä»¶ç›®å½•ç®¡ç†å‘½ä»¤" class="headerlink" title="æ–‡ä»¶ç›®å½•ç®¡ç†å‘½ä»¤"></a>æ–‡ä»¶ç›®å½•ç®¡ç†å‘½ä»¤</h3><h4 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h4><p>Linuxæ–‡ä»¶ä¸­æœ‰ä¸‰ç§æ—¶é—´<br>ä¿®æ”¹æ—¶é—´(mtime)ï¼šå†…å®¹ä¿®æ”¹æ—¶é—´ï¼ˆä¸åŒ…æ‹¬æƒé™çš„ï¼‰<br>æ›´æ”¹æ—¶é—´(ctime)ï¼šæ›´æ”¹æƒé™ä¸å±æ€§çš„æ—¶é—´<br>è¯»å–æ—¶é—´(atime)ï¼šè¯»å–æ–‡ä»¶å†…å®¹çš„æ—¶é—´</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹æ—¶é—´ä¿®æ”¹ä¸º2å¤©å‰ï¼ˆä¼ªé€ äº†è‡ªå·±æ²¡æœ‰åŠ¨è¿‡è¯¥æ–‡ä»¶çš„å‡è±¡ï¼‰</span></span><br><span class="line">touch -d <span class="string">"2 days ago"</span> <span class="built_in">test</span></span><br><span class="line"><span class="comment">#ä»…ä¿®æ”¹è®¿é—®æ—¶é—´</span></span><br><span class="line">touch -a</span><br><span class="line"><span class="comment">#ä»…ä¿®æ”¹ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">touch -m</span><br><span class="line"><span class="comment">#åŒæ—¶ä¿®æ”¹atimeå’Œmtime</span></span><br><span class="line">touch -d</span><br><span class="line"><span class="comment">#è¦ä¿®æ”¹æˆçš„æ—¶é—´[YYMMDDhhmm]ï¼Œä¾‹å­[201710111000]</span></span><br><span class="line">touch -t</span><br></pre></td></tr></table></figure>
<h4 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºåµŒå¥—å¼ç›®å½•ï¼Œä¾‹ /root/a/b/c,é»˜è®¤æ²¡æœ‰aç›®å½•å’Œbç›®å½•ã€‚åˆ›å»ºcç›®å½•ã€‚</span></span><br><span class="line">mkdir -p /root/a/b/c</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºåˆ›å»ºçš„è¿‡ç¨‹</span></span><br><span class="line">mkdir -v</span><br><span class="line"><span class="comment">#é»˜è®¤çš„æ–‡ä»¶ç›®å½•æƒé™</span></span><br><span class="line">mkdir -m 755</span><br></pre></td></tr></table></figure>
<h4 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¤åˆ¶ç›®å½•</span></span><br><span class="line">cp -r</span><br><span class="line"><span class="comment">#ä¿ç•™åŸæœ‰çš„æ–‡ä»¶æƒé™</span></span><br><span class="line">cp -a</span><br></pre></td></tr></table></figure>
<h4 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h4><h4 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h4><h4 id="dd"><a href="#dd" class="headerlink" title="dd"></a>dd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/root/<span class="built_in">test</span> bs=100M count=1</span><br></pre></td></tr></table></figure>
<h4 id="file"><a href="#file" class="headerlink" title="file"></a>file</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file /bin/ls</span><br></pre></td></tr></table></figure>
<h3 id="æ‰“åŒ…å‹ç¼©ä¸æœç´¢å‘½ä»¤"><a href="#æ‰“åŒ…å‹ç¼©ä¸æœç´¢å‘½ä»¤" class="headerlink" title="æ‰“åŒ…å‹ç¼©ä¸æœç´¢å‘½ä»¤"></a>æ‰“åŒ…å‹ç¼©ä¸æœç´¢å‘½ä»¤</h3><h4 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰“åŒ…ç›®å½•ï¼Œæ’é™¤æŒ‡å®šæ–‡ä»¶ã€‚--exclude</span></span><br><span class="line">tar czvf ~/etc.tar.gz /etc/* --exclude=/etc/resolv.conf</span><br><span class="line"><span class="comment">#è§£å‹ç¼©</span></span><br><span class="line">tar xzvf etc.tar.gz</span><br></pre></td></tr></table></figure>
<h4 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é€‰æ‹©å‚æ•°ä¹‹å¤–çš„é€‰é¡¹</span></span><br><span class="line">grep -v </span><br><span class="line"><span class="comment">#æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">grep -n</span><br></pre></td></tr></table></figure>
<h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨æ•´ä¸ªçš„æ–‡ä»¶ç³»ç»Ÿä¸­æ‰¾å‡ºæ‰€æœ‰å½’å±äºlinuxprobeç”¨æˆ·çš„æ–‡ä»¶å¹¶å¤åˆ¶åˆ°/root/findresultsç›®å½•</span></span><br><span class="line">find / -user linuxprobe -<span class="built_in">exec</span> cp -a &#123;&#125; /root/findresults/ \;</span><br></pre></td></tr></table></figure>
<h3 id="ç®¡é“ç¬¦ã€é‡å®šå‘ä¸ç¯å¢ƒå˜é‡"><a href="#ç®¡é“ç¬¦ã€é‡å®šå‘ä¸ç¯å¢ƒå˜é‡" class="headerlink" title="ç®¡é“ç¬¦ã€é‡å®šå‘ä¸ç¯å¢ƒå˜é‡"></a>ç®¡é“ç¬¦ã€é‡å®šå‘ä¸ç¯å¢ƒå˜é‡</h3><h4 id="ç®¡é“å‘½ä»¤ç¬¦"><a href="#ç®¡é“å‘½ä»¤ç¬¦" class="headerlink" title="ç®¡é“å‘½ä»¤ç¬¦"></a>ç®¡é“å‘½ä»¤ç¬¦</h4><p>â€œ|â€ç®¡é“å‘½ä»¤ç¬¦</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹passwdæ–‡ä»¶å¹¶ç»è¿‡ç®¡é“ä½œä¸ºgrepçš„æœç´¢å¯¹è±¡ã€‚</span></span><br><span class="line">cat /etc/passwd | grep <span class="string">'root'</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨éäº¤äº’å¼è®¾ç½®ç”¨æˆ·å¯†ç </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"å¯†ç "</span> | passwd --stdin root</span><br></pre></td></tr></table></figure>
<h4 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h4><table>
<thead>
<tr>
<th>ä»£ç </th>
<th>ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>æ ‡å‡†è¾“å…¥STDIN</td>
</tr>
<tr>
<td>1</td>
<td>æ ‡å‡†è¾“å‡ºSTDOUT</td>
</tr>
<tr>
<td>2</td>
<td>æ ‡å‡†é”™è¯¯è¾“å‡ºSTDERR</td>
</tr>
</tbody>
</table>
<p>æ ‡å‡†è¾“å‡ºé‡å®šå‘<br>â€œ&gt;â€æ¸…ç©ºè¾“å‡ºï¼Œè¦†ç›–æ–‡ä»¶å†…å®¹ã€‚<br>â€œ&gt;&gt;â€è¿½åŠ è¾“å‡ºï¼Œä¸è¦†ç›–æ–‡ä»¶å†…å®¹ã€‚</p>
<p>æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘<br>â€œ2&gt;â€æ¸…ç©ºè¾“å‡ºï¼Œè¦†ç›–æ–‡ä»¶å†…å®¹ã€‚<br>â€œ2&gt;&gt;â€è¿½åŠ è¾“å‡ºï¼Œä¸è¦†ç›–æ–‡ä»¶å†…å®¹ã€‚</p>
<p>è¾“å…¥é‡å®šå‘<br>â€œ&lt;â€å°†æ–‡ä»¶ä½œä¸ºå‘½ä»¤çš„æ ‡å‡†è¾“å…¥<br>â€œ&lt;&lt;â€ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ï¼ŒçŸ¥é“é‡è§â€œåˆ†ç•Œç¬¦â€æ‰åœæ­¢ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></p>
<h2 id="ç¬¬äº”èŠ‚è¯¾"><a href="#ç¬¬äº”èŠ‚è¯¾" class="headerlink" title="ç¬¬äº”èŠ‚è¯¾"></a>ç¬¬äº”èŠ‚è¯¾</h2><h3 id="ç®¡é“ç¬¦ã€é‡å®šå‘ä¸ç¯å¢ƒå˜é‡-1"><a href="#ç®¡é“ç¬¦ã€é‡å®šå‘ä¸ç¯å¢ƒå˜é‡-1" class="headerlink" title="ç®¡é“ç¬¦ã€é‡å®šå‘ä¸ç¯å¢ƒå˜é‡"></a>ç®¡é“ç¬¦ã€é‡å®šå‘ä¸ç¯å¢ƒå˜é‡</h3><h4 id="å‘½ä»¤è¡Œé€šé…ç¬¦"><a href="#å‘½ä»¤è¡Œé€šé…ç¬¦" class="headerlink" title="å‘½ä»¤è¡Œé€šé…ç¬¦"></a>å‘½ä»¤è¡Œé€šé…ç¬¦</h4><h5 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h5><table>
<thead>
<tr>
<th>é€šé…ç¬¦</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>?</td>
<td>åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>[0-9]</td>
<td>åŒ¹é…èŒƒå›´å†…çš„æ•°å­—</td>
</tr>
<tr>
<td>[abc]</td>
<td>åŒ¹é…abcä¸‰ä¸ªå­—ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ªå•ä¸ªå­—ç¬¦</td>
</tr>
</tbody>
</table>
<h5 id="å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦"><a href="#å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦" class="headerlink" title="å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦"></a>å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦</h5><table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>(åæ–œæ )</td>
<td>è½¬ä¹‰åé¢å•ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>â€˜â€™(å•å¼•å·)</td>
<td>è½¬ä¹‰æ‰€æœ‰çš„å­—ç¬¦</td>
</tr>
<tr>
<td>â€œâ€(åŒå¼•å·)</td>
<td>å˜é‡ä¾ç„¶ç”Ÿæ•ˆ</td>
</tr>
<tr>
<td><code></code>(åå¼•å·)</td>
<td>æ‰§è¡Œå‘½ä»¤è¯­å¥</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$(ip a)</span>"</span></span><br><span class="line"><span class="built_in">echo</span> `ip a`</span><br></pre></td></tr></table></figure>
<h4 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h4><h5 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h5><h5 id="unalias"><a href="#unalias" class="headerlink" title="unalias"></a>unalias</h5><h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹å˜é‡PATHçš„å†…å®¹</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>
<h5 id="export"><a href="#export" class="headerlink" title="export"></a>export</h5><h5 id="unset"><a href="#unset" class="headerlink" title="unset"></a>unset</h5><h5 id="æœ€é‡è¦çš„10ä¸ªç¯å¢ƒå˜é‡"><a href="#æœ€é‡è¦çš„10ä¸ªç¯å¢ƒå˜é‡" class="headerlink" title="æœ€é‡è¦çš„10ä¸ªç¯å¢ƒå˜é‡"></a>æœ€é‡è¦çš„10ä¸ªç¯å¢ƒå˜é‡</h5><table>
<thead>
<tr>
<th>å˜é‡åç§°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>HOME</td>
<td>ç”¨æˆ·çš„ä¸»ç›®å½•ï¼ˆå®¶ç›®å½•ï¼‰</td>
</tr>
<tr>
<td>SHELL</td>
<td>ç”¨æˆ·åœ¨ä½¿ç”¨çš„SHELLè§£é‡Šå™¨ç±»å‹</td>
</tr>
<tr>
<td>HISTSIZE</td>
<td>å†å²å‘½ä»¤è®°å½•æ¡æ•°</td>
</tr>
<tr>
<td>HISTFILESIZE</td>
<td>å†å²å‘½ä»¤è®°å½•æ¡æ•°</td>
</tr>
<tr>
<td>MAIL</td>
<td>é‚®ä»¶ä¿¡ç®±æ–‡ä»¶ä¿å­˜è·¯å¾„</td>
</tr>
<tr>
<td>LANG</td>
<td>ç³»ç»Ÿè¯­è¨€ã€è¯­ç³»åç§°</td>
</tr>
<tr>
<td>RANDOM</td>
<td>ç”Ÿæˆä¸€ä¸ªéšæœºæ•°å­—</td>
</tr>
<tr>
<td>PS1</td>
<td>bashè§£é‡Šå™¨çš„æç¤ºç¬¦</td>
</tr>
<tr>
<td>PATH</td>
<td>å®šä¹‰è§£é‡Šå™¨æœç´¢ç”¨æˆ·æ‰§è¡Œå‘½ä»¤çš„è·¯å¾„</td>
</tr>
<tr>
<td>EDITOR</td>
<td>ç”¨æˆ·é»˜è®¤çš„æ–‡æœ¬ç¼–è¾‘å™¨</td>
</tr>
</tbody>
</table>
<p>å…¨å±€å˜é‡<br>/etc/profile</p>
<p>å±€éƒ¨å˜é‡<br>~/.bashrc<br>~/.bash_profile</p>
<h3 id="Vimç¼–è¾‘å™¨ä¸Shellå‘½ä»¤è„šæœ¬"><a href="#Vimç¼–è¾‘å™¨ä¸Shellå‘½ä»¤è„šæœ¬" class="headerlink" title="Vimç¼–è¾‘å™¨ä¸Shellå‘½ä»¤è„šæœ¬"></a>Vimç¼–è¾‘å™¨ä¸Shellå‘½ä»¤è„šæœ¬</h3><h4 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h4><p>Vimçš„ä¸‰ç§æ¨¡å¼<br>å‘½ä»¤æ¨¡å¼<br>ç¼–è¾‘æ¨¡å¼<br>æœ«è¡Œæ¨¡å¼</p>
<h5 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h5><p>Escé”®è¿”å›å‘½ä»¤æ¨¡å¼</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>ZZ</td>
<td>ä¿å­˜å¹¶é€€å‡º</td>
</tr>
<tr>
<td>ZQ</td>
<td>å¼ºåˆ¶é€€å‡º</td>
</tr>
</tbody>
</table>
<h5 id="ç¼–è¾‘æ¨¡å¼"><a href="#ç¼–è¾‘æ¨¡å¼" class="headerlink" title="ç¼–è¾‘æ¨¡å¼"></a>ç¼–è¾‘æ¨¡å¼</h5><p>aioAIO</p>
<h5 id="æœ«è¡Œæ¨¡å¼"><a href="#æœ«è¡Œæ¨¡å¼" class="headerlink" title="æœ«è¡Œæ¨¡å¼"></a>æœ«è¡Œæ¨¡å¼</h5><p>Escè¿”å›å‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰:é”®è¿›å…¥æœ«è¡Œæ¨¡å¼</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>:wq</td>
<td>ä¿å­˜é€€å‡º</td>
</tr>
<tr>
<td>:q!</td>
<td>å¼ºåˆ¶é€€å‡º</td>
</tr>
<tr>
<td>:set nu</td>
<td>æ˜¾ç¤ºè¡Œå·</td>
</tr>
<tr>
<td>:set nonu</td>
<td>ä¸æ˜¾ç¤ºè¡Œå·</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰“å¼€æ–‡ä»¶å¹¶æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">vim -c <span class="string">"set nu"</span></span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬å…­èŠ‚è¯¾"><a href="#ç¬¬å…­èŠ‚è¯¾" class="headerlink" title="ç¬¬å…­èŠ‚è¯¾"></a>ç¬¬å…­èŠ‚è¯¾</h2><h3 id="Vimç¼–è¾‘å™¨ä¸Shellå‘½ä»¤è„šæœ¬-1"><a href="#Vimç¼–è¾‘å™¨ä¸Shellå‘½ä»¤è„šæœ¬-1" class="headerlink" title="Vimç¼–è¾‘å™¨ä¸Shellå‘½ä»¤è„šæœ¬"></a>Vimç¼–è¾‘å™¨ä¸Shellå‘½ä»¤è„šæœ¬</h3><h4 id="é…ç½®ç½‘å¡"><a href="#é…ç½®ç½‘å¡" class="headerlink" title="é…ç½®ç½‘å¡"></a>é…ç½®ç½‘å¡</h4><p>/etc/sysconfig/network-scripts/ifcfg-eth0</p>
<h4 id="é…ç½®Yumä»“åº“"><a href="#é…ç½®Yumä»“åº“" class="headerlink" title="é…ç½®Yumä»“åº“"></a>é…ç½®Yumä»“åº“</h4><p>ä¹‹å‰çš„ç« èŠ‚é…ç½®è¿‡äº†ã€‚<br>/etc/yum.repos.d/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.repos.d/rhel.repo</span><br><span class="line">[rhel]</span><br><span class="line">name=rhel</span><br><span class="line">baseurl=http://mirrors.163.com</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>
<h3 id="Shellè„šæœ¬"><a href="#Shellè„šæœ¬" class="headerlink" title="Shellè„šæœ¬"></a>Shellè„šæœ¬</h3><p>/etc/shells</p>
<p>Shellçš„å·¥ä½œå½¢å¼åˆ†ä¸ºä¸¤ç§<br>äº¤äº’å¼(Interactive)ï¼šç”¨æˆ·è¾“å…¥ä¸€ä¸ª<br>æ‰¹å¤„ç†(Batch)ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"><span class="comment">#author:</span></span><br><span class="line"><span class="comment">#date:</span></span><br><span class="line"><span class="comment">#email:</span></span><br></pre></td></tr></table></figure>
<h4 id="æ¥æ”¶ç”¨æˆ·çš„å‚æ•°"><a href="#æ¥æ”¶ç”¨æˆ·çš„å‚æ•°" class="headerlink" title="æ¥æ”¶ç”¨æˆ·çš„å‚æ•°"></a>æ¥æ”¶ç”¨æˆ·çš„å‚æ•°</h4><p>ä½ç½®å˜é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./script.sh $1 $2 $3</span><br></pre></td></tr></table></figure>
<p>$0 ä»£è¡¨è„šæœ¬æœ¬èº«çš„åå­—<br>$1 æ˜¯è„šæœ¬ä¹‹åçš„ç¬¬ä¸€ä¸ªä»¥ç©ºæ ¼åˆ†å‰²çš„å‚æ•°<br>$9<br>${10}<br>${11}<br>$#<br>$*<br>$?</p>
<h4 id="åˆ¤æ–­ç”¨æˆ·çš„å‚æ•°"><a href="#åˆ¤æ–­ç”¨æˆ·çš„å‚æ•°" class="headerlink" title="åˆ¤æ–­ç”¨æˆ·çš„å‚æ•°"></a>åˆ¤æ–­ç”¨æˆ·çš„å‚æ•°</h4><h5 id="æµ‹è¯•è¯­å¥æ ¼å¼"><a href="#æµ‹è¯•è¯­å¥æ ¼å¼" class="headerlink" title="æµ‹è¯•è¯­å¥æ ¼å¼"></a>æµ‹è¯•è¯­å¥æ ¼å¼</h5><p>[ æ¡ä»¶è¡¨è¾¾å¼ ]</p>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td>æµ‹è¯•æ˜¯å¦ä¸ºç›®å½•ã€‚</td>
</tr>
<tr>
<td>-e</td>
<td>æµ‹è¯•æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚</td>
</tr>
<tr>
<td>-f</td>
<td>åˆ¤æ–­æ˜¯å¦ä¸ºæ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>-r</td>
<td>æµ‹è¯•å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¯»å–ã€‚</td>
</tr>
<tr>
<td>-w</td>
<td>æµ‹è¯•å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™å†™å…¥ã€‚</td>
</tr>
<tr>
<td>-x</td>
<td>æµ‹è¯•å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡Œ</td>
</tr>
</tbody>
</table>
<h5 id="é€»è¾‘æµ‹è¯•ç¬¦å·"><a href="#é€»è¾‘æµ‹è¯•ç¬¦å·" class="headerlink" title="é€»è¾‘æµ‹è¯•ç¬¦å·"></a>é€»è¾‘æµ‹è¯•ç¬¦å·</h5><table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;&amp;</td>
<td>é€»è¾‘çš„ä¸ï¼Œâ€œè€Œä¸”â€çš„æ„æ€ã€‚</td>
</tr>
<tr>
<td>&#124;&#124;</td>
<td>é€»è¾‘çš„éï¼Œâ€œæˆ–è€…â€çš„æ„æ€ã€‚</td>
</tr>
<tr>
<td>!</td>
<td>åˆ¤æ–­ç»“æœå–ç›¸åå€¼ã€‚</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ $USER = root ] &amp;&amp; echo &quot;root&quot;</span><br></pre></td></tr></table></figure>
<h5 id="æ•´æ•°æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ•´æ•°æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ•´æ•°æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ•´æ•°æ¯”è¾ƒè¿ç®—ç¬¦</h5><table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-eq</td>
<td>åˆ¤æ–­æ˜¯å¦ç­‰äº</td>
</tr>
<tr>
<td>-ne</td>
<td>åˆ¤æ–­æ˜¯å¦ä¸ç­‰äº</td>
</tr>
<tr>
<td>-gt</td>
<td>åˆ¤æ–­æ˜¯å¦å¤§äº</td>
</tr>
<tr>
<td>-lt</td>
<td>åˆ¤æ–­æ˜¯å¦å°äº</td>
</tr>
<tr>
<td>-le</td>
<td>åˆ¤æ–­æ˜¯å¦ç­‰äºæˆ–å°äº</td>
</tr>
<tr>
<td>-ge</td>
<td>åˆ¤æ–­æ˜¯å¦å¤§äºæˆ–ç­‰äº</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">free -m</span><br><span class="line">free -m|grep Mem:</span><br><span class="line">free -m|grep Mem:|awk <span class="string">'&#123;print $4&#125;'</span></span><br><span class="line">FreeMem=`free -m|grep Mem:|awk <span class="string">'&#123;print $4&#125;'</span>`</span><br><span class="line">[ <span class="variable">$FreeMem</span> -lt 1024 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"Insufficient Memory"</span></span><br></pre></td></tr></table></figure>
<h5 id="å­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#å­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="å­—ç¬¦ä¸²æ¯”è¾ƒ"></a>å­—ç¬¦ä¸²æ¯”è¾ƒ</h5><table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>æ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸åŒã€‚</td>
</tr>
<tr>
<td>!=</td>
<td>æ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ä¸åŒã€‚</td>
</tr>
<tr>
<td>-z</td>
<td>åˆ¤æ–­å­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ä¸ºç©ºã€‚</td>
</tr>
</tbody>
</table>
<h4 id="æµç¨‹æ§åˆ¶è¯­å¥"><a href="#æµç¨‹æ§åˆ¶è¯­å¥" class="headerlink" title="æµç¨‹æ§åˆ¶è¯­å¥"></a>æµç¨‹æ§åˆ¶è¯­å¥</h4><h5 id="ifæ¡ä»¶æµ‹è¯•è¯­å¥"><a href="#ifæ¡ä»¶æµ‹è¯•è¯­å¥" class="headerlink" title="ifæ¡ä»¶æµ‹è¯•è¯­å¥"></a>ifæ¡ä»¶æµ‹è¯•è¯­å¥</h5><p>å•åˆ†æ”¯ç»“æ„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">then</span>;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>åŒåˆ†æ”¯ç»“æ„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">then</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line">ping -c 3 -i 0.2 -W 3 <span class="variable">$1</span> &amp;&gt; /dev/null</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ] <span class="keyword">then</span>;</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"Host <span class="variable">$1</span> is up"</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"Host <span class="variable">$1</span> is down"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>å¤šé‡åˆ†æ”¯ç»“æ„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">then</span>;</span><br><span class="line"><span class="keyword">elif</span> <span class="keyword">then</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>read</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯»å–ç”¨æˆ·çš„è¾“å…¥</span></span><br><span class="line"><span class="built_in">read</span> -p</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter your socre(0-100)"</span> GRADE</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$GRADE</span> -ge 85 ]  &amp;&amp; [<span class="variable">$GRADE</span> -le 100 ]  ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$GRADE</span> is Excellent"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$GRADE</span> -ge 70 ] &amp;&amp; [<span class="variable">$GRADE</span> -le 84 ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$GRADE</span> is pass"</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$GRADE</span> is Fail"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h5 id="foræ¡ä»¶å¾ªç¯è¯­å¥"><a href="#foræ¡ä»¶å¾ªç¯è¯­å¥" class="headerlink" title="foræ¡ä»¶å¾ªç¯è¯­å¥"></a>foræ¡ä»¶å¾ªç¯è¯­å¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">in</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter the users password"</span> PASSWD</span><br><span class="line"><span class="keyword">for</span> UNAME <span class="keyword">in</span> `cat users.txt`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">id <span class="variable">$UNAME</span> &amp;&gt; /dev/null</span><br><span class="line">	<span class="keyword">if</span> [ $? -eq 0 ] ;<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Aleady exists"</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		useradd <span class="variable">$UNAME</span> &amp;&gt; /dev/null</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"<span class="variable">$PASSWD</span>"</span> | passwd --stdin <span class="variable">$UNAME</span> &amp;&gt; /dev/null</span><br><span class="line">		<span class="keyword">if</span> [ $? -eq 0 ] ;<span class="keyword">then</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">"Create Sucess"</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">"Create Failure"</span></span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Shellç¼–ç¨‹æŠ€å·§ å°åº¦å¤§ç¥å†™çš„</p>
</blockquote>
<h5 id="whileæ¡ä»¶å¾ªç¯è¯­å¥"><a href="#whileæ¡ä»¶å¾ªç¯è¯­å¥" class="headerlink" title="whileæ¡ä»¶å¾ªç¯è¯­å¥"></a>whileæ¡ä»¶å¾ªç¯è¯­å¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">PRICE=$(expr <span class="variable">$RANDOM</span> % 1000)</span><br><span class="line">TIMES=0</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"PRICE:"</span> INT</span><br><span class="line"><span class="built_in">let</span> TIMES++</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$INT</span> -eq <span class="variable">$PRICE</span> ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"ok"</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"<span class="variable">$TIMES</span>"</span></span><br><span class="line">	<span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$INT</span> -gt <span class="variable">$PRICE</span> ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"high"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"low"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h5 id="caseæ¡ä»¶æµ‹è¯•è¯­å¥"><a href="#caseæ¡ä»¶æµ‹è¯•è¯­å¥" class="headerlink" title="caseæ¡ä»¶æµ‹è¯•è¯­å¥"></a>caseæ¡ä»¶æµ‹è¯•è¯­å¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span></span><br><span class="line">)</span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter:"</span> KEY</span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$KEY</span>"</span> <span class="keyword">in</span></span><br><span class="line">[a-z] | [A-Z])</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"word"</span></span><br><span class="line">;;</span><br><span class="line">[0-9])</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"number"</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"error"</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬ä¸ƒèŠ‚è¯¾"><a href="#ç¬¬ä¸ƒèŠ‚è¯¾" class="headerlink" title="ç¬¬ä¸ƒèŠ‚è¯¾"></a>ç¬¬ä¸ƒèŠ‚è¯¾</h2><h3 id="è®¡åˆ’ä»»åŠ¡æœåŠ¡"><a href="#è®¡åˆ’ä»»åŠ¡æœåŠ¡" class="headerlink" title="è®¡åˆ’ä»»åŠ¡æœåŠ¡"></a>è®¡åˆ’ä»»åŠ¡æœåŠ¡</h3><h4 id="at"><a href="#at" class="headerlink" title="at"></a>at</h4><p>ä¸€æ¬¡æ€§ä»»åŠ¡atdæœåŠ¡/è¿›ç¨‹æ¥å®ç°çš„ï¼Œè®¡åˆ’çš„ç®¡ç†æ“ä½œæ˜¯â€œatâ€å‘½ä»¤ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰æ’ä¸€æ¬¡æ€§ä»»åŠ¡</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"systemctl restart sshd "</span> | at 23:00</span><br><span class="line"><span class="comment">#æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨</span></span><br><span class="line">at -l</span><br><span class="line"><span class="comment">#é¢„è§ˆä»»åŠ¡ä¸ç¯å¢ƒè®¾ç½®</span></span><br><span class="line">at -c</span><br><span class="line"><span class="comment">#åˆ é™¤ä»»åŠ¡</span></span><br><span class="line">atrm</span><br></pre></td></tr></table></figure>
<h4 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h4><p>é•¿æœŸå¯å¾ªç¯çš„è®¡åˆ’ä»»åŠ¡ï¼ŒcronæœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨</span></span><br><span class="line">crontab -l </span><br><span class="line"><span class="comment">#ç¼–è¾‘ä»»åŠ¡</span></span><br><span class="line">crontab -e</span><br><span class="line"><span class="comment">#åˆ é™¤ä»»åŠ¡</span></span><br><span class="line">crontab -r</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 1 * * * /usr/bin/date &gt;&gt; /root/date.log</span><br><span class="line">* 1,3,6 * * * /usr/bin/date &gt;&gt; /root/date.log</span><br><span class="line">* 1-5 * * * /usr/bin/date &gt;&gt; /root/date.log</span><br><span class="line">åˆ†é’Ÿ å°æ—¶ æ—¥æœŸ æœˆä»½ æ˜ŸæœŸ å‘½ä»¤</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆ†é’Ÿ</td>
<td>å–å€¼ä¸ºä»0åˆ°59ä¹‹é—´çš„æ•´æ•°</td>
</tr>
<tr>
<td>å°æ—¶</td>
<td>å–å€¼ä¸ºä»0åˆ°23ä¹‹é—´çš„ä»»æ„æ•´æ•°</td>
</tr>
<tr>
<td>æ—¥æœŸ</td>
<td>å–å€¼ä¸º1åˆ°31ä¹‹é—´çš„ä»»æ„æ•´æ•°</td>
</tr>
<tr>
<td>æœˆä»½</td>
<td>å–å€¼ä¸º1åˆ°12ä¹‹é—´çš„ä»»æ„æ•´æ•°</td>
</tr>
<tr>
<td>æ˜ŸæœŸ</td>
<td>å–å€¼ä¸º0åˆ°7ä¹‹é—´çš„ä»»æ„æ•´æ•°ï¼Œå…¶ä¸­0ä¸7å‡ä¸ºæ˜ŸæœŸæ—¥</td>
</tr>
<tr>
<td>å‘½ä»¤</td>
<td>è¦æ‰§è¡Œçš„å‘½ä»¤æˆ–ç¨‹åºè„šæœ¬</td>
</tr>
</tbody>
</table>
<h3 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h3><p>UID(User IDentification)ï¼šæ¯ä¸ªç”¨æˆ·éƒ½æœ‰å¯¹åº”çš„çš„UIDå€¼ã€‚<br>è¶…çº§ç”¨æˆ·UID0:rootç”¨æˆ·é»˜è®¤ä¸º0ã€‚<br>ç³»ç»Ÿç”¨æˆ·UID1-999:ç³»ç»Ÿä¸­ç³»ç»ŸæœåŠ¡æœ‰ä¸åŒç”¨æˆ·è¿è¡Œï¼Œæ›´åŠ å®‰å…¨ï¼Œé»˜è®¤è¢«é™åˆ¶ç™»å½•åˆ°ç³»ç»Ÿã€‚<br>æ™®é€šç”¨æˆ·UID1000~:ç®¡ç†å‘˜åˆ›å»ºçš„æ™®é€šç”¨æˆ·UIDä»1000å¼€å§‹ï¼ˆå³ä¾¿å‰é¢çš„æ•°å­—æ²¡æœ‰è¢«ä½¿ç”¨å®Œï¼Œä¹Ÿæ˜¯ä»1000å¼€å§‹çš„ã€‚ï¼‰</p>
<blockquote>
<p>è´¦æˆ·åç§°ä¸UIDä¿å­˜åœ¨/etc/passwdæ–‡ä»¶ä¸­ï¼Œè€Œè´¦æˆ·å¯†ç åˆ™ä¿å­˜åœ¨/etc/shadowæ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<p>GID(Group IDentification)ï¼šå¯å°†å¤šä¸ªç”¨æˆ·åŠ å…¥æŸä¸ªç»„ä¸­ï¼Œæ–¹ä¾¿æŒ‡æ´¾ä»»åŠ¡æˆ–å·¥ä½œã€‚</p>
<blockquote>
<p>ç”¨æˆ·ç»„åç§°ä¸GIDä¿å­˜åœ¨/etc/groupæ–‡ä»¶ä¸­ï¼Œç»„ç®¡ç†å‘˜çš„å¯†ç ä¿å­˜åœ¨/etc/gshaodowæ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<h4 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a>useradd</h4><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td>æŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•ï¼ˆé»˜è®¤ä¸º/home/usernameï¼‰</td>
</tr>
<tr>
<td>-e</td>
<td>å¸å·æœ‰æ•ˆæˆªè‡³æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD.</td>
</tr>
<tr>
<td>-u</td>
<td>æŒ‡å®šè¯¥ç”¨æˆ·çš„é»˜è®¤UID</td>
</tr>
<tr>
<td>-g</td>
<td>æŒ‡å®šä¸€ä¸ªåˆå§‹çš„ç”¨æˆ·åŸºæœ¬ç»„ï¼ˆå¿…é¡»å·²å­˜åœ¨ï¼‰</td>
</tr>
<tr>
<td>-G</td>
<td>æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ‰©å±•ç”¨æˆ·ç»„</td>
</tr>
<tr>
<td>-N</td>
<td>ä¸åˆ›å»ºä¸ç”¨æˆ·åŒåçš„åŸºæœ¬ç”¨æˆ·ç»„</td>
</tr>
<tr>
<td>-s</td>
<td>æŒ‡å®šè¯¥ç”¨æˆ·çš„é»˜è®¤Shell</td>
</tr>
</tbody>
</table>
<h4 id="userdel"><a href="#userdel" class="headerlink" title="userdel"></a>userdel</h4><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-f</td>
<td>å¼ºåˆ¶ååˆ é™¤ç”¨æˆ·ï¼Œå®¶ç›®å½•ä¸å…¶ç›¸å…³çš„æ–‡ä»¶</td>
</tr>
<tr>
<td>-r</td>
<td>åŒæ—¶åˆ é™¤ç”¨æˆ·ï¼Œå®¶ç›®å½•ä¸å…¶ç›¸å…³çš„æ–‡ä»¶</td>
</tr>
</tbody>
</table>
<h4 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h4><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-c</td>
<td>å¡«å†™å¸å·çš„å¤‡æ³¨ä¿¡æ¯</td>
</tr>
<tr>
<td>-d -m</td>
<td>-mä¸-dè¿ç”¨ï¼Œå¯é‡æ–°æŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•å¹¶è‡ªåŠ¨æŠŠæ—§çš„æ•°æ®è½¬ç§»è¿‡å»ã€‚</td>
</tr>
<tr>
<td>-e</td>
<td>å¸æˆ·åˆ°æœŸæ—¶é—´ï¼Œæ ¼å¼â€œYYYY-MM-DDâ€</td>
</tr>
<tr>
<td>-g</td>
<td>å˜æ›´æ‰€å±ç”¨æˆ·ç»„</td>
</tr>
<tr>
<td>-G</td>
<td>å˜æ›´æ‰©å±•ç”¨æˆ·ç»„</td>
</tr>
<tr>
<td>-L</td>
<td>é”å®šç”¨æˆ·ç¦æ­¢å…¶ç™»é™†ç³»ç»Ÿ</td>
</tr>
<tr>
<td>-U</td>
<td>è§£é”ç”¨æˆ·ï¼Œå…è®¸å…¶ç™»é™†ç³»ç»Ÿ</td>
</tr>
<tr>
<td>-s</td>
<td>å˜æ›´é»˜è®¤ç»ˆç«¯</td>
</tr>
<tr>
<td>-u</td>
<td>ä¿®æ”¹ç”¨æˆ·çš„UID</td>
</tr>
</tbody>
</table>
<h4 id="groupadd"><a href="#groupadd" class="headerlink" title="groupadd"></a>groupadd</h4><h4 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h4><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-l</td>
<td>é”å®šç”¨æˆ·ç¦æ­¢å…¶ç™»é™†</td>
</tr>
<tr>
<td>-u</td>
<td>è§£é™¤é”å®šï¼Œå…è®¸ç”¨æˆ·ç™»é™†ã€‚</td>
</tr>
<tr>
<td>â€“stdin</td>
<td>å…è®¸ä»æ ‡å‡†è¾“å…¥ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼Œå¦‚(echo â€œNewPassWordâ€ &#124; passwd â€“stdin Username)</td>
</tr>
<tr>
<td>-d</td>
<td>ä½¿å¸å·æ— å¯†ç </td>
</tr>
<tr>
<td>-e</td>
<td>å¼ºåˆ¶ç”¨æˆ·ä¸‹æ¬¡ç™»é™†æ—¶ä¿®æ”¹å¯†ç </td>
</tr>
<tr>
<td>-S</td>
<td>æ˜¾ç¤ºç”¨æˆ·çš„å¯†ç çŠ¶æ€</td>
</tr>
</tbody>
</table>
<h3 id="æ–‡ä»¶æƒé™ä¸å½’å±"><a href="#æ–‡ä»¶æƒé™ä¸å½’å±" class="headerlink" title="æ–‡ä»¶æƒé™ä¸å½’å±"></a>æ–‡ä»¶æƒé™ä¸å½’å±</h3><blockquote>
<p>-:æ™®é€šæ–‡ä»¶ï¼Œd:ç›®å½•æ–‡ä»¶ï¼Œl:é“¾æ¥æ–‡ä»¶ï¼Œb:å—è®¾å¤‡æ–‡ä»¶ï¼Œc:å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œp:ç®¡é“æ–‡ä»¶</p>
</blockquote>
<p>-rwxrwxrwx</p>
<blockquote>
<p>è¯»(read)ï¼Œå†™(write)ï¼Œæ‰§è¡Œï¼ˆexecuteï¼‰ç®€å†™å³ä¸º(r,w,x)ï¼Œäº¦å¯ç”¨æ•°å­—(4,2,1)è¡¨ç¤ºã€‚</p>
</blockquote>
<p>ç›®å½•çš„wæƒé™å†³å®šäº†è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æ˜¯å¦å¯ä»¥åˆ é™¤ã€‚</p>
<h4 id="æ–‡ä»¶çš„ç‰¹æ®Šæƒé™"><a href="#æ–‡ä»¶çš„ç‰¹æ®Šæƒé™" class="headerlink" title="æ–‡ä»¶çš„ç‰¹æ®Šæƒé™"></a>æ–‡ä»¶çš„ç‰¹æ®Šæƒé™</h4><blockquote>
<p>suid 4 sgid 2 sbit 1</p>
</blockquote>
<h5 id="SUID"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h5><p>SUID:è®©æ‰§è¡Œè€…ä¸´æ—¶æ‹¥æœ‰å±ä¸»çš„æƒé™ï¼ˆä»…å¯¹æ‹¥æœ‰æ‰§è¡Œæƒé™çš„äºŒè¿›åˆ¶ç¨‹åºæœ‰æ•ˆï¼‰</p>
<p>è¿™æ˜¯ä¸€ç§é’ˆå¯¹äºäºŒè¿›åˆ¶ç¨‹åºè®¾ç½®çš„ç‰¹æ®Šæƒé™ï¼Œä¾‹å¦‚æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥æ‰§è¡Œç”¨äºä¿®æ”¹ç”¨æˆ·å¯†ç çš„passwdå‘½ä»¤ï¼Œè€Œç”¨æˆ·å¯†ç æ˜¯è¢«ä¿å­˜åœ¨/etc/shadowæ–‡ä»¶ä¸­çš„ï¼Œä½†åªè¦ä»”ç»†çš„çœ‹ä¸‹å°±ä¼šå‘ç°è¿™ä¸ªæ–‡ä»¶çš„é»˜è®¤æƒé™æ˜¯000ï¼Œä¹Ÿå°±æ˜¯è¯´é™¤äº†ä¸å—ç³»ç»Ÿé™åˆ¶çš„rootç®¡ç†å‘˜ç”¨æˆ·ä»¥å¤–çš„æ‰€æœ‰ç”¨æˆ·éƒ½æ²¡æœ‰æŸ¥çœ‹æˆ–ç¼–è¾‘è¯¥æ–‡ä»¶çš„æƒé™ã€‚é‚£ä¹ˆæŠŠpasswdå‘½ä»¤åŠ ä¸ŠSUIDç‰¹æ®Šæƒé™ä½ï¼Œä¾¿å¯è®©æ™®é€šç”¨æˆ·ä¸´æ—¶è·å¾—ç¨‹åºæ‰€æœ‰è€…çš„èº«ä»½ï¼Œå³ä»¥rootç”¨æˆ·çš„èº«ä»½æŠŠå˜æ›´çš„å¯†ç ä¿¡æ¯å†™å…¥åˆ°shadowæ–‡ä»¶ä¸­ã€‚è¿™ä¸ªå¾ˆåƒåœ¨å¤è£…å‰§ä¸­çœ‹è¿‡æ‹¿ç€å°šæ–¹å®å‰‘çš„é’¦å·®å¤§è‡£ï¼Œä»–æ‰‹æŒå°šæ–¹å®å‰‘æƒ©æ²»è´ªå®˜çš„æ—¶å€™å®é™…ä¸Šä¹Ÿå°±ä»£è¡¨äº†çš‡ä¸Šçš„æƒå¨ï¼Œä»¥ä¾¿ä»–å®Œæˆäº†æƒ³è¦çš„æ•ˆæœï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ä»–å°±æ°¸è¿œæˆä¸ºäº†çš‡ä¸Šï¼Œå› æ­¤è¿™æ˜¯ä¸€ç§æœ‰æ¡ä»¶çš„ã€ä¸´æ—¶çš„ç‰¹æ®Šæƒé™æˆæƒæ–¹æ³•ã€‚</p>
<h5 id="SGID"><a href="#SGID" class="headerlink" title="SGID"></a>SGID</h5><p>SGIDåŠŸèƒ½ä¸€ï¼šè®©æ‰§è¡Œè€…ä¸´æ—¶æ‹¥æœ‰å±ç»„çš„æƒé™ï¼ˆå¯¹æ‹¥æœ‰æ‰§è¡Œæƒé™çš„äºŒè¿›åˆ¶ç¨‹åºè®¾ç½®ï¼‰</p>
<p>è¿™ç§ç‰¹æ®Šæƒé™å°±æ˜¯å‚è€ƒSUIDè€Œè®¾è®¡çš„ï¼Œä¸åŒç‚¹å°±æ˜¯è®©ç¨‹åºçš„æ‰§è¡Œè€…è·å–çš„ä¸å†æ˜¯æ–‡ä»¶æ‰€æœ‰è€…çš„ä¸´æ—¶æƒé™ï¼Œè€Œæ˜¯è·å–åˆ°æ–‡ä»¶çš„æ‰€æœ‰ç»„çš„æƒé™ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨æ—©æœŸçš„Linuxç³»ç»Ÿä¸­/dev/kmemæ˜¯ä¸€ä¸ªå­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨å†…æ ¸ç¨‹åºè¦è®¿é—®çš„æ•°æ®ï¼Œ</p>
<p>SGIDåŠŸèƒ½äºŒï¼šåœ¨è¯¥ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿æ­¤ç›®å½•çš„ç”¨æˆ·ç»„ï¼ˆåªå¯ä»¥å¯¹ç›®å½•è®¾ç½®ï¼‰</p>
<p>æ­£å¦‚å‰é¢æåˆ°è¿‡æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰å…¶å½’å±çš„æ‰€æœ‰è€…å’Œæ‰€æœ‰ç»„ï¼Œè€Œå½“åˆ›å»ºæˆ–ä¼ é€ä¸€ä¸ªæ–‡ä»¶åï¼Œè¿™ä¸ªæ–‡ä»¶å°±ä¼šè‡ªåŠ¨çš„å½’å±äºæ‰§è¡Œè¿™ä¸ªæ“ä½œçš„ç”¨æˆ·ã€‚é‚£ä¹ˆæ¯”å¦‚å·¥ä½œä¸­éœ€è¦è®¾ç½®ä¸€ä¸ªéƒ¨é—¨å†…çš„å…±äº«ç›®å½•ï¼Œè®©æ‰€æœ‰ç»„å†…çš„äººéƒ½èƒ½å¤Ÿè¯»å–é‡Œé¢çš„å†…å®¹ï¼Œé‚£ä¹ˆå’±ä»¬å°±å¯ä»¥åˆ›å»ºéƒ¨é—¨å…±äº«ç›®å½•åï¼ŒæŠŠè¯¥ç›®å½•è®¾ç½®ä¸ŠSGIDç‰¹æ®Šæƒé™ä½ï¼Œè¿™æ ·ä»»ä½•ç”¨æˆ·åœ¨é‡Œé¢åˆ›å»ºçš„ä»»ä½•æ–‡ä»¶éƒ½ä¼šå½’å±äºæœ¬ç›®å½•çš„æ‰€æœ‰ç»„ï¼Œè€Œä¸å†æ˜¯è‡ªå·±çš„åŸºæœ¬ç”¨æˆ·ç»„ã€‚</p>
<h5 id="SBIT"><a href="#SBIT" class="headerlink" title="SBIT"></a>SBIT</h5><p>SBIT(Sticky Bit):åªå¯ç®¡ç†è‡ªå·±çš„æ•°æ®è€Œä¸èƒ½åˆ é™¤ä»–äººæ–‡ä»¶(ä»…å¯¹ç›®å½•æœ‰æ•ˆ)</p>
<p>å¾ˆå¤šå¤§å­¦è€å¸ˆè¦æ±‚å­¦ç”Ÿä¸‹è¯¾åç»Ÿä¸€æŠŠä½œä¸šä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ç‰¹å®šå…±äº«ç›®å½•ä¸­ï¼Œä½†è€æ˜¯æœ‰å‡ ä¸ªå°ç ´ååˆ†å­å–œæ¬¢åˆ é™¤å…¶ä»–åŒå­¦çš„ä½œä¸šï¼Œé‚£å°±è¦è®¾ç½®SBITç‰¹æ®Šæƒé™ä½äº†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å«åšç‰¹æ®Šæƒé™ä½ä¹‹ç²˜æ»ä½ã€‚SBITç‰¹æ®Šæƒé™ä½çš„è®¾ç½®ç›®çš„å’Œæ•ˆæœæ˜¯ä¸è®©å…¶ä»–äººåˆ é™¤è‡ªå·±çš„æ–‡ä»¶ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æ–‡ä»¶åªèƒ½è¢«æ‰€æœ‰è€…æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œä¸çŸ¥é“æœ€åˆæ˜¯é‚£ä¸ªå‘†ç“œç›´æ¥æŠŠè‹±æ–‡Sticky Bitç›´è¯‘æˆäº†ç²˜æ»ä½ï¼Œåˆ˜é„è€å¸ˆåˆ™æ¨èå«åšä¿æŠ¤ä½ï¼Œæ—¢å¥½è®°ï¼Œåˆèƒ½è®©åˆ«äººé©¬ä¸ŠçŸ¥é“å…¶åŠŸèƒ½ä½œç”¨ã€‚åœ¨RHEL7ç³»ç»Ÿä¸­çš„/tmpä½œä¸ºä¸€ä¸ªå…±äº«æ–‡ä»¶çš„ç›®å½•é»˜è®¤å·²ç»è¢«è®¾ç½®äº†SBITç‰¹æ®Šæƒé™ä½ï¼Œå› æ­¤è¿™é‡Œé¢çš„æ–‡ä»¶å…¶ä»–äººæ˜¯ä¸èƒ½ä¹±åˆ é™¤çš„ã€‚</p>
<h5 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h5><h5 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h5><h4 id="æ–‡ä»¶çš„éšè—å±æ€§"><a href="#æ–‡ä»¶çš„éšè—å±æ€§" class="headerlink" title="æ–‡ä»¶çš„éšè—å±æ€§"></a>æ–‡ä»¶çš„éšè—å±æ€§</h4><h5 id="chattr"><a href="#chattr" class="headerlink" title="chattr"></a>chattr</h5><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>å°†æ— æ³•å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹,è‹¥å¯¹ç›®å½•è®¾ç½®ååˆ™ä»…èƒ½ä¿®æ”¹å­æ–‡ä»¶è€Œä¸èƒ½æ–°å»ºæˆ–åˆ é™¤ã€‚</td>
</tr>
<tr>
<td>a</td>
<td>ä»…å…è®¸è¡¥å……ï¼ˆè¿½åŠ ï¼‰å†…å®¹.æ— æ³•è¦†ç›–/åˆ é™¤(Append Only)ã€‚</td>
</tr>
<tr>
<td>S</td>
<td>æ–‡ä»¶å†…å®¹å˜æ›´åç«‹å³åŒæ­¥åˆ°ç¡¬ç›˜(sync)ã€‚</td>
</tr>
<tr>
<td>s</td>
<td>å½»åº•ä»ç¡¬ç›˜ä¸­åˆ é™¤ï¼Œä¸å¯æ¢å¤(ç”¨0å¡«å……åŸæ–‡ä»¶æ‰€åœ¨ç¡¬ç›˜åŒºåŸŸ)ã€‚</td>
</tr>
<tr>
<td>A</td>
<td>ä¸å†ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶çš„æœ€åè®¿é—®æ—¶é—´(atime)ã€‚</td>
</tr>
<tr>
<td>b</td>
<td>ä¸å†ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„å­˜å–æ—¶é—´ã€‚</td>
</tr>
<tr>
<td>D</td>
<td>æ£€æŸ¥å‹ç¼©æ–‡ä»¶ä¸­çš„é”™è¯¯ã€‚</td>
</tr>
<tr>
<td>d</td>
<td>å½“ä½¿ç”¨dumpå‘½ä»¤å¤‡ä»½æ—¶å¿½ç•¥æœ¬æ–‡ä»¶/ç›®å½•ã€‚</td>
</tr>
<tr>
<td>c</td>
<td>é»˜è®¤å°†æ–‡ä»¶æˆ–ç›®å½•è¿›è¡Œå‹ç¼©ã€‚</td>
</tr>
<tr>
<td>u</td>
<td>å½“åˆ é™¤æ­¤æ–‡ä»¶åä¾ç„¶ä¿ç•™å…¶åœ¨ç¡¬ç›˜ä¸­çš„æ•°æ®ï¼Œæ–¹ä¾¿æ—¥åæ¢å¤ã€‚</td>
</tr>
<tr>
<td>t</td>
<td>è®©æ–‡ä»¶ç³»ç»Ÿæ”¯æŒå°¾éƒ¨åˆå¹¶ï¼ˆtail-mergingï¼‰ã€‚</td>
</tr>
<tr>
<td>X</td>
<td>å¯ä»¥ç›´æ¥è®¿é—®å‹ç¼©æ–‡ä»¶çš„å†…å®¹ã€‚</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å°†æ— æ³•å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹,è‹¥å¯¹ç›®å½•è®¾ç½®ååˆ™ä»…èƒ½ä¿®æ”¹å­æ–‡ä»¶è€Œä¸èƒ½æ–°å»ºæˆ–åˆ é™¤ã€‚</span></span><br><span class="line">chattr +i</span><br></pre></td></tr></table></figure>
<h5 id="lsattr"><a href="#lsattr" class="headerlink" title="lsattr"></a>lsattr</h5><h2 id="ç¬¬å…«èŠ‚è¯¾"><a href="#ç¬¬å…«èŠ‚è¯¾" class="headerlink" title="ç¬¬å…«èŠ‚è¯¾"></a>ç¬¬å…«èŠ‚è¯¾</h2><h3 id="æ–‡ä»¶æƒé™ä¸å½’å±-1"><a href="#æ–‡ä»¶æƒé™ä¸å½’å±-1" class="headerlink" title="æ–‡ä»¶æƒé™ä¸å½’å±"></a>æ–‡ä»¶æƒé™ä¸å½’å±</h3><h4 id="æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨"><a href="#æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨" class="headerlink" title="æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨"></a>æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨</h4><h5 id="setfacl"><a href="#setfacl" class="headerlink" title="setfacl"></a>setfacl</h5><p>ACLæä¾›çš„æ˜¯åœ¨æ‰€æœ‰è€…ã€æ‰€æœ‰ç»„ã€å…¶ä»–äººçš„è¯»å†™æ‰§è¡Œæƒé™å¤–çš„ç‰¹æ®Šæƒé™æ§åˆ¶ï¼Œä½¿ç”¨setfaclå‘½ä»¤å¯ä»¥è®©å’±ä»¬èƒ½å¤Ÿé’ˆå¯¹å•ä¸€ç”¨æˆ·æˆ–ç”¨æˆ·ç»„ã€å•ä¸€æ–‡ä»¶æˆ–ç›®å½•æ¥è¿›è¡Œè¯»å†™æ‰§è¡Œæƒé™çš„æ§åˆ¶ï¼Œå…¶ä¸­å¯¹äºç›®å½•æ–‡ä»¶éœ€è¦ä½¿ç”¨é€’å½’-Rå‚æ•°ï¼Œå¯¹æ™®é€šæ–‡ä»¶éœ€è¦ä½¿ç”¨-må‚æ•°ï¼Œè€Œå¦‚æœæƒ³è¦åˆ é™¤æŸä¸ªæ–‡ä»¶çš„è®¿é—®æ§åˆ¶ç­–ç•¥çš„è¯å¯ä»¥ä½¿ç”¨-bå‚æ•°ï¼Œäºæ˜¯å¿«æ¥è®¾ç½®ä¸‹ç”¨æˆ·åœ¨/rootç›®å½•ä¸Šé¢çš„æƒé™å§ã€‚</p>
<p>æ˜¯ä¸æ˜¯è§‰å¾—æ•ˆæœå¾ˆé…·å‘¢ï¼Ÿä½†æ˜¯åˆé‡åˆ°äº†ä¸€ä¸ªå°é—®é¢˜â€”â€”æ€ä¹ˆæ ·å»æŸ¥çœ‹æ–‡ä»¶ä¸Šé¢æœ‰é‚£äº›ACLç­–ç•¥å‘¢ï¼Ÿå¸¸ç”¨çš„lså‘½ä»¤æ˜¯çœ‹ä¸åˆ°è®¿é—®æ§åˆ¶åˆ—è¡¨ä¿¡æ¯çš„ï¼Œä½†æ˜¯å´å¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„æƒé™æœ€åä¸€ä¸ªç‚¹(.)å˜æˆäº†åŠ å·ï¼ˆ+ï¼‰,è€Œè¿™å°±æ„å‘³ç€è¿™ä¸ªæ–‡ä»¶å·²ç»è¢«è®¾ç½®æœ‰äº†ACLè®¿é—®ç­–ç•¥å•¦ã€‚ç°åœ¨æ˜¯ä¸æ˜¯æ„Ÿè§‰å­¦å¾—è¶Šå¤šï¼Œè¶Šä¸æ•¢è¯´è‡ªå·±ç²¾é€šäºLinuxç³»ç»Ÿäº†å‘¢ï¼Ÿè¿™ä¹ˆä¸€ä¸ªä¸èµ·çœ¼çš„ç‚¹(.)ç«Ÿç„¶è¿˜æ„å‘³ç€è¿™ä¹ˆä¸€ç§é‡è¦çš„æƒé™å‘¢ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -Rm u:linuxprobe:rwx /root</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ACLå¤§äºç‰¹æ®Šæƒé™(SUIDã€SGIDã€SBIT)</p>
</blockquote>
<h5 id="getfacl"><a href="#getfacl" class="headerlink" title="getfacl"></a>getfacl</h5><h4 id="suå‘½ä»¤ä¸sudoæœåŠ¡"><a href="#suå‘½ä»¤ä¸sudoæœåŠ¡" class="headerlink" title="suå‘½ä»¤ä¸sudoæœåŠ¡"></a>suå‘½ä»¤ä¸sudoæœåŠ¡</h4><h5 id="su"><a href="#su" class="headerlink" title="su"></a>su</h5><p>suå‘½ä»¤ä¸ç”¨æˆ·åä¹‹é—´æœ‰ä¸€ä¸ªå‡å·(-)ï¼Œè¿™æ„å‘³ç€å®Œå…¨çš„åˆ‡æ¢åˆ°æ–°çš„ç”¨æˆ·ï¼Œå³æŠŠç¯å¢ƒå˜é‡ä¿¡æ¯ä¹Ÿå˜æ›´ä¸ºæ–°çš„ç”¨æˆ·ï¼Œè€Œä¸ä¿ç•™åŸå§‹çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™ä¸ªæ˜¯æ¨èå¿…åŠ çš„å‚æ•°ï¼Œä¸€å®šè¦è®°ä¸‹å“¦~å¦å¤–å½“è¶…çº§ç”¨æˆ·åˆ‡æ¢åˆ°æ™®é€šç”¨æˆ·æ—¶æ˜¯ä¸éœ€è¦å¯†ç éªŒè¯çš„ï¼Œè€Œæ™®é€šç”¨æˆ·åˆ‡æ¢æˆè¶…çº§ç”¨æˆ·èº«ä»½å°±éœ€è¦å¯†ç éªŒè¯åæ‰èƒ½æˆåŠŸäº†ã€‚</p>
<h5 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h5><ol>
<li>é™åˆ¶ç”¨æˆ·æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚</li>
<li>è®°å½•ç”¨æˆ·æ‰§è¡Œçš„æ¯ä¸€æ¡å‘½ä»¤ã€‚</li>
<li>é…ç½®æ–‡ä»¶ï¼ˆ/etc/sudoersï¼‰æä¾›é›†ä¸­çš„ç®¡ç†ç”¨æˆ·ã€æƒé™ä¸ä¸»æœºç­‰å‚æ•°ã€‚</li>
<li>éªŒè¯è¿‡å¯†ç å5åˆ†é’Ÿ(é»˜è®¤å€¼)å†…æ— é¡»å†è®©ç”¨æˆ·éªŒè¯å¯†ç ï¼Œæ›´åŠ çš„æ–¹ä¾¿ã€‚</li>
</ol>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-h</td>
<td>åˆ—å‡ºå¸®åŠ©ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>-l</td>
<td>åˆ—å‡ºå½“å‰ç”¨æˆ·å¯æ‰§è¡Œçš„å‘½ä»¤ã€‚</td>
</tr>
<tr>
<td>-u</td>
<td>ç”¨æˆ·åæˆ–UIDå€¼    ä»¥æŒ‡å®šçš„ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤ã€‚</td>
</tr>
<tr>
<td>-k</td>
<td>æ¸…ç©ºå®‰å…¨æ—¶é—´ï¼Œä¸‹æ¬¡æ‰§è¡Œsudoæ—¶éœ€è¦å†æ¬¡å¯†ç éªŒè¯ã€‚</td>
</tr>
<tr>
<td>-b</td>
<td>åœ¨åå°æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚</td>
</tr>
<tr>
<td>-p</td>
<td>æ›´æ”¹è¯¢é—®å¯†ç çš„æç¤ºè¯­ã€‚</td>
</tr>
</tbody>
</table>
<h5 id="visudo"><a href="#visudo" class="headerlink" title="visudo"></a>visudo</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username ALL=(ALL)  NOPASSWD: ALL</span><br><span class="line">ç”¨æˆ·å æ‰€æœ‰ ä¸ç”¨è¾“å…¥å¯†ç </span><br></pre></td></tr></table></figure>
<h3 id="å­˜å‚¨ç»“æ„ä¸ç£ç›˜åˆ’åˆ†"><a href="#å­˜å‚¨ç»“æ„ä¸ç£ç›˜åˆ’åˆ†" class="headerlink" title="å­˜å‚¨ç»“æ„ä¸ç£ç›˜åˆ’åˆ†"></a>å­˜å‚¨ç»“æ„ä¸ç£ç›˜åˆ’åˆ†</h3><h4 id="Linuxç³»ç»Ÿä¸­çš„æ–‡ä»¶å­˜å‚¨ç»“æ„"><a href="#Linuxç³»ç»Ÿä¸­çš„æ–‡ä»¶å­˜å‚¨ç»“æ„" class="headerlink" title="Linuxç³»ç»Ÿä¸­çš„æ–‡ä»¶å­˜å‚¨ç»“æ„"></a>Linuxç³»ç»Ÿä¸­çš„æ–‡ä»¶å­˜å‚¨ç»“æ„</h4><p>FHS(Filesystem Hierarchy Standard)</p>
<p>åˆšåˆšæåˆ°çš„FHSæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„æ ‡å‡†åå®šï¼ˆFilesystem Hierarchy Standardï¼‰æ˜¯å·¥ç¨‹å¸ˆä»¬åœ¨Linuxç³»ç»Ÿä¸­å­˜å‚¨æ–‡ä»¶çš„æ—¶å€™éœ€è¦éµå®ˆçš„è§„åˆ™ï¼ŒFHSæ˜¯æ ¹æ®ä»¥å¾€æ— æ•°Linuxç³»ç»Ÿç”¨æˆ·å’Œå¼€å‘è€…çš„ç»éªŒè€Œæ€»ç»“å‡ºæ¥çš„ï¼ŒæŒ‡å¯¼å’±ä»¬åº”è¯¥æŠŠæ–‡ä»¶ä¿å­˜åˆ°ä»€ä¹ˆä½ç½®ï¼Œä»¥åŠå‘Šè¯‰è¿ç»´äººå‘˜åº”è¯¥åœ¨ä½•å¤„æ‰¾åˆ°æ‰€éœ€çš„æ–‡ä»¶ã€‚ä½†ç›®å‰FHSå¯¹äºè¿ç»´å·¥ç¨‹å¸ˆæ¥è®²ä¹Ÿç®—æ˜¯ä¸€ç§é“å¾·æ“å®ˆï¼Œæœ‰äº›è¿ç»´äººå‘˜å°±æ˜¯æ‡’å¾—éµå®ˆï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰å¬è¯´è¿‡è¿™ä¸ªä¸œä¸œï¼Œä¾ç„¶ä¼šæŠŠæ–‡ä»¶åˆ°å¤„ä¹±æ”¾ã€‚åˆ˜é„è€å¸ˆå¹¶ä¸è¦æ±‚åŒå­¦ä»¬å»è°´è´£ä»–ä»¬ï¼Œè€Œåº”è¯¥æŠŠè‡ªå·±çš„çŸ¥è¯†æ´»å­¦æ´»ç”¨ï¼Œåƒä¸‡ä¸è¦è®¤å‡†è¿™ä¸ªFHSåå®šåªè®²æ­»é“ç†ï¼Œé‚£åƒäºçš„å°±å¯èƒ½æ˜¯è‡ªå·±å•¦ï¼Œæœ€å¸¸è§çš„ç›®å½•æ‰€å¯¹åº”çš„ç”¨å¤„åŒ…æ‹¬æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>ç›®å½•åç§°</th>
<th>åº”æ”¾ç½®æ–‡ä»¶çš„å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>/boot</td>
<td>å¼€æœºæ‰€éœ€æ–‡ä»¶â€”â€”å†…æ ¸,å¼€æœºèœå•åŠæ‰€éœ€é…ç½®æ–‡ä»¶ç­‰</td>
</tr>
<tr>
<td>/dev</td>
<td>ä»»ä½•è®¾å¤‡ä¸æ¥å£éƒ½ä»¥æ–‡ä»¶å½¢å¼å­˜æ”¾åœ¨æ­¤ç›®å½•</td>
</tr>
<tr>
<td>/etc</td>
<td>é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>/home</td>
<td>ç”¨æˆ·ä¸»ç›®å½•</td>
</tr>
<tr>
<td>/bin</td>
<td>å•ç”¨æˆ·ç»´æŠ¤æ¨¡å¼ä¸‹è¿˜èƒ½å¤Ÿè¢«æ“ä½œçš„å‘½ä»¤</td>
</tr>
<tr>
<td>/lib</td>
<td>å¼€æœºæ—¶ç”¨åˆ°çš„å‡½æ•°åº“åŠ/binä¸/sbinä¸‹é¢å‘½ä»¤è¦è°ƒç”¨çš„å‡½æ•°</td>
</tr>
<tr>
<td>/sbin</td>
<td>å¼€æœºè¿‡ç¨‹ä¸­éœ€è¦çš„</td>
</tr>
<tr>
<td>/media</td>
<td>ä¸€èˆ¬æŒ‚è½½æˆ–åˆ é™¤çš„è®¾å¤‡</td>
</tr>
<tr>
<td>/opt</td>
<td>æ”¾ç½®ç¬¬ä¸‰æ–¹çš„è½¯ä»¶</td>
</tr>
<tr>
<td>/root</td>
<td>ç³»ç»Ÿç®¡ç†å‘˜çš„ä¸»æ–‡ä»¶å¤¹</td>
</tr>
<tr>
<td>/srv</td>
<td>ä¸€äº›ç½‘ç»œæœåŠ¡çš„æ•°æ®ç›®å½•</td>
</tr>
<tr>
<td>/tmp</td>
<td>ä»»ä½•äººå‡å¯ä½¿ç”¨çš„â€œå…±äº«â€ä¸´æ—¶ç›®å½•</td>
</tr>
<tr>
<td>/proc</td>
<td>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œä¾‹å¦‚ç³»ç»Ÿå†…æ ¸ï¼Œè¿›ç¨‹ï¼Œå¤–éƒ¨è®¾å¤‡åŠç½‘ç»œçŠ¶æ€ç­‰</td>
</tr>
<tr>
<td>/usr/local</td>
<td>ç”¨æˆ·è‡ªè¡Œå®‰è£…çš„è½¯ä»¶</td>
</tr>
<tr>
<td>/usr/sbin</td>
<td>éç³»ç»Ÿå¼€æœºæ—¶éœ€è¦çš„è½¯ä»¶/å‘½ä»¤/è„šæœ¬</td>
</tr>
<tr>
<td>/usr/share</td>
<td>å¸®åŠ©ä¸è¯´æ˜æ–‡ä»¶ï¼Œä¹Ÿå¯æ”¾ç½®å…±äº«æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>/var</td>
<td>ä¸»è¦å­˜æ”¾ç»å¸¸å˜åŒ–çš„æ–‡ä»¶ï¼Œå¦‚æ—¥å¿—ã€‚</td>
</tr>
<tr>
<td>/lost+found</td>
<td>å½“æ–‡ä»¶ç³»ç»Ÿå‘ç”Ÿé”™è¯¯æ—¶ï¼Œå°†ä¸€äº›ä¸¢å¤±çš„æ–‡ä»¶ç‰‡æ®µå­˜æ”¾åœ¨è¿™é‡Œ</td>
</tr>
</tbody>
</table>
<h4 id="è·¯å¾„"><a href="#è·¯å¾„" class="headerlink" title="è·¯å¾„"></a>è·¯å¾„</h4><p>è·¯å¾„æŒ‡çš„æ˜¯å¦‚ä½•å®šä½åˆ°æŸä¸ªæ–‡ä»¶ï¼Œåˆ†ä¸ºç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„ã€‚åœ¨Linuxç³»ç»Ÿä¸­çš„ç»å¯¹è·¯å¾„æŒ‡çš„æ˜¯ä»æ ¹ç›®å½•ï¼ˆ/ï¼‰å¼€å§‹å†™èµ·çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ï¼Œè€Œç›¸å¯¹è·¯å¾„åˆ™æŒ‡çš„æ˜¯ç›¸å¯¹äºå½“å‰è·¯å¾„çš„å†™æ³•ã€‚</p>
<p>ç»å¯¹è·¯å¾„(absolute): /root/dir/a/b/c<br>ç›¸å¯¹è·¯å¾„(relative): ./dir/a/b/c</p>
<h4 id="ç‰©ç†è®¾å¤‡çš„å‘½åè§„åˆ™"><a href="#ç‰©ç†è®¾å¤‡çš„å‘½åè§„åˆ™" class="headerlink" title="ç‰©ç†è®¾å¤‡çš„å‘½åè§„åˆ™"></a>ç‰©ç†è®¾å¤‡çš„å‘½åè§„åˆ™</h4><p>Linuxç³»ç»Ÿä¸­ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶ï¼Œé‚£ä¹ˆç¡¬ä»¶è®¾å¤‡è‚¯å®šä¹Ÿä¸ä¾‹å¤–ã€‚æ—¢ç„¶æ˜¯æ–‡ä»¶å°±å¿…é¡»æœ‰åç§°å•¦ï¼Œç³»ç»Ÿå†…æ ¸çš„udevè®¾å¤‡ç®¡ç†å™¨ä¼šè‡ªåŠ¨æŠŠç¡¬ä»¶åç§°è§„èŒƒèµ·æ¥ï¼Œç›®çš„æ˜¯è®©è¿ç»´äººå‘˜å¯ä»¥é€šè¿‡è®¾å¤‡æ–‡ä»¶çš„åå­—çŒœå‡ºè®¾å¤‡å¤§è‡´çš„å±æ€§ä»¥åŠåˆ†åŒºä¿¡æ¯ç­‰ï¼Œå¯¹äºé™Œç”Ÿçš„è®¾å¤‡è¿™ç‚¹ç‰¹åˆ«çš„æ–¹ä¾¿ï¼Œå¦å¤–udevæœåŠ¡ä¼šä¸€ç›´ä»¥å®ˆæŠ¤è¿›ç¨‹çš„å½¢å¼è¿è¡Œå¹¶ä¾¦å¬æ¥è‡ªå†…æ ¸å‘å‡ºçš„ä¿¡å·æ¥ç®¡ç†/devç›®å½•ä¸‹çš„è®¾å¤‡æ–‡ä»¶ã€‚å¸¸è§çš„ç¡¬ä»¶å‘½åè§„åˆ™å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>ç¡¬ä»¶è®¾å¤‡    æ–‡ä»¶åç§°</th>
</tr>
</thead>
<tbody>
<tr>
<td>IDEè®¾å¤‡</td>
<td>/dev/hd[a-d]</td>
</tr>
<tr>
<td>SCSI/SATA/Uç›˜</td>
<td>/dev/sd[a-p]</td>
</tr>
<tr>
<td>è½¯é©±</td>
<td>/dev/fd[0-1]</td>
</tr>
<tr>
<td>æ‰“å°æœº</td>
<td>/dev/lp[0-15]</td>
</tr>
<tr>
<td>å…‰é©±</td>
<td>/dev/cdrom</td>
</tr>
<tr>
<td>é¼ æ ‡</td>
<td>/dev/mouse</td>
</tr>
<tr>
<td>ç£å¸¦æœº</td>
<td>/dev/st0æˆ–/dev/ht0(IDEè®¾å¤‡)</td>
</tr>
</tbody>
</table>
<p>å› ä¸ºç°åœ¨çš„IDEè®¾å¤‡å·²ç»å¾ˆå°‘è§å•¦ï¼Œæ‰€ä»¥ä¸€èˆ¬ç¡¬ç›˜è®¾å¤‡éƒ½ä¼šæ˜¯ä»¥â€œ/dev/sdâ€å¼€å¤´çš„ï¼Œè€Œä¸€å°ä¸»æœºä¸Šå¯ä»¥æœ‰å¤šå—ç¡¬ç›˜ï¼Œå› æ­¤ç³»ç»Ÿä¾¿ä¼šç”¨a-pæ¥ä»£è¡¨16å—ä¸åŒçš„ç¡¬ç›˜ï¼ˆé»˜è®¤ä»aå¼€å§‹åˆ†é…ï¼‰ä¸”åˆ†åŒºç¼–å·ä¹Ÿå¾ˆæœ‰è®²ç©¶ã€‚</p>
<blockquote>
<p>ä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºçš„ç¼–å·ä»1å¼€å§‹è‡³4ç»“æŸã€‚<br>é€»è¾‘åˆ†åŒºä»ç¼–å·5å¼€å§‹ã€‚</p>
</blockquote>
<h4 id="MBR"><a href="#MBR" class="headerlink" title="MBR"></a>MBR</h4><p>è®¡ç®—æœºä¸­æœ‰äº†ç¡¬ç›˜è®¾å¤‡æ‰ä½¿å¾—æ¸¸æˆé€šå…³è¿‡åå¯ä»¥ä¿å­˜è®°å½•è€Œä¸æ˜¯å†æ¯æ¬¡å†é‡å¤´å¼€å§‹ï¼Œç¡¬ç›˜è®¾å¤‡åˆ™æ˜¯ç”±å¤§é‡çš„æ‰‡åŒºç»„æˆçš„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ‰‡åŒºæœ€é‡è¦ï¼Œå®ƒé‡Œé¢ä¿å­˜ç€ä¸»å¼•å¯¼è®°å½•ä¸åˆ†åŒºè¡¨ä¿¡æ¯ã€‚å•ä¸ªæ‰‡åŒºå®¹é‡ä¸º512bytesç»„æˆï¼Œä¸»å¼•å¯¼è®°å½•éœ€è¦å ç”¨446bytesï¼Œåˆ†åŒºè¡¨çš„ä¸º64bytesï¼Œç»“æŸç¬¦å ç”¨2bytesï¼Œè€Œå…¶ä¸­æ¯è®°å½•ä¸€ä¸ªåˆ†åŒºä¿¡æ¯éœ€è¦16bytesï¼Œè¿™æœ€å¤šå››ä¸ªèƒ½æœ‰å¹¸è¢«å†™åˆ°ç¬¬ä¸€ä¸ªæ‰‡åŒºä¸­çš„åˆ†åŒºä¿¡æ¯å°±å«åšä¸»åˆ†åŒºã€‚</p>
<h4 id="æ–‡ä»¶ç³»ç»Ÿä¸æ•°æ®èµ„æ–™"><a href="#æ–‡ä»¶ç³»ç»Ÿä¸æ•°æ®èµ„æ–™" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿä¸æ•°æ®èµ„æ–™"></a>æ–‡ä»¶ç³»ç»Ÿä¸æ•°æ®èµ„æ–™</h4><p>ç”¨æˆ·åœ¨ç¡¬ä»¶å­˜å‚¨è®¾å¤‡ä¸Šé¢æ­£å¸¸å»ºç«‹æ–‡ä»¶ã€å†™å…¥ï¼Œè¯»å–ï¼Œä¿®æ”¹ï¼Œè½¬å­˜æ–‡ä»¶ä¸æ§åˆ¶æ–‡ä»¶ç­‰ç­‰æ“ä½œéƒ½æ˜¯ä¾é äº†æ–‡ä»¶ç³»ç»Ÿæ¥å®Œæˆçš„ï¼Œæ–‡ä»¶ç³»ç»Ÿçš„ä½œç”¨æ˜¯æŠŠç¡¬ç›˜åˆç†çš„è§„åˆ’ï¼Œä¿è¯ç”¨æˆ·æ­£å¸¸çš„ä½¿ç”¨éœ€æ±‚ï¼Œåœ¨Linuxç³»ç»Ÿä¸­æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿå°±æœ‰æ•°åç§ï¼Œè€Œæœ€å¸¸è§çš„æ–‡ä»¶ç³»ç»Ÿæœ‰ï¼š</p>
<p>Ext3æ˜¯ä¸€æ¬¾æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿï¼Œèƒ½å¤Ÿåœ¨å¼‚å¸¸å®•æœºä¸­é¿å…æ–‡ä»¶ç³»ç»Ÿèµ„æ–™ä¸¢å¤±çš„æƒ…å†µï¼Œè‡ªåŠ¨ä¿®å¤æ•°æ®çš„ä¸ä¸€è‡´ä¸é”™è¯¯ï¼Œç„¶è€Œå¯¹äºå®¹é‡è¾ƒå¤§çš„ç¡¬ç›˜æ¥è¯´éœ€è¦è€—è´¹åœ¨ä¿®å¤ä¸Šçš„æ—¶é—´ä¹Ÿä¼šéå¸¸å¤šï¼Œå¹¶ä¸”ä¹Ÿä¸èƒ½ä¿è¯100%èµ„æ–™ä¸æµå¤±ã€‚å®ƒä¼šæŠŠæ•´ä¸ªç£ç›˜çš„æ¯ä¸ªå†™å…¥åŠ¨ä½œç»†èŠ‚éƒ½é¢„å…ˆè®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿åœ¨å¼‚å¸¸å®•æœºåèƒ½å¤Ÿå›æº¯è¿½è¸ªåˆ°è¢«ä¸­æ–­çš„éƒ¨åˆ†ã€‚</p>
<p>Ext4å¯ä»¥ç§°ä¸ºæ˜¯Ext3çš„åç»§ç‰ˆæœ¬ï¼Œä½œä¸ºRHEL6ç³»ç»Ÿä¸­çš„é»˜è®¤æ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œå®ƒæ”¯æŒæ›´å¤§çš„æ–‡ä»¶ç³»ç»Ÿåˆ°1EBï¼ˆ1EB=1,073,741,824GBä¸”èƒ½å¤Ÿæœ‰æ— é™å¤šçš„å­ç›®å½•ï¼‰ï¼Œå¦å¤–Ext4æ–‡ä»¶ç³»ç»Ÿèƒ½å¤Ÿæ‰¹é‡åˆ†é…blockå—å¹¶ä½œâ€Extentsâ€æå¤§çš„æé«˜äº†è¯»å†™æ•ˆç‡ã€‚</p>
<p>XFSä½œä¸ºæœ€æ–°RHEL7ä¸­é»˜è®¤çš„æ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œå®ƒçš„æ—¥å¿—å‹æ–‡ä»¶ç®¡ç†ç³»ç»Ÿçš„ä¼˜åŠ¿åœ¨æ„å¤–å®•æœºåå°¤å…¶æ˜æ˜¾ï¼Œå¯ä»¥å¿«é€Ÿçš„æ¢å¤å¯èƒ½è¢«ç ´åçš„æ–‡ä»¶ï¼Œå¦å¤–ç»è¿‡ä¼˜åŒ–åæ—¥å¿—åŠŸèƒ½å¯¹ç¡¬ç›˜æ€§èƒ½å½±å“éå¸¸å°ï¼ŒåŒæ—¶æœ€å¤§æ”¯æŒ18EBçš„å­˜å‚¨å®¹é‡æ»¡è¶³äº†å‡ ä¹æ‰€æœ‰éœ€æ±‚ã€‚</p>
<h5 id="inode"><a href="#inode" class="headerlink" title="inode"></a>inode</h5><p>æ—¥å¸¸ä¸­åœ¨ç¡¬ç›˜è¦ä¿å­˜çš„æ•°æ®å®åœ¨å¤ªå¤šäº†ï¼Œå› æ­¤å°±è¦æœ‰ä¸ªå«super blockçš„â€œç¡¬ç›˜åœ°å›¾â€ï¼Œå¹¶ä¸æ˜¯æŠŠæ•°æ®ç›´æ¥å†™å…¥åˆ°è¿™ä¸ªâ€œå¤§åœ°å›¾â€é‡Œé¢ï¼Œè€Œæ˜¯åœ¨ä¸Šé¢è®°å½•ç€æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼Œå› ä¸ºå¦‚æœæŠŠæ‰€æœ‰çš„ä¿¡æ¯éƒ½å†™å…¥åˆ°è¿™é‡Œé¢çš„è¯ï¼Œå°±ä¸€å®šä¼šå¯¼è‡´å®ƒçš„ä½“ç§¯å˜çš„å¾ˆå¤§ï¼ŒæŸ¥è¯¢ä¸å†™å…¥é€Ÿåº¦ä¼šå˜çš„å¾ˆæ…¢ï¼Œäºæ˜¯æ¯ä¸ªæ–‡ä»¶çš„æƒé™ä¸å±æ€§éƒ½ä¼šè®°å½•åœ¨inodeä¸­ï¼ˆæ¯ä¸ªæ–‡ä»¶éƒ½ä¼šå ç”¨ä¸€ä¸ªç‹¬ç«‹çš„inodeè¡¨æ ¼ï¼Œé»˜è®¤ä¸º128bytesï¼‰ï¼Œè®°å½•ç€ï¼š</p>
<blockquote>
<p>è¯¥æ–‡ä»¶çš„è®¿é—®æƒé™(read,write,execute)<br>è¯¥æ–‡ä»¶çš„æ‰€å±ä¸»ä¸ç»„(owner,group)<br>è¯¥æ–‡ä»¶çš„å¤§å°(size)<br>è¯¥æ–‡ä»¶çš„åˆ›å»ºæˆ–çŠ¶æ€ä¿®æ”¹æ—¶é—´(ctime)<br>è¯¥æ–‡ä»¶çš„æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´(atime)<br>è¯¥æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´(mtime)<br>æ–‡ä»¶çš„ç‰¹æ®Šæƒé™(SUID,SGID,SBIT)<br>è¯¥æ–‡ä»¶çš„çœŸå®æ•°æ®åœ°å€(point)</p>
</blockquote>
<h5 id="block"><a href="#block" class="headerlink" title="block"></a>block</h5><p>è€Œæ–‡ä»¶çš„å®é™…æ•°æ®å†…å®¹åˆ™ä¿å­˜åœ¨blockå—ä¸­ï¼ˆå¤§å°å¯ä»¥æ˜¯1Kã€2Kæˆ–4Kï¼‰ï¼Œä¸€ä¸ªinodeå¤§å°ä»…ä¸º128bytesï¼ˆExt3ï¼‰ï¼Œè®°å½•ä¸€ä¸ªblockæ¶ˆè€—4bytesï¼Œä¸€èˆ¬å½“æŠŠinodeå†™æ»¡åå°±ä¼šå–å‡ºä¸€ä¸ªblockç”¨äºå·ç è®°å½•è€Œä¸å†æ˜¯ä¿å­˜å®é™…çš„æ–‡ä»¶ç³»ç»Ÿã€‚ä¸‹é¢çš„è¯´æ˜ä¸­ä»¥4Kä¸ºä¾‹ã€‚</p>
<blockquote>
<p>æƒ…å†µä¸€ï¼šæ–‡ä»¶ä½“ç§¯å¾ˆå°ï¼ˆ1Kï¼‰ï¼Œé‚£ä¹ˆä¾ç„¶ä¼šå ç”¨ä¸€ä¸ªblockï¼Œæ½œåœ¨çš„æµªè´¹3Kã€‚<br>æƒ…å†µäºŒï¼šæ–‡ä»¶ä½“ç§¯å¾ˆå¤§ï¼ˆ5Kï¼‰ï¼Œé‚£ä¹ˆä¼šå ç”¨ä¸¤ä¸ªï¼ˆ5K-4Kå‰©ä¸‹çš„1Kä¹Ÿè¦å ç”¨ä¸€ä¸ªblockï¼‰ã€‚</p>
</blockquote>
<h5 id="VFS"><a href="#VFS" class="headerlink" title="VFS"></a>VFS</h5><p>å®é™…ä¸Šéšç€è®¡ç®—æœºç³»ç»Ÿçš„å‘å±•äº§ç”Ÿå‡ºäº†ä¼—å¤šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¸ºäº†ä½¿ç”¨æˆ·åœ¨è¯»å–æˆ–å†™å…¥æ–‡ä»¶æ—¶ä¸ç”¨å…³å¿ƒåº•å±‚çš„ç¡¬ç›˜ç»“æ„ï¼Œäºæ˜¯åœ¨Linuxå†…æ ¸ä¸­çš„è½¯ä»¶å±‚ä¸ºç”¨æˆ·ç¨‹åºæä¾›äº†ä¸€ä¸ªVFSæ–‡ä»¶ç³»ç»Ÿæ¥å£(Virtual File System)ï¼Œè¿™æ ·å°±è½¬è€Œç»Ÿä¸€å¯¹è¿™ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ“ä½œå•¦ã€‚å®é™…æ–‡ä»¶ç³»ç»Ÿåœ¨VFSä¸‹éšè—äº†è‡ªå·±çš„ç‰¹æ€§å’Œç»†èŠ‚ï¼Œä½¿å¾—å’±ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨æ—¶è§‰å¾—â€œæ–‡ä»¶ç³»ç»Ÿéƒ½æ˜¯ä¸€æ ·çš„â€ï¼Œæ¯”å¦‚ä½¿ç”¨cpå‘½ä»¤å°±åœ¨ä»»ä½•æ–‡ä»¶ç³»ç»Ÿä¸­å¤åˆ¶æ–‡ä»¶äº†ã€‚</p>
<h2 id="ç¬¬ä¹èŠ‚è¯¾"><a href="#ç¬¬ä¹èŠ‚è¯¾" class="headerlink" title="ç¬¬ä¹èŠ‚è¯¾"></a>ç¬¬ä¹èŠ‚è¯¾</h2><h3 id="å­˜å‚¨ç»“æ„ä¸ç£ç›˜åˆ’åˆ†-1"><a href="#å­˜å‚¨ç»“æ„ä¸ç£ç›˜åˆ’åˆ†-1" class="headerlink" title="å­˜å‚¨ç»“æ„ä¸ç£ç›˜åˆ’åˆ†"></a>å­˜å‚¨ç»“æ„ä¸ç£ç›˜åˆ’åˆ†</h3><h4 id="æŒ‚è½½ç¡¬ä»¶è®¾å¤‡"><a href="#æŒ‚è½½ç¡¬ä»¶è®¾å¤‡" class="headerlink" title="æŒ‚è½½ç¡¬ä»¶è®¾å¤‡"></a>æŒ‚è½½ç¡¬ä»¶è®¾å¤‡</h4><h5 id="mount"><a href="#mount" class="headerlink" title="mount"></a>mount</h5><p>|å‚æ•°|ä½œç”¨|<br>|-a|æŒ‚è½½æ‰€æœ‰åœ¨/etc/fstabä¸­å®šä¹‰çš„æ–‡ä»¶ç³»ç»Ÿ|<br>|-t|æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹|</p>
<hr>
<p>/etc/fstab</p>
<p>/dev/sdb2 /backup ext4 defaults 0 0</p>
<p>å¡«å†™æ ¼å¼å¦‚ä¸‹ï¼šâ€œè®¾å¤‡æ–‡ä»¶ æŒ‚è½½ç›®å½• æ ¼å¼ç±»å‹ æƒé™é€‰é¡¹ è‡ªæ£€ ä¼˜å…ˆçº§â€</p>
<p>è®¾å¤‡æ–‡ä»¶ï¼šä¸€èˆ¬ä¸ºè®¾å¤‡çš„è·¯å¾„+è®¾å¤‡åç§°ï¼Œä¹Ÿå¯ä»¥å†™UUIDå€¼ã€‚<br>æŒ‚è½½ç›®å½•ï¼šæŒ‡å®šè¦æŒ‚è½½åˆ°çš„ç›®å½•ï¼Œéœ€æŒ‚è½½å‰åˆ›å»ºå¥½ã€‚<br>æ ¼å¼ç±»å‹ï¼šå³æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼ï¼Œæ¯”å¦‚æœ‰ext3/ext4/xfs/swap/iso9660ï¼ˆæ­¤ä¸ºå…‰ç›˜è®¾å¤‡ï¼‰ç­‰ç­‰ã€‚<br>æƒé™é€‰é¡¹ï¼šé»˜è®¤ä¸ºdefaults(rw,suid,dev,exec,auto,nouser,async)ï¼Œå¯æŒ‡å®šaclæˆ–quotaç­‰ã€‚<br>è‡ªæ£€ï¼šè‹¥ä¸º1åˆ™å¼€æœºåè¿›è¡Œç£ç›˜è‡ªæ£€ï¼Œ0ä¸ºä¸è‡ªæ£€ã€‚<br>ä¼˜å…ˆçº§ï¼šè‹¥â€œè‡ªæ£€â€ä¸º1ï¼Œåˆ™å¯å¯¹å¤šå—ç¡¬ç›˜è¿›è¡Œä¼˜å…ˆçº§è®¾ç½®ã€‚</p>
<hr>
<h5 id="umount"><a href="#umount" class="headerlink" title="umount"></a>umount</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /dev/sdb2</span><br></pre></td></tr></table></figure>
<h5 id="fdisk"><a href="#fdisk" class="headerlink" title="fdisk"></a>fdisk</h5><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>m</td>
<td>æŸ¥çœ‹å…¨éƒ¨å¯ç”¨çš„å‚æ•°</td>
</tr>
<tr>
<td>n</td>
<td>æ·»åŠ æ–°çš„åˆ†åŒº</td>
</tr>
<tr>
<td>d</td>
<td>åˆ é™¤æŸä¸ªåˆ†åŒºä¿¡æ¯</td>
</tr>
<tr>
<td>l</td>
<td>åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„åˆ†åŒºç±»å‹</td>
</tr>
<tr>
<td>t</td>
<td>æ”¹å˜æŸä¸ªåˆ†åŒºçš„ç±»å‹</td>
</tr>
<tr>
<td>p</td>
<td>æŸ¥çœ‹åˆ†åŒºè¡¨ä¿¡æ¯</td>
</tr>
<tr>
<td>w</td>
<td>ä¿å­˜å¹¶é€€å‡º</td>
</tr>
<tr>
<td>q</td>
<td>ä¸ä¿å­˜ç›´æ¥é€€å‡º</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿›å…¥fdiskäº¤äº’å¼åˆ†åŒºç•Œé¢</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line"><span class="comment">#æŸ¥çœ‹åˆ†åŒº</span></span><br><span class="line">fdisk /dev/sdb -l</span><br></pre></td></tr></table></figure>
<h5 id="mkfs"><a href="#mkfs" class="headerlink" title="mkfs"></a>mkfs</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 /dev/sdb2</span><br></pre></td></tr></table></figure>
<h5 id="df"><a href="#df" class="headerlink" title="df"></a>df</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br></pre></td></tr></table></figure>
<h5 id="du"><a href="#du" class="headerlink" title="du"></a>du</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹å ç”¨å¤šå¤§ç¡¬ç›˜ç©ºé—´</span></span><br><span class="line">du -sh</span><br></pre></td></tr></table></figure>
<h4 id="æ·»åŠ äº¤æ¢åˆ†åŒº"><a href="#æ·»åŠ äº¤æ¢åˆ†åŒº" class="headerlink" title="æ·»åŠ äº¤æ¢åˆ†åŒº"></a>æ·»åŠ äº¤æ¢åˆ†åŒº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¼å¼åŒ–swapåˆ†åŒº</span></span><br><span class="line">mkswap /dev/sdb5</span><br><span class="line"><span class="comment">#æŒ‚è½½swapåˆ†åŒº</span></span><br><span class="line">swapon /dev/sdb5</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¼€å¯è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line">vi /etc/fstab</span><br><span class="line">/dev/sdb5 swap swap defaults 0 0</span><br></pre></td></tr></table></figure>
<h4 id="ç£ç›˜å®¹é‡é…é¢"><a href="#ç£ç›˜å®¹é‡é…é¢" class="headerlink" title="ç£ç›˜å®¹é‡é…é¢"></a>ç£ç›˜å®¹é‡é…é¢</h4><p>Linuxç³»ç»Ÿçš„è®¾è®¡åˆè¡·ç†å¿µå°±è®©è®¸å¤šäººä¸€èµ·ä½¿ç”¨ï¼Œæˆä¸ºå¤šç”¨æˆ·ã€å¤šä»»åŠ¡çš„æ“ä½œç³»ç»Ÿï¼Œä½†æ˜¯ç¡¬ä»¶çš„èµ„æºæ˜¯å›ºå®šæœ‰é™çš„ï¼Œå¦‚æœå‡ºç°ä¸ªå°ç ´åä»½å­ä¸æ–­çš„åˆ›å»ºæ–‡ä»¶æˆ–ä¸‹è½½ç”µå½±ï¼Œé‚£ä¹ˆç¡¬ç›˜ç©ºé—´æ€»æœ‰ä¸€å¤©ä¼šè¢«å æ»¡çš„å§.è¿™æ—¶å°±éœ€è¦ç£ç›˜é…é¢æœåŠ¡å¸®åŠ©ç®¡ç†å‘˜é™åˆ¶æŸç”¨æˆ·æˆ–æŸä¸ªç”¨æˆ·ç»„å¯¹ç‰¹å®šæ–‡ä»¶å¤¹å¯ä»¥ä½¿ç”¨çš„æœ€å¤§ç¡¬ç›˜ç©ºé—´ï¼Œä¸€æ—¦è¶…å‡ºé¢„ç®—å°±ä¸å†å…è®¸ä»–ä»¬ç»§ç»­ä½¿ç”¨ã€‚quotaæœåŠ¡åšç£ç›˜é…é¢å¯ä»¥é™åˆ¶ç”¨æˆ·çš„ç¡¬ç›˜å¯ç”¨é‡æˆ–æœ€å¤§åˆ›å»ºæ–‡ä»¶æ•°é‡ï¼Œå¹¶ä¸”è¿˜æœ‰è½¯ã€ç¡¬é™åˆ¶çš„åŠŸèƒ½ï¼š</p>
<blockquote>
<p>è½¯é™åˆ¶:å½“è¾¾åˆ°è½¯é™åˆ¶æ—¶ä¼šæç¤ºç”¨æˆ·ï¼Œä½†å…è®¸ç”¨æˆ·åœ¨è§„å®šé¢åº¦å†…ç»§ç»­ä½¿ç”¨ã€‚<br>ç¡¬é™åˆ¶:å½“è¾¾åˆ°ç¡¬é™åˆ¶æ—¶ä¼šæç¤ºç”¨æˆ·ï¼Œä¸”å¼ºåˆ¶ç»ˆæ­¢ç”¨æˆ·çš„æ“ä½œã€‚</p>
</blockquote>
<p>å¯¹äºå­¦ä¹ è¿‡æ—©æœŸLinuxç³»ç»Ÿæˆ–æœ‰çº¢å¸½RHEL6ç³»ç»Ÿä½¿ç”¨ç»éªŒçš„åŒå­¦å¯èƒ½ä¼šçŠ¯ä¸€ä¸ªå°é”™è¯¯ï¼Œå› ä¸ºæ—©æœŸLinuxç³»ç»Ÿæƒ³è®©è®¾å¤‡æ”¯æŒquotaç£ç›˜é…é¢æœåŠ¡çš„æ˜¯usrquotaå‚æ•°ï¼Œè€Œåœ¨æœ¬ç³»ç»Ÿä¸­åˆ™æ˜¯uquotaå‚æ•°ï¼Œç„¶åé‡å¯ç³»ç»Ÿåå°±èƒ½ä½¿ç”¨mountå‘½ä»¤çœ‹åˆ°/bootç›®å½•å·²ç»æ”¯æŒäº†quotaç£ç›˜é…é¢æŠ€æœ¯å•¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/fstab</span><br><span class="line">/dev/sdb4 /mnt/xfs xfs defaults,uquota 1 1</span><br></pre></td></tr></table></figure>
<h5 id="xfs-quota"><a href="#xfs-quota" class="headerlink" title="xfs_quota"></a>xfs_quota</h5><p>å…¶ä¸­-cå‚æ•°ç”¨äºä»¥å‚æ•°çš„å½¢å¼è®¾ç½®è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œ-xå‚æ•°æ˜¯ä¸“å®¶æ¨¡å¼ï¼Œè®©è¿ç»´äººå‘˜èƒ½å¤Ÿå¯¹quotaæœåŠ¡åšæ›´å¤šå¤æ‚çš„é…ç½®ã€‚é‚£ä¹ˆå°±æ¥ç”¨xfs_quotaå‘½ä»¤è®¾ç½®tomç”¨æˆ·å¯¹/bootç›®å½•çš„ç£ç›˜é…é¢å§ï¼Œå…·ä½“çš„é™é¢æ§åˆ¶åŒ…æ‹¬æœ‰ç¡¬ç›˜ä½¿ç”¨è½¯é™åˆ¶ä¸º3Mï¼Œç¡¬ç›˜ä½¿ç”¨ç¡¬é™åˆ¶ä¸º6Mï¼Œåˆ›å»ºæ–‡ä»¶æ•°é‡è½¯é™åˆ¶ä¸º3ä¸ªï¼Œåˆ›å»ºæ–‡ä»¶ç¡¬é™åˆ¶ä¸º6ä¸ªã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xfs_quota -x -c <span class="string">'limit bsoft=3m bhard=6m isoft=3 ihard=6 tom'</span> /boot</span><br><span class="line"></span><br><span class="line">xfs_quota -x -c report /boot</span><br></pre></td></tr></table></figure>
<h5 id="edquota"><a href="#edquota" class="headerlink" title="edquota"></a>edquota</h5><p>åœ¨ä¸ºç”¨æˆ·è®¾ç½®äº†quotaç£ç›˜é…é¢é™åˆ¶åå¯ä»¥ç”¨edquotaæ¥éšç€éœ€æ±‚çš„å˜åŒ–è€Œè¿›ä¸€æ­¥ä¿®æ”¹é™é¢çš„æ•°å€¼ï¼Œå…¶ä¸­-uå‚æ•°ä»£è¡¨è¦é’ˆå¯¹é‚£ä¸ªç”¨æˆ·è¿›è¡Œçš„è®¾ç½®ï¼Œ-gå‚æ•°åˆ™ä»£è¡¨è¦é’ˆå¯¹é‚£ä¸ªç”¨æˆ·ç»„è¿›è¡Œçš„è®¾ç½®ï¼Œedquotaå‘½ä»¤ä¼šè°ƒç”¨viæˆ–vimç¼–è¾‘å™¨æ¥è®©ç”¨æˆ·ä¿®æ”¹è¦é™åˆ¶çš„é¡¹ç›®ã€‚</p>
<h4 id="è½¯ç¡¬æ–¹å¼é“¾æ¥"><a href="#è½¯ç¡¬æ–¹å¼é“¾æ¥" class="headerlink" title="è½¯ç¡¬æ–¹å¼é“¾æ¥"></a>è½¯ç¡¬æ–¹å¼é“¾æ¥</h4><p>ç¡¬é“¾æ¥(hard link)å¯ä»¥è¢«ç†è§£ä¸ºä¸€ä¸ªâ€œæŒ‡å‘åŸå§‹æ–‡ä»¶inodeçš„æŒ‡é’ˆâ€ï¼Œç³»ç»Ÿä¸ä¸ºå®ƒåˆ†é…ç‹¬ç«‹çš„inodeä¸æ–‡ä»¶ï¼Œæ‰€ä»¥å®é™…ä¸Šæ¥è®²ç¡¬é“¾æ¥æ–‡ä»¶ä¸åŸå§‹æ–‡ä»¶å…¶å®æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ï¼Œåªæ˜¯åå­—ä¸åŒã€‚äºæ˜¯æ¯æ·»åŠ ä¸€ä¸ªç¡¬é“¾æ¥ï¼Œè¯¥æ–‡ä»¶çš„inodeè¿æ¥æ•°å°±ä¼šå¢åŠ 1ï¼Œç›´åˆ°è¯¥æ–‡ä»¶çš„inodeè¿æ¥æ•°å½’0æ‰æ˜¯å½»åº•åˆ é™¤ã€‚ä¹Ÿå°±æ˜¯è¯´å› ä¸ºç¡¬é“¾æ¥å®é™…å°±æ˜¯æŒ‡å‘åŸæ–‡ä»¶inodeçš„æŒ‡é’ˆï¼Œå³ä¾¿åŸå§‹æ–‡ä»¶è¢«åˆ é™¤ä¾ç„¶å¯ä»¥é€šè¿‡é“¾æ¥æ–‡ä»¶è®¿é—®ï¼Œä½†æ˜¯ç”±äºæŠ€æœ¯çš„å±€é™æ€§è€Œä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿä¹Ÿä¸èƒ½é“¾æ¥ç›®å½•æ–‡ä»¶ã€‚</p>
<p>è½¯é“¾æ¥ä¹Ÿç§°ä¸ºç¬¦å·é“¾æ¥ï¼ˆsymbolic linkï¼‰å³â€œä»…ä»…åŒ…å«å®ƒæ‰€è¦é“¾æ¥æ–‡ä»¶çš„è·¯å¾„åâ€å› æ­¤èƒ½åšç›®å½•é“¾æ¥ä¹Ÿå¯ä»¥è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿï¼Œä½†åŸå§‹æ–‡ä»¶è¢«åˆ é™¤åé“¾æ¥æ–‡ä»¶ä¹Ÿå°†å¤±æ•ˆï¼Œæ€§è´¨ä¸Šå’ŒWindowsâ„¢ç³»ç»Ÿä¸­çš„â€œå¿«æ·æ–¹å¼â€æ˜¯ä¸€æ ·çš„ã€‚</p>
<h5 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h5><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-s</td>
<td>åˆ›å»ºâ€ç¬¦å·é“¾æ¥â€(é»˜è®¤æ˜¯ç¡¬é“¾æ¥)</td>
</tr>
<tr>
<td>-f</td>
<td>å¼ºåˆ¶åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•çš„é“¾æ¥</td>
</tr>
<tr>
<td>-i</td>
<td>è¦†ç›–å‰å…ˆè¯¢é—®</td>
</tr>
<tr>
<td>-v</td>
<td>æ˜¾ç¤ºåˆ›å»ºé“¾æ¥çš„è¿‡ç¨‹</td>
</tr>
</tbody>
</table>
<h3 id="RAID"><a href="#RAID" class="headerlink" title="RAID"></a><a href="http://www.linuxprobe.com/chapter-07.html#71_RAID" target="_blank" rel="noopener">RAID</a></h3><p>RAID(Redundant Array of Independent Disks)ç£ç›˜å†—ä½™é˜µåˆ—</p>
<p>RAID0 å¤‡ä»½<br>RAID1 é€Ÿåº¦å¿«<br>RAID5 å®¹é‡å¤§<br>RAID10 RAID1+RAID1 å¤‡ä»½+é€Ÿåº¦å¿«</p>
<h4 id="éƒ¨ç½²ç£ç›˜é˜µåˆ—ç»„"><a href="#éƒ¨ç½²ç£ç›˜é˜µåˆ—ç»„" class="headerlink" title="éƒ¨ç½²ç£ç›˜é˜µåˆ—ç»„"></a>éƒ¨ç½²ç£ç›˜é˜µåˆ—ç»„</h4><h5 id="mdadm"><a href="#mdadm" class="headerlink" title="mdadm"></a>mdadm</h5><p>åœ¨ç°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æœåŠ¡å™¨ä¸€èˆ¬éƒ½ä¼šé…å¤‡æœ‰RAIDé˜µåˆ—å¡ï¼Œä»·æ ¼ä¹Ÿæ˜¯è¶Šæ¥è¶Šå»‰ä»·ï¼Œä½†æ²¡æœ‰å¿…è¦è®©åŒå­¦ä»¬ä¸ºäº†åšä¸€ä¸ªå®éªŒè€Œå•ç‹¬å»ä¹°ä¸€å°æœåŠ¡å™¨ï¼Œmdadmå‘½ä»¤èƒ½å¤Ÿåœ¨Linuxç³»ç»Ÿä¸­åˆ›å»ºå’Œç®¡ç†è½¯ä»¶RAIDç£ç›˜é˜µåˆ—ç»„ï¼Œå¯¹äºå…¶ä¸­çš„ç†è®ºçŸ¥è¯†å’Œæ“ä½œè¿‡ç¨‹æ˜¯ä¸ç”Ÿäº§ç¯å¢ƒä¿æŒä¸€è‡´çš„~mdadmå‘½ä»¤çš„å¸¸ç”¨å‚æ•°åŒ…æ‹¬ã€‚</p>
<p>mdadmç®¡ç†RAIDé˜µåˆ—çš„åŠ¨ä½œ</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>Assemble</td>
<td>å°†è®¾å¤‡åŠ å…¥åˆ°ä»¥å‰å®šä¹‰çš„é˜µåˆ—</td>
</tr>
<tr>
<td>Build</td>
<td>åˆ›å»ºä¸€ä¸ªæ²¡æœ‰è¶…çº§å—çš„é˜µåˆ—</td>
</tr>
<tr>
<td>Create</td>
<td>åˆ›å»ºä¸€ä¸ªæ–°çš„é˜µåˆ—ï¼Œæ¯ä¸ªè®¾å¤‡å…·æœ‰è¶…çº§å—</td>
</tr>
<tr>
<td>Manage</td>
<td>ç®¡ç†é˜µåˆ—ï¼ˆå¦‚æ·»åŠ å’Œåˆ é™¤ï¼‰</td>
</tr>
<tr>
<td>Misc</td>
<td>å…è®¸å•ç‹¬å¯¹é˜µåˆ—ä¸­çš„æŸä¸ªè®¾å¤‡è¿›è¡Œæ“ä½œï¼ˆå¦‚åœæ­¢é˜µåˆ—ï¼‰</td>
</tr>
<tr>
<td>Follow or Monitor</td>
<td>ç›‘æ§çŠ¶æ€</td>
</tr>
<tr>
<td>Grow</td>
<td>æ”¹å˜é˜µåˆ—çš„å®¹é‡æˆ–è®¾å¤‡æ•°ç›®</td>
</tr>
</tbody>
</table>
<p>mdadmç®¡ç†RAIDé˜µåˆ—çš„å‚æ•°</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>æ£€æµ‹è®¾å¤‡åç§°</td>
</tr>
<tr>
<td>-n</td>
<td>æŒ‡å®šè®¾å¤‡æ•°é‡</td>
</tr>
<tr>
<td>-l</td>
<td>æŒ‡å®šraidçº§åˆ«</td>
</tr>
<tr>
<td>-C</td>
<td>åˆ›å»º</td>
</tr>
<tr>
<td>-v</td>
<td>æ˜¾ç¤ºè¿‡ç¨‹</td>
</tr>
<tr>
<td>-f</td>
<td>æ¨¡æ‹Ÿè®¾å¤‡æŸå</td>
</tr>
<tr>
<td>-r</td>
<td>ç§»é™¤è®¾å¤‡</td>
</tr>
<tr>
<td>-Q</td>
<td>æŸ¥çœ‹æ‘˜è¦ä¿¡æ¯</td>
</tr>
<tr>
<td>-D</td>
<td>æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</td>
</tr>
<tr>
<td>-S</td>
<td>åœæ­¢é˜µåˆ—</td>
</tr>
</tbody>
</table>
<p>ä½¿ç”¨mdadmå‘½ä»¤åˆ›å»ºRAID10,åç§°ä¸ºâ€/dev/md0â€ã€‚</p>
<p>ç¬¬6ç« ä¸­è®²åˆ°è¿‡udevæ˜¯Linuxç³»ç»Ÿå†…æ ¸ä¸­ç”¨æ¥ç»™ç¡¬ä»¶å‘½åçš„æœåŠ¡ï¼Œå‘½åè§„åˆ™ä¹Ÿéå¸¸çš„ç®€å•ï¼Œå¯ä»¥çŒœæµ‹åˆ°ç¬¬äºŒä¸ªSCSIå­˜å‚¨è®¾å¤‡çš„åç§°ä¼šæ˜¯ä¸º/dev/sdbï¼Œç„¶åä»¥æ­¤ç±»æ¨ã€‚ä½¿ç”¨ç¡¬ç›˜è®¾å¤‡åšRAIDç£ç›˜é˜µåˆ—ç»„å¾ˆåƒå‡ ä¸ªåŒå­¦ç»„æˆä¸€ä¸ªç­çº§ï¼Œä½†ç­çº§çš„åç§°æ€»ä¸èƒ½å«åš/dev/sdbsdcsddsdeå§ï¼Œè¿™æ ·è™½ç„¶å¯ä»¥ä¸€çœ¼çœ‹å‡ºæ˜¯ç”±é‚£äº›å…ƒç´ ç»„æˆçš„ï¼Œä½†æ˜æ˜¾éå¸¸çš„ä¸åˆ©äºè®°å¿†å’Œé˜…è¯»å§ï¼Œæ›´ä½•å†µå¦‚æœæ˜¯ç”¨10ã€50ã€100ä¸ªç¡¬ç›˜ç»„æˆçš„è®¾å¤‡å‘¢ï¼Ÿå› æ­¤éœ€è¦ç”¨-Cå‚æ•°ä»£è¡¨åˆ›å»ºä¸€ä¸ªRAIDé˜µåˆ—å¡ï¼Œ-vå‚æ•°æ¥æ˜¾ç¤ºå‡ºåˆ›å»ºçš„è¿‡ç¨‹ï¼ŒåŒæ—¶å°±åœ¨åé¢è¿½åŠ ä¸€ä¸ªè®¾å¤‡åç§°ï¼Œè¿™æ ·ä»¥å/dev/md0å°±æ˜¯åˆ›å»ºå‡ºRAIDç£ç›˜é˜µåˆ—ç»„çš„åç§°å•¦ï¼Œ-a yeså‚æ•°ä»£è¡¨è‡ªåŠ¨åˆ›å»ºè®¾å¤‡æ–‡ä»¶ï¼Œ-n 4å‚æ•°ä»£è¡¨ä½¿ç”¨4å—ç¡¬ç›˜æ¥åˆ¶ä½œè¿™ä¸ªRAIDç£ç›˜é˜µåˆ—ç»„ï¼Œè€Œ-l 10å‚æ•°åˆ™ä»£è¡¨RAID10æ–¹æ¡ˆï¼Œæœ€åé¢å†åŠ ä¸Š4å—ç¡¬ç›˜è®¾å¤‡çš„åç§°å°±æå®šå•¦ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mdadm -Cv /dev/md0 -a yes -n 4 -l 10 /dev/sdb /dev/sdc /dev/sdd /dev/sde</span><br><span class="line"></span><br><span class="line">mkfs.ext4 /dev/md0</span><br><span class="line"></span><br><span class="line">mkdir /RAID</span><br><span class="line">mount /dev/md0 /RAID</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹/dev/md0ç£ç›˜é˜µåˆ—è®¾å¤‡ç»„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">mdadm -D /dev/md0</span><br><span class="line"><span class="comment">#æŠŠæŒ‚è½½ä¿¡æ¯å†™å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­æ°¸ä¹…ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/dev/md0 /RAID ext4 defaults 0 0"</span> &gt;&gt; /etc/fstab</span><br></pre></td></tr></table></figure>
<h4 id="æŸåç£ç›˜é˜µåˆ—åŠä¿®å¤"><a href="#æŸåç£ç›˜é˜µåˆ—åŠä¿®å¤" class="headerlink" title="æŸåç£ç›˜é˜µåˆ—åŠä¿®å¤"></a>æŸåç£ç›˜é˜µåˆ—åŠä¿®å¤</h4><p>å’±ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²RAID10ç£ç›˜é˜µåˆ—ç»„ç›®çš„å°±æ˜¯ä¸ºäº†æé«˜å­˜å‚¨è®¾å¤‡çš„IOè¯»å†™é€Ÿåº¦åŠæ•°æ®çš„å®‰å…¨æ€§ï¼Œä½†å› ä¸ºè¿™æ¬¡æ˜¯åœ¨æœ¬æœºç”µè„‘ä¸Šæ¨¡æ‹Ÿå‡ºæ¥çš„ç¡¬ç›˜è®¾å¤‡æ‰€ä»¥å¯¹äºè¯»å†™é€Ÿåº¦çš„æ”¹å–„å¯èƒ½å¹¶ä¸ç›´è§‚ï¼Œå› æ­¤åˆ˜é„è€å¸ˆå†³å®šç»™åŒå­¦ä»¬è®²è§£ä¸‹RAIDç£ç›˜é˜µåˆ—ç»„æŸååçš„å¤„ç†æ–¹æ³•ï¼Œè¿™æ ·ä»¥åæ­¥å…¥äº†è¿ç»´å²—ä½åä¸ä¼šå› ä¸ºçªå‘äº‹ä»¶è€Œæ‰‹å¿™è„šä¹±ã€‚é¦–å…ˆç¡®è®¤æœ‰ä¸€å—ç‰©ç†ç¡¬ç›˜è®¾å¤‡å‡ºç°æŸåä¸èƒ½å†ç»§ç»­æ­£å¸¸ä½¿ç”¨åï¼Œåº”è¯¥ä½¿ç”¨mdadmå‘½ä»¤æ¥äºˆä»¥ç§»é™¤ä¹‹åæŸ¥çœ‹ä¸‹RAIDç£ç›˜é˜µåˆ—ç»„çš„çŠ¶æ€å·²ç»è¢«æ”¹å˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mdadm /dev/md0 -f /dev/sdb</span><br><span class="line">mdadm -D /dev/md0</span><br><span class="line">mdadm /dev/md0 -a /dev/sdb</span><br><span class="line">mdadm -D /dev/md0</span><br><span class="line">mount -a</span><br></pre></td></tr></table></figure>
<h4 id="ç£ç›˜é˜µåˆ—ç»„-å¤‡ä»½ç›˜"><a href="#ç£ç›˜é˜µåˆ—ç»„-å¤‡ä»½ç›˜" class="headerlink" title="ç£ç›˜é˜µåˆ—ç»„+å¤‡ä»½ç›˜"></a>ç£ç›˜é˜µåˆ—ç»„+å¤‡ä»½ç›˜</h4><p>åŒå­¦ä»¬æœ‰æ²¡æœ‰æƒ³åˆ°è¿˜æœ‰ä¸€ç§æç«¯æƒ…å†µï¼ŒRAID10æœ€å¤šå…è®¸æŸå50%çš„ç¡¬ç›˜è®¾å¤‡ï¼Œä½†å¦‚æœåŒä¸€ç»„ä¸­çš„è®¾å¤‡åŒæ—¶å…¨éƒ¨æŸåä¹Ÿä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœå½“RAID10ç£ç›˜é˜µåˆ—ç»„ä¸­æŸä¸€å—ç¡¬ç›˜å‡ºç°äº†æ•…éšœï¼Œè€Œå’±ä»¬æ­£åœ¨å‰å¾€ä¿®å¤å®ƒçš„è·¯ä¸Šï¼Œæ°å·§æ­¤æ—¶åŒRAID1ç»„ä¸­çš„å¦ä¸€å—ç¡¬ç›˜è®¾å¤‡ä¹Ÿå‡ºç°æ•…éšœï¼Œé‚£ä¹ˆæ•°æ®å°±è¢«å½»åº•æŸåäº†ã€‚å“ˆå“ˆï¼Œåˆ˜é„è€å¸ˆå¯ä¸æ˜¯ä¹Œé¸¦å˜´ï¼Œè¿™ç§åŒæ—¶æŸåçš„æƒ…å†µè¿˜çœŸçš„åœ¨æˆ‘çš„å­¦ç”Ÿä¸­å‡ºç°è¿‡ï¼Œé‚£è¿™æ ·æƒ…å†µè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®å°±å¯ä»¥ä½¿ç”¨RAIDå¤‡ä»½ç›˜æŠ€æœ¯æ¥é¢„é˜²è¿™ç±»äº‹æ•…ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å‡†å¤‡ä¸€å—è¶³å¤Ÿå¤§çš„ç¡¬ç›˜ï¼Œè¿™å—ç¡¬ç›˜è®¾å¤‡å¹³æ—¶æ˜¯é—²ç½®çŠ¶æ€ä¸ç”¨å·¥ä½œï¼Œä¸€æ—¦RAIDç£ç›˜é˜µåˆ—ç»„ä¸­æœ‰ç¡¬ç›˜å‡ºç°æ•…éšœååˆ™ä¼šé©¬ä¸Šè‡ªåŠ¨é¡¶æ›¿ä¸Šå»ï¼Œè¿™æ ·å¾ˆæ£’å§ï¼</p>
<p>å’±ä»¬ç°åœ¨æ¥åˆ›å»ºä¸€ä¸ªRAID5ç£ç›˜é˜µåˆ—ç»„+å¤‡ä»½ç›˜å§ï¼Œ-n 3å‚æ•°ä»£è¡¨åˆ›å»ºè¿™ä¸ªRAID5æ‰€éœ€çš„ç¡¬ç›˜ä¸ªæ•°ï¼Œ-l 5å‚æ•°ä»£è¡¨RAIDç£ç›˜é˜µåˆ—çš„çº§åˆ«ï¼Œè€Œ-x 1å‚æ•°åˆ™ä»£è¡¨æœ‰1å—å¤‡ä»½ç›˜ï¼Œå½“æŸ¥çœ‹/dev/md0ç£ç›˜é˜µåˆ—ç»„çš„æ—¶å€™å°±èƒ½çœ‹åˆ°æœ‰ä¸€å—å¤‡ä»½ç›˜åœ¨ç­‰å¾…ä¸­äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mdadm -Cv /dev/md0 -n 3 -l 5 -x 1 /dev/sdb /dev/sdc /dev/sdd /dev/sde</span><br><span class="line">mdadm -D /dev/md0</span><br><span class="line">mkfs.ext4 /dev/md0</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/dev/md0 /RAID ext4 defaults 0 0"</span> &gt;&gt; /etc/fstab</span><br><span class="line">mkdir /RAID</span><br><span class="line">mount -a</span><br></pre></td></tr></table></figure>
<p>æœ€åå°±æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»å•¦ï¼Œå’±ä»¬å†æ¬¡æŠŠç¡¬ç›˜è®¾å¤‡/dev/sdbç§»å‡ºç£ç›˜é˜µåˆ—ç»„ï¼Œè¿™æ ·å¿«é€Ÿçœ‹ä¸‹/dev/md0ç£ç›˜é˜µåˆ—ç»„çš„çŠ¶æ€å°±ä¼šå‘ç°å¤‡ä»½ç›˜å·²ç»è¢«è‡ªåŠ¨é¡¶æ›¿ä¸Šå»ï¼Œè¿™æ˜¯éå¸¸å®ç”¨çš„ï¼Œåœ¨RAIDç£ç›˜é˜µåˆ—ç»„æ•°æ®å®‰å…¨ä¿è¯çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥æé«˜æ•°æ®å¯é æ€§ï¼Œæ‰€ä»¥å¦‚æœæ‚¨çš„å…¬å¸ä¸å·®é’±çš„è¯è¿˜æ˜¯å†ä¹°ä¸Šä¸€å—å¤‡ä»½ç›˜ä»¥é˜²ä¸‡ä¸€å§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mdadm /dev/md0 -f /dev/sdb</span><br><span class="line">mdadm -D /dev/md0</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬åèŠ‚è¯¾"><a href="#ç¬¬åèŠ‚è¯¾" class="headerlink" title="ç¬¬åèŠ‚è¯¾"></a>ç¬¬åèŠ‚è¯¾</h2><h3 id="LVMé€»è¾‘å·ç®¡ç†å™¨"><a href="#LVMé€»è¾‘å·ç®¡ç†å™¨" class="headerlink" title="LVMé€»è¾‘å·ç®¡ç†å™¨"></a>LVMé€»è¾‘å·ç®¡ç†å™¨</h3><p>LVM(Logical Volume Manager)</p>
<p>LVMé€»è¾‘å·ç®¡ç†å™¨æ˜¯ä¸€é¡¹ç†è®ºæ€§è¾ƒå¼ºçš„æŠ€æœ¯ï¼Œå®ƒæ˜¯Linuxç³»ç»Ÿä¸­å¯¹ç¡¬ç›˜åˆ†åŒºè¿›è¡Œç®¡ç†çš„ä¸€ç§æœºåˆ¶ï¼Œå¼€åˆ›è¿™é¡¹æŠ€æœ¯çš„åˆè¡·æ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿç¡¬ç›˜åˆ†åŒºåˆ›å»ºåä¸æ˜“æ›´æ”¹å…¶å¤§å°çš„å¼±ç‚¹ï¼Œå¯¹äºä¼ ç»Ÿç¡¬ç›˜åˆ†åŒºè¿›è¡Œå¼ºåˆ¶æ‰©å®¹å’Œç¼©å°æŠ€æœ¯ç†è®ºä¸Šè™½ç„¶æ˜¯å¯è¡Œçš„ï¼Œä½†å´æœ‰å¯èƒ½é€ æˆæ•°æ®çš„ä¸¢å¤±ï¼ŒLVMé€»è¾‘å·ç®¡ç†å™¨æŠ€æœ¯èƒ½å¤ŸæŠŠå¤šå—ç¡¬ç›˜è¿›è¡Œå·ç»„åˆå¹¶ï¼Œè®©ç”¨æˆ·ä¸å¿…å…³å¿ƒè®¾å¤‡åº•å±‚çš„æ¶æ„å’Œå¸ƒå±€ï¼Œæ‹¿æ¥å³ç”¨ã€‚LVMé€»è¾‘å·ç®¡ç†å™¨æ˜¯åœ¨ç£ç›˜åˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´æ·»åŠ çš„é€»è¾‘å±‚ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæŠ½è±¡çš„å·ç»„ï¼Œå¯ä»¥ä½¿å¾—å¤šå—ç¡¬ç›˜è¿›è¡Œå·ç»„åˆå¹¶ï¼Œè®©ç”¨æˆ·ä¸å¿…å…³å¿ƒç‰©ç†ç¡¬ç›˜è®¾å¤‡çš„åº•å±‚ç»“æ„ï¼Œä»è€Œå®ç°å¯¹åˆ†åŒºçš„çµæ´»åŠ¨æ€è°ƒæ•´ã€‚</p>
<p>LVMé€»è¾‘å·ç®¡ç†å™¨çš„æŠ€æœ¯ç»“æ„ï¼ˆç‰©ç†å·PVï¼ŒPhysical Volumeï¼‰åˆå¹¶æˆï¼ˆå·ç»„VGï¼ŒVolume Groupï¼‰ï¼Œç„¶åæŠŠè¿™å·ç»„å†åˆ†å‰²æˆä¸€ä¸ªä¸ªï¼ˆé€»è¾‘å·LVï¼ŒLogical Volumeï¼‰ï¼Œæ¯ä¸ªé€»è¾‘å·çš„å¤§å°å¿…é¡»æ˜¯ï¼ˆåŸºæœ¬å•å…ƒPEï¼ŒPhysical Extentï¼‰çš„å€æ•°ã€‚ç‰©ç†å·æ˜¯å¤„äºé€»è¾‘å·ç®¡ç†å™¨ä¸­æœ€åº•å±‚çš„èµ„æºï¼Œå¯ä»¥ç†è§£æˆæ˜¯ç‰©ç†ç¡¬ç›˜ã€ç¡¬ç›˜åˆ†åŒºæˆ–è€…RAIDç£ç›˜é˜µåˆ—ç»„éƒ½å¯ä»¥ï¼Œè€Œå·ç»„æ˜¯å»ºç«‹åœ¨ç‰©ç†å·ä¹‹ä¸Šçš„ï¼Œä¸€ä¸ªå·ç»„ä¸­å¯ä»¥åŒ…å«å¤šä¸ªç‰©ç†å·ï¼Œå½“ç„¶åœ¨å·ç»„åˆ›å»ºä¹‹åä¹Ÿå¯ä»¥ç»§ç»­å‘å…¶ä¸­æ·»åŠ æ–°çš„ç‰©ç†å·ï¼Œè€Œé€»è¾‘å·æ˜¯å»ºç«‹äºå·ç»„ä¹‹ä¸Šçš„ï¼ŒæŠŠå·ç»„ä¸­ç©ºé—²çš„èµ„æºå»ºç«‹å‡ºæ–°çš„é€»è¾‘å·ï¼Œå¹¶ä¸”é€»è¾‘å·å»ºç«‹åå¯ä»¥åŠ¨æ€çš„æ‰©å±•æˆ–ç¼©å°ç©ºé—´ï¼Œè¿™ä¹Ÿå°±æ˜¯LVMé€»è¾‘å·ç®¡ç†å™¨çš„æ ¸å¿ƒç†å¿µã€‚</p>
<p>åº•å±‚PVåˆå¹¶æˆVGï¼ŒVGåˆ†å‰²LVï¼Œæ–°å»ºLVæ—¶è¦æŒ‡å®šPEï¼ˆ-l æ¯ä¸ªPEé»˜è®¤4MBï¼‰</p>
<h4 id="éƒ¨ç½²é€»è¾‘å·"><a href="#éƒ¨ç½²é€»è¾‘å·" class="headerlink" title="éƒ¨ç½²é€»è¾‘å·"></a>éƒ¨ç½²é€»è¾‘å·</h4><p>å¾ˆå¤šæ—¶å€™æœ€åˆå’±ä»¬éƒ½ä¸èƒ½å¤Ÿç²¾å‡†çš„è¯„ä¼°å’Œåˆ†é…æ¯ä¸ªç¡¬ç›˜åˆ†åŒºä»¥åçš„ä½¿ç”¨æƒ…å†µï¼Œæœ‰å¯èƒ½ä¼šéšç€ä¸šåŠ¡é‡çš„å¢åŠ å¯¼è‡´æ•°æ®åº“ç›®å½•çš„ä½“ç§¯ä¹Ÿå¢åŠ ï¼Œä¹Ÿæœ‰å¯èƒ½éœ€è¦åˆ†æç”¨æˆ·è¡Œä¸ºè€Œåšè®°å½•å¯¼è‡´æ—¥å¿—ç›®å½•çš„ä½“ç§¯ä¸æ–­å˜å¤§ï¼Œæˆ–è€…æœ‰äº›è¾ƒå°æ¦‚ç‡è¿˜è¦å¯¹åŸå…ˆé”™è¯¯åˆ†é…è¿‡å¤§çš„åˆ†åŒºè¿›è¡Œç²¾ç®€ï¼Œé‚£ä¹ˆè¿™äº›çŸ¥è¯†éƒ½å±äºè¿™ä¸ªç« èŠ‚çš„å­¦ä¹ èŒƒç•´ã€‚å¹¶ä¸”å¦‚åˆšåˆšæåˆ°è¿‡çš„ï¼ŒLVMé€»è¾‘å·ç®¡ç†å™¨æ˜¯å¯¹Linuxç³»ç»Ÿä¸­å¯¹å­˜å‚¨èµ„æºè¿›è¡Œç®¡ç†çš„ä¸€ç§æœºåˆ¶ï¼Œéƒ¨ç½²LVMé€»è¾‘å·ç®¡ç†å™¨éœ€è¦ä¾æ¬¡å¯¹å¯¹ç‰©ç†å·ã€å·ç»„å’Œé€»è¾‘å·çš„é€ä¸ªé…ç½®ï¼Œå¸¸è§çš„å‘½ä»¤åˆ†åˆ«åŒ…æ‹¬æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>åŠŸèƒ½/å‘½ä»¤</th>
<th>ç‰©ç†å·ç®¡ç†</th>
<th>å·ç»„ç®¡ç†</th>
<th>é€»è¾‘å·ç®¡ç†</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ‰«æ</td>
<td>pvscan</td>
<td>vgscan</td>
<td>lvscan</td>
</tr>
<tr>
<td>å»ºç«‹</td>
<td>pvcreate</td>
<td>vgcreate</td>
<td>lvcreate</td>
</tr>
<tr>
<td>æ˜¾ç¤º</td>
<td>pvdisplay</td>
<td>vgdisplay</td>
<td>lvdisplay</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>pvremove</td>
<td>vgremove</td>
<td>lvremove</td>
</tr>
<tr>
<td>æ‰©å±•</td>
<td></td>
<td>vgextend</td>
<td>lvextend</td>
</tr>
<tr>
<td>ç¼©å°</td>
<td></td>
<td>vgreduce</td>
<td>lvreduce</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®©æ–°æ·»åŠ çš„ä¸¤å—ç¡¬ç›˜è®¾å¤‡æ”¯æŒLVMé€»è¾‘å·ç®¡ç†å™¨æŠ€æœ¯</span></span><br><span class="line">pvcreate /dev/sdb /dev/sdc</span><br><span class="line"><span class="comment">#æŠŠä¸¤å—ç¡¬ç›˜è®¾å¤‡éƒ½åŠ å…¥åˆ°storageå·ç»„ä¸­ï¼Œç„¶åæŸ¥çœ‹ä¸‹å·ç»„çš„çŠ¶æ€</span></span><br><span class="line">vgcreate storage /dev/sdb /dev/sdc</span><br><span class="line"><span class="comment">#åˆ‡å‰²å‡ºä¸€ä¸ªçº¦ä¸º150Mçš„é€»è¾‘å·è®¾å¤‡</span></span><br><span class="line"><span class="comment"># éœ€è¦æ³¨æ„ä¸‹åˆ‡å‰²å•ä½çš„é—®é¢˜ï¼Œåœ¨LVMé€»è¾‘å·ç®¡ç†å™¨å¯¹LVé€»è¾‘å·çš„åˆ‡å‰²ä¸Šé¢æœ‰ä¸¤ç§è®¡é‡å•ä½ï¼Œç¬¬ä¸€ç§æ˜¯å¸¸è§ä»¥-Lå‚æ•°æ¥ä»¥å®¹é‡å•ä½ä¸ºå¯¹è±¡ï¼Œä¾‹å¦‚ä½¿ç”¨-L 150Mæ¥ç”Ÿæˆä¸€ä¸ªå¤§å°ä¸º150Mçš„é€»è¾‘å·ï¼Œè¿˜å¯ä»¥ä½¿ç”¨-lå‚æ•°æ¥æŒ‡å®šè¦ä½¿ç”¨PEåŸºæœ¬å•å…ƒçš„ä¸ªæ•°ï¼Œé»˜è®¤æ¯ä¸ªPEçš„å¤§å°ä¸º4Mï¼Œå› æ­¤å…è®¸ä½¿ç”¨-l 37æ¥ç”Ÿæˆä¸€ä¸ªå¤§å°ä¸º37*4M=148Mçš„é€»è¾‘å·</span></span><br><span class="line">lvcreate -n vo -l 37 storage</span><br><span class="line"><span class="comment">#æŸ¥çœ‹é€»è¾‘å·</span></span><br><span class="line">lvdisplay</span><br><span class="line"><span class="comment">#æŠŠç”Ÿæˆå¥½çš„é€»è¾‘å·æ ¼å¼åŒ–åæŒ‚è½½ä½¿ç”¨</span></span><br><span class="line"><span class="comment"># Linuxç³»ç»Ÿä¼šæŠŠLVMé€»è¾‘å·ç®¡ç†å™¨ä¸­çš„é€»è¾‘å·è®¾å¤‡å­˜æ”¾åœ¨/devè®¾å¤‡ç›®å½•ä¸­ï¼ˆå®é™…ä¸Šæ˜¯åšäº†ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œä½†è¯»è€…ä»¬æ— éœ€å…³å¿ƒï¼‰ï¼ŒåŒæ—¶ä¼šä»¥å·ç»„çš„åç§°æ¥å»ºç«‹ä¸€ä¸ªç›®å½•ï¼Œå…¶ä¸­ä¿å­˜æœ‰é€»è¾‘å·çš„è®¾å¤‡æ˜ å°„æ–‡ä»¶ï¼ˆå³/dev/å·ç»„åç§°/é€»è¾‘å·åç§°ï¼‰ã€‚</span></span><br><span class="line">mkfs.ext4 /dev/storage/vo</span><br><span class="line">mkdir /mnt/vo</span><br><span class="line">mount /dev/storage/vo /mnt/vo</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æŒ‚è½½çŠ¶æ€ï¼Œå¹¶å†™å…¥åˆ°é…ç½®æ–‡ä»¶æ°¸ä¹…ç”Ÿæ•ˆ</span></span><br><span class="line">df -h</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/dev/storage/vo /mnt/vo ext4 defaults 0 0"</span> &gt;&gt; /etc/fstab</span><br></pre></td></tr></table></figure>
<h4 id="æ‰©å®¹é€»è¾‘å·"><a href="#æ‰©å®¹é€»è¾‘å·" class="headerlink" title="æ‰©å®¹é€»è¾‘å·"></a>æ‰©å®¹é€»è¾‘å·</h4><p>è™½ç„¶å·ç»„æ˜¯ç”±ä¸¤å—ç¡¬ç›˜è®¾å¤‡å…±åŒç»„æˆçš„ï¼Œä½†ç”¨æˆ·ä½¿ç”¨å­˜å‚¨èµ„æºæ—¶æ„ŸçŸ¥ä¸åˆ°åº•å±‚ç¡¬ç›˜çš„ç»“æ„ï¼Œä¹Ÿä¸ç”¨å…³å¿ƒåº•å±‚æ˜¯ç”±å¤šå°‘å—ç¡¬ç›˜ç»„æˆçš„ï¼Œåªè¦å·ç»„ä¸­çš„èµ„æºè¶³å¤Ÿå°±å¯ä»¥ä¸€ç›´ä¸ºé€»è¾‘å·æ‰©å®¹ï¼Œæ‰©å±•å‰è¯·ä¸€å®šè¦è®°å¾—å¸è½½è®¾å¤‡å’ŒæŒ‚è½½ç‚¹çš„å…³è”ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¸è½½ /mnt/vo</span></span><br><span class="line">umount /mnt/vo</span><br><span class="line"><span class="comment">#æŠŠä¸Šä¸ªå®éªŒä¸­çš„é€»è¾‘å·voæ‰©å±•è‡³290M</span></span><br><span class="line">lvextend -L 290M /dev/storage/vo</span><br><span class="line"><span class="comment">#æ£€æŸ¥ç£ç›˜å®Œæ•´æ€§ï¼Œé‡ç½®ç¡¬ç›˜å®¹é‡</span></span><br><span class="line">e2fsck -f /dev/storage/vo</span><br><span class="line"><span class="comment">#é‡æ–°æŒ‚è½½ç¡¬ç›˜è®¾å¤‡å¹¶æŸ¥çœ‹æŒ‚è½½çŠ¶æ€</span></span><br><span class="line">mount -a</span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>
<h4 id="ç¼©å°é€»è¾‘å·"><a href="#ç¼©å°é€»è¾‘å·" class="headerlink" title="ç¼©å°é€»è¾‘å·"></a>ç¼©å°é€»è¾‘å·</h4><p>ç›¸æ¯”äºæ‰©å®¹é€»è¾‘å·æ¥è®²ï¼Œå¯¹é€»è¾‘å·çš„ç¼©å°æ“ä½œå­˜åœ¨ç€æ›´é«˜ä¸¢å¤±æ•°æ®çš„é£é™©ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åŒå­¦ä»¬ä¸€å®šè¦ç•™å¿ƒè®°å¾—æå‰å¤‡ä»½å¥½æ•°æ®ï¼Œå¦å¤–Linuxç³»ç»Ÿè§„å®šå¯¹LVMé€»è¾‘å·çš„ç¼©å°æ“ä½œéœ€è¦å…ˆæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯åœ¨ä¿è¯å’±ä»¬çš„æ•°æ®å®‰å…¨ï¼Œæ“ä½œå‰è®°å¾—å…ˆæŠŠæ–‡ä»¶ç³»ç»Ÿå¸è½½æ‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">umount /mnt/vo</span><br><span class="line"><span class="comment">#æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§</span></span><br><span class="line">e2fsck -f /dev/storage/vo</span><br><span class="line"><span class="comment">#æŠŠLVé€»è¾‘å·çš„å®¹é‡å‡å°åˆ°120M</span></span><br><span class="line">resize2fs /dev/storage/vo 120M</span><br><span class="line"><span class="comment">#æŠŠæ–‡ä»¶ç³»ç»Ÿé‡æ–°æŒ‚è½½å¹¶æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€</span></span><br><span class="line">mount -a</span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>
<h4 id="é€»è¾‘å·å¿«ç…§"><a href="#é€»è¾‘å·å¿«ç…§" class="headerlink" title="é€»è¾‘å·å¿«ç…§"></a>é€»è¾‘å·å¿«ç…§</h4><p>é™¤æ­¤ä¹‹å¤–LVMé€»è¾‘å·ç®¡ç†å™¨è¿˜å…·å¤‡æœ‰â€œå¿«ç…§å·â€çš„åŠŸèƒ½ï¼Œè¿™é¡¹åŠŸèƒ½å¾ˆç±»ä¼¼äºè™šæ‹Ÿæœºè½¯ä»¶çš„è¿˜åŸæ—¶é—´ç‚¹åŠŸèƒ½ã€‚ä¾‹å¦‚å¯ä»¥å¯¹æŸä¸€ä¸ªLVé€»è¾‘å·è®¾å¤‡åšä¸€æ¬¡å¿«ç…§ï¼Œå¦‚æœä»Šåå‘ç°æ•°æ®è¢«æ”¹é”™äº†ï¼Œå’±ä»¬å¯ä»¥æŠŠä¹‹å‰åšå¥½çš„å¿«ç…§å·è¿›è¡Œè¦†ç›–è¿˜åŸï¼ŒLVMé€»è¾‘å·ç®¡ç†å™¨çš„å¿«ç…§åŠŸèƒ½æœ‰ä¸¤é¡¹ç‰¹ç‚¹ï¼Œç¬¬ä¸€æ˜¯å¿«ç…§å·çš„å¤§å°åº”è¯¥å°½é‡ç­‰åŒäºLVé€»è¾‘å·çš„å®¹é‡ï¼Œç¬¬äºŒæ˜¯å¿«ç…§åŠŸèƒ½ä»…ä¸€æ¬¡æœ‰æ•ˆï¼Œä¸€æ—¦è¢«è¿˜åŸååˆ™ä¼šè¢«è‡ªåŠ¨ç«‹å³åˆ é™¤ï¼Œé¦–å…ˆåº”å½“æŸ¥çœ‹ä¸‹å·ç»„çš„ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vgdisplay</span><br><span class="line"><span class="comment">#ä½¿ç”¨-så‚æ•°æ¥ç”Ÿæˆä¸€ä¸ªå¿«ç…§å·ï¼Œä½¿ç”¨-Lå‚æ•°æ¥æŒ‡å®šåˆ‡å‰²çš„å¤§å°ï¼Œå¦å¤–è¦è®°å¾—åœ¨åé¢å†™ä¸Šè¿™ä¸ªå¿«ç…§æ˜¯é’ˆå¯¹é‚£ä¸ªLVé€»è¾‘å·è®¾å¤‡åšçš„ã€‚</span></span><br><span class="line">lvcreate -L 120M -s -n SNAP /dev/storage/vo</span><br><span class="line"><span class="comment">#åœ¨LVè®¾å¤‡å·æ‰€æŒ‚è½½çš„ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª100Mçš„åƒåœ¾æ–‡ä»¶ï¼Œè¿™æ ·å†æ¥çœ‹å¿«ç…§å·çš„çŠ¶æ€å°±ä¼šå‘ç°ä½¿ç”¨ç‡ä¸Šå‡äº†ã€‚</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/linuxprobe/files count=1 bs=100M</span><br><span class="line">lvdisplay</span><br><span class="line"><span class="comment">#ä¸ºäº†æ ¡éªŒSNAPå¿«ç…§å·çš„æ•ˆæœï¼Œéœ€è¦å¯¹é€»è¾‘å·è¿›è¡Œå¿«ç…§åˆå¹¶è¿˜åŸæ“ä½œï¼Œåœ¨è¿™ä¹‹å‰è®°å¾—å…ˆå¸è½½æ‰é€»è¾‘å·è®¾å¤‡ä¸ç›®å½•çš„æŒ‚è½½</span></span><br><span class="line">umount /mnt/vo</span><br><span class="line">lvconvert --merge /dev/storage/SNAP</span><br><span class="line"><span class="comment">#å¿«ç…§å·ä¼šè¢«è‡ªåŠ¨åˆ é™¤æ‰ï¼Œå¹¶ä¸”åˆšåˆšåœ¨é€»è¾‘å·è®¾å¤‡è¢«å¿«ç…§åå†åˆ›å»ºå‡ºæ¥çš„100Måƒåœ¾æ–‡ä»¶ä¹Ÿè¢«æ¸…é™¤äº†ã€‚</span></span><br><span class="line">mount -a</span><br><span class="line">ls /mnt/vo</span><br></pre></td></tr></table></figure>
<h4 id="åˆ é™¤é€»è¾‘å·"><a href="#åˆ é™¤é€»è¾‘å·" class="headerlink" title="åˆ é™¤é€»è¾‘å·"></a>åˆ é™¤é€»è¾‘å·</h4><p>å½“ç”Ÿäº§ç¯å¢ƒä¸­æƒ³è¦é‡æ–°éƒ¨ç½²æˆ–è€…ä¸éœ€è¦å†ç»§ç»­ä½¿ç”¨LVMé€»è¾‘å·ç®¡ç†å™¨äº†ï¼Œé™¤äº†æå‰å¤‡ä»½å¥½é‡è¦æ•°æ®ä¿¡æ¯ï¼Œè¿˜å¿…é¡»ä¾æ¬¡åˆ é™¤LVé€»è¾‘å·ã€VGå·ç»„åå†ç§»é™¤PVç‰©ç†å·è®¾å¤‡ï¼Œè¿™æ ·çš„é¡ºåºä¸å¯é¢ å€’ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å–æ¶ˆé€»è¾‘å·ä¸ç›®å½•çš„æŒ‚è½½å…³è”ï¼Œåˆ é™¤é…ç½®æ–‡ä»¶ä¸­æ°¸ä¹…ç”Ÿæ•ˆçš„è®¾å¤‡å‚æ•°ã€‚</span></span><br><span class="line">umount /mnt/vo</span><br><span class="line">åˆ é™¤/etc/fstabå†…çš„å¼€æœºæŒ‚è½½ä¿¡æ¯</span><br><span class="line"><span class="comment">#æŠŠLVé€»è¾‘å·è®¾å¤‡åˆ é™¤ï¼Œéœ€è¦æ‰‹å·¥è¾“å…¥yæ¥ç¡®è®¤æ“ä½œ</span></span><br><span class="line">lvremove /dev/storage/vo</span><br><span class="line"><span class="comment">#æŠŠVGå·ç»„åˆ é™¤ï¼Œæ­¤å¤„åªéœ€å†™å·ç»„åç§°å³å¯ï¼Œè€Œæ— éœ€è®¾å¤‡å®Œæ•´ç»å¯¹è·¯å¾„ã€‚</span></span><br><span class="line">vgremove storage</span><br><span class="line"><span class="comment">#æŠŠPVç‰©ç†å·è®¾å¤‡ç§»é™¤</span></span><br><span class="line">pvremove /dev/sdb /dev/sdc</span><br></pre></td></tr></table></figure>
<h3 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h3><h4 id="äº†è§£é˜²ç«å¢™ç®¡ç†å·¥å…·"><a href="#äº†è§£é˜²ç«å¢™ç®¡ç†å·¥å…·" class="headerlink" title="äº†è§£é˜²ç«å¢™ç®¡ç†å·¥å…·"></a>äº†è§£é˜²ç«å¢™ç®¡ç†å·¥å…·</h4><p>ä¿è¯æ•°æ®çš„å®‰å…¨æ€§æ˜¯ç»§å¯ç”¨æ€§ä¹‹åæœ€ä¸ºé‡è¦çš„ä¸€é¡¹å·¥ä½œï¼Œä¼—æ‰€å‘¨çŸ¥å¤–éƒ¨å…¬ç½‘ç›¸æ¯”ä¼ä¸šå†…ç½‘æ›´åŠ çš„â€œç½ªæ¶ä¸›ç”Ÿâ€ï¼Œå› æ­¤é˜²ç«å¢™æŠ€æœ¯ä½œä¸ºå…¬ç½‘ä¸å†…ç½‘ä¹‹é—´çš„ä¿æŠ¤å±éšœï¼Œè™½ç„¶æœ‰è½¯ä»¶æˆ–ç¡¬ä»¶ä¹‹åˆ†ï¼Œä½†ä¸»è¦åŠŸèƒ½éƒ½æ˜¯ä¾æ®ç­–ç•¥å¯¹å¤–éƒ¨è¯·æ±‚è¿›è¡Œè¿‡æ»¤ã€‚é˜²ç«å¢™æŠ€æœ¯èƒ½å¤Ÿåšåˆ°ç›‘æ§æ¯ä¸€ä¸ªæ•°æ®åŒ…å¹¶åˆ¤æ–­æ˜¯å¦æœ‰ç›¸åº”çš„åŒ¹é…ç­–ç•¥è§„åˆ™ï¼Œç›´åˆ°åŒ¹é…åˆ°å…¶ä¸­ä¸€æ¡ç­–ç•¥è§„åˆ™æˆ–æ‰§è¡Œé»˜è®¤ç­–ç•¥ä¸ºæ­¢ï¼Œé˜²ç«å¢™ç­–ç•¥å¯ä»¥åŸºäºæ¥æºåœ°å€ã€è¯·æ±‚åŠ¨ä½œæˆ–åè®®ç­‰ä¿¡æ¯æ¥å®šåˆ¶ï¼Œæœ€ç»ˆä»…è®©åˆæ³•çš„ç”¨æˆ·è¯·æ±‚æµå…¥åˆ°å†…ç½‘ä¸­ï¼Œå…¶ä½™çš„å‡è¢«ä¸¢å¼ƒã€‚</p>
<h4 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h4><h5 id="è§„åˆ™é“¾ä¸ç­–ç•¥"><a href="#è§„åˆ™é“¾ä¸ç­–ç•¥" class="headerlink" title="è§„åˆ™é“¾ä¸ç­–ç•¥"></a>è§„åˆ™é“¾ä¸ç­–ç•¥</h5><p>é˜²ç«å¢™ä¼šä»ä¸Šè‡³ä¸‹æ¥è¯»å–è§„åˆ™ç­–ç•¥ï¼Œä¸€æ—¦åŒ¹é…åˆ°äº†åˆé€‚çš„å°±ä¼šå»æ‰§è¡Œå¹¶ç«‹å³ç»“æŸåŒ¹é…å·¥ä½œï¼Œä½†ä¹Ÿæœ‰è½¬äº†ä¸€åœˆä¹‹åå‘ç°æ²¡æœ‰åŒ¹é…åˆ°åˆé€‚è§„åˆ™çš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±ä¼šå»æ‰§è¡Œé»˜è®¤çš„ç­–ç•¥ã€‚å› æ­¤å¯¹é˜²ç«å¢™ç­–ç•¥çš„è®¾ç½®æ— éæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯â€œé€šâ€ï¼Œä¸€ç§æ˜¯â€œå µâ€â€”â€”å½“é˜²ç«å¢™çš„é»˜è®¤ç­–ç•¥æ˜¯æ‹’ç»çš„ï¼Œå°±è¦è®¾ç½®å…è®¸è§„åˆ™ï¼Œå¦åˆ™è°éƒ½è¿›ä¸æ¥äº†ï¼Œè€Œå¦‚æœé˜²ç«å¢™çš„é»˜è®¤ç­–ç•¥æ˜¯å…è®¸çš„ï¼Œå°±è¦è®¾ç½®æ‹’ç»è§„åˆ™ï¼Œå¦åˆ™è°éƒ½èƒ½è¿›æ¥äº†ï¼Œèµ·ä¸åˆ°é˜²èŒƒçš„ä½œç”¨ã€‚</p>
<p>iptableså‘½ä»¤æŠŠå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤æˆ–å¤„ç†æ•°æ®åŒ…çš„ç­–ç•¥å«åšè§„åˆ™ï¼ŒæŠŠå¤šæ¡è§„åˆ™åˆå­˜æ”¾åˆ°ä¸€ä¸ªè§„åˆ™é“¾ä¸­ï¼Œè§„åˆ™é“¾æ˜¯ä¾æ®å¤„ç†æ•°æ®åŒ…ä½ç½®çš„ä¸åŒè€Œè¿›è¡Œçš„åˆ†ç±»ï¼ŒåŒ…æ‹¬æœ‰ï¼šåœ¨è¿›è¡Œè·¯ç”±é€‰æ‹©å‰å¤„ç†æ•°æ®åŒ…ï¼ˆPREROUTINGï¼‰ã€å¤„ç†æµå…¥çš„æ•°æ®åŒ…ï¼ˆINPUTï¼‰ã€å¤„ç†æµå‡ºçš„æ•°æ®åŒ…ï¼ˆOUTPUTï¼‰ã€å¤„ç†è½¬å‘çš„æ•°æ®åŒ…ï¼ˆFORWARDï¼‰ã€åœ¨è¿›è¡Œè·¯ç”±é€‰æ‹©åå¤„ç†æ•°æ®åŒ…ï¼ˆPOSTROUTINGï¼‰ã€‚ä»å†…ç½‘å‘å¤–ç½‘å‘é€çš„æ•°æ®ä¸€èˆ¬éƒ½æ˜¯å¯æ§ä¸”è‰¯æ€§çš„ï¼Œå› æ­¤æ˜¾è€Œæ˜“è§å’±ä»¬ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯INPUTæ•°æ®é“¾ï¼Œè¿™ä¸ªé“¾ä¸­å®šä¹‰çš„è§„åˆ™èµ·åˆ°äº†ä¿è¯ç§ç½‘è®¾æ–½ä¸å—å¤–ç½‘éª‡å®¢ä¾µçŠ¯çš„ä½œç”¨ã€‚</p>
<p>æ¯”å¦‚æ‚¨æ‰€å±…ä½çš„ç¤¾åŒºç‰©ä¸šä¿å®‰æœ‰ä¸¤æ¡è§„å®šâ€”â€”â€œç¦æ­¢å°å•†è´©è¿›å…¥ç¤¾åŒºï¼Œå„ç§è½¦è¾†éƒ½éœ€è¦ç™»è®°â€ï¼Œè¿™ä¸¤æ¡å®‰ä¿è§„å®šå¾ˆæ˜æ˜¾åº”è¯¥æ˜¯ä½œç”¨åˆ°äº†ç¤¾åŒºçš„æ­£é—¨ï¼ˆæµé‡å¿…é¡»ç»è¿‡çš„åœ°æ–¹ï¼‰ï¼Œè€Œä¸æ˜¯æ¯å®¶æ¯æˆ·çš„é˜²ç›—é—¨ä¸Šã€‚æ ¹æ®å‰é¢æåˆ°çš„é˜²ç«å¢™ç­–ç•¥çš„åŒ¹é…é¡ºåºè§„åˆ™ï¼Œå’±ä»¬å¯ä»¥çŒœæƒ³æœ‰å¤šç§æƒ…å†µâ€”â€”æ¯”å¦‚æ¥è®¿äººå‘˜æ˜¯å°å•†è´©ï¼Œåˆ™ä¼šè¢«ç‰©ä¸šä¿å®‰ç›´æ¥æ‹’ç»åœ¨å¤§é—¨å¤–ï¼Œä¹Ÿæ— éœ€å†å¯¹è½¦è¾†è¿›è¡Œç™»è®°ï¼Œè€Œå¦‚æœæ¥è®¿äººå‘˜æ˜¯ä¸€è¾†æ±½è½¦ï¼Œé‚£ä¹ˆå› ä¸ºç¬¬ä¸€æ¡ç¦æ­¢å°å•†è´©ç­–ç•¥å°±æ²¡æœ‰è¢«åŒ¹é…åˆ°ï¼Œå› è€ŒæŒ‰é¡ºåºåŒ¹é…åˆ°ç¬¬äºŒæ¡ç­–ç•¥ï¼Œéœ€è¦å¯¹è½¦è¾†è¿›è¡Œç™»è®°ï¼Œå†æœ‰å¦‚æœæ¥è®¿çš„æ˜¯ç¤¾åŒºå±…æ°‘ï¼Œåˆ™æ—¢ä¸æ»¡è¶³å°å•†è´©ç­–ç•¥ï¼Œä¹Ÿä¸æ»¡è¶³è½¦è¾†ç™»è®°ç­–ç•¥ï¼Œå› æ­¤ä¼šæ‰§è¡Œé»˜è®¤çš„æ”¾è¡Œç­–ç•¥ã€‚</p>
<p>ä¸è¿‡åªæœ‰è§„åˆ™ç­–ç•¥è¿˜ä¸èƒ½ä¿è¯ç¤¾åŒºçš„å®‰å…¨ï¼Œç‰©ä¸šä¿å®‰è¿˜åº”è¯¥çŸ¥é“è¯¥æ€ä¹ˆæ ·å¤„ç†è¿™äº›è¢«åŒ¹é…åˆ°çš„æµé‡ï¼Œæ¯”å¦‚åŒ…æ‹¬æœ‰â€œå…è®¸â€ã€â€œç™»è®°â€ã€â€œæ‹’ç»â€ã€â€œä¸ç†ä»–â€ï¼Œè¿™äº›åŠ¨ä½œå¯¹åº”åˆ°iptableså‘½ä»¤æœ¯è¯­ä¸­æ˜¯ACCEPTï¼ˆå…è®¸æµé‡é€šè¿‡ï¼‰ã€LOGï¼ˆè®°å½•æ—¥å¿—ä¿¡æ¯ï¼‰ã€REJECTï¼ˆæ‹’ç»æµé‡é€šè¿‡ï¼‰ã€DROPï¼ˆæ‹’ç»æµé‡é€šè¿‡ï¼‰ã€‚å…è®¸åŠ¨ä½œå’Œè®°å½•æ—¥å¿—å·¥ä½œéƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œç€é‡éœ€è¦è®²è§£çš„æ˜¯è¿™ä¸¤æ¡æ‹’ç»åŠ¨ä½œçš„ä¸åŒç‚¹ï¼Œå…¶ä¸­REJECTå’ŒDROPçš„åŠ¨ä½œæ“ä½œéƒ½æ˜¯æŠŠæ•°æ®åŒ…æ‹’ç»ï¼ŒDROPæ˜¯ç›´æ¥æŠŠæ•°æ®åŒ…æŠ›å¼ƒä¸å“åº”ï¼Œè€ŒREJECTä¼šæ‹’ç»åå†å›å¤ä¸€æ¡â€œæ‚¨çš„ä¿¡æ¯æˆ‘å·²æ”¶åˆ°ï¼Œä½†è¢«æ‰”æ‰äº†â€ï¼Œè®©å¯¹æ–¹æ¸…æ™°çš„çœ‹åˆ°æ•°æ®è¢«æ‹’ç»çš„å“åº”ã€‚å°±å¥½æ¯”è¯´æ‚¨æœ‰ä¸€å¤©æ­£åœ¨å®¶é‡Œçœ‹ç”µè§†ï¼Œçªç„¶æœ‰äººæ•²é—¨ï¼Œé€è¿‡â€œçŒ«çœ¼â€ä¸€çœ‹æ˜¯æ¨é”€å•†å“çš„ï¼Œå’±ä»¬å¦‚æœä¸éœ€è¦çš„æƒ…å†µä¸‹å°±ä¼šç›´æ¥æ‹’ç»ä»–ä»¬ï¼ˆREJECTï¼‰ã€‚ä½†å¦‚æœé€è¿‡â€œçŒ«çœ¼â€çœ‹åˆ°çš„æ˜¯å€ºä¸»å¸¦äº†å‡ åä¸ªå°å¼Ÿæ¥è®¨å€ºï¼Œè¿™ç§æƒ…å†µä¸å…‰è¦æ‹’ç»å¼€é—¨ï¼Œè¿˜è¦é»˜ä¸ä½œå£°ï¼Œä¼ªè£…æˆè‡ªå·±ä¸åœ¨å®¶çš„æ ·å­ï¼ˆDROPï¼‰ï¼Œè¿™å°±æ˜¯ä¸¤ç§æ‹’ç»åŠ¨ä½œçš„ä¸åŒä¹‹å¤„ã€‚</p>
<p>ACCEPTï¼ˆå…è®¸æµé‡é€šè¿‡ï¼‰<br>LOGï¼ˆè®°å½•æ—¥å¿—ä¿¡æ¯ï¼‰<br>REJECTï¼ˆæ‹’ç»æµé‡é€šè¿‡ï¼‰<br>DROPï¼ˆæ‹’ç»æµé‡é€šè¿‡ï¼‰</p>
<h5 id="è§„åˆ™é“¾"><a href="#è§„åˆ™é“¾" class="headerlink" title="è§„åˆ™é“¾"></a>è§„åˆ™é“¾</h5><p>è§„åˆ™é“¾ä¾æ®å¤„ç†æ•°æ®åŒ…çš„ä½ç½®ä¸åŒè€Œè¿›è¡Œåˆ†ç±»ï¼š</p>
<table>
<thead>
<tr>
<th>ä½ç½®</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>PREROUTING</td>
<td>åœ¨è¿›è¡Œè·¯ç”±é€‰æ‹©å‰å¤„ç†æ•°æ®åŒ…</td>
</tr>
<tr>
<td>INPUT</td>
<td>å¤„ç†å…¥ç«™çš„æ•°æ®åŒ…</td>
</tr>
<tr>
<td>OUTPUT</td>
<td>å¤„ç†å‡ºç«™çš„æ•°æ®åŒ…</td>
</tr>
<tr>
<td>FORWARD</td>
<td>å¤„ç†è½¬å‘çš„æ•°æ®åŒ…</td>
</tr>
<tr>
<td>POSTROUTING</td>
<td>åœ¨è¿›è¡Œè·¯ç”±é€‰æ‹©åå¤„ç†æ•°æ®åŒ…</td>
</tr>
</tbody>
</table>
<h5 id="è§„åˆ™è¡¨"><a href="#è§„åˆ™è¡¨" class="headerlink" title="è§„åˆ™è¡¨"></a>è§„åˆ™è¡¨</h5><p>iptablesä¸­çš„è§„åˆ™è¡¨æ˜¯ç”¨äºå®¹çº³è§„åˆ™é“¾ï¼Œè§„åˆ™è¡¨é»˜è®¤æ˜¯å…è®¸çŠ¶æ€çš„ï¼Œé‚£ä¹ˆè§„åˆ™é“¾å°±æ˜¯è®¾ç½®è¢«ç¦æ­¢çš„è§„åˆ™ï¼Œè€Œåä¹‹å¦‚æœè§„åˆ™è¡¨æ˜¯ç¦æ­¢çŠ¶æ€çš„ï¼Œé‚£ä¹ˆè§„åˆ™é“¾å°±æ˜¯è®¾ç½®è¢«å…è®¸çš„è§„åˆ™ã€‚</p>
<table>
<thead>
<tr>
<th>è¡¨å</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>rawè¡¨</td>
<td>ç¡®å®šæ˜¯å¦å¯¹è¯¥æ•°æ®åŒ…è¿›è¡ŒçŠ¶æ€è·Ÿè¸ª</td>
</tr>
<tr>
<td>mangleè¡¨</td>
<td>ä¸ºæ•°æ®åŒ…è®¾ç½®æ ‡è®°</td>
</tr>
<tr>
<td>natè¡¨</td>
<td>ä¿®æ”¹æ•°æ®åŒ…ä¸­çš„æºã€ç›®æ ‡IPåœ°å€æˆ–ç«¯å£</td>
</tr>
<tr>
<td>filterè¡¨</td>
<td>ç¡®å®šæ˜¯å¦æ–¹å½¢è¯¥æ•°æ®åŒ…ï¼ˆè¿‡æ»¤ï¼‰</td>
</tr>
</tbody>
</table>
<p>è§„åˆ™è¡¨çš„å…ˆåé¡ºåºï¼šraw-&gt;mangle-&gt;nat-&gt;filter</p>
<p>è§„åˆ™é“¾çš„å…ˆåé¡ºåºï¼š</p>
<blockquote>
<p>å…¥ç«™é¡ºåºï¼šPREROUTE-&gt;INPUT<br>å‡ºç«™é¡ºåºï¼šOUTPUT-&gt;POSTROUTING<br>è½¬å‘é¡ºåºï¼šPREROUTING-&gt;FORWARD-&gt;POSTROUTING</p>
</blockquote>
<p>ä¸‰ç‚¹æ³¨æ„äº‹é¡¹ï¼š</p>
<ol>
<li>æ²¡æœ‰æŒ‡å®šè§„åˆ™è¡¨åˆ™é»˜è®¤æŒ‡filterè¡¨</li>
<li>ä¸æŒ‡å®šè§„åˆ™é“¾åˆ™æŒ‡è¡¨å†…æ‰€æœ‰çš„è§„åˆ™é“¾</li>
<li>åœ¨è§„åˆ™é“¾ä¸­åŒ¹é…è§„åˆ™æ—¶ä¼šä¾æ¬¡æ£€æŸ¥ï¼ŒåŒ¹é…å³åœæ­¢ï¼ˆLOGè§„åˆ™ä¾‹å¤–ï¼‰ï¼Œè‹¥æ²¡æœ‰åŒ¹é…é¡¹åˆ™æŒ‰é“¾çš„é»˜è®¤çŠ¶æ€å¤„ç†ã€‚</li>
</ol>
<h5 id="SNATå’ŒDNAT"><a href="#SNATå’ŒDNAT" class="headerlink" title="SNATå’ŒDNAT"></a>SNATå’ŒDNAT</h5><p>SNAT<br>SNATæºåœ°å€è½¬æ¢æŠ€æœ¯ï¼Œèƒ½å¤Ÿè®©å¤šä¸ªå†…ç½‘ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå¤–ç½‘åœ°å€ä¸Šç½‘ï¼Œè§£å†³äº†IPèµ„æºåŒ®ä¹çš„é—®é¢˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨ä½¿ç”¨ADSLåŠ¨æ€IPä¸Šç½‘ï¼Œå¤–ç½‘IPåœ°å€ä¸ç¨³å®šçš„æƒ…å†µå¯ä½¿ç”¨MASQUERADE(åŠ¨æ€ä¼ªè£…)ï¼Œèƒ½å¤Ÿè‡ªåŠ¨çš„å¯»æ‰¾å¤–ç½‘åœ°å€å¹¶æ”¹ä¸ºå½“å‰æ­£ç¡®çš„å¤–ç½‘IPåœ°å€ã€‚</span></span><br><span class="line">iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -j MASQUERADE</span><br></pre></td></tr></table></figure>
<p>DNAT<br>DNATç›®çš„åœ°åœ°å€è½¬æ¢æŠ€æœ¯ï¼Œåˆ™èƒ½å¤Ÿè®©å¤–ç½‘IPç”¨æˆ·è®¿é—®å±€åŸŸç½‘å†…ä¸åŒçš„æœåŠ¡å™¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#äº’è”ç½‘è®¿é—®å†…ç½‘192.168.1.5è¿™å°æä¾›webæœåŠ¡çš„æœåŠ¡å™¨ï¼Œåœ¨ç½‘å…³ç³»ç»Ÿä¸Šè¿è¡Œæ­¤å‘½ä»¤ã€‚</span></span><br><span class="line">iptables -t nat -A PREROUTING -i eth0 å¤–ç½‘IP -p tcp --dport 80 -j DNAT --to-destination 192.168.1.5</span><br></pre></td></tr></table></figure>
<h5 id="åŸºæœ¬çš„å‘½ä»¤å‚æ•°"><a href="#åŸºæœ¬çš„å‘½ä»¤å‚æ•°" class="headerlink" title="åŸºæœ¬çš„å‘½ä»¤å‚æ•°"></a>åŸºæœ¬çš„å‘½ä»¤å‚æ•°</h5><p>iptablesæ˜¯ä¸€æ¬¾åŸºäºå‘½ä»¤è¡Œçš„é˜²ç«å¢™ç­–ç•¥ç®¡ç†å·¥å…·ï¼Œç”±äºè¯¥å‘½ä»¤æ˜¯åŸºäºç»ˆç«¯æ‰§è¡Œä¸”å­˜åœ¨æœ‰å¤§é‡å‚æ•°çš„ï¼Œå­¦ä¹ èµ·æ¥éš¾åº¦è¿˜æ˜¯è¾ƒå¤§çš„ï¼Œå¥½åœ¨å¯¹äºæ—¥å¸¸æ§åˆ¶é˜²ç«å¢™ç­–ç•¥æ¥è®²ï¼Œæ‚¨æ— éœ€æ·±å…¥çš„äº†è§£è¯¸å¦‚â€œå››è¡¨äº”é“¾â€çš„ç†è®ºæ¦‚å¿µï¼Œåªéœ€è¦æŒæ¡å¸¸ç”¨çš„å‚æ•°å¹¶åšåˆ°çµæ´»æ­é…å³å¯ï¼Œä»¥ä¾¿äºèƒ½å¤Ÿæ›´é¡ºç•…çš„èƒœä»»å·¥ä½œæ‰€éœ€ã€‚iptableså‘½ä»¤å¯ä»¥æ ¹æ®æ•°æ®æµé‡çš„æºåœ°å€ã€ç›®çš„åœ°å€ã€ä¼ è¾“åè®®ã€æœåŠ¡ç±»å‹ç­‰ç­‰ä¿¡æ¯é¡¹è¿›è¡ŒåŒ¹é…ï¼Œä¸€æ—¦æ•°æ®åŒ…ä¸ç­–ç•¥åŒ¹é…ä¸Šåï¼Œiptableså°±ä¼šæ ¹æ®ç­–ç•¥æ‰€é¢„è®¾çš„åŠ¨ä½œæ¥å¤„ç†è¿™äº›æ•°æ®åŒ…æµé‡ï¼Œå¦å¤–å†æ¥æé†’ä¸‹åŒå­¦ä»¬é˜²ç«å¢™ç­–ç•¥çš„åŒ¹é…é¡ºåºè§„åˆ™æ˜¯ä»ä¸Šè‡³ä¸‹çš„ï¼Œå› æ­¤åˆ‡è®°è¦æŠŠè¾ƒä¸ºä¸¥æ ¼ã€ä¼˜å…ˆçº§è¾ƒé«˜çš„ç­–ç•¥æ”¾åˆ°é å‰ä½ç½®ï¼Œå¦åˆ™æœ‰å¯èƒ½äº§ç”Ÿé”™è¯¯ã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-P</td>
<td>è®¾ç½®é»˜è®¤ç­–ç•¥:iptables -P INPUT (DROP&#124;ACCEPT)</td>
</tr>
<tr>
<td>-F</td>
<td>æ¸…ç©ºè§„åˆ™é“¾</td>
</tr>
<tr>
<td>-L</td>
<td>æŸ¥çœ‹è§„åˆ™é“¾</td>
</tr>
<tr>
<td>-A</td>
<td>åœ¨è§„åˆ™é“¾çš„æœ«å°¾åŠ å…¥æ–°è§„åˆ™</td>
</tr>
<tr>
<td>-I num</td>
<td>åœ¨è§„åˆ™é“¾çš„å¤´éƒ¨åŠ å…¥æ–°è§„åˆ™</td>
</tr>
<tr>
<td>-D num</td>
<td>åˆ é™¤æŸä¸€æ¡è§„åˆ™</td>
</tr>
<tr>
<td>-s</td>
<td>åŒ¹é…æ¥æºåœ°å€IP/MASKï¼ŒåŠ å¹å·â€!â€è¡¨ç¤ºé™¤è¿™ä¸ªIPå¤–ã€‚</td>
</tr>
<tr>
<td>-d</td>
<td>åŒ¹é…ç›®æ ‡åœ°å€</td>
</tr>
<tr>
<td>-i ç½‘å¡åç§°</td>
<td>åŒ¹é…ä»è¿™å—ç½‘å¡æµå…¥çš„æ•°æ®</td>
</tr>
<tr>
<td>-o ç½‘å¡åç§°</td>
<td>åŒ¹é…ä»è¿™å—ç½‘å¡æµå‡ºçš„æ•°æ®</td>
</tr>
<tr>
<td>-p</td>
<td>åŒ¹é…åè®®,å¦‚tcp,udp,icmp</td>
</tr>
<tr>
<td>â€“dport</td>
<td>num    åŒ¹é…ç›®æ ‡ç«¯å£å·</td>
</tr>
<tr>
<td>â€“sport</td>
<td>num    åŒ¹é…æ¥æºç«¯å£å·</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹å·²æœ‰çš„é˜²ç«å¢™ç­–ç•¥</span></span><br><span class="line">iptables -L</span><br><span class="line"><span class="comment">#æ¸…ç©ºå·²æœ‰çš„é˜²ç«å¢™ç­–ç•¥</span></span><br><span class="line">iptables -F</span><br><span class="line"><span class="comment">#æŠŠINPUTé“¾çš„é»˜è®¤ç­–ç•¥è®¾ç½®ä¸ºæ‹’ç»ï¼š</span></span><br><span class="line"><span class="comment"># å¦‚å‰é¢æ‰€æåˆ°çš„é˜²ç«å¢™ç­–ç•¥è®¾ç½®æ— éæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯â€œé€šâ€ï¼Œä¸€ç§æ˜¯â€œå µâ€ï¼Œå½“æŠŠINPUTé“¾è®¾ç½®ä¸ºé»˜è®¤æ‹’ç»åï¼Œå°±è¦å¾€é‡Œé¢å†™å…¥å…è®¸ç­–ç•¥äº†ï¼Œå¦åˆ™æ‰€æœ‰æµå…¥çš„æ•°æ®åŒ…éƒ½ä¼šè¢«é»˜è®¤æ‹’ç»æ‰ï¼ŒåŒå­¦ä»¬éœ€è¦ç•™æ„è§„åˆ™é“¾çš„é»˜è®¤ç­–ç•¥æ‹’ç»åŠ¨ä½œåªèƒ½æ˜¯DROPï¼Œè€Œä¸èƒ½æ˜¯REJECTã€‚</span></span><br><span class="line">iptables -P INPUT DROP</span><br><span class="line"><span class="comment">#å‘INPUTé“¾ä¸­æ·»åŠ å…è®¸icmpæ•°æ®åŒ…æµå…¥çš„å…è®¸ç­–ç•¥ï¼š</span></span><br><span class="line"><span class="comment"># åœ¨æ—¥å¸¸è¿ç»´å·¥ä½œä¸­ç»å¸¸ä¼šä½¿ç”¨åˆ°pingå‘½ä»¤æ¥æ£€æŸ¥å¯¹æ–¹ä¸»æœºæ˜¯å¦åœ¨çº¿ï¼Œè€Œå‘é˜²ç«å¢™INPUTé“¾ä¸­æ·»åŠ ä¸€æ¡å…è®¸icmpåè®®æ•°æ®åŒ…æµå…¥çš„ç­–ç•¥å°±æ˜¯é»˜è®¤å…è®¸äº†è¿™ç§pingå‘½ä»¤æ£€æµ‹è¡Œä¸ºã€‚</span></span><br><span class="line">iptables -I INPUT -p icmp -j ACCEPT</span><br><span class="line"><span class="comment">#åˆ é™¤INPUTé“¾ä¸­çš„é‚£æ¡ç­–ç•¥ï¼Œå¹¶æŠŠé»˜è®¤ç­–ç•¥è¿˜åŸä¸ºå…è®¸</span></span><br><span class="line">iptables -D INPUT 1</span><br><span class="line">iptables -D INPUT ACCEPT</span><br><span class="line"><span class="comment">#è®¾ç½®INPUTé“¾åªå…è®¸æŒ‡å®šç½‘æ®µè®¿é—®æœ¬æœºçš„22ç«¯å£ï¼Œæ‹’ç»å…¶ä»–æ‰€æœ‰ä¸»æœºçš„æ•°æ®è¯·æ±‚æµé‡ï¼š</span></span><br><span class="line"><span class="comment"># é˜²ç«å¢™ç­–ç•¥æ˜¯æŒ‰ç…§ä»ä¸Šè‡³ä¸‹é¡ºåºåŒ¹é…çš„ï¼Œå› æ­¤è¯·ä¸€å®šè¦è®°å¾—æŠŠå…è®¸åŠ¨ä½œæ”¾åˆ°æ‹’ç»åŠ¨ä½œä¸Šé¢ï¼Œå¦åˆ™æ‰€æœ‰çš„æµé‡å°±å…ˆè¢«æ‹’ç»æ‰äº†ï¼Œä»»ä½•äººéƒ½è·å–ä¸åˆ°å’±ä»¬çš„ä¸šåŠ¡ã€‚</span></span><br><span class="line">iptables -I INPUT -s 192.168.1.0/24 -p tcp --dport 22 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 22 -j REJECT</span><br><span class="line"><span class="comment">#å‘INPUTé“¾ä¸­æ·»åŠ æ‹’ç»æ‰€æœ‰äººè®¿é—®æœ¬æœº12345ç«¯å£çš„é˜²ç«å¢™ç­–ç•¥</span></span><br><span class="line">iptables -I INPUT -p tcp --dport 12345 -j REJECT</span><br><span class="line">iptables -I INPUT -p udp --dport 12345 -j REJECT</span><br><span class="line"><span class="comment">#å‘INPUTé“¾ä¸­æ·»åŠ æ‹’ç»æ¥è‡ªäºæŒ‡å®š192.168.10.5ä¸»æœºè®¿é—®æœ¬æœº80ç«¯å£ï¼ˆwebæœåŠ¡ï¼‰çš„é˜²ç«å¢™ç­–ç•¥</span></span><br><span class="line">iptables -I INPUT -p tcp -s 192.168.10.5 --dport 80 -j REJECT</span><br><span class="line"><span class="comment">#å‘INPUTé“¾ä¸­æ·»åŠ æ‹’ç»æ‰€æœ‰ä¸»æœºä¸èƒ½è®¿é—®æœ¬æœº1000è‡³1024ç«¯å£çš„é˜²ç«å¢™ç­–ç•¥</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 1000:1024 -j REJECT</span><br><span class="line">iptables -A INPUT -p udp --dport 1000:1024 -j REJECT</span><br><span class="line"><span class="comment">#ç¦æ­¢ç”¨æˆ·è®¿é—®www.baidu.com</span></span><br><span class="line">iptables -I FORWARD -d www.baidu.com -j DROP</span><br><span class="line"><span class="comment">#ç¦æ­¢IPåœ°å€æ˜¯192.168.1.5çš„ç”¨æˆ·ä¸Šç½‘</span></span><br><span class="line">iptables -I FORWARD -s 192.168.1.5 -j DROP</span><br><span class="line"><span class="comment">#æƒ³è®©é…ç½®çš„é˜²ç«å¢™ç­–ç•¥æ°¸ä¹…çš„ç”Ÿæ•ˆä¸‹å»ï¼Œè¿˜è¦æ‰§è¡Œä¸€ä¸‹ä¿å­˜å‘½ä»¤</span></span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬åä¸€èŠ‚è¯¾"><a href="#ç¬¬åä¸€èŠ‚è¯¾" class="headerlink" title="ç¬¬åä¸€èŠ‚è¯¾"></a>ç¬¬åä¸€èŠ‚è¯¾</h2><h3 id="é˜²ç«å¢™-1"><a href="#é˜²ç«å¢™-1" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h3><h4 id="Firewalldé˜²ç«å¢™"><a href="#Firewalldé˜²ç«å¢™" class="headerlink" title="Firewalldé˜²ç«å¢™"></a>Firewalldé˜²ç«å¢™</h4><p>RHEL7æ˜¯ä¸€ä¸ªé›†åˆå¤šæ¬¾é˜²ç«å¢™ç®¡ç†å·¥å…·å¹¶å­˜çš„ç³»ç»Ÿï¼ŒFirewalldåŠ¨æ€é˜²ç«å¢™ç®¡ç†å™¨æœåŠ¡ï¼ˆDynamic Firewall Manager of Linux systemsï¼‰æ˜¯ç›®å‰é»˜è®¤çš„é˜²ç«å¢™ç®¡ç†å·¥å…·ï¼ŒåŒæ—¶æ‹¥æœ‰å‘½ä»¤è¡Œç»ˆç«¯å’Œå›¾å½¢åŒ–ç•Œé¢çš„é…ç½®å·¥å…·ï¼Œå³ä½¿æ˜¯å¯¹Linuxå‘½ä»¤å¹¶ä¸ç†Ÿæ‚‰çš„åŒå­¦ä¹Ÿèƒ½å¿«é€Ÿå…¥é—¨ã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„é˜²ç«å¢™ç®¡ç†å·¥å…·è¿˜æ”¯æŒäº†åŠ¨æ€æ›´æ–°æŠ€æœ¯å¹¶åŠ å…¥äº†â€œzoneåŒºåŸŸâ€çš„æ¦‚å¿µï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¸ºç”¨æˆ·é¢„å…ˆå‡†å¤‡äº†å‡ å¥—é˜²ç«å¢™ç­–ç•¥é›†åˆï¼ˆç­–ç•¥æ¨¡æ¿ï¼‰ï¼Œç„¶åå¯ä»¥æ ¹æ®ç”Ÿäº§åœºæ™¯çš„ä¸åŒè€Œé€‰æ‹©åˆé€‚çš„ç­–ç•¥é›†åˆï¼Œå®ç°äº†é˜²ç«å¢™ç­–ç•¥ä¹‹é—´çš„å¿«é€Ÿåˆ‡æ¢ã€‚ä¾‹å¦‚å’±ä»¬æœ‰ä¸€å°ç¬”è®°æœ¬ç”µè„‘æ¯å¤©éƒ½è¦åœ¨åŠå…¬å®¤ã€å’–å•¡å…å’Œå®¶é‡Œä½¿ç”¨ï¼ŒæŒ‰å¸¸ç†æ¨æ–­æœ€å®‰å…¨çš„åº”è¯¥æ˜¯å®¶é‡Œçš„å†…ç½‘ï¼Œå…¶æ¬¡æ˜¯å…¬å¸åŠå…¬å®¤ï¼Œæœ€åæ˜¯å’–å•¡å…ï¼Œå¦‚æœéœ€è¦åœ¨åŠå…¬å®¤å†…å…è®¸æ–‡ä»¶å…±äº«æœåŠ¡çš„è¯·æ±‚æµé‡ã€å›åˆ°å®¶ä¸­éœ€è¦å…è®¸æ‰€æœ‰çš„æœåŠ¡ï¼Œè€Œåœ¨å’–å•¡åº—åˆ™æ˜¯é™¤äº†ä¸Šç½‘å¤–ä¸å…è®¸ä»»ä½•å…¶ä»–è¯·æ±‚ï¼Œè¿™æ ·çš„éœ€æ±‚åº”è¯¥æ˜¯å¾ˆå¸¸è§çš„ï¼Œåœ¨ä»¥å‰åªèƒ½é¢‘ç¹çš„è¿›è¡Œæ‰‹åŠ¨è®¾ç½®ï¼Œè€Œç°åœ¨åªéœ€è¦é¢„è®¾å¥½zoneåŒºåŸŸé›†åˆï¼Œç„¶åè½»è½»ç‚¹å‡»ä¸€ä¸‹å°±å¯ä»¥åˆ‡æ¢è¿‡å»äº†ä¸Šç™¾æ¡ç­–ç•¥äº†ï¼Œæå¤§çš„æé«˜äº†é˜²ç«å¢™ç­–ç•¥çš„åº”ç”¨æ•ˆç‡ï¼Œå¸¸è§çš„zoneåŒºåŸŸåç§°åŠåº”ç”¨å¯è§ä¸‹è¡¨ï¼ˆé»˜è®¤ä¸ºpublicï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>åŒºåŸŸ</th>
<th>é»˜è®¤è§„åˆ™ç­–ç•¥</th>
</tr>
</thead>
<tbody>
<tr>
<td>trusted</td>
<td>å…è®¸æ‰€æœ‰çš„æ•°æ®åŒ…ã€‚</td>
</tr>
<tr>
<td>home</td>
<td>æ‹’ç»æµå…¥çš„æ•°æ®åŒ…ï¼Œé™¤éä¸è¾“å‡ºæµé‡æ•°æ®åŒ…ç›¸å…³æˆ–æ˜¯ssh,mdns,ipp-client,samba-clientä¸dhcpv6-clientæœåŠ¡åˆ™å…è®¸ã€‚</td>
</tr>
<tr>
<td>internal</td>
<td>ç­‰åŒäºhomeåŒºåŸŸ</td>
</tr>
<tr>
<td>work</td>
<td>æ‹’ç»æµå…¥çš„æ•°æ®åŒ…ï¼Œé™¤éä¸è¾“å‡ºæµé‡æ•°æ®åŒ…ç›¸å…³æˆ–æ˜¯ssh,ipp-clientä¸dhcpv6-clientæœåŠ¡åˆ™å…è®¸ã€‚</td>
</tr>
<tr>
<td>public</td>
<td>æ‹’ç»æµå…¥çš„æ•°æ®åŒ…ï¼Œé™¤éä¸è¾“å‡ºæµé‡æ•°æ®åŒ…ç›¸å…³æˆ–æ˜¯ssh,dhcpv6-clientæœåŠ¡åˆ™å…è®¸ã€‚</td>
</tr>
<tr>
<td>external</td>
<td>æ‹’ç»æµå…¥çš„æ•°æ®åŒ…ï¼Œé™¤éä¸è¾“å‡ºæµé‡æ•°æ®åŒ…ç›¸å…³æˆ–æ˜¯sshæœåŠ¡åˆ™å…è®¸ã€‚</td>
</tr>
<tr>
<td>dmz</td>
<td>æ‹’ç»æµå…¥çš„æ•°æ®åŒ…ï¼Œé™¤éä¸è¾“å‡ºæµé‡æ•°æ®åŒ…ç›¸å…³æˆ–æ˜¯sshæœåŠ¡åˆ™å…è®¸ã€‚</td>
</tr>
<tr>
<td>block</td>
<td>æ‹’ç»æµå…¥çš„æ•°æ®åŒ…ï¼Œé™¤éä¸è¾“å‡ºæµé‡æ•°æ®åŒ…ç›¸å…³ã€‚</td>
</tr>
<tr>
<td>drop</td>
<td>æ‹’ç»æµå…¥çš„æ•°æ®åŒ…ï¼Œé™¤éä¸è¾“å‡ºæµé‡æ•°æ®åŒ…ç›¸å…³ã€‚</td>
</tr>
</tbody>
</table>
<h5 id="firewalldç®¡ç†å·¥å…·firewall-cmd"><a href="#firewalldç®¡ç†å·¥å…·firewall-cmd" class="headerlink" title="firewalldç®¡ç†å·¥å…·firewall-cmd"></a>firewalldç®¡ç†å·¥å…·firewall-cmd</h5><p>firewall-cmdå‘½ä»¤æ˜¯FirewalldåŠ¨æ€é˜²ç«å¢™ç®¡ç†å™¨æœåŠ¡çš„å‘½ä»¤è¡Œç»ˆç«¯ã€‚å®ƒçš„å‚æ•°ä¸€èˆ¬éƒ½æ˜¯ä»¥â€œé•¿æ ¼å¼â€æ¥æ‰§è¡Œçš„ã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€“get-default-zone</td>
<td>æŸ¥è¯¢é»˜è®¤çš„åŒºåŸŸåç§°ã€‚</td>
</tr>
<tr>
<td>â€“set-default-zone=&lt;åŒºåŸŸåç§°&gt;</td>
<td>è®¾ç½®é»˜è®¤çš„åŒºåŸŸï¼Œæ°¸ä¹…ç”Ÿæ•ˆã€‚</td>
</tr>
<tr>
<td>â€“get-zones</td>
<td>æ˜¾ç¤ºå¯ç”¨çš„åŒºåŸŸã€‚</td>
</tr>
<tr>
<td>â€“get-services</td>
<td>æ˜¾ç¤ºé¢„å…ˆå®šä¹‰çš„æœåŠ¡ã€‚</td>
</tr>
<tr>
<td>â€“get-active-zones</td>
<td>æ˜¾ç¤ºå½“å‰æ­£åœ¨ä½¿ç”¨çš„åŒºåŸŸä¸ç½‘å¡åç§°ã€‚</td>
</tr>
<tr>
<td>â€“add-source=</td>
<td>å°†æ¥æºäºæ­¤IPæˆ–å­ç½‘çš„æµé‡å¯¼å‘æŒ‡å®šçš„åŒºåŸŸã€‚</td>
</tr>
<tr>
<td>â€“remove-source=</td>
<td>ä¸å†å°†æ­¤IPæˆ–å­ç½‘çš„æµé‡å¯¼å‘æŸä¸ªæŒ‡å®šåŒºåŸŸã€‚</td>
</tr>
<tr>
<td>â€“add-interface=&lt;ç½‘å¡åç§°&gt;</td>
<td>å°†æ¥è‡ªäºè¯¥ç½‘å¡çš„æ‰€æœ‰æµé‡éƒ½å¯¼å‘æŸä¸ªæŒ‡å®šåŒºåŸŸã€‚</td>
</tr>
<tr>
<td>â€“change-interface=&lt;ç½‘å¡åç§°&gt;</td>
<td>å°†æŸä¸ªç½‘å¡ä¸åŒºåŸŸåšå…³è”ã€‚</td>
</tr>
<tr>
<td>â€“list-all</td>
<td>æ˜¾ç¤ºå½“å‰åŒºåŸŸçš„ç½‘å¡é…ç½®å‚æ•°ï¼Œèµ„æºï¼Œç«¯å£ä»¥åŠæœåŠ¡ç­‰ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>â€“list-all-zones</td>
<td>æ˜¾ç¤ºæ‰€æœ‰åŒºåŸŸçš„ç½‘å¡é…ç½®å‚æ•°ï¼Œèµ„æºï¼Œç«¯å£ä»¥åŠæœåŠ¡ç­‰ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>â€“add-service=&lt;æœåŠ¡å&gt;</td>
<td>è®¾ç½®é»˜è®¤åŒºåŸŸå…è®¸è¯¥æœåŠ¡çš„æµé‡ã€‚</td>
</tr>
<tr>
<td>â€“add-port=&lt;ç«¯å£å·/åè®®&gt;</td>
<td>å…è®¸é»˜è®¤åŒºåŸŸå…è®¸è¯¥ç«¯å£çš„æµé‡ã€‚</td>
</tr>
<tr>
<td>â€“remove-service=&lt;æœåŠ¡å&gt;</td>
<td>è®¾ç½®é»˜è®¤åŒºåŸŸä¸å†å…è®¸è¯¥æœåŠ¡çš„æµé‡ã€‚</td>
</tr>
<tr>
<td>â€“remove-port=&lt;ç«¯å£å·/åè®®&gt;</td>
<td>å…è®¸é»˜è®¤åŒºåŸŸä¸å†å…è®¸è¯¥ç«¯å£çš„æµé‡ã€‚</td>
</tr>
<tr>
<td>â€“reload</td>
<td>è®©â€œæ°¸ä¹…ç”Ÿæ•ˆâ€çš„é…ç½®è§„åˆ™ç«‹å³ç”Ÿæ•ˆï¼Œè¦†ç›–å½“å‰çš„ã€‚</td>
</tr>
</tbody>
</table>
<p>å¦‚åŒå…¶ä»–çš„é˜²ç«å¢™ç­–ç•¥é…ç½®å·¥å…·ä¸€æ ·ï¼ŒFirewalldæœåŠ¡å¯¹é˜²ç«å¢™ç­–ç•¥çš„é…ç½®é»˜è®¤æ˜¯å½“å‰ç”Ÿæ•ˆæ¨¡å¼ï¼ˆRunTimeï¼‰ï¼Œé…ç½®ä¿¡æ¯ä¼šéšç€è®¡ç®—æœºé‡å¯è€Œå¤±æ•ˆï¼Œå¦‚æœæƒ³è¦è®©é…ç½®çš„ç­–ç•¥ä¸€ç›´å­˜åœ¨ï¼Œé‚£å°±è¦ä½¿ç”¨æ°¸ä¹…ç”Ÿæ•ˆæ¨¡å¼ï¼ˆPermanentï¼‰äº†ï¼Œæ–¹æ³•å°±æ˜¯åœ¨æ­£å¸¸çš„å‘½ä»¤ä¸­åŠ å…¥â€“permanentå‚æ•°å°±å¯ä»¥ä»£è¡¨é’ˆå¯¹äºæ°¸ä¹…ç”Ÿæ•ˆæ¨¡å¼çš„å‘½ä»¤äº†ã€‚ä½†è¿™ä¸ªæ°¸ä¹…ç”Ÿæ•ˆæ¨¡å¼ä¹Ÿæœ‰ä¸€ä¸ªâ€œä¸è¿‘äººæƒ…â€çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯å¯¹å®ƒè®¾ç½®çš„ç­–ç•¥éœ€è¦é‡å¯åæ‰èƒ½è‡ªåŠ¨ç”Ÿæ•ˆï¼Œå¦‚æœæƒ³è®©é…ç½®çš„ç­–ç•¥ç«‹å³ç”Ÿæ•ˆçš„è¯éœ€è¦æ‰‹åŠ¨æ‰§è¡Œä¸€ä¸‹â€“reloadå‚æ•°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹é»˜è®¤zone</span></span><br><span class="line">firewall-cmd --get-default-zone</span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç½‘å¡åœ¨firewalldä¸­çš„zone</span></span><br><span class="line">firewall-cmd --get-zone-of-interface=eth0</span><br><span class="line"><span class="comment">#æŠŠFirewalldé˜²ç«å¢™æœåŠ¡ä¸­ç½‘å¡çš„é»˜è®¤åŒºåŸŸä¿®æ”¹ä¸ºexternalï¼Œé‡å¯åå†ç”Ÿæ•ˆ</span></span><br><span class="line">firewall-cmd --permanent --zone=external --change-interface=eth0</span><br><span class="line">firewall-cmd --permanent --get-zone-of-interface=eth0</span><br><span class="line"><span class="comment">#æŸ¥è¯¢æ‰€æœ‰çš„zone</span></span><br><span class="line">firewall-cmd --get-zones</span><br><span class="line"><span class="comment">#è®¾ç½®é»˜è®¤zone</span></span><br><span class="line">firewall-cmd --<span class="built_in">set</span>-default-zone=work</span><br><span class="line"><span class="comment">#å¯åŠ¨/å…³é—­Firewalldé˜²ç«å¢™æœåŠ¡çš„åº”æ€¥çŠ¶å†µæ¨¡å¼ï¼Œé˜»æ–­ä¸€åˆ‡ç½‘ç»œè¿æ¥ï¼ˆå½“è¿œç¨‹æ§åˆ¶æœåŠ¡å™¨æ—¶è¯·æ…ç”¨ã€‚ï¼‰</span></span><br><span class="line">firewall-cmd --query-panic</span><br><span class="line">firewall-cmd --panic-on</span><br><span class="line">firewall-cmd --panic-off</span><br><span class="line"><span class="comment">#æŸ¥è¯¢åœ¨publicåŒºåŸŸä¸­çš„sshæœåŠ¡è¯·æ±‚æµé‡æ˜¯å¦è¢«å…è®¸</span></span><br><span class="line">firewall-cmd --zone=public --query-service=ssh</span><br><span class="line"><span class="comment"># å½“å‰ç”Ÿæ•ˆï¼Œç«‹å³ç”Ÿæ•ˆï¼Œé‡å¯å¤±æ•ˆã€‚</span></span><br><span class="line">firewall-cmd --zone=public --add-service=ssh</span><br><span class="line"><span class="comment"># æ°¸ä¹…ç”Ÿæ•ˆï¼Œä¸ç«‹å³ç”Ÿæ•ˆï¼Œé‡å¯åæ°¸ä¹…ç”Ÿæ•ˆã€‚</span></span><br><span class="line">firewall-cmd --permanent --zone=public --add-service=ssh</span><br><span class="line"><span class="comment">#æŠŠFirewalldé˜²ç«å¢™æœåŠ¡ä¸­80çš„è¯·æ±‚æµé‡å…è®¸æ”¾è¡Œï¼Œä½†ä»…é™å½“å‰ç”Ÿæ•ˆ</span></span><br><span class="line">firewall-cmd --zone=public --add-port=80</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å…è®¸ç«¯å£</span></span><br><span class="line">firewall-cmd --zone=public --list-ports</span><br><span class="line"><span class="comment"># åˆ é™¤</span></span><br><span class="line">firewall-cmd --zone=public --remove-service=ssh</span><br><span class="line"><span class="comment">#æŠŠåŸæœ¬è®¿é—®æœ¬æœº888ç«¯å£å·çš„è¯·æ±‚æµé‡è½¬å‘åˆ°22ç«¯å£å·ï¼Œè¦æ±‚å½“å‰å’Œé•¿æœŸå‡æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment"># æµé‡è½¬å‘å‘½ä»¤æ ¼å¼ï¼šfirewall-cmd --permanent --zone=&lt;åŒºåŸŸ&gt; --add-forward-port=port=&lt;æºç«¯å£å·&gt;:proto=&lt;åè®®&gt;:toport=&lt;ç›®æ ‡ç«¯å£å·&gt;:toaddr=&lt;ç›®æ ‡IPåœ°å€&gt;</span></span><br><span class="line">firewall-cmd --permanent --zone=public --add-forward-port=port=888:proto=tcp:toport=22:toaddr=192.168.1.5</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="comment">#åœ¨Firewalldé˜²ç«å¢™æœåŠ¡ä¸­é…ç½®ä¸€æ¡å¯Œè§„åˆ™ï¼Œæ‹’ç»æ‰€æœ‰æ¥è‡ªäº192.168.1.0/24ç½‘æ®µçš„ç”¨æˆ·è®¿é—®æœ¬æœºsshæœåŠ¡ï¼ˆ22ç«¯å£ï¼‰</span></span><br><span class="line">firewall-cmd --permanent --zone=public --add-rich-rule=<span class="string">"rule family="</span>ipv4<span class="string">" source address="</span>192.168.1.0/24<span class="string">" service name="</span>ssh<span class="string">" reject"</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">firewall-cmd --direct --add-rule ipv4 filter INPUT 0 -p tcp --dport 9000 -j ACCEPT</span><br><span class="line"><span class="comment">#ç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h4 id="tcp-wrappers"><a href="#tcp-wrappers" class="headerlink" title="tcp_wrappers"></a>tcp_wrappers</h4><p>æœåŠ¡çš„è®¿é—®æ§åˆ¶åˆ—è¡¨</p>
<p>Tcp_wrappersæ˜¯çº¢å¸½RHEL7ç³»ç»Ÿä¸­é»˜è®¤å·²ç»å¯ç”¨çš„ä¸€æ¬¾æµé‡ç›‘æ§ç¨‹åºï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®æ¥è®¿ä¸»æœºåœ°å€ä¸æœ¬æœºç›®æ ‡æœåŠ¡ç¨‹åºåšå…è®¸æˆ–æ‹’ç»æ“ä½œã€‚æ¢å¥è¯è¯´ï¼ŒLinuxç³»ç»Ÿä¸­å…¶å®æœ‰ä¸¤ä¸ªå±‚é¢çš„é˜²ç«å¢™ï¼Œç¬¬ä¸€ç§æ˜¯å‰é¢è®²åˆ°çš„åŸºäºTCP/IPåè®®çš„æµé‡è¿‡æ»¤é˜²æŠ¤å·¥å…·ï¼Œè€ŒTcp_wrappersæœåŠ¡åˆ™æ˜¯èƒ½å¤Ÿå¯¹ç³»ç»ŸæœåŠ¡è¿›è¡Œå…è®¸å’Œç¦æ­¢çš„é˜²ç«å¢™ï¼Œä»è€Œåœ¨æ›´é«˜å±‚é¢ä¿æŠ¤äº†Linuxç³»ç»Ÿçš„å®‰å…¨è¿è¡Œã€‚æ§åˆ¶åˆ—è¡¨æ–‡ä»¶ä¿®æ”¹åä¼šç«‹å³ç”Ÿæ•ˆï¼Œç³»ç»Ÿå°†ä¼šå…ˆæ£€æŸ¥å…è®¸ç­–ç•¥è§„åˆ™æ–‡ä»¶ï¼ˆ/etc/hosts.allowï¼‰ï¼Œå¦‚æœåŒ¹é…åˆ°ç›¸åº”çš„å…è®¸ç­–ç•¥åˆ™ç›´æ¥æ”¾è¡Œè¯·æ±‚ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ™ä¼šå»è¿›ä¸€æ­¥åŒ¹é…æ‹’ç»ç­–ç•¥è§„åˆ™æ–‡ä»¶ï¼ˆ/etc/hosts.denyï¼‰çš„å†…å®¹ï¼Œæœ‰åŒ¹é…åˆ°ç›¸åº”çš„æ‹’ç»ç­–ç•¥å°±ä¼šç›´æ¥æ‹’ç»è¯¥è¯·æ±‚æµé‡ï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶å…¨éƒ½æ²¡æœ‰åŒ¹é…åˆ°çš„è¯ä¹Ÿä¼šé»˜è®¤æ”¾è¡Œè¿™æ¬¡çš„è¯·æ±‚æµé‡ã€‚é…ç½®æœåŠ¡çš„å‚æ•°å¹¶ä¸å¤æ‚ï¼Œå¦‚ä¸‹è¡¨ä¸­å°±å·²ç»åˆ—å‡ºäº†å‡ ä¹æ‰€æœ‰å¸¸è§çš„æƒ…å†µï¼š</p>
<table>
<thead>
<tr>
<th>å®¢æˆ·ç«¯ç±»å‹</th>
<th>ç¤ºä¾‹</th>
<th>æ»¡è¶³ç¤ºä¾‹çš„å®¢æˆ·ç«¯åˆ—è¡¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>å•ä¸€ä¸»æœº</td>
<td>192.168.1.5</td>
<td>IPåœ°å€ä¸º192.168.1.5çš„ä¸»æœºã€‚</td>
</tr>
<tr>
<td>æŒ‡å®šç½‘æ®µ</td>
<td>192.168.1.</td>
<td>IPæ®µä¸º192.168.1.0/24çš„ä¸»æœºã€‚</td>
</tr>
<tr>
<td>æŒ‡å®šç½‘æ®µ</td>
<td>192.168.1.0/255.255.255.0</td>
<td>IPæ®µä¸º192.168.1.0/24çš„ä¸»æœºã€‚</td>
</tr>
<tr>
<td>æŒ‡å®šDNSåç¼€</td>
<td>.baidu.com</td>
<td>æ‰€æœ‰DNSåç¼€ä¸º.baidu.comçš„ä¸»æœº</td>
</tr>
<tr>
<td>æŒ‡å®šä¸»æœºåç§°    <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a></td>
<td>ä¸»æœºåç§°ä¸º<a href="http://www.baidu.comçš„ä¸»æœºã€‚" target="_blank" rel="noopener">www.baidu.comçš„ä¸»æœºã€‚</a></td>
</tr>
<tr>
<td>æŒ‡å®šæ‰€æœ‰å®¢æˆ·ç«¯</td>
<td>ALL</td>
<td>æ‰€æœ‰ä¸»æœºå…¨éƒ¨åŒ…æ‹¬åœ¨å†…ã€‚</td>
</tr>
</tbody>
</table>
<p>åœ¨æ­£å¼é…ç½®Tcp_wrappersæœåŠ¡å‰æœ‰ä¸¤ç‚¹åŸåˆ™å¿…é¡»è¦æå‰è®²æ¸…æ¥šï¼Œç¬¬ä¸€ï¼Œåœ¨å†™ç¦æ­¢é¡¹ç›®çš„æ—¶å€™ä¸€å®šè¦å†™ä¸Šçš„æ˜¯æœåŠ¡åç§°ï¼Œè€Œä¸æ˜¯æŸç§åè®®çš„åç§°ï¼Œç¬¬äºŒï¼Œæ¨èå…ˆæ¥ç¼–å†™æ‹’ç»è§„åˆ™ï¼Œè¿™æ ·å¯ä»¥æ¯”è¾ƒç›´è§‚çš„çœ‹åˆ°ç›¸åº”çš„æ•ˆæœã€‚ä¾‹å¦‚å…ˆæ¥é€šè¿‡æ‹’ç»ç­–ç•¥æ–‡ä»¶ç¦æ­¢ä¸‹æ‰€æœ‰è®¿é—®æœ¬æœºsshdæœåŠ¡çš„è¯·æ±‚æ•°æ®å§ï¼ˆæ— éœ€ä¿®æ”¹åŸæœ‰çš„æ³¨é‡Šä¿¡æ¯ï¼‰ã€‚</p>
<p>åº”ç”¨å±‚<br>/etc/hosts.allow<br>sshd : 192.168.1.<br>/etc/hosts.deny<br>sshd:*</p>
<p>ä¼˜å…ˆçº§<br>é»˜è®¤å…ˆåŒ¹é…hosts.allow</p>
<h3 id="ä½¿ç”¨SSHæœåŠ¡ç®¡ç†è¿œç¨‹ä¸»æœº"><a href="#ä½¿ç”¨SSHæœåŠ¡ç®¡ç†è¿œç¨‹ä¸»æœº" class="headerlink" title="ä½¿ç”¨SSHæœåŠ¡ç®¡ç†è¿œç¨‹ä¸»æœº"></a>ä½¿ç”¨SSHæœåŠ¡ç®¡ç†è¿œç¨‹ä¸»æœº</h3><h4 id="é…ç½®ç½‘å¡æœåŠ¡"><a href="#é…ç½®ç½‘å¡æœåŠ¡" class="headerlink" title="é…ç½®ç½‘å¡æœåŠ¡"></a>é…ç½®ç½‘å¡æœåŠ¡</h4><h5 id="nmtui"><a href="#nmtui" class="headerlink" title="nmtui"></a>nmtui</h5><h5 id="nmcli"><a href="#nmcli" class="headerlink" title="nmcli"></a>nmcli</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection show</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºç½‘ç»œä¼šè¯</p>
<p>çº¢å¸½RHEL7ç³»ç»Ÿä¸­çš„ç½‘å¡æœåŠ¡å·²ç»æ”¯æŒäº†å¤šä¼šè¯æŠ€æœ¯äº†ï¼Œè¿™ä¸ªåŠŸèƒ½éå¸¸ç±»ä¼¼äºFirewalldé˜²ç«å¢™æœåŠ¡ä¸­çš„zoneåŒºåŸŸæŠ€æœ¯ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿåœ¨å¤šä¸ªé…ç½®æ–‡ä»¶ä¸­å¿«é€Ÿåˆ‡æ¢ã€‚æ¯”å¦‚ç™½å¤©éœ€è¦æ‹¿ç€ç¬”è®°æœ¬ç”µè„‘å»å…¬å¸ä¸Šç­ï¼Œä¸‹åˆå»å’–å•¡å…ä¼‘æ¯ä¸€ä¸‹ï¼Œç„¶åæ™šä¸Šå†æŠŠç¬”è®°æœ¬ç”µè„‘æ‹¿å›åˆ°å®¶ä¸­ï¼Œå¦‚æœåœ¨å…¬å¸ä¸Šç­å·¥ä½œçš„æ—¶å€™æ˜¯éœ€è¦æ‰‹å·¥æŒ‡å®šç½‘å¡IPåœ°å€ï¼Œè€Œæ™šä¸Šå›å®¶åç”¨æ— çº¿è·¯ç”±å™¨æ˜¯DHCPè‡ªåŠ¨åˆ†é…ç½‘å¡IPåœ°å€ï¼Œå¯¹ä¼ ç»Ÿç½‘å¡æœåŠ¡è¿™æ ·æ”¹æ¥æ”¹å»ä¸€å®šä¼šå¾ˆéº»çƒ¦ï¼Œä½†æ˜¯ä½¿ç”¨äº†ç½‘å¡ä¼šè¯åŠŸèƒ½å°±ä¸ä¸€æ ·äº†ï¼Œå’±ä»¬åªéœ€è¦åœ¨ä¸åŒçš„ä½¿ç”¨ç¯å¢ƒä¸­æ¿€æ´»ç›¸åº”çš„ä¼šè¯æœåŠ¡ï¼Œå°±èƒ½å¯¹ç½‘å¡å‚æ•°è¿›è¡Œæ•´ä½“æ€§çš„è‡ªåŠ¨åˆ‡æ¢äº†ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨nmcliå‘½ä»¤å°†åœ¨å…¬å¸ä¸Šç­æ—¶çš„ç½‘å¡ä¼šè¯å«åšcompanyï¼Œè€Œåœ¨å®¶é‡Œçš„ç½‘å¡ä¼šè¯å«åšhouseï¼Œç„¶åæŒ‰ç…§connection(ä¼šè¯),add(æ·»åŠ åŠ¨ä½œ),con-name(ä¼šè¯åç§°),type(ç½‘å¡ç±»å‹),ifname(ç½‘å¡åç§°)çš„æ ¼å¼æ¥åˆ›å»ºç½‘å¡ä¼šè¯å°±å¯ä»¥äº†ï¼Œä¾‹å¦‚ä¾æ¬¡åˆ›å»ºå…¬å¸å’Œå®¶åº­çš„ç½‘å¡ä¼šè¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#company</span></span><br><span class="line">nmcli connection add con-name company ifname eno16777736 autoconnect no <span class="built_in">type</span> ethernet ip4 192.168.10.10/24 gw4 192.168.10.1</span><br><span class="line"><span class="comment">#house</span></span><br><span class="line">nmcli connection add con-name house <span class="built_in">type</span> ethernet ifname eno16777736</span><br><span class="line"><span class="comment">#åˆ‡æ¢ç½‘å¡ä¼šè¯</span></span><br><span class="line">nmcli connection up house</span><br></pre></td></tr></table></figure>
<h5 id="ç»‘å®šä¸¤å—ç½‘å¡"><a href="#ç»‘å®šä¸¤å—ç½‘å¡" class="headerlink" title="ç»‘å®šä¸¤å—ç½‘å¡"></a>ç»‘å®šä¸¤å—ç½‘å¡</h5><p>ä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒæ˜¯å¿…é¡»è¦ä¿è¯7*24å°æ—¶ä¸é—´æ–­æä¾›ç½‘ç»œä¼ è¾“æœåŠ¡çš„ï¼Œä½¿ç”¨ç½‘å¡ç»‘å®šæŠ€æœ¯ä¸ä»…èƒ½å¤Ÿæé«˜ç½‘å¡å¸¦å®½çš„ä¼ è¾“é€Ÿç‡ï¼Œè¿˜èƒ½åœ¨å…¶ä¸­ä¸€å—ç½‘å¡å‡ºç°æ•…éšœæ—¶ï¼Œä¾ç„¶èƒ½å¤Ÿä¿è¯ç½‘ç»œæ­£å¸¸ä½¿ç”¨ã€‚ç®€å•æ¥è¯´ï¼Œå‡è®¾å’±ä»¬å¯¹ä¸¤å—ç½‘å¡å®æ–½äº†ç»‘å®šæŠ€æœ¯ï¼Œè¿™æ ·åœ¨æ­£å¸¸å·¥ä½œä¸­å®ƒä»¬ä¼šå…±åŒä¼ è¾“æ•°æ®ï¼Œä½¿å¾—ç½‘ç»œä¼ è¾“çš„é€Ÿåº¦å˜å¾—æ›´å¿«ï¼Œä½†åªè¦å…¶ä¸­æœ‰ä¸€å—ç½‘å¡çªç„¶å‡ºç°äº†æ•…éšœï¼Œå¦å¤–ä¸€å—ç½‘å¡ä¾¿ä¼šåœ¨0.1ç§’å†…è‡ªåŠ¨é¡¶æ›¿ä¸Šå»ï¼Œä¿è¯æ•°æ®ä¼ è¾“ä¸ä¼šä¸­æ–­ã€‚</p>
<p>é€šè¿‡vimæ–‡æœ¬ç¼–è¾‘å™¨æ¥é…ç½®ç½‘å¡è®¾å¤‡çš„ç»‘å®šå‚æ•°ï¼Œç½‘å¡ç»‘å®šçš„ç†è®ºå¾ˆç±»ä¼¼äºå‰é¢å­¦ä¹ çš„RAIDç£ç›˜é˜µåˆ—ç»„ï¼Œå’±ä»¬éœ€è¦å…ˆé€ä¸ªå¯¹å‚ä¸ç½‘å¡ç»‘å®šçš„è®¾å¤‡è¿›è¡Œâ€œåˆå§‹è®¾ç½®â€ï¼Œè¿™äº›åŸæœ¬ç‹¬ç«‹çš„ç½‘å¡è®¾å¤‡ä¸éœ€è¦å†æœ‰è‡ªå·±çš„IPåœ°å€ç­‰ä¿¡æ¯ï¼Œè®©å®ƒä»¬æ”¯æŒç½‘å¡ç»‘å®šè®¾å¤‡å°±å¯ä»¥äº†ï¼Œç„¶åè¿˜éœ€è¦å°†ç»‘å®šåçš„è®¾å¤‡å–åä¸ºbond0ä»¥åŠæŠŠIPåœ°å€ç­‰ä¿¡æ¯å¡«å†™è¿›å»ï¼Œè¿™æ ·å½“ç”¨æˆ·è®¿é—®åˆ°ç›¸åº”æœåŠ¡çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯ç”±è¿™ä¸¤å—ç½‘å¡è®¾å¤‡å…±åŒçš„åœ¨æä¾›æœåŠ¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">USERCTL=no</span><br><span class="line">DEVICE=eth0</span><br><span class="line">MASTER=bond0</span><br><span class="line">SLAVE=yes</span><br><span class="line"></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">USERCTL=no</span><br><span class="line">DEVICE=eth1</span><br><span class="line">MASTER=bond0</span><br><span class="line">SLAVE=yes</span><br><span class="line"></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-bond0</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">USERCTL=no</span><br><span class="line">DEVICE=bond0</span><br><span class="line">IPADDR=192.168.1.5</span><br><span class="line">PREFIX=24</span><br><span class="line">DNS=192.168.1.1</span><br><span class="line">NM_CONTROLLED=no</span><br></pre></td></tr></table></figure>
<p>è®©å†…æ ¸æ”¯æŒç½‘å¡ç»‘å®šé©±åŠ¨ï¼Œå¸¸è§çš„ç½‘å¡ç»‘å®šé©±åŠ¨æ¨¡å¼æœ‰ä¸‰ç§â€”â€”mode0ã€mode1å’Œmode6ã€‚æ¯”å¦‚å¯¹äºä¸€ä¸ªæä¾›NFSæˆ–è€…SAMBAæœåŠ¡çš„æ–‡ä»¶æœåŠ¡å™¨æ¥è®²ï¼Œå¦‚æœåªèƒ½æä¾›ç™¾å…†ç½‘ç»œçš„æœ€å¤§ä¼ è¾“é€Ÿç‡ï¼Œä½†åŒæ—¶ä¸‹è½½ç”¨æˆ·åˆç‰¹åˆ«å¤šçš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆç½‘ç»œå‹åŠ›ä¸€å®šæ˜¯æå¤§çš„ã€‚å†æ¯”å¦‚æ˜¯ä¸€ä¸ªæä¾›iscsiæœåŠ¡çš„ç½‘ç»œå­˜å‚¨æœåŠ¡å™¨ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç½‘å¡çš„å¯é æ€§æ˜¯æä¸ºé‡è¦çš„ï¼Œè¿™ç§æƒ…å†µä¸‹å°±å¿…é¡»åŒæ—¶èƒ½å¤Ÿä¿è¯ç½‘ç»œçš„ä¼ è¾“é€Ÿç‡ä»¥åŠç½‘ç»œçš„å®‰å…¨æ€§ï¼Œå› æ­¤æ¯”è¾ƒå¥½çš„é€‰æ‹©å°±æ˜¯mode6æ–¹æ¡ˆäº†ï¼Œå› ä¸ºmode6å¹³è¡¡è´Ÿè½½æ¨¡å¼èƒ½å¤Ÿè®©ä¸¤å—ç½‘å¡åŒæ—¶ä¸€èµ·å·¥ä½œï¼Œå½“å…¶ä¸­ä¸€å—ç½‘å¡å‡ºç°æ•…éšœåèƒ½è‡ªåŠ¨å¤‡æ´ï¼Œæä¾›äº†å¯é çš„ç½‘ç»œä¼ è¾“ä¿éšœï¼Œå¹¶ä¸”ä¸éœ€è¦äº¤æ¢æœºè®¾å¤‡æ”¯æ´ã€‚</p>
<blockquote>
<p>mode0å¹³è¡¡è´Ÿè½½æ¨¡å¼:å¹³æ—¶ä¸¤å—ç½‘å¡å‡å·¥ä½œï¼Œä¸”è‡ªåŠ¨å¤‡æ´ï¼Œé‡‡ç”¨äº¤æ¢æœºè®¾å¤‡æ”¯æ´ã€‚<br>mode1è‡ªåŠ¨å¤‡æ´æ¨¡å¼:å¹³æ—¶åªæœ‰ä¸€å—ç½‘å¡å·¥ä½œï¼Œæ•…éšœåè‡ªåŠ¨æ›¿æ¢ä¸ºå¦å¤–çš„ç½‘å¡ã€‚<br>mode6å¹³è¡¡è´Ÿè½½æ¨¡å¼:å¹³æ—¶ä¸¤å—ç½‘å¡å‡å·¥ä½œï¼Œä¸”è‡ªåŠ¨å¤‡æ´ï¼Œæ— é¡»äº¤æ¢æœºè®¾å¤‡æ”¯æ´ã€‚</p>
</blockquote>
<p>ä½¿ç”¨vimæ–‡æœ¬ç¼–è¾‘å™¨æ¥åˆ›å»ºä¸€ä¸ªç½‘å¡ç»‘å®šå†…æ ¸é©±åŠ¨æ–‡ä»¶ï¼Œä½¿å¾—bond0ç½‘å¡è®¾å¤‡èƒ½å¤Ÿæ”¯æŒç»‘å®šæŠ€æœ¯ï¼ˆbondingï¼‰ï¼ŒåŒæ—¶å®šä¹‰ç½‘å¡ç»‘å®šä¸ºmode6å¹³è¡¡è´Ÿè½½æ¨¡å¼ï¼Œä¸”å½“å‡ºç°æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢æ—¶é—´ä¸º100æ¯«ç§’ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/modprobe.d/bond.conf</span><br><span class="line">alias bond0 bonding</span><br><span class="line">options bond0 miimon=100 mode=6</span><br></pre></td></tr></table></figure>
<p>é‡å¯ç½‘ç»œæœåŠ¡åç½‘å¡ç»‘å®šæ“ä½œå³å¯é¡ºåˆ©æˆåŠŸï¼Œæ­£å¸¸æƒ…å†µä¸‹åªæœ‰bond0ç½‘å¡æ‰ä¼šæœ‰IPåœ°å€ç­‰ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬åäºŒèŠ‚è¯¾ï¼ˆä¸Šï¼‰-ç¬¬åäºŒèŠ‚è¯¾ï¼ˆä¸‹ï¼‰"><a href="#ç¬¬åäºŒèŠ‚è¯¾ï¼ˆä¸Šï¼‰-ç¬¬åäºŒèŠ‚è¯¾ï¼ˆä¸‹ï¼‰" class="headerlink" title="ç¬¬åäºŒèŠ‚è¯¾ï¼ˆä¸Šï¼‰ ç¬¬åäºŒèŠ‚è¯¾ï¼ˆä¸‹ï¼‰"></a>ç¬¬åäºŒèŠ‚è¯¾ï¼ˆä¸Šï¼‰ ç¬¬åäºŒèŠ‚è¯¾ï¼ˆä¸‹ï¼‰</h2><h3 id="ä½¿ç”¨SSHæœåŠ¡ç®¡ç†è¿œç¨‹ä¸»æœº-1"><a href="#ä½¿ç”¨SSHæœåŠ¡ç®¡ç†è¿œç¨‹ä¸»æœº-1" class="headerlink" title="ä½¿ç”¨SSHæœåŠ¡ç®¡ç†è¿œç¨‹ä¸»æœº"></a>ä½¿ç”¨SSHæœåŠ¡ç®¡ç†è¿œç¨‹ä¸»æœº</h3><h4 id="è¿œç¨‹æ§åˆ¶æœåŠ¡"><a href="#è¿œç¨‹æ§åˆ¶æœåŠ¡" class="headerlink" title="è¿œç¨‹æ§åˆ¶æœåŠ¡"></a>è¿œç¨‹æ§åˆ¶æœåŠ¡</h4><h5 id="é…ç½®sshdæœåŠ¡"><a href="#é…ç½®sshdæœåŠ¡" class="headerlink" title="é…ç½®sshdæœåŠ¡"></a>é…ç½®sshdæœåŠ¡</h5><p>SSH(Secure Shell)æ˜¯ä¸€ç§èƒ½å¤Ÿæä¾›å®‰å…¨è¿œç¨‹ç™»å½•ä¼šè¯çš„åè®®ï¼Œä¹Ÿæ˜¯ç›®å‰è¿œç¨‹ç®¡ç†Linuxç³»ç»Ÿæœ€é¦–é€‰çš„æ–¹å¼ï¼Œå› ä¸ºä¼ ç»Ÿçš„ftpæˆ–telnetæœåŠ¡æ˜¯ä¸å®‰å…¨çš„ï¼Œå®ƒä»¬ä¼šæŠŠå¸å·å£ä»¤å’Œæ•°æ®èµ„æ–™ç­‰æ•°æ®åœ¨ç½‘ç»œä¸­ä»¥æ˜æ–‡çš„å½¢å¼è¿›è¡Œä¼ é€ï¼Œè¿™ç§æ•°æ®ä¼ è¾“æ–¹å¼å¾ˆå®¹æ˜“å—åˆ°é»‘å®¢â€œä¸­é—´äººâ€çš„å—…æ¢æ”»å‡»ï¼Œè½»åˆ™ç¯¡æ”¹äº†ä¼ è¾“çš„æ•°æ®ä¿¡æ¯ï¼Œé‡åˆ™ç›´æ¥æŠ“å–åˆ°äº†æœåŠ¡å™¨çš„å¸å·å¯†ç ã€‚</p>
<p>æƒ³è¦é€šè¿‡SSHåè®®æ¥ç®¡ç†è¿œç¨‹çš„LinuxæœåŠ¡å™¨ç³»ç»Ÿï¼Œå’±ä»¬éœ€è¦æ¥éƒ¨ç½²é…ç½®sshdæœåŠ¡ç¨‹åºï¼Œsshdæ˜¯åŸºäºSSHåè®®å¼€å‘çš„ä¸€æ¬¾è¿œç¨‹ç®¡ç†æœåŠ¡ç¨‹åºï¼Œä¸ä»…ä½¿ç”¨èµ·æ¥æ–¹ä¾¿å¿«æ·ï¼Œè€Œä¸”èƒ½å¤Ÿæä¾›ä¸¤ç§å®‰å…¨éªŒè¯çš„æ–¹æ³•â€”â€”åŸºäºå£ä»¤çš„å®‰å…¨éªŒè¯ï¼ŒæŒ‡çš„å°±æ˜¯ç”¨å¸å·å’Œå¯†ç éªŒè¯ç™»é™†ï¼ŒåŸºäºå¯†é’¥çš„å®‰å…¨éªŒè¯ï¼Œåˆ™æ˜¯éœ€è¦åœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥å¯¹ï¼Œç„¶åæŠŠå…¬é’¥ä¼ é€è‡³æœåŠ¡ç«¯ä¸»æœºè¿›è¡Œçš„å…¬å…±å¯†é’¥æ¯”è¾ƒçš„éªŒè¯æ–¹å¼ï¼Œç›¸æ¯”è¾ƒæ¥è¯´æ›´åŠ çš„å®‰å…¨ã€‚</p>
<p>å› ä¸ºåœ¨Linuxç³»ç»Ÿä¸­çš„ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶ï¼Œå› æ­¤è¦æƒ³åœ¨Linuxç³»ç»Ÿä¸­ä¿®æ”¹æœåŠ¡ç¨‹åºçš„è¿è¡Œå‚æ•°ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯åœ¨ä¿®æ”¹ç¨‹åºé…ç½®æ–‡ä»¶çš„è¿‡ç¨‹ï¼ŒsshdæœåŠ¡çš„é…ç½®ä¿¡æ¯ä¿å­˜åœ¨/etc/ssh/sshd_configæ–‡ä»¶ä¸­ï¼Œè¿ç»´äººå‘˜ä¸€èˆ¬ä¼šæŠŠä¿å­˜ç€æœ€ä¸»è¦é…ç½®ä¿¡æ¯çš„æ–‡ä»¶ç§°ä¸ºä¸»é…ç½®æ–‡ä»¶ï¼Œè€Œé…ç½®æ–‡ä»¶ä¸­æœ‰è®¸å¤š#(äº•å·)å¼€å¤´çš„æ³¨é‡Šè¡Œï¼Œè¦æƒ³è®©è¿™äº›é…ç½®å‚æ•°èƒ½å¤Ÿç”Ÿæ•ˆï¼Œéœ€è¦ä¿®æ”¹å‚æ•°åå†å»æ‰å‰é¢çš„äº•å·æ‰è¡Œï¼ŒsshdæœåŠ¡é…ç½®æ–‡ä»¶ä¸­é‡è¦çš„å‚æ•°åŒ…æ‹¬æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>#Port 22</td>
<td>é»˜è®¤çš„sshdæœåŠ¡ç«¯å£ã€‚</td>
</tr>
<tr>
<td>#ListenAddress 0.0.0.0</td>
<td>è®¾å®šsshdæœåŠ¡ç«¯ç›‘å¬çš„IPåœ°å€ã€‚</td>
</tr>
<tr>
<td>#Protocol 2</td>
<td>SSHåè®®çš„ç‰ˆæœ¬å·ã€‚</td>
</tr>
<tr>
<td>#HostKey /etc/ssh/ssh_host_key</td>
<td>SSHåè®®ç‰ˆæœ¬ä¸º1æ—¶ï¼Œç§é’¥å­˜æ”¾çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td>HostKey /etc/ssh/ssh_host_rsa_key</td>
<td>SSHåè®®ç‰ˆæœ¬ä¸º2æ—¶ï¼ŒRSAç§é’¥å­˜æ”¾çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td>#HostKey /etc/ssh/ssh_host_dsa_key</td>
<td>SSHåè®®ç‰ˆæœ¬ä¸º2æ—¶ï¼ŒDSAç§é’¥å­˜æ”¾çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td>#PermitRootLogin yes</td>
<td>è®¾å®šå…è®¸rootç”¨æˆ·ç›´æ¥ç™»å½•ã€‚è‹¥è¦ä¸å…è®¸rootç™»å½•æ›´æ”¹yesä¸ºnoã€‚</td>
</tr>
<tr>
<td>#StrictModes yes</td>
<td>å½“è¿œç¨‹ç”¨æˆ·ç§é’¥æ”¹å˜æ—¶åˆ™ç›´æ¥æ‹’ç»è¿æ¥ã€‚</td>
</tr>
<tr>
<td>#MaxAuthTries 6</td>
<td>æœ€å¤§å¯†ç å°è¯•æ¬¡æ•°</td>
</tr>
<tr>
<td>#MaxSessions 10</td>
<td>æœ€å¤§ç»ˆç«¯æ•°</td>
</tr>
<tr>
<td>#PasswordAuthentication yes</td>
<td>æ˜¯å¦å…è®¸å¯†ç éªŒè¯</td>
</tr>
<tr>
<td>#PermitEmptyPasswords no</td>
<td>æ˜¯å¦å…è®¸ç©ºå¯†ç ç™»é™†ï¼ˆå¾ˆä¸å®‰å…¨ï¼‰</td>
</tr>
</tbody>
</table>
<p>ä¸€èˆ¬çš„æœåŠ¡ç¨‹åºå¹¶ä¸ä¼šåœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶åå°±ç«‹å³è·å–åˆ°äº†æœ€æ–°çš„è¿è¡Œå‚æ•°ï¼Œå¦‚æœæƒ³è®©æ–°çš„é…ç½®æ–‡ä»¶èµ·æ•ˆï¼Œåˆ™éœ€è¦æ‰‹åŠ¨çš„é‡å¯ä¸€ä¸‹æœåŠ¡ç¨‹åºæ‰è¡Œï¼Œå¹¶ä¸”æœ€å¥½ä¹Ÿèƒ½å°†è¿™ä¸ªæœåŠ¡ç¨‹åºåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼Œè¿™æ ·ä½¿å¾—ä¸‹ä¸€æ¬¡é‡å¯æ—¶sshdæœåŠ¡ç¨‹åºä¼šè‡ªåŠ¨è¿è¡Œã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd</span><br><span class="line">systemctl <span class="built_in">enable</span> sshd</span><br></pre></td></tr></table></figure>
<h6 id="å®‰å…¨å¯†é’¥éªŒè¯"><a href="#å®‰å…¨å¯†é’¥éªŒè¯" class="headerlink" title="å®‰å…¨å¯†é’¥éªŒè¯"></a>å®‰å…¨å¯†é’¥éªŒè¯</h6><p>åŠ å¯†ç®—æ³•æ˜¯å¯¹ä¿¡æ¯è¿›è¡Œç¼–ç å’Œè§£ç çš„æŠ€æœ¯ï¼Œå®ƒèƒ½å¤Ÿå°†åŸæœ¬å¯ç›´æ¥é˜…è¯»çš„æ˜æ–‡ä¿¡æ¯é€šè¿‡ä¸€å®šçš„åŠ å¯†ç®—æ³•è¯‘æˆå¯†æ–‡å½¢å¼ã€‚å¯†é’¥å³æ˜¯å¯†æ–‡çš„é’¥åŒ™ï¼ŒåŒ…æ‹¬æœ‰ç§é’¥å’Œå…¬é’¥ä¹‹åˆ†ï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­å¦‚æœæ‹…å¿ƒä¼ é€çš„æ•°æ®è¢«ä»–äººç›‘å¬æˆªè·åˆ°ï¼Œå°±å¯ä»¥åœ¨ä¼ é€å‰å…ˆä½¿ç”¨å…¬é’¥è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œç„¶åå†è¿›è¡Œæ•°æ®ä¼ é€ï¼Œè¿™æ ·åªæœ‰æŒæ¡ç§é’¥çš„ç”¨æˆ·æ‰èƒ½è§£å¯†è¿™æ®µæ•°æ®ï¼Œé™¤æ­¤ä¹‹å¤–å…¶ä»–äººå³ä¾¿æˆªè·äº†æ•°æ®å†…å®¹ä¸€èˆ¬ä¹Ÿå¾ˆéš¾å†ç ´è¯‘æˆæ˜æ–‡ä¿¡æ¯ã€‚æ€»ç»“æ¥è¯´ï¼Œæ—¥å¸¸ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å¯†ç è¿›è¡Œå£ä»¤éªŒè¯ç»ˆå½’å­˜åœ¨ç€è¢«éª‡å®¢æš´åŠ›ç ´è§£æˆ–å—…æ¢æˆªè·çš„é£é™©ï¼Œå¦‚æœæ­£ç¡®çš„é…ç½®å¯†é’¥éªŒè¯æ–¹å¼ï¼Œé‚£ä¹ˆä¸€å®šä¼šè®©æ‚¨çš„sshdæœåŠ¡ç¨‹åºæ›´åŠ çš„å®‰å…¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨å®¢æˆ·ç«¯ä¸»æœºä¸­ç”Ÿæˆâ€œå¯†é’¥å¯¹â€å¹¶æŠŠå…¬é’¥ä¼ é€åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸­</span></span><br><span class="line">ssh-keygen -t rsa -b 4096 -C <span class="string">"æ³¨é‡Šemail"</span> -f ovwane_rsa</span><br><span class="line"><span class="comment">#æŠŠå®¢æˆ·ç«¯ä¸»æœºä¸­ç”Ÿæˆå¥½çš„å…¬é’¥æ–‡ä»¶ä¼ é€è‡³è¿œç¨‹ä¸»æœº</span></span><br><span class="line">ssh-copy-id 192.168.1.5</span><br><span class="line"><span class="comment">#è®¾ç½®æœåŠ¡å™¨ä¸»æœºåªå…è®¸å¯†é’¥éªŒè¯ï¼Œæ‹’ç»ä¼ ç»Ÿå£ä»¤éªŒè¯æ–¹å¼ï¼Œè®°å¾—ä¿®æ”¹é…ç½®æ–‡ä»¶åä¿å­˜å¹¶é‡å¯sshdæœåŠ¡ç¨‹åºå“¦~</span></span><br><span class="line"><span class="comment">#ç¦æ­¢å¯†ç ç™»å½•</span></span><br><span class="line">sed -i <span class="string">'s/^PasswordAuthentication yes/PasswordAuthentication no/g'</span> /etc/ssh/sshd_config</span><br><span class="line"><span class="comment">#å…è®¸å¯†é’¥ç™»å½•</span></span><br><span class="line">sed -i <span class="string">'s/^#PubkeyAuthentication yes/PubkeyAuthentication yes/g'</span> /etc/ssh/sshd_config</span><br><span class="line"><span class="comment">#é‡å¯sshdæœåŠ¡</span></span><br><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure>
<h4 id="è¿œç¨‹ä¼ è¾“å‘½ä»¤"><a href="#è¿œç¨‹ä¼ è¾“å‘½ä»¤" class="headerlink" title="è¿œç¨‹ä¼ è¾“å‘½ä»¤"></a>è¿œç¨‹ä¼ è¾“å‘½ä»¤</h4><p>Scpå®‰å…¨ä¼ è¾“æœåŠ¡(Secure copy)æ˜¯ä¸€ç§åŸºäºsshåè®®çš„ç½‘ç»œä¼ è¾“å‘½ä»¤ï¼Œscpä¸ä»…èƒ½å¤Ÿé€šè¿‡ç½‘ç»œä¼ é€æ•°æ®ï¼Œè€Œä¸”æ‰€æœ‰çš„æ•°æ®éƒ½å°†è¢«åŠ å¯†ã€‚ä¾‹å¦‚æƒ³æŠŠä¸€äº›æ–‡ä»¶é€šè¿‡ç½‘ç»œä¼ é€åˆ°å…¶ä»–ä¸»æœºä¸Šé¢ï¼Œåˆæ°å·§ä¸¤å°ä¸»æœºéƒ½æ˜¯Linuxç³»ç»Ÿï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨åˆ°scpå‘½ä»¤è½»æ¾çš„è¾¾åˆ°ç›®çš„å•¦~</p>
<p>scpå‘½ä»¤ç”¨äºåœ¨ç½‘ç»œä¸­å®‰å…¨çš„ä¼ è¾“æ–‡ä»¶ï¼Œæ ¼å¼ä¸ºï¼šâ€œscp [å‚æ•°] æœ¬åœ°æ–‡ä»¶ è¿œç¨‹å¸æˆ·@è¿œç¨‹IPåœ°å€:è¿œç¨‹ç›®å½•â€ã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-v</td>
<td>æ˜¾ç¤ºè¯¦ç»†çš„è¿æ¥è¿›åº¦</td>
</tr>
<tr>
<td>-P</td>
<td>æŒ‡å®šè¿œç¨‹ä¸»æœºçš„sshdç«¯å£å·</td>
</tr>
<tr>
<td>-r</td>
<td>ä¼ é€æ–‡ä»¶å¤¹æ—¶è¯·åŠ æ­¤å‚æ•°</td>
</tr>
<tr>
<td>-6</td>
<td>ä½¿ç”¨ipv6åè®®</td>
</tr>
</tbody>
</table>
<p>æƒ³è¦ä½¿ç”¨scpå‘½ä»¤æŠŠæ–‡ä»¶ä»æœ¬åœ°å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºï¼Œé¦–å…ˆéœ€è¦ä»¥ç»å¯¹è·¯å¾„çš„å½¢å¼å†™æ¸…æœ¬åœ°æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼Œå¯¹äºè¦ä¼ é€æ•´ä¸ªç›®å½•å†…æ‰€æœ‰æ•°æ®çš„æ—¶å€™è¿˜éœ€è¦é¢å¤–æ·»åŠ -rå‚æ•°é€’å½’æ“ä½œï¼Œç„¶åå†™ä¸Šè¦ä¼ é€åˆ°çš„è¿œç¨‹æœåŠ¡å™¨ä¸»æœºIPåœ°å€ï¼Œé»˜è®¤ä¼šä»¥å½“å‰æœ¬åœ°ç™»é™†çš„ç”¨æˆ·èº«ä»½æ¥è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶ä»–æŒ‡å®šç”¨æˆ·çš„èº«ä»½è¿›è¡Œæ ¡éªŒï¼Œå¯ä½¿ç”¨ç”¨æˆ·å@ä¸»æœºåœ°å€çš„å‚æ•°æ ¼å¼ï¼Œæœ€åéœ€è¦åœ¨è¿œç¨‹ä¸»æœºIPåœ°å€åä»¥:ï¼ˆå†’å·ï¼‰èµ·å§‹å†™ä¸Šè¦ä¼ é€åˆ°å¯¹æ–¹ä¸»æœºçš„é‚£ä¸ªç›®å½•ä¸­ï¼ŒæŠŠå‚æ•°å†™æ­£ç¡®å¹¶éªŒè¯ç”¨æˆ·èº«ä»½åå³å¯å®Œæˆä¼ é€å·¥ä½œã€‚å› ä¸ºscpå‘½ä»¤æ˜¯åŸºäºsshåè®®è¿›è¡Œæ–‡ä»¶ä¼ é€çš„ï¼Œå¦‚æœè®¾ç½®å¥½äº†å¯†é’¥éªŒè¯ï¼Œå› æ­¤è¿›è¡Œæ–‡ä»¶ä¼ é€çš„è¯æ˜¯è¿å¸å·å¯†ç éƒ½ä¸éœ€è¦çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp /root/file 192.168.1.5:/root</span><br></pre></td></tr></table></figure>
<p>ä¸ä»…å¦‚æ­¤ï¼Œå¼ºå¤§çš„scpå‘½ä»¤è¿˜èƒ½å¤ŸæŠŠè¿œç¨‹ä¸»æœºçš„æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ä¸»æœºï¼Œå‘½ä»¤æ ¼å¼ä¸ºscp [å‚æ•°] è¿œç¨‹ç”¨æˆ·@è¿œç¨‹IPåœ°å€:è¿œç¨‹æ–‡ä»¶ æœ¬åœ°ç›®å½•ï¼Œä¾‹å¦‚å¯ä»¥æŠŠè¿œç¨‹ä¸»æœºä¸­çš„ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶ä¸‹è½½è¿‡æ¥ï¼Œè€Œæ— éœ€ç™»å½•åˆ°è¿œç¨‹ä¸»æœºåå†ä¼ é€è¿‡æ¥ï¼Œçœå»äº†å¾ˆå¤šä¸å¿…è¦çš„å‘¨æŠ˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp 192.168.1.5:/etc/resolv.conf /root</span><br></pre></td></tr></table></figure>
<h4 id="ä¸é—´æ–­ä¼šè¯æœåŠ¡"><a href="#ä¸é—´æ–­ä¼šè¯æœåŠ¡" class="headerlink" title="ä¸é—´æ–­ä¼šè¯æœåŠ¡"></a>ä¸é—´æ–­ä¼šè¯æœåŠ¡</h4><p>å¤§å®¶å­¦å®Œäº†sshæœåŠ¡åæœ‰æ²¡æœ‰å‘ç°ä¸€ä¸ªå¾ˆé‡è¦çš„äº‹æƒ…â€”â€”å½“è¿œç¨‹è¿æ¥çš„ç»ˆç«¯è¢«å…³é—­æ—¶ï¼Œè¿è¡Œåœ¨å¯¹æ–¹æœåŠ¡å™¨ä¸Šçš„å‘½ä»¤ä¹Ÿä¼šéšä¹‹ä¸­æ–­ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœåœ¨æ‰§è¡Œæ‰“åŒ…æ–‡ä»¶çš„å‘½ä»¤ï¼Œæˆ–è€…æ˜¯æ­£åœ¨ç”¨è„šæœ¬å®‰è£…æŸä¸ªæœåŠ¡ç¨‹åºï¼Œé€šå¸¸ä¸­é€”æ˜¯ç»å¯¹ä¸èƒ½å…³é—­è¿œç¨‹çª—å£æˆ–æ–­å¼€ç½‘ç»œé“¾æ¥çš„ï¼Œå³ä¾¿æ˜¯ç½‘ç»œä¸ç¨³å®šçš„æ³¢åŠ¨æƒ…å†µéƒ½æœ‰å¯èƒ½å¯¼è‡´ä»»åŠ¡è¢«ä¸­æ–­ï¼Œåªèƒ½é‡æ–°è¿œç¨‹é“¾æ¥åˆ°æœåŠ¡å™¨å†é‡æ–°å¼€å§‹ä»»åŠ¡ã€‚è¿˜æœ‰äº›æ—¶å€™æ­£åœ¨æ‰§è¡Œæ‰“åŒ…æ–‡ä»¶çš„å‘½ä»¤ï¼ŒåˆåŒæ—¶æƒ³ç”¨è„šæœ¬æ¥å®‰è£…æŸä¸ªæœåŠ¡ç¨‹åºï¼Œè¿™ä¸ªæ—¶å€™å› ä¸ºæ‰“åŒ…æ–‡ä»¶çš„è¾“å‡ºä¿¡æ¯ä¼šå æ»¡äº†ç”¨æˆ·çš„å±å¹•ç•Œé¢ï¼Œæ‰€ä»¥åªèƒ½å†é¢å¤–æ‰“å¼€ä¸€ä¸ªè¿œç¨‹æ§åˆ¶çª—å£ï¼Œä¹…è€Œä¹…ä¹‹äº†ï¼Œéš¾å…ä¼šå¿˜è®°é‚£ä¸ªè¿œç¨‹çª—å£æ˜¯åšä»€ä¹ˆç”¨çš„äº†ã€‚</p>
<p>Screenæ˜¯ä¸€æ¬¾ç”±GNUå¼€æºè®¡åˆ’å¼€å‘çš„å¤šè§†çª—è¿œç¨‹æ§åˆ¶ç®¡ç†æœåŠ¡ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°æƒ…å†µä¸­ç½‘ç»œå¼‚å¸¸ä¸­æ–­æˆ–åŒæ—¶æ§åˆ¶å¤šä¸ªè¿œç¨‹çª—å£è€Œè®¾è®¡çš„ç¨‹åºã€‚ScreenæœåŠ¡ç¨‹åºä¸ä»…èƒ½å¤Ÿè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè€Œä¸”ç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¿˜å¯ä»¥åŒæ—¶åœ¨å¤šä¸ªç»ˆç«¯ä¼šè¯ä¸­è‡ªç”±åˆ‡æ¢ï¼Œèƒ½å¤Ÿåšåˆ°ä¼šè¯æ¢å¤â€”â€”å³ä¾¿ç½‘ç»œä¸­æ–­ï¼Œä¹Ÿå¯è®©ä¼šè¯éšæ—¶æ¢å¤ï¼Œç”¨æˆ·ä¸ä¼šå¤±å»å¯¹å‘½ä»¤ç»ˆç«¯çš„æ§åˆ¶ï¼Œå¤šçª—å£â€”â€”æ¯ä¸ªä¼šè¯éƒ½æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œæ‹¥æœ‰å„è‡ªç‹¬ç«‹çš„ç¼–ç ã€è¾“å…¥è¾“å‡ºå’Œçª—å£ç¼“å­˜ï¼Œä¼šè¯å…±äº«â€”â€”å¯ä»¥ä½¿å¤šä¸ªç”¨æˆ·ä»ä¸åŒç»ˆç«¯ä½¿ç”¨åŒä¸€ä¸ªä¼šè¯ï¼Œä¹Ÿå¯è®©ä»–ä»¬çœ‹åˆ°å®Œå…¨ç›¸åŒçš„è¾“å‡ºä¿¡æ¯çš„ã€‚</p>
<h5 id="screen"><a href="#screen" class="headerlink" title="screen"></a>screen</h5><p>ScreenæœåŠ¡ç¨‹åºåœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­å¹¶æ²¡æœ‰é»˜è®¤å®‰è£…ï¼Œå› æ­¤éœ€è¦é…ç½®yumä»“åº“æ¥å®‰è£…è¿™æ¬¾è½¯ä»¶ã€‚</p>
<p>éœ€è¦rhelçš„å®‰è£…å…‰ç›˜</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /media/cdrom</span><br><span class="line">mount /dev/cdrom /media/cdrom</span><br><span class="line"><span class="comment">#ä½¿ç”¨Vimæ–‡æœ¬ç¼–è¾‘å™¨åˆ›å»ºYumä»“åº“çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">cat &lt;&lt; EOF &gt;/etc/yum.repos.d/rhel7.repo</span><br><span class="line">[rhel7]</span><br><span class="line">name=rhel7</span><br><span class="line">baseurl=file:///media/cdrom</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç°åœ¨å°±å¯ä»¥ä½¿ç”¨yumä»“åº“æ¥å®‰è£…screenæœåŠ¡ç¨‹åºè½¯ä»¶å•¦ï¼Œå‡ºäºå¯¹è‡ªç„¶ç¯å¢ƒçš„ä¿æŠ¤æ„è¯†ï¼Œåˆ˜é„è€å¸ˆå°†å¯¹åé¢ç« èŠ‚ä¸­å‡ºç°çš„yumè½¯ä»¶å®‰è£…ä¿¡æ¯è¿›è¡Œç­›é€‰â€”â€”æŠŠé‡å¤æ€§é«˜ä¸æ— æ„ä¹‰çš„éå¿…è¦ä¿¡æ¯çœç•¥ï¼Œä»¥æ¥èŠ‚çœåŠé¿å…ä¸å¿…è¦çš„çº¸å¼ æµªè´¹ï¼Œä¸ºåä»£ä¸ä»…èƒ½äº«å—ç§‘æŠ€ä¹‹ä¾¿æ·ï¼Œè¿˜èƒ½æ‹¥æœ‰è‡ªç„¶ä¹‹èˆ’é€‚çŒ®å‡ºä¸€ç‚¹åŠªåŠ›ã€‚</span></span><br><span class="line">yum install screen</span><br></pre></td></tr></table></figure>
<h5 id="ç®¡ç†è¿œç¨‹ä¼šè¯"><a href="#ç®¡ç†è¿œç¨‹ä¼šè¯" class="headerlink" title="ç®¡ç†è¿œç¨‹ä¼šè¯"></a>ç®¡ç†è¿œç¨‹ä¼šè¯</h5><p>screenå‘½ä»¤èƒ½åšçš„äº‹æƒ…éå¸¸å¤šã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-S</td>
<td>åˆ›å»ºä¼šè¯çª—å£</td>
</tr>
<tr>
<td>-d</td>
<td>æŠŠæŒ‡å®šä¼šè¯ç¦»çº¿</td>
</tr>
<tr>
<td>-r</td>
<td>æŠŠæŒ‡å®šä¼šè¯æ¢å¤</td>
</tr>
<tr>
<td>-x</td>
<td>ä¸€æ¬¡æ€§æ¢å¤æ‰€æœ‰çš„ä¼šè¯</td>
</tr>
<tr>
<td>-ls</td>
<td>æ˜¾ç¤ºå½“å‰å·²æœ‰çš„ä¼šè¯</td>
</tr>
<tr>
<td>-wipe</td>
<td>æŠŠç›®å‰æ— æ³•ä½¿ç”¨çš„ä¼šè¯åˆ é™¤ç­‰ç­‰åŠŸèƒ½</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºbackupçš„ä¼šè¯çª—å£ï¼ŒåŒå­¦ä»¬å¯ä»¥ç•™å¿ƒè§‚å¯Ÿä¸‹ï¼Œå½“å’±ä»¬æ•²ä¸‹è¿™æ¡å‘½ä»¤çš„ä¸€ç¬é—´å±å¹•ä¼šå¿«é€Ÿé—ªåŠ¨ä¸€ä¸‹ï¼Œè¿™æ—¶å°±å·²ç»å¤„åœ¨screenæœåŠ¡ä¼šè¯ä¸­äº†ï¼Œåœ¨è¿™ä¸ªé‡Œé¢è¿è¡Œä»»ä½•æ“ä½œéƒ½ä¼šè¢«åå°è®°å½•ä¸‹æ¥ã€‚</span></span><br><span class="line">screen -S backup</span><br><span class="line"><span class="comment">#åœ¨åˆšåˆšæ‰§è¡Œscreenå‘½ä»¤åè°ƒç”¨ç³»ç»Ÿçš„é»˜è®¤shellï¼Œæ‰€ä»¥æ‰§è¡Œå‘½ä»¤åä¼šç«‹å³è¿”å›ä¸€ä¸ªæç¤ºç¬¦ï¼Œè™½ç„¶çœ‹èµ·æ¥è·Ÿåˆšåˆšæ²¡æœ‰å˜åŒ–ï¼Œä½†å®é™…ä¸Šå¯ä»¥æŸ¥çœ‹åˆ°å½“å‰çš„ä¼šè¯æ­£åœ¨å·¥ä½œä¸­</span></span><br><span class="line">screen -ls</span><br><span class="line"><span class="comment">#åˆ‡æ¢ä¼šè¯</span></span><br><span class="line">screen -r sessionname</span><br><span class="line"><span class="comment">#æƒ³è¦é€€å‡ºä¸€ä¸ªä¼šè¯ä¹Ÿååˆ†ç®€å•ï¼Œåªéœ€è¦å‘å‘½ä»¤è¡Œä¸­æ‰§è¡Œexitå‘½ä»¤å°±å¯ä»¥è¾¾åˆ°ç›®çš„</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment">#æ—¥å¸¸ç”Ÿäº§ä¸­å…¶å®å¹¶ä¸æ˜¯å¿…é¡»å…ˆåˆ›å»ºä¼šè¯ä¹‹åå†å¼€å§‹å·¥ä½œï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨screenå‘½ä»¤æ‰§è¡Œè¦è¿è¡Œçš„å‘½ä»¤ï¼Œè¿™æ ·åœ¨å‘½ä»¤ä¸­çš„ä¸€åˆ‡æ“ä½œä¹Ÿéƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œå½“å‘½ä»¤æ‰§è¡Œç»“æŸåscreenä¼šè¯ä¹Ÿä¼šè‡ªåŠ¨ç»“æŸã€‚</span></span><br><span class="line">screen vim test.txt</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶å¦‚æœå’±ä»¬çªç„¶åˆæƒ³åˆ°äº†è¿˜æœ‰å…¶ä»–äº‹æƒ…è¦åšï¼Œä¹Ÿå¯ä»¥å†å¤šåˆ›å»ºå‡ºå‡ ä¸ªä¼šè¯çª—å£æ¥ä¸€èµ·ä½¿ç”¨ï¼Œè€Œå¦‚æœè¿™æ®µæ—¶é—´å†…ä¸ä¼šå†ä½¿ç”¨æŸä¸ªä¼šè¯çª—å£ï¼Œå¯ä»¥æŠŠå®ƒè®¾ç½®ä¸ºä¸´æ—¶æ–­å¼€æ¨¡å¼ï¼ˆdetachï¼‰ï¼Œéšåå·¥ä½œéœ€è¦æ—¶å†é‡æ–°è¿æ¥ï¼ˆattachï¼‰å›æ¥ï¼Œè¿™æœŸé—´ä¼šè¯å†…çš„ç¨‹åºä¹Ÿä¼šæ­£å¸¸è¿è¡Œã€‚</p>
<p>ä¼šè¯å…±äº«åŠŸèƒ½<br>screenå‘½ä»¤ä¸ä»…èƒ½å¤Ÿè®©ä½¿ç”¨è€…åœ¨æç«¯æƒ…å†µä¸‹ä¹Ÿä¸ä¸¢å¤±å¯¹ç³»ç»Ÿçš„è¿œç¨‹æ§åˆ¶ï¼Œä¿è¯äº†ç”Ÿäº§ç¯å¢ƒè¿œç¨‹å·¥ä½œçš„ä¸é—´æ–­æ€§ï¼Œè€Œä¸”è¿˜å…·æœ‰ä¼šè¯å…±äº«ã€åˆ†å±åˆ‡å‰²ã€ä¼šè¯é”å®šç­‰ç­‰å®ç”¨çš„åŠŸèƒ½ã€‚ä¼šè¯å…±äº«åŠŸèƒ½æ˜¯ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…ï¼Œå½“å¤šä¸ªç”¨æˆ·åŒæ—¶ç”¨æŸä¸ªç”¨æˆ·è¿œç¨‹æ§åˆ¶ä¸»æœºçš„æ—¶å€™ï¼Œä¾¿å¯ä»¥æŠŠå±å¹•å†…å®¹å…±äº«å‡ºæ¥ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªäººéƒ½å¯ä»¥çœ‹åˆ°ç›¸åŒçš„å†…å®¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¦å®ç°ä¼šè¯å…±äº«åŠŸèƒ½ï¼Œéœ€è¦å…ˆé€šè¿‡å®¢æˆ·ç»ˆç«¯Aè¿œç¨‹sshè¿æ¥åˆ°æœåŠ¡å™¨ä¸»æœºç«¯ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªä¼šè¯çª—å£</span></span><br><span class="line">screen -S sessionname</span><br><span class="line"><span class="comment">#ç„¶åå¼€å¯ç¬¬äºŒå°å®¢æˆ·ç»ˆç«¯Bè¿œç¨‹sshè¿æ¥åˆ°æœåŠ¡å™¨ä¸»æœºç«¯ï¼Œæ‰§è¡Œè·å–è¿œç¨‹ä¼šè¯çš„å‘½ä»¤å³å¯ï¼Œé©¬ä¸Šä¸¤å°ä¸»æœºå°±èƒ½çœ‹åˆ°ç›¸åŒçš„å†…å®¹äº†ã€‚</span></span><br><span class="line">screen -x</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨ApacheæœåŠ¡éƒ¨ç½²é™æ€ç½‘ç«™"><a href="#ä½¿ç”¨ApacheæœåŠ¡éƒ¨ç½²é™æ€ç½‘ç«™" class="headerlink" title="ä½¿ç”¨ApacheæœåŠ¡éƒ¨ç½²é™æ€ç½‘ç«™"></a>ä½¿ç”¨ApacheæœåŠ¡éƒ¨ç½²é™æ€ç½‘ç«™</h3><h4 id="ç½‘ç«™æœåŠ¡ç¨‹åº"><a href="#ç½‘ç«™æœåŠ¡ç¨‹åº" class="headerlink" title="ç½‘ç«™æœåŠ¡ç¨‹åº"></a>ç½‘ç«™æœåŠ¡ç¨‹åº</h4><p>æœ€åˆåœ¨1970å¹´å‰åï¼Œäº’è”ç½‘æŠ€æœ¯ä»…ä»…æ˜¯å¤„åœ¨é›å½¢é˜¶æ®µçš„ä¸€ç§æ„æƒ³ï¼Œç»è¿‡å¤šå¹´å‘å±•ç„¶åæ‰æ…¢æ…¢é€æ­¥å‘éå†›æ–¹æˆ–ç§‘ç ”éƒ¨é—¨å¤–å¼€å§‹æ¥å…¥ä½¿ç”¨ï¼Œè™½ç„¶é‚£æ—¶â€œäº’è”ç½‘â€çš„è§„æ¨¡è¿˜ä¸å¦‚ç°åœ¨å±€åŸŸç½‘æˆç†Ÿï¼Œä½†ä¾ç„¶ä¸ºç½‘ç»œåº”ç”¨æŠ€æœ¯çˆ†å‘å¼å¢é•¿æ‰“ä¸‹äº†æ‰å®çš„åŸºç¡€ã€‚æ‚¨æœ€å¼€å§‹ä¹Ÿåº”è¯¥æ˜¯é€šè¿‡è®¿é—®ç½‘ç«™è€Œæ­£å¼æ¥è§¦åˆ°äº’è”ç½‘çš„å§ï¼Œè€Œå’±ä»¬å¹³æ—¶è®¿é—®çš„ç½‘ç«™æœåŠ¡å°±æ˜¯Webç½‘ç»œæœåŠ¡ä¹Ÿå«WWWä¸‡ç»´ç½‘(World Wide Web)ï¼Œä¸€èˆ¬æ˜¯æŒ‡èƒ½å¤Ÿè®©ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®åˆ°äº’è”ç½‘ä¸­æ–‡æ¡£ç­‰èµ„æºçš„æœåŠ¡ã€‚å¦‚å›¾10-1æ‰€ç¤ºï¼ŒWebç½‘ç«™æœåŠ¡æ˜¯ä¸€ç§è¢«åŠ¨è®¿é—®çš„æœåŠ¡ç¨‹åºï¼Œå³åªæœ‰æ¥æ”¶åˆ°äº’è”ç½‘ä¸­å…¶ä»–è®¡ç®—æœºå‘å‡ºçš„è¯·æ±‚åæ‰ä¼šå“åº”ï¼Œæœ€ç»ˆWebæœåŠ¡å™¨ä¼šé€šè¿‡HTTP(è¶…æ–‡æœ¬ä¼ è¾“åè®®)æˆ–HTTPSï¼ˆè¶…æ–‡æœ¬å®‰å…¨ä¼ è¾“åè®®ï¼‰æŠŠæŒ‡å®šæ–‡ä»¶ä¼ é€åˆ°å®¢æˆ·æœºçš„æµè§ˆå™¨ä¸Šã€‚</p>
<p>ç›®å‰èƒ½å¤Ÿæä¾›WEBç½‘ç»œæœåŠ¡çš„ç¨‹åºæœ‰Apacheã€Nginxæˆ–IISç­‰ç­‰ï¼Œåœ¨Windowsç³»ç»Ÿä¸­é»˜è®¤WebæœåŠ¡ç¨‹åºæ˜¯IISäº’è”ç½‘ä¿¡æ¯æœåŠ¡(Internet Information Services)ï¼Œè¿™æ˜¯ä¸€æ¬¾å›¾å½¢åŒ–çš„ç½‘ç«™ç®¡ç†å·¥å…·ï¼ŒIISç¨‹åºä¸å…‰èƒ½æä¾›Webç½‘ç«™æœåŠ¡ï¼Œè¿˜èƒ½å¤Ÿæä¾›FTPã€NMTPã€SMTPç­‰æœåŠ¡åŠŸèƒ½ï¼Œä½†åªèƒ½åœ¨Windowsç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥å°±ä¸åœ¨å’±ä»¬è¿™æœ¬ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹ä¹¦ç±çš„å­¦ä¹ èŒƒå›´å†…äº†ã€‚2004å¹´10æœˆ4æ—¥ä¸ºä¿„ç½—æ–¯çŸ¥åé—¨æˆ·ç«™ç‚¹è€Œå¼€å‘çš„WebæœåŠ¡ç¨‹åºNginxå‡ºä¸–äº†ï¼ŒNginxç¨‹åºä½œä¸ºä¸€æ¬¾è½»é‡çº§çš„ç½‘ç«™æœåŠ¡è½¯ä»¶ï¼Œå› å…¶ç¨³å®šæ€§å’Œä¸°å¯Œçš„åŠŸèƒ½è€Œå¿«é€Ÿå é¢†æœåŠ¡å™¨å¸‚åœºï¼Œä½†æœ€æœ€æœ€è¢«è®¤å¯çš„è¿˜å½“å±æ˜¯ä½ç³»ç»Ÿèµ„æºã€å ç”¨å†…å­˜å°‘ä¸”å¹¶å‘èƒ½åŠ›å¼ºï¼Œç›®å‰å›½å†…å¦‚æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ç­‰é—¨æˆ·ç«™å‡ä½¿ç”¨ï¼Œè¿™æ¬¾æœåŠ¡ç¨‹åºåˆ˜é„è€å¸ˆå°†ä¼šåœ¨ç¬¬20ç« èŠ‚æ—¶ä¸ºæ‚¨è®²è§£ã€‚Apacheç¨‹åºæ˜¯ç›®å‰æ‹¥æœ‰å¾ˆé«˜å¸‚åœºå æœ‰ç‡çš„WebæœåŠ¡ç¨‹åºä¹‹ä¸€ï¼Œå…¶è·¨å¹³å°å’Œå®‰å…¨æ€§å¹¿æ³›è¢«è®¤å¯ä¸”æ‹¥æœ‰å¿«é€Ÿã€å¯é ã€ç®€å•çš„APIæ‰©å±•ï¼Œå¦‚å›¾10-2æ‰€ç¤ºä¸ºApacheæœåŠ¡åŸºé‡‘ä¼šçš„è‘—åLogoï¼Œå®ƒçš„åå­—å–è‡ªç¾å›½å°ç¬¬å®‰äººåœŸè‘—è¯­ï¼Œå¯“æ„ç€æ‹¥æœ‰é«˜è¶…çš„ä½œæˆ˜ç­–ç•¥å’Œæ— ç©·çš„è€æ€§ï¼Œåœ¨çº¢å¸½RHEL5ã€6ã€7ç³»ç»Ÿä¸­ä¸€ç›´ä½œä¸ºç€é»˜è®¤çš„WebæœåŠ¡ç¨‹åºè€Œä½¿ç”¨ï¼Œå¹¶ä¸”ä¹Ÿä¸€ç›´æ˜¯çº¢å¸½RHCSAå’Œçº¢å¸½RHCEçš„è€ƒè¯•é‡ç‚¹å†…å®¹ã€‚ApacheæœåŠ¡ç¨‹åºå¯ä»¥è¿è¡Œåœ¨Linuxç³»ç»Ÿã€Unixç³»ç»Ÿç”šè‡³æ˜¯Windowsç³»ç»Ÿä¸­ï¼Œæ”¯æŒåŸºäºIPã€åŸŸååŠç«¯å£å·çš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½ã€æ”¯æŒå¤šç§HTTPè®¤è¯æ–¹å¼ã€é›†æˆæœ‰ä»£ç†æœåŠ¡å™¨æ¨¡å—ã€å®‰å…¨Socketå±‚(SSL)ã€èƒ½å¤Ÿå®æ—¶ç›‘è§†æœåŠ¡çŠ¶æ€ä¸å®šåˆ¶æ—¥å¿—æ¶ˆæ¯ï¼Œå¹¶æœ‰ç€å„ç±»ä¸°å¯Œçš„æ¨¡å—æ”¯æŒã€‚</p>
<p>å®‰è£…ApacheæœåŠ¡ç¨‹åºå•¦ï¼Œéœ€è¦æ³¨æ„ä½¿ç”¨yumå‘½ä»¤å®‰è£…è½¯ä»¶æ—¶åé¢å†™çš„æ˜¯æœåŠ¡ç¨‹åºçš„åå­—ï¼Œè€ŒapacheæœåŠ¡çš„è½¯ä»¶åŒ…åç§°å«åšhttpdï¼Œç›´æ¥æ‰§è¡Œyum install apacheå‘½ä»¤åˆ™æ˜¯ä¼šæŠ¥é”™è¯¯çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…httpd</span></span><br><span class="line">yum -y install httpd</span><br><span class="line"><span class="comment">#å¯åŠ¨å’Œå¼€æœºè‡ªå¯åŠ¨</span></span><br><span class="line">systemctl start httpd</span><br><span class="line">systemctl <span class="built_in">enable</span> httpd</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®æœåŠ¡æ–‡ä»¶å‚æ•°"><a href="#é…ç½®æœåŠ¡æ–‡ä»¶å‚æ•°" class="headerlink" title="é…ç½®æœåŠ¡æ–‡ä»¶å‚æ•°"></a>é…ç½®æœåŠ¡æ–‡ä»¶å‚æ•°</h4><p>å…ˆæ…¢ç€åˆ«æ¿€åŠ¨!!åˆšåˆšå­¦ä¼šçš„å®‰è£…å’Œè¿è¡Œåªæ˜¯å­¦ä¹ httpdæœåŠ¡ç¨‹åºæˆåŠŸè·¯ä¸Šçš„ä¸€å°æ­¥è€Œå·²ï¼Œå¯¹äºLinuxç³»ç»Ÿä¸­æœåŠ¡çš„é…ç½®å°±æ˜¯åœ¨ä¿®æ”¹å…¶é…ç½®æ–‡ä»¶ï¼Œå› æ­¤è¿˜éœ€è¦çŸ¥é“è¿™äº›é…ç½®æ–‡ä»¶åˆ†åˆ«å¹²ä»€ä¹ˆç”¨çš„ï¼Œä»¥åŠå­˜æ”¾åˆ°äº†ä»€ä¹ˆä½ç½®ï¼š</p>
<hr>
<p>æœåŠ¡ç›®å½•    /etc/httpd<br>ä¸»é…ç½®æ–‡ä»¶    /etc/httpd/conf/httpd.conf<br>ç½‘ç«™æ•°æ®ç›®å½•    /var/www/html<br>è®¿é—®æ—¥å¿—    /var/log/httpd/access_log<br>é”™è¯¯æ—¥å¿—    /var/log/httpd/error_log</p>
<hr>
<p>ä¸»è¦éœ€è¦è®²è§£çš„æ˜¯å…¨å±€é…ç½®å‚æ•°ä¸åŒºåŸŸé…ç½®å‚æ•°çš„åŒºåˆ«ï¼Œå…¨å±€é…ç½®å‚æ•°é¡¾åæ€ä¹‰å°±æ˜¯ä¸€ç§å…¨å±€æ€§çš„é…ç½®å‚æ•°ï¼Œè¿™äº›å…¨å±€é…ç½®å‚æ•°å¯¹æ‰€æœ‰çš„å­ç«™ç‚¹éƒ½æ˜¯éƒ½æ˜¯ç”Ÿæ•ˆçš„ï¼Œæ—¢ä¿è¯äº†å­ç«™ç‚¹çš„æ­£å¸¸è®¿é—®ï¼Œè¿˜æœ‰æ•ˆå‡å°‘äº†é¢‘ç¹å†™å…¥é‡å¤å‚æ•°çš„å·¥ä½œé‡ï¼Œè€ŒåŒºåŸŸé…ç½®å‚æ•°åˆ™æ˜¯é’ˆå¯¹äºæ¯ä¸ªç‹¬ç«‹å­ç«™ç‚¹è¿›è¡Œçš„ç‰¹æ®Šå‚æ•°è®¾ç½®ï¼Œåœ¨httpdæœåŠ¡ç¨‹åºä¸»é…ç½®æ–‡ä»¶ä¸­æœ€ä¸ºå¸¸ç”¨çš„å‚æ•°åŒ…æ‹¬æœ‰ï¼š</p>
<hr>
<p>ServerRoot    æœåŠ¡ç›®å½•<br>ServerAdmin    ç®¡ç†å‘˜é‚®ç®±<br>User    è¿è¡ŒæœåŠ¡çš„ç”¨æˆ·<br>Group    è¿è¡ŒæœåŠ¡çš„ç”¨æˆ·ç»„<br>ServerName    ç½‘ç«™æœåŠ¡å™¨çš„åŸŸå<br>DocumentRoot    ç½‘ç«™æ•°æ®ç›®å½•<br>Listen    ç›‘å¬çš„IPåœ°å€ä¸ç«¯å£å·<br>DirectoryIndex    é»˜è®¤çš„ç´¢å¼•é¡µé¡µé¢<br>ErrorLog    é”™è¯¯æ—¥å¿—æ–‡ä»¶<br>CustomLog    è®¿é—®æ—¥å¿—æ–‡ä»¶<br>Timeout    ç½‘é¡µè¶…æ—¶æ—¶é—´,é»˜è®¤ä¸º300ç§’.<br>Include    éœ€è¦åŠ è½½çš„å…¶ä»–æ–‡ä»¶</p>
<hr>
<h4 id="SELinuxå®‰å…¨å­ç³»ç»Ÿ"><a href="#SELinuxå®‰å…¨å­ç³»ç»Ÿ" class="headerlink" title="SELinuxå®‰å…¨å­ç³»ç»Ÿ"></a>SELinuxå®‰å…¨å­ç³»ç»Ÿ</h4><p>SELinuxå…¨ç§°ä¸ºSecurity-Enhanced Linuxæ˜¯ç¾å›½å›½å®¶å®‰å…¨å±€åœ¨Linuxå¼€æºç¤¾åŒºå¸®åŠ©ä¸‹å¼€å‘çš„ä¸€ä¸ªMACå¼ºåˆ¶è®¿é—®æ§åˆ¶çš„å®‰å…¨å­ç³»ç»Ÿï¼Œåœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­å¯ç”¨SELinuxæŠ€æœ¯çš„ç›®çš„æ˜¯ä¸ºäº†è®©å„ä¸ªæœåŠ¡è¿›ç¨‹éƒ½å—åˆ°çº¦æŸï¼Œä»…èƒ½è·å–åˆ°æœåŠ¡æœ¬åº”è·å–åˆ°çš„èµ„æºã€‚ä¾‹å¦‚æ‚¨åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šä¸‹è½½äº†ä¸€ä¸ªç¾å›¾è½¯ä»¶ï¼Œæ­£åœ¨å…¨ç¥è´¯æ³¨å¾—æŠŠè‡ªå·±Pç˜¦ç‚¹çš„æ—¶å€™ï¼Œè¿™æ¬¾è½¯ä»¶å´åœ¨åå°é»˜é»˜ç›‘å¬ç€æµè§ˆå™¨ä¸­è¾“å…¥çš„å¯†ç ä¿¡æ¯ï¼Œè¿™æ˜¾ç„¶ä¸åº”è¯¥æ˜¯è¿™æ¬¾ç¾å›¾è½¯ä»¶æœ¬åº”åšçš„äº‹æƒ…ï¼ˆå³ä¾¿æ˜¯è®¿é—®ç”µè„‘ä¸­çš„å›¾ç‰‡èµ„æºéƒ½æƒ…æœ‰å¯åŸï¼‰ï¼ŒSELinuxå®‰å…¨ç³»ç»Ÿå°±æ˜¯ä¸ºäº†æœç»æ­¤ç±»æƒ…å†µè€Œè®¾è®¡çš„ï¼Œå®ƒèƒ½å¤Ÿä»å¤šæ–¹é¢è¿›è¡Œè¿æ³•è¡Œä¸ºç›‘æ§ï¼Œé¦–å…ˆæ˜¯å¯¹æœåŠ¡è¿›ç¨‹è¿›è¡ŒåŠŸèƒ½é™åˆ¶ï¼ŒSELinuxåŸŸé™åˆ¶æŠ€æœ¯è®©æœåŠ¡ç¨‹åºåšä¸äº†å‡ºæ ¼çš„äº‹æƒ…ï¼Œå…¶æ¬¡è¿˜èƒ½å¤Ÿå¯¹æ–‡ä»¶è¿›è¡Œèµ„æºé™åˆ¶ï¼ŒSELinuxå®‰å…¨ä¸Šä¸‹æ–‡è®©æ–‡ä»¶åªèƒ½è¢«æ‰€å±äºçš„æœåŠ¡ç¨‹åºæ‰€è·å–åˆ°ã€‚</p>
<p>åˆ˜é„è€å¸ˆç»å¸¸ä¼šæŠŠSELinuxåŸŸå’ŒSELinuxå®‰å…¨ä¸Šä¸‹æ–‡æ¯”å–»æˆåŒç®¡é½ä¸‹ï¼Œç³»ç»Ÿå†…çš„æœåŠ¡ç¨‹åºåªèƒ½è§„è§„çŸ©çŸ©çš„æ‹¿åˆ°è‡ªå·±æ‰€åº”è¯¥è·å–çš„èµ„æºï¼Œè¿™æ ·å³ä¾¿é»‘å®¢å…¥ä¾µäº†å’±ä»¬çš„ç³»ç»Ÿä¹Ÿæ¯«æ— åŠæ³•ï¼Œä½†éå¸¸å¯æƒœçš„æ˜¯ç”±äºSELinuxæœåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œé…ç½®èµ·æ¥çš„éš¾åº¦ä¹Ÿè¾ƒé«˜ï¼ŒåŠ ä¹‹å¾ˆå¤šè¿ç»´äººå‘˜å¯¹è¿™é¡¹æŠ€æœ¯ç†è§£ä¸æ·±ï¼Œå¯¼è‡´SELinuxæœåŠ¡åœ¨å¾ˆå¤šæœåŠ¡å™¨éƒ¨ç½²ç³»ç»Ÿåå°±è¢«ç›´æ¥ç¦ç”¨äº†ï¼Œä½†è¿™ç»å¯¹ä¸æ˜¯æ˜æ™ºçš„é€‰æ‹©ã€‚SELinuxæœåŠ¡æœ‰ä¸‰ç§æ¨¡å¼åˆ†åˆ«ä¸ºï¼šenforcing - å®‰å…¨ç­–ç•¥å¼ºåˆ¶å¯ç”¨æ¨¡å¼ï¼Œå°†ä¼šæ‹¦æˆªæœåŠ¡çš„ä¸åˆæ³•è¯·æ±‚ï¼Œpermissive - é‡åˆ°æœåŠ¡è¶Šæƒè®¿é—®åªä¼šå‘å‡ºè­¦å‘Šè€Œä¸å¼ºåˆ¶æ‹¦æˆªï¼Œdisabled - å¯¹äºè¶Šæƒçš„è¡Œä¸ºä¸è­¦å‘Šï¼Œä¹Ÿä¸æ‹¦æˆªã€‚</p>
<p>SELinuxæœåŠ¡çš„ä¸»é…ç½®æ–‡ä»¶<br>/etc/selinux/config</p>
<p>SELinuxæœåŠ¡çš„ä¸»é…ç½®æ–‡ä»¶å®šä¹‰çš„æ˜¯é»˜è®¤è¿è¡ŒçŠ¶æ€ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç†è§£æˆæ˜¯ç³»ç»Ÿé‡å¯åçš„çŠ¶æ€ï¼Œå¹¶ä¸æ˜¯å½“å‰ç«‹å³ç”Ÿæ•ˆçš„ï¼Œè¦æƒ³è·å¾—å½“å‰SELinuxæœåŠ¡çš„è¿è¡Œæ¨¡å¼å¯ä»¥ä½¿ç”¨getenforceå‘½ä»¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#SELinuxæœåŠ¡çš„ä¸»é…ç½®æ–‡ä»¶å®šä¹‰çš„æ˜¯é»˜è®¤è¿è¡ŒçŠ¶æ€ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç†è§£æˆæ˜¯ç³»ç»Ÿé‡å¯åçš„çŠ¶æ€ï¼Œå¹¶ä¸æ˜¯å½“å‰ç«‹å³ç”Ÿæ•ˆçš„ï¼Œè¦æƒ³è·å¾—å½“å‰SELinuxæœåŠ¡çš„è¿è¡Œæ¨¡å¼å¯ä»¥ä½¿ç”¨getenforceå‘½ä»¤</span></span><br><span class="line">getenforce</span><br><span class="line"><span class="comment">#ä¸ºäº†ç¡®è®¤æ˜¯è¿™ä¸ªè®¨åŒçš„SELinuxæœåŠ¡åœ¨â€œæ£ä¹±â€ï¼Œå’±ä»¬å¯ä»¥ç”¨setenforce [0|1]å‘½ä»¤æ¥ä¿®æ”¹ä¸‹å½“å‰æœåŠ¡çš„è¿è¡Œæ¨¡å¼ï¼ˆ0ä¸ºç¦ç”¨ï¼Œ1ä¸ºå¯ç”¨ï¼‰ï¼Œä½†è¿™ç§ä¿®æ”¹åªæ˜¯ä¸´æ—¶çš„ï¼Œé‡å¯åå°±ä¼šå¤±æ•ˆ</span></span><br><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡ä»¶ä¸Šé¢è®¾ç½®çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡æ˜¯ç”±ç”¨æˆ·æ®µã€è§’è‰²æ®µä»¥åŠç±»å‹æ®µç­‰ç­‰å¤šä¸ªä¿¡æ¯é¡¹ç›®å…±åŒç»„æˆçš„ï¼Œç”¨æˆ·æ®µä¸­system_uä»£è¡¨ç³»ç»Ÿè¿›ç¨‹èº«ä»½ï¼Œè§’è‰²æ®µobject_rä»£è¡¨æ–‡ä»¶ç›®å½•è§’è‰²ï¼Œç±»å‹æ®µhttpd_sys_content_tä»£è¡¨æ˜¯ç½‘ç«™æœåŠ¡ç³»ç»Ÿæ–‡ä»¶ã€‚ç”±äºSELinuxæœåŠ¡å®åœ¨è¿‡äºå¤æ‚ï¼Œå› æ­¤ç°åœ¨æ‚¨åªéœ€è¦ç®€å•ç†Ÿæ‚‰SELinuxæœåŠ¡çš„ä½œç”¨å°±å¯ä»¥ï¼Œç°åœ¨è¿™ç§æƒ…å†µçš„è§£å†³åŠæ³•å°±æ˜¯æŠŠå½“å‰ç½‘ç«™ç›®å½•/home/wwwrootçš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ä¿®æ”¹ä¸ºè·ŸåŸå§‹ç½‘ç«™ç›®å½•çš„ä¸€æ ·å°±å¯ä»¥å•¦~</p>
<h5 id="semanage"><a href="#semanage" class="headerlink" title="semanage"></a>semanage</h5><p>é»˜è®¤ç³»ç»Ÿæ²¡æœ‰å®‰è£… semanageï¼Œå®‰è£…semanageã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y policycoreutils-python</span><br></pre></td></tr></table></figure>
<p>semanageå‘½ä»¤ç”¨äºæŸ¥è¯¢ä¸ä¿®æ”¹SELinuxçš„å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œæ ¼å¼ä¸ºï¼šâ€œsemanage [é€‰é¡¹] [æ–‡ä»¶]â€ã€‚</p>
<p>SELinuxæœåŠ¡æå¤§çš„å¢å¼ºäº†Linuxç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œå°†ç”¨æˆ·æƒé™ç‰¢ç‰¢åœ°é”åœ¨ç¬¼å­é‡Œï¼Œsemanageå‘½ä»¤ä¸ä»…èƒ½å¤Ÿåƒä¼ ç»Ÿchconå‘½ä»¤ä¸€æ ·å¯¹æ–‡ä»¶ã€ç›®å½•è¿›è¡Œç­–ç•¥è®¾ç½®ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿå¯¹ç½‘ç»œç«¯å£ã€æ¶ˆæ¯æ¥å£ç­‰ç­‰è¿›è¡Œç®¡ç†ï¼Œè¿™äº›æ–°ç‰¹æ€§å’±ä»¬ä¼šåœ¨æœ¬ç« ä¸­æ…¢æ…¢æ„Ÿå—ã€‚åœ¨ä½¿ç”¨semanageå‘½ä»¤çš„æ—¶å€™æœ‰å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„å‚æ•°ï¼Œ-lå‚æ•°ç”¨äºæŸ¥è¯¢ã€-aå‚æ•°ç”¨äºæ·»åŠ ã€-må‚æ•°ç”¨äºä¿®æ”¹ã€-då‚æ•°ç”¨äºåˆ é™¤ç­‰ç­‰ï¼Œä¾‹å¦‚å¯ä»¥å‘æ–°çš„ç½‘ç«™æ•°æ®ç›®å½•ä¸­æ–°å¢åŠ ä¸€æ¡SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ï¼Œè®©è¿™ä¸ªç›®å½•ä»¥åŠé‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶èƒ½å¤Ÿè¢«httpdæœåŠ¡ç¨‹åºæ‰€è·å–åˆ°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/*</span><br><span class="line"><span class="comment">#ä½¿ç”¨restoreconå‘½ä»¤æ¥è®©åˆšåˆšè®¾ç½®çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line">restorecon -Rv /home/wwwroot/</span><br></pre></td></tr></table></figure>
<h4 id="ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½"><a href="#ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½" class="headerlink" title="ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½"></a>ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½</h4><p>å¦‚æœæƒ³ä¸ºç³»ç»Ÿä¸­æ¯ä½ç”¨æˆ·éƒ½å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç«™ï¼Œé€šå¸¸çš„æ–¹æ³•åªèƒ½æ˜¯åŸºäºè™šæ‹Ÿç½‘ç«™ä¸»æœºåŠŸèƒ½æ¥éƒ¨ç½²å‡ºå¤šä¸ªç½‘ç«™ï¼Œä½†è¿™æœªå…ä¼šè®©ç®¡ç†å‘˜æ„Ÿè§‰åˆ°å¾ˆéº»çƒ¦ï¼Œè€Œä¸”åœ¨ç”¨æˆ·ç®¡ç†è‡ªå·±ç½‘ç«™çš„æ—¶å€™è¿˜å¯èƒ½ç¢°åˆ°ç§ç§æƒé™çš„é™åˆ¶ï¼Œäº§ç”Ÿå‡ºå¾ˆå¤šä¸å¿…è¦çš„å·¥ä½œã€‚å…¶å®å¦‚æœåªæ˜¯æƒ³ä¸ºæ¯ä½ç”¨æˆ·å»ºç«‹ç‹¬ç«‹çš„ç½‘ç«™ï¼Œä¸å¦¨è¯•è¯•httpdæœåŠ¡ç¨‹åºæä¾›çš„ä¸ªäººç”¨æˆ·ä¸»æœºåŠŸèƒ½å§ï¼Œè¿™é¡¹åŠŸèƒ½å¯ä»¥è®©ç³»ç»Ÿå†…æ‰€æœ‰çš„ç”¨æˆ·åœ¨è‡ªå·±çš„å®¶ç›®å½•ä¸­ç®¡ç†ä¸ªäººçš„ç½‘ç«™ï¼Œè®¿é—®èµ·æ¥ä¹Ÿéå¸¸å®¹æ˜“ã€‚</p>
<p>httpdæœåŠ¡ç¨‹åºä¸­çš„ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½é»˜è®¤æ˜¯æ²¡æœ‰è¢«å¼€å¯çš„ï¼Œéœ€è¦ç¼–è¾‘ä¸‹é¢çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åç¬¬17è¡Œå·¦å³çš„UserDir disabledå‚æ•°å‰é¢åŠ ä¸Š#ï¼ˆäº•å·ï¼‰ï¼Œè¿™æ ·ä»£è¡¨è®©httpdæœåŠ¡ç¨‹åºå¼€å¯ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½ï¼ŒåŒæ—¶å†æŠŠç¬¬23è¡Œå·¦å³çš„UserDir public_htmlå‚æ•°å‰é¢çš„#ï¼ˆäº•å·ï¼‰å»æ‰ï¼Œè¯¥å‚æ•°ä»£è¡¨ç½‘ç«™æ•°æ®åœ¨ç”¨æˆ·å®¶ç›®å½•ä¸­çš„ä¿å­˜ç›®å½•åç§°(å³public_htmlç›®å½•)ï¼Œæœ€åä¸€å®šè¦è®°å¾—ä¿å­˜ä¸‹å“¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/httpd/conf.d/userdir.conf</span><br><span class="line"></span><br><span class="line"># UserDir disabled</span><br><span class="line">UserDir public_html</span><br></pre></td></tr></table></figure>
<p>åœ¨ç”¨æˆ·å®¶ç›®å½•ä¸­å»ºç«‹ç”¨äºä¿å­˜ç½‘ç«™æ•°æ®çš„ç›®å½•åŠé¦–é¡µæ–‡ä»¶ï¼Œå¦å¤–éœ€è¦æŠŠå®¶ç›®å½•çš„æƒé™ä¿®æ”¹ä¸º755ï¼Œä¿è¯å…¶ä»–äººä¹Ÿå¯ä»¥æœ‰æƒé™è¯»å–é‡Œé¢çš„ç½‘é¡µå†…å®¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su - linuxprobe</span><br><span class="line">mkdir public_html</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"This is linuxprobe's website"</span> &gt; public_html/index.html</span><br><span class="line">chmod -Rf 755 /home/linuxprobe</span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨httpdæœåŠ¡ç¨‹åºï¼Œæ‰“å¼€æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ååŠ ä¸Š~ç”¨æˆ·åï¼Œç†è®ºä¸Šæ¥è®²å°±å¯ä»¥çœ‹åˆ°ç”¨æˆ·çš„ä¸ªäººä¸»é¡µç½‘ç«™ï¼Œä¸è¿‡ä¸å‡ºæ‰€æ–™çš„ä¾ç„¶æ˜¯æŠ¥é”™é¡µé¢ï¼Œä¸€å®šè¿˜æ˜¯SELinuxåœ¨è·Ÿå’±ä»¬â€œæ£é¬¼â€å•¦ã€‚</p>
<p>é¦–å…ˆéœ€è¦å…ˆæ€è€ƒä¸‹è¿™æ¬¡æŠ¥é”™çš„åŸå› æ˜¯ä»€ä¹ˆï¼ŒhttpdæœåŠ¡ç¨‹åºæä¾›ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½çš„ç½‘ç«™æ•°æ®ç›®å½•æœ¬èº«å°±åº”è¯¥æ˜¯å­˜æ”¾åˆ°æ¯ä¸ªç”¨æˆ·å®¶ç›®å½•ä¸­çš„ï¼Œæ‰€ä»¥å¯¹äºæ–‡ä»¶ä¸Šé¢çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡åº”è¯¥æ˜¯ä¸éœ€è¦ä¿®æ”¹ï¼Œä½†é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸ªLinuxåŸŸï¼Œè¿™ä¸ªæ˜¯è´Ÿè´£ç®¡ç†è®©æœåŠ¡ç¨‹åºä¸èƒ½åšè¿è§„çš„åŠ¨ä½œï¼Œåªèƒ½æœ¬æœ¬åˆ†åˆ†çš„ä¸ºç”¨æˆ·æœåŠ¡ï¼Œä½†çªç„¶å¼€å¯çš„è¿™é¡¹ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½åˆ°åº•æœ‰æ²¡æœ‰è¢«é»˜è®¤å…è®¸å‘¢ï¼Ÿå’±ä»¬å¯ä»¥ç”¨getseboolå‘½ä»¤æ¥æŸ¥è¯¢å¹¶è¿‡æ»¤å‡ºæ‰€æœ‰è·ŸhttpæœåŠ¡ç›¸å…³çš„å®‰å…¨ç­–ç•¥ï¼Œoffä¸ºç¦æ­¢çŠ¶æ€ï¼Œonä¸ºå…è®¸çŠ¶æ€ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getsebool -a | grep http</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå¦‚æ­¤å¤šçš„SELinuxåŸŸåŠŸèƒ½ç­–ç•¥ï¼Œå®åœ¨æ²¡æœ‰å¿…è¦é€ä¸ªå»ç†è§£å®ƒä»¬ï¼Œåªè¦èƒ½é€šè¿‡åå­—å¤§è‡´çŒœæµ‹å‡ºç›¸å…³çš„ç­–ç•¥ä½œç”¨å°±è¶³å¤Ÿäº†ã€‚æ¯”å¦‚æƒ³å¼€å¯httpdæœåŠ¡çš„ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½ï¼Œé‚£ä¹ˆç”¨åˆ°çš„SELinuxç­–ç•¥åº”è¯¥æ˜¯httpd_enable_homedirså§ï¼Ÿå¤§è‡´ç¡®å®šåå°±å¯ä»¥ç”¨setseboolå‘½ä»¤æ¥ä¿®æ”¹SELinuxç­–ç•¥ä¸­å„é¡¹è§„åˆ™çš„å¸ƒå°”å€¼äº†ï¼ŒåŒå­¦ä»¬ä¸€å®šè¦è®°å¾—åŠ ä¸Š-På‚æ•°è®©ä¿®æ”¹è¿‡åçš„SELinuxå¸ƒå°”å€¼ç­–ç•¥é¡¹ç›®æ°¸ä¹…ç”Ÿæ•ˆè¿™æ ·æ“ä½œåä¹Ÿä¼šæ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼Œéšååˆ·æ–°ä¸‹ç½‘é¡µçœ‹çœ‹æ•ˆæœå§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsebool -P httpd_enable_homedirs=on</span><br></pre></td></tr></table></figure>
<p>å½“æŠŠä¸ªäººç”¨æˆ·ç½‘ç«™åŠŸèƒ½å®ç°ä¹‹åä¹Ÿä¼šé‡åˆ°ä¸€ä¸ªå¾ˆå°´å°¬çš„æ˜¾ç¤ºâ€”â€”æˆ–è®¸ç”¨æˆ·ä»¬å¹¶ä¸å¸Œæœ›ç›´æ¥å°±æŠŠç½‘é¡µå†…å®¹æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ–è€…åªæƒ³è®©éƒ¨åˆ†è¯»è€…çœ‹åˆ°é‡Œé¢çš„å†…å®¹ï¼Œè¿™æ—¶å°±å¯ä»¥ç»™ç½‘ç«™ä¸Šé¢åŠ ä¸Šå£ä»¤éªŒè¯åŠŸèƒ½å•¦ï¼Œç»™ç½‘é¡µå†…å®¹å¢åŠ ä¸€é“å®‰å…¨é˜²æŠ¤å§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#éœ€è¦å…ˆç”¨htpasswdå‘½ä»¤æ¥ç”Ÿæˆå¯†ç æ•°æ®åº“ï¼Œ-cå‚æ•°ä»£è¡¨ç¬¬ä¸€æ¬¡ç”Ÿæˆçš„æ„æ€ï¼Œåé¢å†åˆ†åˆ«è¿½åŠ ä¸Šè¦ç”Ÿæˆåˆ°å“ªä¸ªæ–‡ä»¶ä¸­ï¼Œä»¥åŠéªŒè¯è¦ç”¨åˆ°çš„ç”¨æˆ·åç§°å³å¯ï¼ˆè¯¥ç”¨æˆ·ä¸å¿…æ˜¯ç³»ç»Ÿä¸­å·²æœ‰çš„å¸æˆ·ï¼‰</span></span><br><span class="line">htpasswd -c /etc/httpd/passwd linuxprobe</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¼–è¾‘ä¸ªäººç”¨æˆ·ä¸»é¡µåŠŸèƒ½çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/httpd/conf.d/userdir.conf</span><br><span class="line">&lt;Directory <span class="string">"/home/*/public_html"</span>&gt;</span><br><span class="line"> AllowOverride all</span><br><span class="line"><span class="comment">#åˆšåˆšç”Ÿæˆå‡ºæ¥çš„å¯†ç éªŒè¯æ–‡ä»¶ä¿å­˜è·¯å¾„</span></span><br><span class="line"> authuserfile <span class="string">"/etc/httpd/passwd"</span></span><br><span class="line"><span class="comment">#å½“ç”¨æˆ·å°è¯•è®¿é—®ä¸ªäººç”¨æˆ·ç½‘ç«™æ—¶çš„æç¤ºä¿¡æ¯</span></span><br><span class="line"> authname <span class="string">"My privately website"</span></span><br><span class="line"> authtype basic</span><br><span class="line"><span class="comment">#ç”¨æˆ·è¿›è¡Œå¸å·å£ä»¤ç™»é™†æ—¶éœ€è¦éªŒè¯çš„ç”¨æˆ·åç§°</span></span><br><span class="line"> require user linuxprobe</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯æœåŠ¡</span></span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure>
<h4 id="è™šæ‹Ÿç½‘ç«™ä¸»æœºåŠŸèƒ½"><a href="#è™šæ‹Ÿç½‘ç«™ä¸»æœºåŠŸèƒ½" class="headerlink" title="è™šæ‹Ÿç½‘ç«™ä¸»æœºåŠŸèƒ½"></a>è™šæ‹Ÿç½‘ç«™ä¸»æœºåŠŸèƒ½</h4><p>å¦‚æœåœ¨æ¯å°Linuxç³»ç»Ÿçš„æœåŠ¡å™¨ä¸Šé¢åªèƒ½è¿è¡Œç€ä¸€ä¸ªç½‘ç«™ï¼Œé‚£ä¹ˆäººæ°”ä½æµé‡å°çš„è‰æ ¹ç«™é•¿å°±è¦åè€Œæ‰¿æ‹…ç€é«˜æ˜‚çš„æœåŠ¡å™¨ç§Ÿç”¨è´¹äº†ï¼Œè¿™æ˜¾ç„¶ä¹Ÿä¼šé€ æˆå¾ˆå¤§ç¡¬ä»¶èµ„æºæµªè´¹ï¼Œäºæ˜¯åœ¨VPSä¸äº‘è®¡ç®—æŠ€æœ¯è¯ç”Ÿä»¥å‰ï¼ŒIDCæœåŠ¡ä¾›åº”å•†ä»¬ä¸ºäº†èƒ½å¤Ÿè®©æœåŠ¡å™¨èµ„æºæ›´å……åˆ†è¢«åˆç†çš„ä½¿ç”¨ï¼Œä¹Ÿä¸ºäº†é™ä½è´­ä¹°é—¨æ§›ï¼Œäºæ˜¯ä¾¿çº·çº·ä½¿ç”¨äº†è™šæ‹Ÿä¸»æœºåŠŸèƒ½ã€‚è™šæ‹Ÿä¸»æœºå°±æ˜¯æŠŠä¸€å°è¿è¡Œç€çš„ç‰©ç†æœåŠ¡å™¨ä¸Šé¢åˆ†å‰²å‡ºå¤šä¸ªâ€œè™šæ‹Ÿçš„æœåŠ¡å™¨â€ï¼Œä½†è¿™é¡¹æŠ€æœ¯ä¸èƒ½å¤Ÿå®ç°ç›®å‰äº‘ä¸»æœºæŠ€æœ¯çš„ç¡¬ä»¶èµ„æºéš”ç¦»ï¼Œè€Œæ˜¯è®©è¿™äº›ç½‘ç«™å…±åŒä½¿ç”¨æœåŠ¡å™¨çš„ç¡¬ä»¶èµ„æºï¼Œä¸€èˆ¬ä¾›åº”å•†åªä¼šå»é™åˆ¶ç¡¬ç›˜çš„ä½¿ç”¨ç©ºé—´å¤§å°ï¼Œè¿™ç§æœåŠ¡å™¨èµ„æºä¾›åº”æ–¹å¼ç›®å‰è¿˜æœ‰ä¼ä¸šåœ¨ä½¿ç”¨ç€ã€‚Apacheçš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½æ˜¯æœåŠ¡å™¨åŸºäºç”¨æˆ·è¯·æ±‚çš„ä¸åŒIPåœ°å€ã€ä¸»æœºåŸŸåæˆ–ç«¯å£å·å®ç°æä¾›å¤šä¸ªç½‘ç«™åŒæ—¶ä¸ºå¤–éƒ¨æä¾›è®¿é—®æœåŠ¡çš„æŠ€æœ¯ã€‚</p>
<h5 id="åŸºäºIPåœ°å€"><a href="#åŸºäºIPåœ°å€" class="headerlink" title="åŸºäºIPåœ°å€"></a>åŸºäºIPåœ°å€</h5><p>å½“ä¸€å°æœåŠ¡å™¨ä¸Šé¢æ‹¥æœ‰å¤šä¸ªIPåœ°å€ï¼Œç”¨æˆ·é€šè¿‡è¯·æ±‚è®¿é—®ä¸åŒçš„IPåœ°å€æ—¶ä¼šå–å¾—ä¸åŒçš„ç½‘ç«™é¡µé¢èµ„æºï¼Œå¦å¤–è®©æ¯ä¸ªç½‘ç«™éƒ½æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹IPåœ°å€å¯¹æœç´¢å¼•æ“SEOä¼˜åŒ–ä¹Ÿæœ‰å¾ˆå¤§çš„å¥½å¤„ï¼Œå› æ­¤è¿™ç§è™šæ‹Ÿä¸»æœºçš„æä¾›æ–¹å¼ä¸ä»…æ˜¯æœ€å¸¸è§çš„ï¼Œä¹Ÿæ˜¯æ›´å—ç«™é•¿æœ‹å‹æ¬¢è¿çš„ã€‚</p>
<p>åˆ†åˆ«åœ¨/home/wwwrootä¸­åˆ›å»ºä¸‰ä¸ªç”¨äºä¿å­˜ä¸åŒç½‘ç«™æ•°æ®çš„ç›®å½•ï¼Œå¹¶å‘å…¶ä¸­åˆ†åˆ«å†™å…¥ç½‘ç«™çš„é¦–é¡µæ–‡ä»¶ï¼Œæ¯ä¸ªé¦–é¡µæ–‡ä»¶ä¸­åº”æœ‰æ˜ç¡®åŒºåˆ†ä¸åŒç½‘ç«™å†…å®¹çš„å­—æ ·ä¿¡æ¯ï¼Œæ–¹ä¾¿å’±ä»¬ç¨åèƒ½æ›´ç›´è§‚çš„æ£€æŸ¥æ•ˆæœã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/wwwroot/10</span><br><span class="line">mkdir -p /home/wwwroot/20</span><br><span class="line">mkdir -p /home/wwwroot/30</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"IP:192.168.10.10"</span> &gt; /home/wwwroot/10/index.html</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"IP:192.168.10.20"</span> &gt; /home/wwwroot/20/index.html</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"IP:192.168.10.30"</span> &gt; /home/wwwroot/30/index.html</span><br></pre></td></tr></table></figure>
<p>vim /etc/httpd/conf/httpd.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 192.168.10.10&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/10</span><br><span class="line">ServerName www.linuxprobe.com</span><br><span class="line">&lt;Directory /home/wwwroot/10 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.10.20&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/20</span><br><span class="line">ServerName bbs.linuxprobe.com</span><br><span class="line">&lt;Directory /home/wwwroot/20 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.10.30&gt;</span><br><span class="line">DocumentRoot /home/wwwroot/30</span><br><span class="line">ServerName tech.linuxprobe.com</span><br><span class="line">&lt;Directory /home/wwwroot/30 &gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®SELinux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/10</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/10/*</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/20</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/20/*</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/30</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/30/*</span><br><span class="line"></span><br><span class="line">restorecon -Rv /home/wwwroot</span><br></pre></td></tr></table></figure>
<h5 id="åŸºäºä¸»æœºåŸŸå"><a href="#åŸºäºä¸»æœºåŸŸå" class="headerlink" title="åŸºäºä¸»æœºåŸŸå"></a>åŸºäºä¸»æœºåŸŸå</h5><p>å½“æœåŠ¡å™¨æ— æ³•ä¸ºæ¯ä¸ªç½‘ç«™éƒ½åˆ†é…ä¸€ä¸ªç‹¬ç«‹IPåœ°å€çš„æ—¶å€™ï¼Œå¯ä»¥è¯•è¯•è®©apacheè‡ªåŠ¨è¯†åˆ«ç”¨æˆ·è¯·æ±‚çš„åŸŸåç½‘å€ï¼Œä»è€Œæ ¹æ®è¿™äº›ä¸åŒçš„åŸŸåè¯·æ±‚æ¥ä¼ è¾“ä¸åŒçš„ç½‘é¡µå†…å®¹ã€‚è¿™ç§æƒ…å†µé…ç½®èµ·æ¥æ›´åŠ çš„ç®€å•ï¼Œç”Ÿäº§ç¯å¢ƒä¸­åªéœ€è¦ä¿è¯æœåŠ¡å™¨ä¸Šé¢æœ‰ä¸€ä¸ªå¯ç”¨çš„IPåœ°å€ï¼ˆ192.168.1.5ï¼‰å°±å¯ä»¥äº†ã€‚</p>
<p>åˆ†åˆ«åœ¨/home/wwwrootä¸­åˆ›å»ºä¸‰ä¸ªç”¨äºä¿å­˜ä¸åŒç½‘ç«™æ•°æ®çš„ç›®å½•ï¼Œå¹¶å‘å…¶ä¸­åˆ†åˆ«å†™å…¥ç½‘ç«™çš„é¦–é¡µæ–‡ä»¶ï¼Œæ¯ä¸ªé¦–é¡µæ–‡ä»¶ä¸­åº”æœ‰æ˜ç¡®åŒºåˆ†ä¸åŒç½‘ç«™å†…å®¹çš„å­—æ ·ä¿¡æ¯ï¼Œæ–¹ä¾¿å’±ä»¬ä¸€ä¼šæ›´ç›´è§‚çš„æ£€æŸ¥æ•ˆæœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/wwwroot/www</span><br><span class="line">mkdir -p /home/wwwroot/bbs</span><br><span class="line">mkdir -p /home/wwwroot/tech</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"WWW.linuxprobe.com"</span> &gt; /home/wwwroot/www/index.html</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"BBS.linuxprobe.com"</span> &gt; /home/wwwroot/bbs/index.html</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"TECH.linuxprobe.com"</span> &gt; /home/wwwroot/tech/index.html</span><br></pre></td></tr></table></figure>
<p>åœ¨httpdæœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­å¤§çº¦113è¡Œå¤„ï¼Œåˆ†åˆ«è¿½åŠ å†™å…¥ä¸‰ä¸ªåŸºäºä¸»æœºåçš„è™šæ‹Ÿä¸»æœºç½‘ç«™å‚æ•°ï¼Œä¿å­˜é€€å‡ºæ–‡ä»¶åè®°å¾—è¦é‡å¯httpdæœåŠ¡æ‰èƒ½ç”Ÿæ•ˆå“¦ï¼š<br>vim /etc/httpd/conf/httpd.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 192.168.1.5&gt;</span><br><span class="line">DocumentRoot &quot;/home/wwwroot/www&quot;</span><br><span class="line">ServerName &quot;www.linuxprobe.com&quot;</span><br><span class="line">&lt;Directory &quot;/home/wwwroot/www&quot;&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.1.5&gt;</span><br><span class="line">DocumentRoot &quot;/home/wwwroot/bbs&quot;</span><br><span class="line">ServerName &quot;bbs.linuxprobe.com&quot;</span><br><span class="line">&lt;Directory &quot;/home/wwwroot/bbs&quot;&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.1.5&gt;</span><br><span class="line">DocumentRoot &quot;/home/wwwroot/tech&quot;</span><br><span class="line">ServerName &quot;tech.linuxprobe.com&quot;</span><br><span class="line">&lt;Directory &quot;/home/wwwroot/tech&quot;&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå½“å‰çš„ç½‘ç«™æ•°æ®ç›®å½•è¿˜æ˜¯åœ¨/home/wwwrootä¸­ï¼Œå› æ­¤è¿˜æ˜¯å¿…é¡»è¦æŠŠç½‘ç«™æ•°æ®ç›®å½•æ–‡ä»¶ä¸Šé¢çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡è®¾ç½®å¥½ï¼Œè®©æ–‡ä»¶ä¸Šé¢çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ä¸ç½‘ç«™æœåŠ¡åŠŸèƒ½ç›¸å»åˆï¼Œæœ€åè¿˜æ˜¯è¦è®°å¾—ç”¨restoreconå‘½ä»¤è®©æ–°é…ç½®çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ç«‹å³ç”Ÿæ•ˆå‘¢ï¼Œè¿™æ ·è™šæ‹Ÿä¸»æœºç½‘ç«™å°±å¯ä»¥ç«‹å³è¢«è®¿é—®åˆ°äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/www</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/www/*</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/bbs</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/bbs/*</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/tech</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/tech/*</span><br><span class="line">restorecon -Rv /home/wwwroot</span><br></pre></td></tr></table></figure>
<h5 id="åŸºäºç«¯å£å·"><a href="#åŸºäºç«¯å£å·" class="headerlink" title="åŸºäºç«¯å£å·"></a>åŸºäºç«¯å£å·</h5><p>åŸºäºç«¯å£å·çš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½å¯ä»¥è®©ç”¨æˆ·é€šè¿‡è®¿é—®æœåŠ¡å™¨ä¸Šé¢æŒ‡å®šçš„ç«¯å£å·æ¥æ‰¾åˆ°æƒ³è¦è®¿é—®çš„ç½‘ç«™èµ„æºï¼Œè€Œç”¨apacheé…ç½®è™šæ‹Ÿä¸»æœºåŠŸèƒ½ä¸­æœ€å¤æ‚çš„ä¹Ÿè«è¿‡äºæ˜¯åŸºäºç«¯å£å·çš„äº†ï¼Œå› ä¸ºä¸å…‰éœ€è¦è€ƒè™‘åˆ°httpdæœåŠ¡ç¨‹åºçš„é…ç½®å› ç´ ï¼Œè¿˜éœ€è¦è€ƒè™‘åˆ°SELinuxæœåŠ¡å¯¹äºæ–°å¼€è®¾ç«¯å£å·çš„ç›‘æ§ï¼Œå ç”¨æœåŠ¡å™¨ä¸­80ã€443ã€8080ç±»ä¼¼çš„ç«¯å£å·æ˜¯ç½‘ç«™æœåŠ¡æ¯”è¾ƒåˆç†çš„è¯·æ±‚ï¼Œä½†å†å»å ç”¨å…¶ä»–çš„ç«¯å£å·å°±ä¼šé­å—åˆ°SELinuxæœåŠ¡çš„é™åˆ¶äº†ï¼Œå› æ­¤æ¥ä¸‹æ¥çš„å®éªŒä¸­æ—¢è¦è€ƒè™‘åˆ°æ–‡ä»¶ä¸Šé¢SELinuxå®‰å…¨ä¸Šä¸‹æ–‡çš„é™åˆ¶ï¼Œè¿˜è¦è€ƒè™‘åˆ°SELinuxåŸŸå¯¹httpdç½‘ç«™æœåŠ¡ç¨‹åºåŠŸèƒ½çš„ç®¡æ§ã€‚</p>
<p>åˆ†åˆ«åœ¨/home/wwwrootä¸­åˆ›å»ºä¸¤ä¸ªç”¨äºä¿å­˜ä¸åŒç½‘ç«™æ•°æ®çš„ç›®å½•ï¼Œå¹¶å‘å…¶ä¸­åˆ†åˆ«å†™å…¥ç½‘ç«™çš„é¦–é¡µæ–‡ä»¶ï¼Œæ¯ä¸ªé¦–é¡µæ–‡ä»¶ä¸­åº”æœ‰æ˜ç¡®åŒºåˆ†ä¸åŒç½‘ç«™å†…å®¹çš„å­—æ ·ä¿¡æ¯ï¼Œæ–¹ä¾¿ç¨åèƒ½æ›´ç›´è§‚çš„æ£€æŸ¥æ•ˆæœã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/wwwroot/6111</span><br><span class="line">mkdir -p /home/wwwroot/6222</span><br><span class="line">echo &quot;port:6111&quot; &gt; /home/wwwroot/6111/index.html</span><br><span class="line">echo &quot;port:6222&quot; &gt; /home/wwwroot/6222/index.html</span><br></pre></td></tr></table></figure>
<p>åœ¨httpdæœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­å¤§çº¦43è¡Œåè¿½åŠ ä¸Šç›‘å¬6111å’Œ6222ç«¯å£å·çš„å‚æ•°ï¼š</p>
<p>vim /etc/httpd/conf/httpd.conf </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#Listen 12.34.56.78:80</span><br><span class="line">Listen 80</span><br><span class="line">Listen 6111</span><br><span class="line">Listen 6222</span><br></pre></td></tr></table></figure>
<p>åœ¨httpdæœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­å¤§çº¦114è¡Œå¤„ï¼Œåˆ†åˆ«è¿½åŠ å†™å…¥ä¸¤ä¸ªåŸºäºç«¯å£å·çš„è™šæ‹Ÿä¸»æœºç½‘ç«™å‚æ•°ï¼Œä¿å­˜é€€å‡ºæ–‡ä»¶åè®°å¾—è¦é‡å¯httpdæœåŠ¡æ‰èƒ½ç”Ÿæ•ˆå“¦ï¼š</p>
<p>vim /etc/httpd/conf/httpd.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 192.168.10.10:6111&gt;</span><br><span class="line">DocumentRoot &quot;/home/wwwroot/6111&quot;</span><br><span class="line">ServerName www.linuxprobe.com</span><br><span class="line">&lt;Directory &quot;/home/wwwroot/6111&quot;&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 192.168.10.10:6222&gt;</span><br><span class="line">DocumentRoot &quot;/home/wwwroot/6222&quot;</span><br><span class="line">ServerName bbs.linuxprobe.com</span><br><span class="line">&lt;Directory &quot;/home/wwwroot/6222&quot;&gt;</span><br><span class="line">AllowOverride None</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæŠŠç½‘ç«™æ•°æ®ç›®å½•å­˜æ”¾åœ¨äº†/home/wwwrootä¸­ï¼Œå› æ­¤è¿˜æ˜¯å¿…é¡»è¦æŠŠç½‘ç«™æ•°æ®ç›®å½•æ–‡ä»¶ä¸Šé¢çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡è®¾ç½®å¥½ï¼Œè®©æ–‡ä»¶ä¸Šé¢çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ä¸ç½‘ç«™æœåŠ¡åŠŸèƒ½ç›¸å»åˆï¼Œæœ€åè¿˜æ˜¯è¦è®°å¾—ç”¨restoreconå‘½ä»¤è®©æ–°é…ç½®çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ç«‹å³ç”Ÿæ•ˆå‘¢ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/6111</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/6111/*</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/6222</span><br><span class="line">semanage fcontext -a -t httpd_sys_content_t /home/wwwroot/6222/*</span><br><span class="line">restorecon -Rv /home/wwwroot/</span><br></pre></td></tr></table></figure>
<p>ä»€ä¹ˆ??!!åœ¨æŠŠhttpdæœåŠ¡ç¨‹åºå’ŒSELinuxå®‰å…¨ä¸Šä¸‹æ–‡éƒ½é…ç½®å¦¥å½“åï¼Œé‡å¯æœåŠ¡ä¸ºä»€ä¹ˆä¼šç«Ÿç„¶å‡ºç°æŠ¥é”™ä¿¡æ¯å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºSELinuxæœåŠ¡æ£€æµ‹åˆ°6111å’Œ6222ç«¯å£åŸæœ¬ä¸å±äºapacheåº”è¯¥éœ€è¦çš„æœåŠ¡èµ„æºï¼Œä½†ç°åœ¨å´è¢«ä»¥httpdæœåŠ¡ç¨‹åºçš„åä¹‰ç›‘å¬ä½¿ç”¨äº†ï¼Œä¾¿ä¼šç›´æ¥æ‹’ç»æ‰äº†ï¼Œå’±ä»¬å¯ä»¥ç”¨semanageå‘½ä»¤æŸ¥è¯¢å¹¶è¿‡æ»¤å‡ºæ‰€æœ‰ä¸httpåè®®ç›¸å…³çš„ç«¯å£å·SElinuxå…è®¸åˆ—è¡¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">semanage port -l | grep http</span><br></pre></td></tr></table></figure>
<p>SELinuxå…è®¸httpåè®®ä½¿ç”¨çš„ç«¯å£å·ä¸­é»˜è®¤æ²¡æœ‰åŒ…å«å’±ä»¬çš„6111å’Œ6222ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨çš„æ·»åŠ è¿›å»å°±å¯ä»¥äº†ï¼Œæ“ä½œä¼šç«‹å³ç”Ÿæ•ˆï¼Œä¸”é‡å¯è¿‡åä¾ç„¶æœ‰æ•ˆï¼Œå› æ­¤è®¾ç½®åå†é‡å¯ä¸€ä¸‹httpdæœåŠ¡ç¨‹åºå°±èƒ½çœ‹åˆ°ç½‘é¡µå†…å®¹äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">semanage port -a -t http_port_t -p tcp 6111</span><br><span class="line">semanage port -a -t http_port_t -p tcp 6222</span><br><span class="line">semanage port -l| grep http</span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure>
<h4 id="Apacheçš„è®¿é—®æ§åˆ¶"><a href="#Apacheçš„è®¿é—®æ§åˆ¶" class="headerlink" title="Apacheçš„è®¿é—®æ§åˆ¶"></a>Apacheçš„è®¿é—®æ§åˆ¶</h4><p>ç½‘ç«™è®¿é—®æ§åˆ¶æ˜¯å¯ä»¥åŸºäºæ¥æºä¸»æœºåã€IPåœ°å€æˆ–å®¢æˆ·ç«¯æµè§ˆå™¨ç‰¹å¾ç­‰ä¿¡æ¯å…ƒç´ è¿›è¡Œçš„ç½‘é¡µèµ„æºæ§åˆ¶ï¼Œé€šè¿‡Allowæˆ–DenyæŒ‡ä»¤å®ç°å…è®¸æˆ–ç¦æ­¢æŸä¸ªä¸»æœºè®¿é—®æœåŠ¡å™¨ç½‘ç«™èµ„æºï¼Œå…¶ä¸­OrderæŒ‡ä»¤ç”¨äºå®šä¹‰Allowæˆ–DenyæŒ‡ä»¤èµ·ä½œç”¨çš„é¡ºåºï¼ŒåŒ¹é…åŸåˆ™æ˜¯æŒ‰é¡ºåºåŒ¹é…è§„åˆ™å¹¶æ‰§è¡Œï¼Œè‹¥ä¸ºåŒ¹é…æˆåŠŸåˆ™æ‰§è¡Œåé¢çš„é»˜è®¤æŒ‡ä»¤ï¼Œæ¯”å¦‚è¯´Order Allow,Denyä»£è¡¨å…ˆå°†å®¢æˆ·ç«¯ä¸å…è®¸è§„åˆ™è¿›è¡Œå¯¹æ¯”ï¼Œè‹¥åŒ¹é…æˆåŠŸåˆ™å…è®¸è¯·æ±‚ï¼Œåè€Œåˆ™ä¼šç›´æ¥æ‹’ç»è®¿é—®è¯·æ±‚ã€‚</p>
<p>ä¾‹å¦‚å¯ä»¥å…ˆåœ¨æœåŠ¡ç«¯ç½‘ç«™æ•°æ®ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªå­ç›®å½•ï¼Œå¹¶å‘ç›®å½•ä¸­å†™å…¥ä¸€æ®µå†…å®¹çš„ç½‘é¡µæ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/www/html/server</span><br><span class="line">echo &quot;Successful&quot; &gt; /var/www/html/server/index.html</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€httpdæœåŠ¡ç¨‹åºçš„é…ç½®æ–‡ä»¶æ‰¾åˆ°å¤§çº¦ç¬¬129è¡Œå·¦å³ï¼Œè¿½åŠ ä»¥ä¸‹é™åˆ¶å®¢æˆ·ç«¯è®¿é—®çš„è§„åˆ™ï¼Œå«ä¹‰æ˜¯åŒ¹é…æ‰€æœ‰æµè§ˆå™¨ä¸ºç«ç‹ï¼ˆFirefoxï¼‰çš„ä¸»æœºå¹¶å…è®¸ä»–ä»¬è®¿é—®ï¼Œè€Œé™¤æ­¤ä¹‹å¤–çš„æ‰€æœ‰ç”¨æˆ·è¯·æ±‚éƒ½å°†è¢«æ‹’ç»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf/httpd.conf</span><br><span class="line">&lt;Directory &quot;/var/www/html/server&quot;&gt;</span><br><span class="line"> SetEnvIf User-Agent &quot;Firefox&quot; ff=1</span><br><span class="line"> Order allow,deny</span><br><span class="line"> Allow from env=ff</span><br><span class="line"> &lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure>
<p>é™¤äº†åŒ¹é…å®¢æˆ·ç«¯çš„æµè§ˆå™¨æ ‡è¯†ï¼Œå’±ä»¬è¿˜å¯ä»¥é€šè¿‡åŒ¹é…å®¢æˆ·ç«¯çš„æ¥æºIPåœ°å€è¿›è¡Œè®¿é—®æ§åˆ¶ï¼Œä¾‹å¦‚æƒ³åªå…è®¸æ¥è‡ªäº192.168.10.20çš„ä¸»æœºè®¿é—®Webç½‘ç«™èµ„æºï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠåˆšåˆšçš„å‚æ•°ä¿®æ”¹æˆå¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™æ ·é‡å¯httpdæœåŠ¡ç¨‹åºåå†ç”¨æœ¬æœºï¼ˆæœåŠ¡ç«¯IPåœ°å€ä¸º192.168.10.10ï¼‰æ¥è®¿é—®ç½‘ç«™çš„å­ç›®å½•å°±ä¼šæç¤ºè®¿é—®è¢«æ‹’ç»äº†ï¼Œå¾ˆæœ‰æ„æ€å§~</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf/httpd.conf</span><br><span class="line">&lt;Directory <span class="string">"/var/www/html/server"</span>&gt;</span><br><span class="line"> Order allow,deny  </span><br><span class="line"> Allow from 192.168.10.20</span><br><span class="line"> Order allow,deny</span><br><span class="line"> Allow from env=ie</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬åä¸‰èŠ‚è¯¾"><a href="#ç¬¬åä¸‰èŠ‚è¯¾" class="headerlink" title="ç¬¬åä¸‰èŠ‚è¯¾"></a>ç¬¬åä¸‰èŠ‚è¯¾</h2><h3 id="ä½¿ç”¨VsftpdæœåŠ¡ä¼ è¾“æ–‡ä»¶"><a href="#ä½¿ç”¨VsftpdæœåŠ¡ä¼ è¾“æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨VsftpdæœåŠ¡ä¼ è¾“æ–‡ä»¶"></a>ä½¿ç”¨VsftpdæœåŠ¡ä¼ è¾“æ–‡ä»¶</h3><p>æ–‡ä»¶ä¼ è¾“åè®®</p>
<p>ä¸€èˆ¬æ¥è®²ï¼Œäººä»¬å°†ç”µè„‘è”ç½‘çš„é¦–è¦éœ€æ±‚å°±æ˜¯è·å–èµ„æ–™ï¼Œè€Œæ–‡ä»¶ä¼ è¾“æ˜¯å…¶ä¸­éå¸¸é‡è¦çš„æ–¹å¼ä¹‹ä¸€ï¼Œ21ä¸–çºªçš„äº’è”ç½‘æ˜¯ç”±å‡ åƒä¸‡å°ä¸ªäººç”µè„‘ã€å·¥ä½œç«™ã€å°å‹æœºã€å¤§å‹æœºç­‰ç­‰ä¸åŒå‹å·ã€æ¶æ„çš„ç‰©ç†è®¾å¤‡å…±åŒç»„æˆçš„ï¼Œå³ä¾¿æ˜¯ä¸ªäººç”µè„‘ä¸Šä¹Ÿå¯èƒ½ä¼šè£…æœ‰è¯¸å¦‚Linuxã€Windowsã€UNIXã€DOSç­‰ç­‰ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥ä¸ºäº†èƒ½å¤Ÿåœ¨å¦‚æ­¤å¤æ‚å¤šæ ·çš„æ“ä½œè®¾å¤‡ä¹‹é—´è§£å†³æ–‡ä»¶ä¼ è¾“é—®é¢˜ï¼Œäºæ˜¯ä¾¿æœ‰äº†ç»Ÿä¸€çš„FTPæ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFile Transfer Protocolï¼‰ï¼Œè¿™æ˜¯ä¸€ç§èƒ½å¤Ÿè®©ä½¿ç”¨è€…åœ¨äº’è”ç½‘ä¸­ä¸Šä¼ ã€ä¸‹è½½æ–‡ä»¶çš„ä¼ è¾“åè®®ã€‚å¾ˆå¤šåŒå­¦åœ¨å¤§å­¦æœŸé—´åªçŸ¥é“FTPåè®®ä½¿ç”¨äº†21ç«¯å£å·ï¼Œä½†å®é™…ä¸ŠFTPæ–‡ä»¶ä¼ è¾“åè®®é»˜è®¤å ç”¨äº†20ã€21ä¸¤ä¸ªç«¯å£å·ï¼Œ20ç«¯å£å·ç”¨äºè¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œ21ç«¯å£å·ç”¨äºæ¥å—å®¢æˆ·ç«¯æ‰§è¡Œçš„ç›¸å…³FTPå‘½ä»¤ä¸å‚æ•°ï¼ŒFTPæœåŠ¡ç«¯æ™®éæ›´å¤šçš„åº”ç”¨äºå†…ç½‘ä¸­ï¼Œå…·æœ‰æ˜“äºæ­å»ºã€æ–¹ä¾¿ç®¡ç†çš„ç‰¹ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥å€ŸåŠ©FTPå®¢æˆ·ç«¯å·¥å…·è¿˜å¯ä»¥è½»æ¾å®ç°æ–‡ä»¶çš„å¤šç‚¹ä¸‹è½½å’Œæ–­ç‚¹ç»­ä¼ æŠ€æœ¯ã€‚</p>
<p>FTPæœåŠ¡å™¨å°±æ˜¯æ”¯æŒFTPä¼ è¾“åè®®çš„ä¸»æœºï¼Œä¸å¤§å¤šæ•°æœåŠ¡ç¨‹åºä¸€æ ·ï¼Œè¦æƒ³å®Œæˆæ–‡ä»¶ä¼ è¾“åˆ™éœ€è¦FTPæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„é…åˆæ‰è¡Œï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯å‘FTPæœåŠ¡ç«¯å‘é€æŒ‡ä»¤å‚æ•°ï¼ŒFTPæœåŠ¡ç«¯ä»è€Œä¼šä¾æ®æ¥å—åˆ°çš„å‘½ä»¤ä½œå‡ºç›¸åº”åŠ¨ä½œï¼Œæ¯”å¦‚æ˜¾ç¤ºæ‰§è¡Œç»“æœæˆ–æŠŠæ–‡ä»¶ä¼ è¾“åˆ°å®¢æˆ·ç«¯ä¸»æœºä¸Šï¼ŒFTPåè®®çš„ä¼ è¾“æœ‰ä¸¤ç§ä¸åŒçš„æ¨¡å¼ï¼Œä¸»åŠ¨æ¨¡å¼æ˜¯è®©FTPæœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·é“¾æ¥è¯·æ±‚ï¼Œè€Œè¢«åŠ¨æ¨¡å¼åˆ™æ˜¯è®©FTPæœåŠ¡ç«¯ç­‰å¾…å®¢æˆ·ç«¯çš„é“¾æ¥è¯·æ±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹è¢«åŠ¨æ¨¡å¼ï¼Œå’±ä»¬åœ¨ç¬¬8ç« çš„é˜²ç«å¢™è¯¾ç¨‹ä¸­å­¦ä¹ è¿‡ï¼Œé˜²ç«å¢™ä¸€èˆ¬æ›´å¤šçš„æ˜¯è¿‡æ»¤ä»å¤–ç½‘åˆ°å†…ç½‘çš„æµé‡æ•°æ®ï¼Œå› æ­¤æœ‰äº›æ—¶å€™å¿…é¡»æ”¹æˆä¸»åŠ¨æ¨¡å¼æ‰å¯ä»¥ä¼ è¾“ã€‚</p>
<p>Vsftpdæ˜¯ä¸€æ¬¾è¿è¡Œåœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šé¢çš„FTPæœåŠ¡ç«¯ç¨‹åºï¼ŒVery Secure FTP Daemoné¡¾åæ€ä¹‰å°±æ˜¯éå¸¸å®‰å…¨çš„FTPä¼ è¾“ç¨‹åºï¼ŒvsftpdæœåŠ¡ç¨‹åºä¸ä»…å®Œå…¨å¼€æºä¸”å…è´¹ï¼Œè€Œä¸”å…·æœ‰å¾ˆé«˜çš„å®‰å…¨æ€§ã€ä¼ è¾“é€Ÿç‡ã€æ”¯æŒè™šæ‹Ÿç”¨æˆ·éªŒè¯åŠŸèƒ½ç­‰ç­‰å…¶ä»–FTPæœåŠ¡ç«¯ç¨‹åºæ‰€ä¸å…·å¤‡çš„ç‰¹ç‚¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install vsftpd</span><br></pre></td></tr></table></figure>
<p>vsftpdæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶(/etc/vsftpd/vsftpd.conf)ä¸­å‚æ•°æ€»å…±æœ‰123è¡Œå·¦å³ï¼Œä½†å¤§å¤šæ•°éƒ½æ˜¯ä»¥#ï¼ˆäº•å·ï¼‰å¼€å¤´çš„æ³¨é‡Šä¿¡æ¯ï¼Œå’±ä»¬å¯ä»¥ç”¨grepå‘½ä»¤çš„-vå‚æ•°æ¥è¿‡æ»¤å¹¶åé€‰å‡ºæ²¡æœ‰åŒ…å«#ï¼ˆäº•å·ï¼‰çš„å‚æ•°è¡Œï¼Œä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰çš„æ³¨é‡Šä¿¡æ¯éƒ½è¿‡æ»¤æ‰ï¼Œè¿™æ ·å†é€šè¿‡è¾“å‡ºé‡å®šå‘ç¬¦å†™ä¼šåˆ°åŸå§‹çš„ä¸»é…ç½®æ–‡ä»¶åç§°ä¸­å³å¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf_bak</span><br><span class="line">grep -v <span class="string">"#"</span> /etc/vsftpd/vsftpd.conf_bak &gt; /etc/vsftpd/vsftpd.conf</span><br><span class="line">cat /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>
<p>vsftpdæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ä¸­å¸¸ç”¨çš„å‚æ•°åŠä½œç”¨ä»‹ç»</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>listen=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦ä»¥ç‹¬ç«‹è¿è¡Œçš„æ–¹å¼ç›‘å¬æœåŠ¡ã€‚</td>
</tr>
<tr>
<td>listen_address=IPåœ°å€</td>
<td>è®¾ç½®è¦ç›‘å¬çš„IPåœ°å€ã€‚</td>
</tr>
<tr>
<td>listen_port=21</td>
<td>è®¾ç½®FTPæœåŠ¡çš„ç›‘å¬ç«¯å£ã€‚</td>
</tr>
<tr>
<td>download_enableï¼[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å…è®¸ä¸‹è½½æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>userlist_enable=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å¯ç”¨â€œç¦æ­¢ç™»é™†ç”¨æˆ·åå•â€ã€‚</td>
</tr>
<tr>
<td>userlist_deny=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å¯ç”¨â€œç¦æ­¢ç™»é™†ç”¨æˆ·åå•â€ã€‚</td>
</tr>
<tr>
<td>max_clients=0</td>
<td>æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°ï¼Œ0ä¸ºä¸é™åˆ¶ã€‚</td>
</tr>
<tr>
<td>max_per_ip=0</td>
<td>åŒä¸€IPåœ°å€æœ€å¤§è¿æ¥æ•°ï¼Œ0ä¸ºä¸é™åˆ¶ã€‚</td>
</tr>
<tr>
<td>anonymous_enable=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å…è®¸åŒ¿åç”¨æˆ·è®¿é—®ã€‚</td>
</tr>
<tr>
<td>anon_upload_enable=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å…è®¸åŒ¿åç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>anon_umask=022</td>
<td>åŒ¿åç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„umaskå€¼ã€‚</td>
</tr>
<tr>
<td>anon_root=/var/ftp</td>
<td>åŒ¿åç”¨æˆ·çš„FTPæ ¹ç›®å½•ã€‚</td>
</tr>
<tr>
<td>anon_mkdir_write_enable=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å…è®¸åŒ¿åç”¨æˆ·åˆ›å»ºç›®å½•ã€‚</td>
</tr>
<tr>
<td>anon_other_write_enable=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å¼€æ”¾åŒ¿åç”¨æˆ·å…¶ä»–å†™å…¥æƒé™ã€‚</td>
</tr>
<tr>
<td>anon_max_rate=0</td>
<td>åŒ¿åç”¨æˆ·æœ€å¤§ä¼ è¾“é€Ÿç‡(å­—èŠ‚)ï¼Œ0ä¸ºä¸é™åˆ¶ã€‚</td>
</tr>
<tr>
<td>local_enable=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å…è®¸æœ¬åœ°ç”¨æˆ·ç™»é™†FTPã€‚</td>
</tr>
<tr>
<td>local_umask=022</td>
<td>æœ¬åœ°ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„umaskå€¼ã€‚</td>
</tr>
<tr>
<td>local_root=/var/ftp</td>
<td>æœ¬åœ°ç”¨æˆ·çš„FTPæ ¹ç›®å½•ã€‚</td>
</tr>
<tr>
<td>chroot_local_user=[YES</td>
<td>NO]</td>
<td>æ˜¯å¦å°†ç”¨æˆ·æƒé™ç¦é”¢åœ¨FTPç›®å½•ï¼Œæ›´åŠ çš„å®‰å…¨ã€‚</td>
</tr>
<tr>
<td>local_max_rate=0</td>
<td>æœ¬åœ°ç”¨æˆ·æœ€å¤§ä¼ è¾“é€Ÿç‡(å­—èŠ‚)ï¼Œ0ä¸ºä¸é™åˆ¶ã€‚</td>
</tr>
</tbody>
</table>
<h4 id="VsftpdæœåŠ¡ç¨‹åº"><a href="#VsftpdæœåŠ¡ç¨‹åº" class="headerlink" title="VsftpdæœåŠ¡ç¨‹åº"></a>VsftpdæœåŠ¡ç¨‹åº</h4><p>vsftpdä½œä¸ºæ›´åŠ å®‰å…¨çš„FTPæ–‡ä»¶ä¼ è¾“åè®®çš„æœåŠ¡ç¨‹åºï¼Œå¯ä»¥è®©ç”¨æˆ·åˆ†åˆ«é€šè¿‡åŒ¿åå¼€æ”¾ã€æœ¬åœ°ç”¨æˆ·å’Œè™šæ‹Ÿç”¨æˆ·ä¸‰ç§èº«ä»½éªŒè¯æ–¹å¼æ¥ç™»é™†åˆ°FTPæœåŠ¡å™¨ä¸Šé¢ã€‚åŒ¿åå¼€æ”¾æ˜¯ä¸€ç§æœ€ä¸å®‰å…¨çš„éªŒè¯æ¨¡å¼ï¼Œä»»ä½•äººéƒ½å¯ä»¥æ— éœ€å¯†ç éªŒè¯å°±ç™»é™†åˆ°FTPæœåŠ¡ç«¯ä¸»æœºã€‚æœ¬åœ°ç”¨æˆ·æ˜¯é€šè¿‡Linuxç³»ç»Ÿæœ¬åœ°çš„å¸å·å¯†ç ä¿¡æ¯è¿›è¡Œçš„éªŒè¯æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ç›¸æ¯”è¾ƒåŒ¿åå¼€æ”¾æ¨¡å¼æ¥è¯´æ¯”è¾ƒå®‰å…¨ï¼Œé…ç½®èµ·æ¥ä¹Ÿååˆ†ç®€å•ï¼Œä¸è¿‡å¦‚æœè¢«éª‡å®¢æš´åŠ›ç ´è§£å‡ºFTPå¸å·ä¿¡æ¯ï¼Œä¹Ÿå°±å¯ä»¥é€šè¿‡è¿™ä¸ªå£ä»¤ç™»é™†åˆ°æœåŠ¡å™¨ç³»ç»Ÿä¸­äº†ï¼Œä»è€Œå®Œå…¨æ§åˆ¶æ•´å°æœåŠ¡å™¨ä¸»æœºã€‚æœ€åçš„è™šæ‹Ÿç”¨æˆ·æ˜¯ç›¸æ¯”è¾ƒæœ€ä¸ºå®‰å…¨çš„éªŒè¯æ¨¡å¼ï¼Œéœ€è¦ä¸ºFTPä¼ è¾“æœåŠ¡å•ç‹¬å»ºç«‹ç”¨æˆ·æ•°æ®åº“æ–‡ä»¶ï¼Œè™šæ‹Ÿå‡ºç”¨æ¥å£ä»¤éªŒè¯çš„å¸æˆ·ä¿¡æ¯ï¼Œè¿™äº›å¸å·æ˜¯åœ¨æœåŠ¡å™¨ç³»ç»Ÿä¸­ä¸å­˜åœ¨çš„ï¼Œä»…ä¾›FTPä¼ è¾“æœåŠ¡åšéªŒè¯ä½¿ç”¨ï¼Œå› æ­¤è¿™æ ·å³ä¾¿éª‡å®¢ç ´è§£å‡ºäº†å¸å·å£ä»¤å¯†ç åä¹Ÿæ— æ³•ç™»å½•åˆ°æœåŠ¡å™¨ä¸»æœºä¸Šé¢ï¼Œæœ‰æ•ˆçš„é™ä½äº†ç ´åèŒƒå›´å’Œå½±å“ã€‚</p>
<p>ftpå‘½ä»¤æ˜¯ç”¨æ¥åœ¨å‘½ä»¤è¡Œç»ˆç«¯ä¸­å¯¹ftpä¼ è¾“æœåŠ¡è¿›è¡Œæ§åˆ¶è¿æ¥çš„å®¢æˆ·ç«¯å·¥å…·ï¼Œéœ€è¦å…ˆæ‰‹åŠ¨çš„å®‰è£…ä¸€ä¸‹è¿™ä¸ªftpå®¢æˆ·ç«¯å·¥å…·ï¼Œä»¥ä¾¿äºæ¥ä¸‹æ¥çš„å®éªŒä¸­æ ¡éªŒæ•ˆæœã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y ftp</span><br></pre></td></tr></table></figure>
<h5 id="åŒ¿åè®¿é—®æ¨¡å¼"><a href="#åŒ¿åè®¿é—®æ¨¡å¼" class="headerlink" title="åŒ¿åè®¿é—®æ¨¡å¼"></a>åŒ¿åè®¿é—®æ¨¡å¼</h5><p>vsftpdæœåŠ¡ç¨‹åºä¸­åŒ¿åå¼€æ”¾æ˜¯ä¸€ç§æœ€ä¸å®‰å…¨çš„éªŒè¯æ¨¡å¼ï¼Œä»»ä½•äººéƒ½å¯ä»¥æ— éœ€å¯†ç éªŒè¯å°±ç™»é™†åˆ°FTPæœåŠ¡ç«¯ä¸»æœºï¼Œè¿™ç§æ¨¡å¼ä¸€èˆ¬åªç”¨æ¥ä¿å­˜ä¸é‡è¦çš„å…¬å¼€æ–‡ä»¶ï¼Œå°¤å…¶æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ›´è¦æ³¨æ„ä¸æ”¾æ•æ„Ÿæ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿéå¸¸æ¨èç”¨ç¬¬8ç« ä¸­å­¦ä¹ çš„é˜²ç«å¢™ç®¡ç†å·¥å…·ï¼ˆä¾‹å¦‚Tcp_wrappersæœåŠ¡ç¨‹åºï¼‰æŠŠvsftpdæœåŠ¡ç¨‹åºçš„å…è®¸è®¿é—®ä¸»æœºèŒƒå›´è®¾ç½®ä¸ºä¼ä¸šå†…ç½‘ï¼Œè¿™æ ·è¿˜ç®—èƒ½å¤Ÿä¿è¯åŸºæœ¬çš„å®‰å…¨æ€§ã€‚</p>
<p>vsftpdæœåŠ¡ç¨‹åºé»˜è®¤å·²ç»å¼€å¯äº†åŒ¿åè®¿é—®æ¨¡å¼ï¼Œéœ€è¦åšçš„å°±æ˜¯è¿›ä¸€æ­¥å…è®¸åŒ¿åç”¨æˆ·çš„ä¸Šä¼ ã€ä¸‹è½½æ–‡ä»¶çš„æƒé™ï¼Œä»¥åŠè®©åŒ¿åç”¨æˆ·èƒ½å¤Ÿåˆ›å»ºã€åˆ é™¤ã€æ›´åæ–‡ä»¶çš„æƒé™ï¼Œè¿™äº›æƒé™å¯¹äºåŒ¿åç”¨æˆ·æ¥è®²éå¸¸çš„å±é™©ï¼Œå’±ä»¬åªæ˜¯ä¸ºäº†ç»ƒä¹ Linuxç³»ç»Ÿä¸­vsftpdæœåŠ¡ç¨‹åºçš„é…ç½®èƒ½åŠ›ï¼Œååˆ†ä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼ŒåŒ¿åç”¨æˆ·çš„æƒé™å‚æ•°åŠä»‹ç»ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>anonymous_enable=YES</td>
<td>å…è®¸åŒ¿åè®¿é—®æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td>anon_umask=022</td>
<td>åŒ¿åç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„umaskå€¼ã€‚</td>
</tr>
<tr>
<td>anon_upload_enable=YES</td>
<td>å…è®¸åŒ¿åç”¨æˆ·ä¸Šä¼ æ–‡ä»¶</td>
</tr>
<tr>
<td>anon_mkdir_write_enable=YES</td>
<td>å…è®¸åŒ¿åç”¨æˆ·åˆ›å»ºç›®å½•</td>
</tr>
<tr>
<td>anon_other_write_enable=YES</td>
<td>å…è®¸åŒ¿åç”¨æˆ·ä¿®æ”¹ç›®å½•åæˆ–åˆ é™¤ç›®å½•</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br><span class="line">anonymous_enable=YES</span><br><span class="line">anon_umask=022</span><br><span class="line">anon_upload_enable=YES</span><br><span class="line">anon_mkdir_write_enable=YES</span><br><span class="line">anon_other_write_enable=YES</span><br><span class="line">local_enable=YES</span><br><span class="line">write_enable=YES</span><br><span class="line">local_umask=022</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=NO</span><br><span class="line">listen_ipv6=YES</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">userlist_enable=YES</span><br><span class="line">tcp_wrappers=YES</span><br></pre></td></tr></table></figure>
<p>ç¡®è®¤å‚æ•°å¡«å†™æ­£ç¡®åä¿å­˜å¹¶é€€å‡ºvsftpdæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ï¼Œè¿˜éœ€è¦é‡å¯vsftpdæœåŠ¡ç¨‹åºæ¥è®©æ–°çš„é…ç½®æœåŠ¡å‚æ•°ç”Ÿæ•ˆã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart vsftpd</span><br><span class="line">systemctl <span class="built_in">enable</span> vsftpd</span><br></pre></td></tr></table></figure>
<p>/var/ftp æƒé™é—®é¢˜</p>
<p>SELinuxé—®é¢˜</p>
<p>æ­¤æ—¶å†æ¬¡ä½¿ç”¨ftpå‘½ä»¤ç™»å…¥åˆ°FTPæœåŠ¡å™¨ä¸»æœºåä¾ç„¶ä¼šæç¤ºå†™å…¥æ“ä½œå¤±è´¥ï¼Œä½†ç»†å¿ƒçš„åŒå­¦ä¸€å®šå‘ç°æŠ¥é”™ä¿¡æ¯å·²ç»äº§ç”Ÿäº†å˜åŒ–ï¼Œåœ¨åˆšåˆšæ²¡æœ‰å†™å…¥æƒé™çš„æ—¶å€™æç¤ºè¯´æƒé™æ‹’ç»ï¼ˆPermission denied.ï¼‰æ‰€ä»¥æ€€ç–‘æ˜¯æƒé™çš„é—®é¢˜ï¼Œä½†ç°åœ¨æ˜¯æç¤ºåˆ›å»ºç›®å½•çš„æ“ä½œå¤±è´¥ï¼ˆCreate directory operation failed.ï¼‰é‚£ä¹ˆåŒå­¦ä»¬åº”è¯¥ä¹Ÿèƒ½é©¬ä¸Šæ„è¯†åˆ°æ˜¯SELinuxæœåŠ¡åœ¨é™åˆ¶è¿™ä¸ªæ“ä½œäº†å§ï¼ŒæŸ¥çœ‹ä¸‹æ‰€æœ‰ä¸ftpç›¸å…³çš„SELinuxåŸŸç­–ç•¥æœ‰é‚£äº›å§</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getsebool -a | grep ftp</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®ç­–ç•¥çš„åç§°å’Œç»éªŒå¯ä»¥çŒœæµ‹å‡ºæ˜¯å“ªä¸€æ¡è§„åˆ™ç­–ç•¥ï¼Œåœ¨è®¾ç½®çš„æ—¶å€™è¯·è®°å¾—ä½¿ç”¨-På‚æ•°æ¥è®©é…ç½®è¿‡çš„ç­–ç•¥æ°¸ä¹…ç”Ÿæ•ˆï¼Œä¿è¯åœ¨æœåŠ¡å™¨é‡å¯åä¾ç„¶èƒ½å¤Ÿé¡ºåˆ©å†™å…¥æ–‡ä»¶ï¼Œå¤§å®¶å¯ä»¥åˆ†åˆ«å°è¯•ä¸‹åˆ›å»ºç›®å½•æ–‡ä»¶ã€å¯¹æ–‡ä»¶è¿›è¡Œæ”¹åä»¥åŠåˆ é™¤ç›®å½•æ–‡ä»¶ç­‰ç­‰æ“ä½œã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsebool -P ftpd_full_access=on</span><br></pre></td></tr></table></figure>
<h5 id="æœ¬åœ°ç”¨æˆ·æ¨¡å¼"><a href="#æœ¬åœ°ç”¨æˆ·æ¨¡å¼" class="headerlink" title="æœ¬åœ°ç”¨æˆ·æ¨¡å¼"></a>æœ¬åœ°ç”¨æˆ·æ¨¡å¼</h5><p>æœ¬åœ°ç”¨æˆ·æ¨¡å¼æ˜¯é€šè¿‡Linuxç³»ç»Ÿæœ¬åœ°çš„å¸å·å¯†ç ä¿¡æ¯è¿›è¡Œçš„éªŒè¯æ–¹å¼ï¼Œè¿™ç§æ¨¡å¼ç›¸æ¯”è¾ƒåŒ¿åå¼€æ”¾æ¨¡å¼æ¥è¯´æ¯”è¾ƒå®‰å…¨ï¼Œä¸è¿‡å¦‚æœè¢«éª‡å®¢æš´åŠ›ç ´è§£å‡ºFTPå¸å·ä¿¡æ¯ï¼Œä¹Ÿå°±å¯ä»¥é€šè¿‡è¿™ä¸ªå£ä»¤ç™»é™†åˆ°æœåŠ¡å™¨ç³»ç»Ÿä¸­äº†ï¼Œä»è€Œå®Œå…¨æ§åˆ¶æ•´å°æœåŠ¡å™¨ä¸»æœºã€‚æœ¬åœ°ç”¨æˆ·æ¨¡å¼é…ç½®èµ·æ¥ååˆ†ç®€å•ï¼Œè€Œä¸”æ—¢ç„¶æœ¬åœ°ç”¨æˆ·æ¨¡å¼ç¡®å®è¦æ¯”åŒ¿åå¼€æ”¾æ¨¡å¼æ›´åŠ çš„å®‰å…¨ï¼Œå› æ­¤æ¨èæ—¢ç„¶å¼€å¯äº†æœ¬åœ°ç”¨æˆ·æ¨¡å¼ï¼Œå°±æŠŠåŒ¿åå¼€æ”¾æ¨¡å¼ç»™å…³é—­äº†å§~å¯¹æœ¬åœ°ç”¨æˆ·æ¨¡å¼éœ€è¦ä½¿ç”¨çš„æƒé™å‚æ•°åŠä»‹ç»å¦‚ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>anonymous_enable=NO</td>
<td>ç¦æ­¢åŒ¿åè®¿é—®æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td>local_enable=YES</td>
<td>å…è®¸æœ¬åœ°ç”¨æˆ·æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td>write_enable=YES</td>
<td>è®¾ç½®å¯å†™å…¥æƒé™ã€‚</td>
</tr>
<tr>
<td>local_umask=022</td>
<td>æœ¬åœ°ç”¨æˆ·æ¨¡å¼åˆ›å»ºæ–‡ä»¶çš„umaskå€¼ã€‚</td>
</tr>
<tr>
<td>userlist_deny=YES</td>
<td>å‚æ•°å€¼ä¸ºYESå³ç¦æ­¢åå•ä¸­çš„ç”¨æˆ·ï¼Œå‚æ•°å€¼ä¸ºNOåˆ™ä»£è¡¨ä»…å…è®¸åå•ä¸­çš„ç”¨æˆ·ã€‚</td>
</tr>
<tr>
<td>userlist_enable=YES</td>
<td>å…è®¸â€œç¦æ­¢ç™»é™†åå•â€ï¼Œåå•æ–‡ä»¶ä¸ºftpusersä¸user_listã€‚</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br><span class="line">anonymous_enable=NO</span><br><span class="line">local_enable=YES</span><br><span class="line">write_enable=YES</span><br><span class="line">local_umask=022</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=NO</span><br><span class="line">listen_ipv6=YES</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">userlist_enable=YES</span><br><span class="line">tcp_wrappers=YES</span><br></pre></td></tr></table></figure>
<p>ç¡®è®¤å‚æ•°ä¿¡æ¯å·²ç»å¡«å†™æ­£ç¡®å°±å¯ä»¥ä¿å­˜é€€å‡ºäº†ï¼Œè¦æƒ³è®©æ–°çš„é…ç½®å‚æ•°ç”Ÿæ•ˆè¿˜è¦è®°å¾—é‡å¯ä¸€ä¸‹vsftpdæœåŠ¡ç¨‹åºï¼Œå¹¶ä¸”åœ¨åˆšåˆšå®éªŒåè¿˜åŸäº†è™šæ‹Ÿæœºçš„åŒå­¦è¿˜è¯·è®°å¾—å†æŠŠé…ç½®çš„æœåŠ¡åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼Œè®©vsftpdæœåŠ¡ç¨‹åºåœ¨é‡å¯åä¾ç„¶èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart vsftpd</span><br><span class="line">systemctl <span class="built_in">enable</span> vsftpd</span><br></pre></td></tr></table></figure>
<p>åœ¨è¾“å…¥rootç®¡ç†å‘˜ç”¨æˆ·çš„å¯†ç å‰å°±å·²ç»æç¤ºè¢«æ‹’ç»äº†ï¼Œçœ‹æ¥æœ‰ä»€ä¹ˆä¸œè¥¿å†ç¦æ­¢ç€ç”¨æˆ·ç™»é™†ï¼Œè¿™æ˜¯å› ä¸ºvsftpdæœåŠ¡ç¨‹åºç›®å½•ä¸­é»˜è®¤å­˜åœ¨ç€ä¸¤ä¸ªæ–‡ä»¶ï¼ˆftpusersæˆ–user_listï¼‰ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶å«åšç¦æ­¢ç”¨æˆ·åå•ã€‚åªè¦é‡Œé¢å†™æœ‰æŸä¸ªç”¨æˆ·çš„åå­—ï¼Œé‚£ä¹ˆå°±ä¸å†å…è®¸è¿™ä¸ªç”¨æˆ·ç™»é™†åˆ°FTPæœåŠ¡å™¨ä¸Šé¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/vsftpd/user_list </span><br><span class="line">cat /etc/vsftpd/ftpusers</span><br></pre></td></tr></table></figure>
<p>æœç„¶å¦‚æ­¤ï¼ŒvsftpdæœåŠ¡ç¨‹åºä¸ºäº†ä¿è¯æœåŠ¡å™¨çš„å®‰å…¨æ€§è€Œé»˜è®¤ç¦æ­¢äº†è¶…çº§ç®¡ç†å‘˜å’Œå¤§å¤šæ•°ç³»ç»Ÿç”¨æˆ·çš„ç™»é™†è¡Œä¸ºï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆçš„é¿å…éª‡å®¢é€šè¿‡FTPæœåŠ¡å¯¹è¶…çº§ç®¡ç†å‘˜å¯†ç çš„æš´åŠ›ç ´è§£è¡Œä¸ºï¼Œå¦‚æœæ‚¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¡®è®¤ä½¿ç”¨rootè¶…çº§ç®¡ç†å‘˜å¸å·ä¸ä¼šå¯¹ç³»ç»Ÿäº§ç”Ÿå®‰å…¨å½±å“ï¼Œåªéœ€è¦æŒ‰ç…§ä¸Šé¢çš„æç¤ºåˆ é™¤æ‰rootç”¨æˆ·åå³å¯ã€‚</p>
<p>æœ¬åœ°ç”¨æˆ·æ¨¡å¼ç™»é™†åé»˜è®¤ä¼šè¿›å…¥è¯¥ç”¨æˆ·çš„å®¶ç›®å½•ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å‰ç”¨æˆ·ç™»é™†ååº”è¯¥è¿›å…¥çš„æ˜¯/home/linuxprobeç›®å½•ä¸­ï¼Œè€Œè¯¥ç›®å½•çš„é»˜è®¤æ‰€æœ‰è€…ã€æ‰€æœ‰ç»„éƒ½æ˜¯è¯¥ç”¨æˆ·è‡ªå·±ï¼Œä¸å­˜åœ¨å†™å…¥æƒé™ä¸è¶³çš„æƒ…å†µï¼Œå› æ­¤è¿™æ¬¡æç¤ºçš„æ“ä½œè¢«æ‹’ç»ï¼Œå°±æ˜¯å› ä¸ºåˆšåˆšè¿˜åŸè¿‡è™šæ‹Ÿæœºç³»ç»Ÿåˆ°æœ€åˆå§‹çš„çŠ¶æ€äº†ï¼Œéœ€è¦å†æ¥å¼€å¯ä¸€ä¸‹SELinuxåŸŸä¸­å¯¹ftpæœåŠ¡çš„å…è®¸ç­–ç•¥å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getsebool -a | grep ftp</span><br><span class="line">setsebool -P ftpd_full_access=on</span><br></pre></td></tr></table></figure>
<p>ç»ƒä¹ å®éªŒè¯¾ç¨‹å’Œç”Ÿäº§ç¯å¢ƒä¸­å¯¹SELinuxåŸŸç­–ç•¥çš„è®¾ç½®ä¸­åˆ‡è®°åŠ å…¥-På‚æ•°ï¼Œå¦åˆ™æœåŠ¡å™¨åœ¨é‡å¯åå°±ä¼šä¾ç„¶æŒ‰ç…§åŸæœ‰çš„ç­–ç•¥è¿›è¡Œæ§åˆ¶ï¼Œå¯¼è‡´é…ç½®è¿‡çš„æœåŠ¡åˆä¸èƒ½ä½¿ç”¨äº†ã€‚</p>
<h5 id="è™šæ‹Ÿç”¨æˆ·æ¨¡å¼"><a href="#è™šæ‹Ÿç”¨æˆ·æ¨¡å¼" class="headerlink" title="è™šæ‹Ÿç”¨æˆ·æ¨¡å¼"></a>è™šæ‹Ÿç”¨æˆ·æ¨¡å¼</h5><p>æœ€åè¦å­¦ä¹ çš„è™šæ‹Ÿç”¨æˆ·æ¨¡å¼æ˜¯ä¸€ç§ç›¸æ¯”è¾ƒæ¥è¯´æœ€ä¸ºå®‰å…¨çš„éªŒè¯æ–¹å¼ï¼Œéœ€è¦ä¸ºFTPä¼ è¾“æœåŠ¡å•ç‹¬å»ºç«‹ç”¨æˆ·æ•°æ®åº“æ–‡ä»¶ï¼Œè™šæ‹Ÿå‡ºç”¨æ¥å£ä»¤éªŒè¯çš„å¸æˆ·ä¿¡æ¯ï¼Œè¿™äº›å¸å·æ˜¯åœ¨æœåŠ¡å™¨ç³»ç»Ÿä¸­ä¸å­˜åœ¨çš„ï¼Œä»…ä¾›FTPä¼ è¾“æœåŠ¡åšéªŒè¯ä½¿ç”¨ï¼Œå› æ­¤è¿™æ ·å³ä¾¿éª‡å®¢ç ´è§£å‡ºäº†å¸å·å£ä»¤å¯†ç åä¹Ÿæ— æ³•ç™»å½•åˆ°æœåŠ¡å™¨ä¸»æœºä¸Šé¢ï¼Œæœ‰æ•ˆçš„é™ä½äº†ç ´åèŒƒå›´å’Œå½±å“ã€‚æ‰€ä»¥åªè¦åœ¨é…ç½®å¦¥å½“åˆç†çš„æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿç”¨æˆ·æ¨¡å¼è¦æ¯”å‰ä¸¤ç§éªŒè¯æ–¹å¼æ›´åŠ çš„å®‰å…¨ï¼ŒåŒæ—¶é…ç½®çš„æµç¨‹ä¹Ÿç¨å¾®ä¼šå¤æ‚ä¸€äº›ã€‚</p>
<p>ç¬¬1æ­¥ï¼šåˆ›å»ºç”¨äºè¿›è¡ŒFTPéªŒè¯çš„å¸å·å¯†ç æ•°æ®åº“æ–‡ä»¶ï¼Œå•æ•°è¡Œä¸ºè´¦æˆ·åï¼Œå¶æ•°è¡Œä¸ºå¯†ç ï¼Œä¾‹å¦‚åˆ†åˆ«åˆ›å»ºå‡ºå¼ ä¸‰å’Œæå››ä¸¤ä¸ªç”¨æˆ·ï¼Œå¯†ç å‡ä¸ºredhatï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/vsftpd/</span><br><span class="line"></span><br><span class="line">vim vuser.list</span><br><span class="line">zhangsan</span><br><span class="line">redhat</span><br><span class="line">lisi</span><br><span class="line">redhat</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜æ–‡ä¿¡æ¯æ—¢ä¸å®‰å…¨ï¼Œä¹Ÿä¸èƒ½è®©vsftpdæœåŠ¡ç¨‹åºç›´æ¥è¯»å–ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨db_loadå‘½ä»¤ç”¨HASHç®—æ³•å°†è¿™ä¸ªåŸå§‹çš„æ˜æ–‡ä¿¡æ¯æ–‡ä»¶è½¬æ¢æˆæ•°æ®åº“æ–‡ä»¶ï¼Œå¹¶ä¸”å†æŠŠæ•°æ®åº“æ–‡ä»¶æƒé™è°ƒå°ä¸€äº›ï¼ˆé¿å…å…¶ä»–äººèƒ½çœ‹åˆ°æ•°æ®åº“æ–‡ä»¶çš„å†…å®¹ï¼‰ï¼Œç„¶åå†æŠŠåŸå§‹çš„æ˜æ–‡ä¿¡æ¯æ–‡ä»¶åˆ é™¤æ‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db_load -T -t hash -f vuser.list vuser.db</span><br><span class="line">file vuser.db</span><br><span class="line">chmod 600 vuser.db</span><br><span class="line">rm -f vuser.list</span><br></pre></td></tr></table></figure>
<p>ç¬¬2æ­¥ï¼šåˆ›å»ºç”¨äºFTPæœåŠ¡å­˜å‚¨æ–‡ä»¶çš„æ ¹ç›®å½•ä»¥åŠè™šæ‹Ÿç”¨æˆ·æ˜ å°„çš„ç³»ç»Ÿæœ¬åœ°ç”¨æˆ·ï¼ŒFTPæœåŠ¡å­˜å‚¨æ–‡ä»¶çš„æ ¹ç›®å½•æŒ‡çš„æ˜¯å½“è™šæ‹Ÿç”¨æˆ·ç™»é™†åé»˜è®¤æ‰€åœ¨çš„ä½ç½®ï¼Œä½†åœ¨Linuxç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æ˜¯æœ‰æ‰€æœ‰è€…å’Œæ‰€æœ‰ç»„å±æ€§çš„ï¼Œä¾‹å¦‚ç”¨å¼ ä¸‰å¸æˆ·åˆ›å»ºäº†ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œä½†æ˜¯å¼ ä¸‰è¿™ä¸ªç”¨æˆ·åœ¨ç³»ç»Ÿä¸­æ˜¯æ‰¾ä¸åˆ°çš„ï¼Œå°±ä¼šå¯¼è‡´Linuxç³»ç»Ÿä¸­è¿™ä¸ªæ–‡ä»¶æƒé™å‡ºç°é”™è¯¯ã€‚å› æ­¤è¿˜éœ€è¦å†åˆ›å»ºä¸€ä¸ªç”¨æ¥è®©è™šæ‹Ÿç”¨æˆ·æ˜ å°„çš„ç³»ç»Ÿæœ¬åœ°ç”¨æˆ·ï¼Œç®€å•æ¥è¯´å°±æ˜¯è®©è™šæ‹Ÿç”¨æˆ·é»˜è®¤ç™»é™†åˆ°è¿™ä¸ªæœ¬åœ°ç”¨æˆ·çš„å®¶ç›®å½•ä¸­ï¼Œåˆ›å»ºçš„æ–‡ä»¶å±æ€§ä¹Ÿéƒ½å½’å±äºè¿™ä¸ªæœ¬åœ°ç”¨æˆ·ï¼Œé¿å…æœ¬åœ°Linuxç³»ç»Ÿæ— æ³•å¤„ç†è¿™ç§è™šæ‹Ÿç”¨æˆ·åˆ›å»ºçš„æ–‡ä»¶å±æ€§æƒé™ã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†FTPèµ„æ–™ï¼Œå¯ä»¥æŠŠè¿™ä¸ªç”¨äºè™šæ‹Ÿç”¨æˆ·æ˜ å°„çš„ç³»ç»Ÿæœ¬åœ°ç”¨æˆ·çš„å®¶ç›®å½•è®¾ç½®åˆ°/varç›®å½•ä¸­ï¼ˆå› ä¸ºè¯¥ç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ç»å¸¸å‘ç”Ÿæ”¹å˜çš„æ•°æ®ï¼‰ï¼Œå¹¶ä¸”ä¸ºäº†å®‰å…¨èµ·è§æŠŠè¿™ä¸ªç³»ç»Ÿæœ¬åœ°ç”¨æˆ·çš„ç»ˆç«¯è®¾ç½®æˆä¸å…è®¸ç™»é™†ï¼Œè¿™ä¸ä¼šå½±å“è™šæ‹Ÿç”¨æˆ·çš„ä½¿ç”¨ï¼Œè¿˜å¯ä»¥æœ‰æ•ˆé¿å…éª‡å®¢é€šè¿‡è¯¥ç”¨æˆ·ç™»é™†åˆ°æœåŠ¡å™¨ä¸»æœºä¸Šé¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd -d /var/ftproot -s /sbin/nologin virtual</span><br><span class="line">ls -ld /var/ftproot/</span><br><span class="line">chmod -Rf 755 /var/ftproot/</span><br></pre></td></tr></table></figure>
<p>ç¬¬3æ­¥ï¼šå»ºç«‹ç”¨äºæ”¯æŒè™šæ‹Ÿç”¨æˆ·çš„PAMè®¤è¯æ–‡ä»¶ï¼ŒPAMå¯æ’æ‹”è®¤è¯æ¨¡å—(Pluggable Authentication Modules)æ˜¯ä¸€ç§è®¤è¯æœºåˆ¶ï¼Œé€šè¿‡ä¸€äº›åŠ¨æ€é“¾æ¥åº“å’Œç»Ÿä¸€çš„APIæŠŠç³»ç»Ÿæä¾›çš„æœåŠ¡ä¸è®¤è¯æ–¹å¼åˆ†å¼€ï¼Œä½¿å¾—ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æ ¹æ®éœ€æ±‚çµæ´»çš„è°ƒæ•´æœåŠ¡ç¨‹åºçš„ä¸åŒè®¤è¯æ–¹å¼ã€‚é€šä¿—æ¥è®²PAMæ˜¯ä¸€ç»„å®‰å…¨æœºåˆ¶çš„æ¨¡å—(æ’ä»¶)ï¼Œè®©ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥è½»æ˜“çš„è°ƒæ•´æœåŠ¡ç¨‹åºçš„è®¤è¯æ–¹å¼ï¼Œè€Œå¯ä»¥ä¸å¿…å¯¹åº”ç”¨ç¨‹åºåšä»»ä½•çš„ä¿®æ”¹ï¼Œæ˜“ç”¨æ€§å¾ˆå¼ºã€‚PAMé‡‡å–äº†åˆ†å±‚è®¾è®¡çš„æ€æƒ³â€”â€”åº”ç”¨ç¨‹åºå±‚ã€åº”ç”¨æ¥å£å±‚ã€é‰´åˆ«æ¨¡å—å±‚ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªç”¨äºè™šæ‹Ÿç”¨æˆ·éªŒè¯çš„PAMæ–‡ä»¶æ›¿æ¢æ‰åŸå§‹çš„PAMæ–‡ä»¶ï¼Œå…¶ä¸­PAMæ–‡ä»¶å†…çš„db=å‚æ•°ä¸ºåˆšåˆšç”¨db_loadç”Ÿæˆå‡ºçš„è´¦æˆ·å¯†ç æ•°æ®åº“æ–‡ä»¶çš„è·¯å¾„ï¼Œä½†ä¸ç”¨å†™åç¼€ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/pam.d/vsftpd.vu</span><br><span class="line">auth       required     pam_userdb.so db=/etc/vsftpd/vuser</span><br><span class="line">account    required     pam_userdb.so db=/etc/vsftpd/vuser</span><br></pre></td></tr></table></figure>
<p>ç¬¬4æ­¥ï¼šåœ¨vsftpdæœåŠ¡ç¨‹åºä¸»é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹PAMæ”¯æŒæ–‡ä»¶ï¼ŒPAM APIä½œä¸ºåº”ç”¨ç¨‹åºå±‚ä¸é‰´åˆ«æ¨¡å—å±‚çš„è¿æ¥çº½å¸¦ï¼Œè®©åº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®éœ€æ±‚çµæ´»çš„åœ¨å…¶ä¸­æ’å…¥æ‰€éœ€çš„é‰´åˆ«åŠŸèƒ½æ¨¡å—ï¼Œå½“åº”ç”¨ç¨‹åºéœ€è¦PAMè®¤è¯æ—¶ï¼Œä¸€èˆ¬åœ¨åº”ç”¨ç¨‹åºä¸­å®šä¹‰è´Ÿè´£å…¶è®¤è¯çš„PAMé…ç½®æ–‡ä»¶ï¼ŒçœŸæ­£çµæ´»çš„å®ç°äº†è®¤è¯åŠŸèƒ½ã€‚ä¾‹å¦‚åœ¨vsftpdæœåŠ¡ç¨‹åºä¸»é…ç½®æ–‡ä»¶ä¸­é»˜è®¤å°±å†™æœ‰å‚æ•°pam_service_name=vsftpdï¼Œè¡¨ç¤ºç™»å½•FTPæœåŠ¡å™¨æ—¶æ˜¯æ ¹æ®/etc/pam.d/vsftpdçš„æ–‡ä»¶å†…å®¹è¿›è¡Œå®‰å…¨è®¤è¯çš„ï¼Œç°åœ¨éœ€è¦åšçš„å°±æ˜¯æŠŠvsftpdä¸»é…ç½®æ–‡ä»¶ä¸­åŸå…ˆçš„PAMè®¤è¯æ–‡ä»¶vsftpdä¿®æ”¹æˆå’±ä»¬è‡ªå»ºçš„vsftpd.vuå³å¯ï¼Œéœ€è¦ä½¿ç”¨åˆ°çš„å‚æ•°åŠä»‹ç»æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>anonymous_enable=NO</td>
<td>ç¦æ­¢åŒ¿åå¼€æ”¾æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td>local_enable=YES</td>
<td>å…è®¸æœ¬åœ°ç”¨æˆ·æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td>guest_enable=YES</td>
<td>å¼€å¯è™šæ‹Ÿç”¨æˆ·æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td>guest_username=virtual</td>
<td>æŒ‡å®šè™šæ‹Ÿç”¨æˆ·å¸å·ã€‚</td>
</tr>
<tr>
<td>pam_service_name=vsftpd.vu</td>
<td>æŒ‡å®špamæ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>allow_writeable_chroot=YES</td>
<td>å…è®¸ç¦é”¢çš„FTPæ ¹ç›®å½•å¯å†™è€Œä¸æ‹’ç»ç”¨æˆ·ç™»å…¥è¯·æ±‚ã€‚</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br><span class="line">anonymous_enable=NO</span><br><span class="line">local_enable=YES</span><br><span class="line">guest_enable=YES</span><br><span class="line">guest_username=virtual</span><br><span class="line">allow_writeable_chroot=YES</span><br><span class="line">write_enable=YES</span><br><span class="line">local_umask=022</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=NO</span><br><span class="line">listen_ipv6=YES</span><br><span class="line">pam_service_name=vsftpd.vu</span><br><span class="line">userlist_enable=YES</span><br><span class="line">tcp_wrappers=YES</span><br></pre></td></tr></table></figure>
<p>ç¬¬5æ­¥ï¼šä¸ºè™šæ‹Ÿç”¨æˆ·è®¾ç½®ä¸åŒçš„æƒé™ï¼Œè™½ç„¶å¼ ä¸‰å’Œæå››ä¸¤ä¸ªå¸æˆ·éƒ½æ˜¯ç”¨äºFTPæœåŠ¡éªŒè¯çš„è™šæ‹Ÿå¸æˆ·ï¼Œä½†ä¹Ÿæƒ³åœ¨ä»–ä»¬ä¹‹é—´åŒºåˆ«å¯¹å¾…ã€‚æ¯”å¦‚åªå…è®¸å¼ ä¸‰ç”¨æˆ·èƒ½å¤Ÿä¸Šä¼ ã€åˆ›å»ºã€ä¿®æ”¹ã€æŸ¥çœ‹ã€åˆ é™¤æ–‡ä»¶ï¼Œè€Œæå››åªèƒ½æŸ¥çœ‹æ–‡ä»¶ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯å¯ä»¥è®©vsftpdæœåŠ¡ç¨‹åºå®ç°çš„ï¼Œå’±ä»¬åªéœ€è¦æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œåœ¨é‡Œé¢åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªä»¥å¼ ä¸‰å’Œæå››å‘½åçš„æ–‡ä»¶ï¼Œå…¶ä¸­åœ¨å¼ ä¸‰å‘½åçš„æ–‡ä»¶ä¸­å†™å…¥ç›¸å…³å…è®¸çš„æƒé™ï¼ˆä½¿ç”¨åŒ¿åç”¨æˆ·çš„å‚æ•°ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/vsftpd/vusers_dir/</span><br><span class="line">cd /etc/vsftpd/vusers_dir/</span><br><span class="line">touch lisi</span><br><span class="line"></span><br><span class="line">vim zhangsan</span><br><span class="line">anon_upload_enable=YES</span><br><span class="line">anon_mkdir_write_enable=YES</span><br><span class="line">anon_other_write_enable=YES</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†æ¬¡ä¿®æ”¹ä¸‹vsftpdä¸»é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ user_config_dirå‚æ•°æ¥å®šä¹‰è¿™ä¸¤ä¸ªè™šæ‹Ÿç”¨æˆ·ä¸åŒæƒé™çš„é…ç½®æ–‡ä»¶æ‰€å­˜æ”¾çš„è·¯å¾„å³å¯ï¼Œä¸ºäº†è®©åˆšåˆšé…ç½®çš„æœåŠ¡ç¨‹åºæ–°å‚æ•°ç«‹å³ç”Ÿæ•ˆï¼Œå’±ä»¬éœ€è¦æŠŠvsftpdå†æ¥é‡æ–°å¯åŠ¨ä¸€ä¸‹ï¼Œå¹¶åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br><span class="line">anonymous_enable=NO</span><br><span class="line">local_enable=YES</span><br><span class="line">guest_enable=YES</span><br><span class="line">guest_username=virtual</span><br><span class="line">allow_writeable_chroot=YES</span><br><span class="line">write_enable=YES</span><br><span class="line">local_umask=022</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=NO</span><br><span class="line">listen_ipv6=YES</span><br><span class="line">pam_service_name=vsftpd.vu</span><br><span class="line">userlist_enable=YES</span><br><span class="line">tcp_wrappers=YES</span><br><span class="line">user_config_dir=/etc/vsftpd/vusers_dir</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart vsftpd</span><br><span class="line">systemctl enable vsftpd</span><br></pre></td></tr></table></figure>
<p>ç¬¬6æ­¥ï¼šè®¾ç½®SELinuxåŸŸå…è®¸ç­–ç•¥åå°è¯•ä½¿ç”¨è™šæ‹Ÿç”¨æˆ·æ¨¡å¼ç™»é™†FTPæœåŠ¡å™¨ï¼ŒåŒå­¦ä»¬æœ‰äº†åˆšåˆšä¸¤ä¸ªéªŒè¯æ¨¡å¼çš„é…ç½®ç»éªŒåä¸€å®šèƒ½çŒœåˆ°SELinuxä¼šç»§ç»­æ¥â€œæ£ä¹±â€ï¼Œæ‰€ä»¥å…ˆæŒ‰ç…§åˆšåˆšçš„æ­¥éª¤å¼€å¯SELinuxåŸŸçš„å…è®¸ç­–ç•¥å§ï¼Œä»¥å…å†æ¬¡å‡ºç°ç±»ä¼¼åˆ›å»ºç›®å½•çš„æ“ä½œå¤±è´¥çš„æ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getsebool -a | grep ftp</span><br><span class="line">setsebool -P ftpd_full_access=on</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ä¸ä»…èƒ½å¤Ÿä½¿ç”¨è™šæ‹Ÿç”¨æˆ·æ¨¡å¼ç™»é™†åˆ°FTPæœåŠ¡å™¨ä¸­äº†ï¼Œè¿˜å¯ä»¥åˆ†åˆ«ä½¿ç”¨å¼ ä¸‰å’Œæå››ç”¨æˆ·æ£€éªŒä¸‹ä»–ä»¬ä¸åŒçš„æƒé™ï¼Œæœ‰æ²¡æœ‰ç‰¹åˆ«å¥½ç©å‘¢~å½“ç„¶è¯»è€…ä»¬åœ¨å·¥ä½œä¸­è¦å­¦ä¼šçµæ´»çš„æ­é…å‚æ•°ï¼Œä¸è¦å®Œå…¨æŒ‰ç…§å®éªŒæ“ä½œè€Œè„±ç¦»å®¢æˆ·éœ€æ±‚ã€‚</p>
<h3 id="TFTPç®€å•æ–‡ä»¶ä¼ è¾“åè®®"><a href="#TFTPç®€å•æ–‡ä»¶ä¼ è¾“åè®®" class="headerlink" title="TFTPç®€å•æ–‡ä»¶ä¼ è¾“åè®®"></a>TFTPç®€å•æ–‡ä»¶ä¼ è¾“åè®®</h3><p>TFTPç®€å•æ–‡ä»¶ä¼ è¾“åè®®æ˜¯ä¸€ç§åŸºäºTCP/IPåè®®ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶ä¼ è¾“çš„åè®®â€”â€”å³æä¾›ä¸å¤æ‚ã€å¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ï¼Œäº¦å¯æŠŠå…¶å½“ä½œæ˜¯FTPåè®®çš„ç®€åŒ–ç‰ˆæœ¬ã€‚TFTPå¹¶ä¸èƒ½æä¾›ç±»ä¼¼äºFTPæœåŠ¡é‚£æ ·ä¸°å¯Œå¼ºå¤§çš„å‘½ä»¤æŒ‡ä»¤åŠŸèƒ½ï¼Œç”šè‡³ä¸èƒ½æä¾›ç›®å½•çš„éå†æµè§ˆï¼Œåœ¨å®‰å…¨æ€§æ–¹é¢ä¹Ÿä¸èƒ½æä¾›ç±»ä¼¼äºFTPæœåŠ¡çš„éªŒè¯åŠŸèƒ½ï¼Œè€Œä¸”ä¼ è¾“åŸºäºUDPåè®®çš„69ç«¯å£å·ï¼Œå¯¼è‡´æ–‡ä»¶çš„ä¼ è¾“è¿‡ç¨‹ä¹Ÿå¹¶ä¸åƒFTPåè®®é‚£æ ·å¯é ã€‚ä½†ç”±äºTFTPåè®®ä¸éœ€è¦å®¢æˆ·ç«¯çš„æƒé™éªŒè¯ï¼Œä¹Ÿä¸éœ€è¦å¤ªå¤šæ— å¿…è¦çš„ç³»ç»Ÿå’Œç½‘ç»œå¸¦å®½æŸè€—ï¼Œå› æ­¤å¯ä»¥æä¾›æ¯”FTPåè®®æ›´æœ‰æ•ˆç‡çš„æ–‡ä»¶ä¼ è¾“ä½“éªŒã€‚å’±ä»¬å¯ä»¥å®‰è£…ä¸€ä¸‹TFTPç®€å•æ–‡ä»¶ä¼ è¾“æœåŠ¡çš„è½¯ä»¶åŒ…æ¥åŠ¨æ‰‹ä½“éªŒä¸€ç•ªã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install tftp-server tftp</span><br></pre></td></tr></table></figure>
<p>åœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­TFTPæœåŠ¡æ˜¯åŸºäºxinetdæœåŠ¡ç¨‹åºæ¥ç®¡ç†çš„ï¼ŒxinetdæœåŠ¡å¯ä»¥ç”¨äºç®¡ç†éœ€è¦çš„Linuxç³»ç»ŸæœåŠ¡ï¼Œå¹¶ä¸”è¿˜æä¾›æœ‰äº†å¼ºå¤§çš„æ—¥å¿—åŠŸèƒ½ã€‚ç®€å•æ¥è¯´ï¼Œå½“å®‰è£…TFTPç®€å•æ–‡ä»¶ä¼ è¾“åè®®çš„è½¯ä»¶åŒ…åï¼Œè¿˜éœ€è¦åœ¨xinetdæœåŠ¡ç¨‹åºä¸­å¼€å¯ä¸€ä¸‹ï¼ŒæŠŠé»˜è®¤çš„ç¦ç”¨(disable)å‚æ•°ä¿®æ”¹ä¸ºnoã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/xinetd.d/tftp</span><br><span class="line">service tftp</span><br><span class="line">&#123;</span><br><span class="line">        socket_type             = dgram</span><br><span class="line">        protocol                = udp</span><br><span class="line">        wait                    = yes</span><br><span class="line">        user                    = root</span><br><span class="line">        server                  = /usr/sbin/in.tftpd</span><br><span class="line">        server_args             = -s /var/lib/tftpboot</span><br><span class="line">        disable                 = no</span><br><span class="line">        per_source              = 11</span><br><span class="line">        cps                     = 100 2</span><br><span class="line">        flags                   = IPv4</span><br></pre></td></tr></table></figure>
<p>é‡å¯xinetdæœåŠ¡å¹¶æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼Œæœ‰äº›ç³»ç»Ÿçš„é˜²ç«å¢™é»˜è®¤æ²¡æœ‰å…è®¸UDPåè®®çš„69ç«¯å£ï¼Œå› æ­¤å†æ‰‹åŠ¨çš„å°†å…¶ç«¯å£å·åŠ å…¥åˆ°å…è®¸ç­–ç•¥ä¸­å§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é‡å¯xinetd</span></span><br><span class="line">systemctl restart xinetd</span><br><span class="line">systemctl <span class="built_in">enable</span> xinetd</span><br><span class="line"><span class="comment">#å¼€å¯é˜²ç«å¢™udp69ç«¯å£</span></span><br><span class="line">firewall-cmd --permanent --add-port=69/udp</span><br><span class="line">success</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<p>TFTPç®€å•æ–‡ä»¶ä¼ è¾“æœåŠ¡çš„æ ¹ç›®å½•åœ¨/var/lib/tftpbootï¼Œå› æ­¤å¯ä»¥ç”¨åˆšåˆšå®‰è£…å¥½çš„tftpå‘½ä»¤æ¥å°è¯•è·å–ä¸€ä¸‹æ–‡ä»¶ï¼Œäº²èº«ä½“éªŒä¸€ä¸‹TFTPå¸¦æ¥çš„è¶…ç®€å•æ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ã€‚</p>
<p>tftpå‘½ä»¤å¯ç”¨çš„å‚æ•°</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>?</td>
<td>å¸®åŠ©ä¿¡æ¯</td>
</tr>
<tr>
<td>put</td>
<td>ä¸Šä¼ æ–‡ä»¶</td>
</tr>
<tr>
<td>get</td>
<td>ä¸‹è½½æ–‡ä»¶</td>
</tr>
<tr>
<td>verbose</td>
<td>æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†ä¿¡æ¯</td>
</tr>
<tr>
<td>status</td>
<td>æ˜¾ç¤ºå½“å‰çš„çŠ¶æ€ä¿¡æ¯</td>
</tr>
<tr>
<td>binary</td>
<td>ä½¿ç”¨äºŒè¿›åˆ¶è¿›è¡Œä¼ è¾“</td>
</tr>
<tr>
<td>ascii</td>
<td>ä½¿ç”¨ASCIIç è¿›è¡Œä¼ è¾“</td>
</tr>
<tr>
<td>timeout</td>
<td>è®¾ç½®é‡ä¼ çš„è¶…æ—¶æ—¶é—´</td>
</tr>
<tr>
<td>quit</td>
<td>é€€å‡º</td>
</tr>
</tbody>
</table>
<h3 id="ä½¿ç”¨Sambaæˆ–NFSå®ç°æ–‡ä»¶å…±äº«"><a href="#ä½¿ç”¨Sambaæˆ–NFSå®ç°æ–‡ä»¶å…±äº«" class="headerlink" title="ä½¿ç”¨Sambaæˆ–NFSå®ç°æ–‡ä»¶å…±äº«"></a>ä½¿ç”¨Sambaæˆ–NFSå®ç°æ–‡ä»¶å…±äº«</h3><h4 id="SAMBAæ–‡ä»¶å…±äº«æœåŠ¡"><a href="#SAMBAæ–‡ä»¶å…±äº«æœåŠ¡" class="headerlink" title="SAMBAæ–‡ä»¶å…±äº«æœåŠ¡"></a>SAMBAæ–‡ä»¶å…±äº«æœåŠ¡</h4><p>åœ¨å‰é¢ä¸€ä¸ªç« èŠ‚å­¦ä¹ çš„FTPæ–‡ä»¶ä¼ è¾“æœåŠ¡ç¡®ç¡®å®å®è®©ä¸»æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶å˜å¾—éå¸¸æ–¹ä¾¿ï¼Œä½†FTPåè®®çš„æœ¬è´¨æ˜¯ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¸æ˜¯å…±äº«æ–‡ä»¶ï¼Œè¦æƒ³è®©å®¢æˆ·ç«¯èƒ½å¤Ÿç›´æ¥åœ¨æœåŠ¡ç«¯ä¸Šé¢ä¿®æ”¹æ–‡ä»¶å†…å®¹è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…ã€‚äºæ˜¯åœ¨1987å¹´æ—¶ï¼Œç”±å¾®è½¯å’Œè‹±ç‰¹å°”å…¬å¸å…±åŒåˆ¶è®¢äº†SMBæœåŠ¡å™¨é€šä¿¡åè®®(Server Messages Block)ï¼Œè¿™é¡¹æŠ€æœ¯çš„è¯ç”Ÿæ˜¯ä¸ºäº†è§£å†³å±€åŸŸç½‘å†…çš„æ–‡ä»¶æˆ–æ‰“å°æœºç­‰èµ„æºçš„å…±äº«æœåŠ¡é—®é¢˜ï¼Œè®©å¤šä¸ªä¸»æœºä¹‹é—´å…±äº«æ–‡ä»¶å˜æˆè¶Šæ¥è¶Šç®€å•ã€‚</p>
<p>åæ¥åˆ°äº†1991å¹´ï¼Œå½“å¹´è¿˜åœ¨è¯»å¤§å­¦çš„å­¦ç”ŸTridgwellä¸ºäº†è§£å†³Linuxä¸Windowsç³»ç»Ÿä¹‹é—´çš„æ–‡ä»¶å…±äº«é—®é¢˜ï¼Œä¾¿åŸºäºäº†è¿™é¡¹SMBæŠ€æœ¯åè®®å¼€å‘å‡ºäº†SMBserverè¿™ä¸€æ¬¾æœåŠ¡ç¨‹åºï¼ŒSMBserveræœåŠ¡ç¨‹åºæ˜¯ä¸€æ¬¾åŸºäºSMBåè®®å¹¶ç”±æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç»„æˆçš„å¼€æºæ–‡ä»¶å…±äº«è½¯ä»¶ï¼Œé€šè¿‡éå¸¸ç®€å•çš„é…ç½®å°±èƒ½å¤Ÿå®ç°Linuxç³»ç»Ÿä¸Windowsç³»ç»Ÿä¹‹é—´çš„æ–‡ä»¶å…±äº«å·¥ä½œã€‚å½“æ—¶è¿˜åœ¨ä¸Šå­¦çš„Tridgwellæƒ³è¦æŠŠè¿™æ¬¾SMBServerè½¯ä»¶æ³¨å†Œæˆä¸ºå•†æ ‡ï¼Œä½†å´è¢«å•†æ ‡å±€ä»¥SMBæ˜¯æ²¡æœ‰æ„ä¹‰çš„å­—ç¬¦è€Œæ‹’ç»äº†ä»–çš„ç”³è¯·ï¼Œç»è¿‡Tridgwellä¸æ–­çš„ç¿»çœ‹è¯å…¸ï¼Œçªç„¶çœ‹åˆ°ä¸€ä¸ªæ‹‰ä¸èˆè¹ˆçš„åå­—â€”â€”SAMBAï¼Œå¦‚å›¾12-1æ‰€ç¤ºï¼Œè¿™ä¸ªçƒ­æƒ…æ´‹æº¢çš„èˆè¹ˆåå­—ä¸­åˆæ°å¥½åŒ…å«äº†SMB(SAMBA)ï¼Œäºæ˜¯è¿™ä¾¿æ˜¯SambaæœåŠ¡ç¨‹åºåå­—çš„ç”±æ¥ï¼Œç°åœ¨å·²ç»æˆä¸ºäº†Linuxç³»ç»Ÿä¸Windowsç³»ç»Ÿä¹‹é—´å…±äº«æ–‡ä»¶çš„æœ€ä½³é€‰æ‹©ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install samba</span><br></pre></td></tr></table></figure>
<p>ç”±äºè¿™æ¬¡é…ç½®æ–‡ä»¶ä¸­çš„æ³¨é‡Šä¿¡æ¯è¡Œå®åœ¨å¤ªå¤šï¼Œä¸ä¾¿äºåˆ†æé‡Œé¢çš„é‡è¦å‚æ•°ï¼Œå› æ­¤å’±ä»¬å¯ä»¥å…ˆæŠŠé…ç½®æ–‡ä»¶æ”¹ä¸ªåå­—ï¼Œç„¶åä½¿ç”¨catå‘½ä»¤è¯»å…¥ä¸»é…ç½®æ–‡ä»¶å†…å®¹åé€šè¿‡grepå‘½ä»¤-vå‚æ•°ï¼ˆåå‘é€‰æ‹©ï¼‰åˆ†åˆ«å»æ‰æ‰€æœ‰ä»¥#ï¼ˆäº•å·ï¼‰å’Œ;ï¼ˆåˆ†å·ï¼‰å¼€å¤´çš„æ³¨é‡Šä¿¡æ¯è¡Œï¼Œå¯¹äºå‰©ä½™çš„ç©ºç™½è¡Œå¯ä»¥å†ç”¨â€^$â€æ¥è¡¨ç¤ºå¹¶åé€‰è¿‡æ»¤ï¼Œæœ€åæŠŠè¿‡æ»¤åçš„å¯ç”¨å‚æ•°ä¿¡æ¯é€šè¿‡é‡å®šå‘ç¬¦è¦†ç›–å†™å…¥åˆ°åŸå§‹æ–‡ä»¶åç§°ä¸­å³å¯ã€‚sambaæœåŠ¡ç¨‹åºè¿‡æ»¤åçš„å‚æ•°å¹¶ä¸å¤æ‚ï¼Œä¸ºäº†æ›´æ–¹ä¾¿åŒå­¦ä»¬æŸ¥é˜…å‚æ•°åŠŸèƒ½ï¼Œåˆ˜é„è€å¸ˆåœ¨é‡è¦å‚æ•°è¡Œåé¢éƒ½å†™ä¸Šäº†æ³¨é‡Šè¯´æ˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/samba/smb.conf /etc/samba/smb.conf.bak</span><br><span class="line">cat /etc/samba/smb.conf.bak | grep -v &quot;#&quot; | grep -v &quot;;&quot; | grep -v &quot;^$&quot; &gt; /etc/samba/smb.conf</span><br><span class="line">cat /etc/samba/smb.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>[global]        #å…¨å±€å‚æ•°ã€‚<br>workgroup = MYGROUP    #å·¥ä½œç»„åç§°ã€‚<br>server string = Samba Server Version %v    #æœåŠ¡å™¨ä»‹ç»ä¿¡æ¯,å‚æ•°%vä¸ºæ˜¾ç¤ºSMBç‰ˆæœ¬å·ã€‚<br>log file = /var/log/samba/log.%m    #å®šä¹‰æ—¥å¿—æ–‡ä»¶å­˜æ”¾ä½ç½®ä¸åç§°ï¼Œå‚æ•°%mä¸ºæ¥è®¿çš„ä¸»æœºåã€‚<br>max log size = 50    #å®šä¹‰æ—¥å¿—æ–‡ä»¶æœ€å¤§å®¹é‡ä¸º50Kbã€‚<br>security = user    #å®‰å…¨éªŒè¯çš„æ–¹å¼,æ€»å…±æœ‰4ç§ã€‚</p>
<p>#share:æ¥è®¿ä¸»æœºæ— éœ€éªŒè¯å£ä»¤ï¼Œæ›´åŠ æ–¹ä¾¿ï¼Œä½†å®‰å…¨æ€§å¾ˆå·®ã€‚</p>
<p>#user:éœ€ç”±SMBæœåŠ¡éªŒè¯æ¥è®¿ä¸»æœºæä¾›çš„å£ä»¤åæ‰å¯å»ºç«‹è®¿é—®,æ›´åŠ çš„å®‰å…¨ã€‚</p>
<p>#server:ä½¿ç”¨ç‹¬ç«‹çš„è¿œç¨‹ä¸»æœºéªŒè¯æ¥è®¿ä¸»æœºæä¾›çš„å£ä»¤ï¼ˆé›†ä¸­ç®¡ç†å¸å·ï¼‰ã€‚</p>
<p>#domain:ä½¿ç”¨PDCæ¥å®ŒæˆéªŒè¯<br>passdb backend = tdbsam    #å®šä¹‰ç”¨æˆ·åå°çš„ç±»å‹ï¼Œå…±æœ‰3ç§ã€‚</p>
<p>#smbpasswd:ä½¿ç”¨SMBæœåŠ¡çš„smbpasswdå‘½ä»¤ç»™ç³»ç»Ÿç”¨æˆ·è®¾ç½®SMBå¯†ç ã€‚</p>
<p>#tdbsam:åˆ›å»ºæ•°æ®åº“æ–‡ä»¶å¹¶ä½¿ç”¨pdbeditå»ºç«‹SMBç‹¬ç«‹çš„ç”¨æˆ·ã€‚</p>
<p>#ldapsam:åŸºäºLDAPæœåŠ¡è¿›è¡Œå¸æˆ·éªŒè¯ã€‚<br>load printers = yes    #è®¾ç½®æ˜¯å¦å½“SambaæœåŠ¡å¯åŠ¨æ—¶å…±äº«æ‰“å°æœºè®¾å¤‡ã€‚<br>cups options = raw    #æ‰“å°æœºçš„é€‰é¡¹<br>[homes]        #å…±äº«å‚æ•°<br>comment = Home Directories    #æè¿°ä¿¡æ¯<br>browseable = no    #æŒ‡å®šå…±äº«æ˜¯å¦åœ¨â€œç½‘ä¸Šé‚»å±…â€ä¸­å¯è§ã€‚<br>writable = yes    #å®šä¹‰æ˜¯å¦å¯å†™å…¥æ“ä½œï¼Œä¸â€read onlyâ€ç›¸åã€‚<br>[printers]        #æ‰“å°æœºå…±äº«å‚æ•°<br>comment = All Printers<br>path = /var/spool/samba    #å…±äº«æ–‡ä»¶çš„å®é™…è·¯å¾„(é‡è¦)ã€‚<br>browseable = no<br>guest ok = no    #æ˜¯å¦æ‰€æœ‰äººå¯è§ï¼Œç­‰åŒäºâ€publicâ€å‚æ•°ã€‚<br>writable = no<br>printable = yes<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### é…ç½®å…±äº«èµ„æº</span><br><span class="line">SambaæœåŠ¡ç¨‹åºçš„é…ç½®æ–‡ä»¶ä¸å‰é¢å­¦ä¹ è¿‡çš„ApacheæœåŠ¡å¾ˆç›¸ä¼¼ï¼ŒåŒ…æ‹¬æœ‰å…¨å±€é…ç½®å‚æ•°å’Œå±€éƒ¨é…ç½®å‚æ•°ã€‚å…¨å±€é…ç½®å‚æ•°æ˜¯SambaæœåŠ¡ç¨‹åºå¯¹æ•´ä½“å…±äº«ç¯å¢ƒçš„è®¾ç½®ï¼Œæ˜¯å¯¹é‡Œé¢æ¯ä¸ªç‹¬ç«‹çš„å…±äº«èµ„æºéƒ½ç”Ÿæ•ˆçš„å‚æ•°ï¼Œè€ŒåŒºåŸŸé…ç½®å‚æ•°æŒ‡çš„åˆ™æ˜¯ä¸€ä¸ªä¸ªç‹¬ç«‹å¯ç”¨çš„å…±äº«èµ„æºï¼Œå…±äº«èµ„æºçš„åˆ›å»ºæ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦æŒ‰ç…§ä¸‹é¢å‚æ•°æ ¼å¼å†™å…¥é…ç½®æ–‡ä»¶åé‡å¯æœåŠ¡ç¨‹åºå³å¯~</span><br></pre></td></tr></table></figure></p>
<p>å‚æ•°    ä½œç”¨<br>[linuxprobe]    å…±äº«åç§°ä¸ºlinuxprobe<br>comment = Do not arbitrarily modify the database file    è­¦å‘Šç”¨æˆ·ä¸è¦éšæ„ä¿®æ”¹æ•°æ®åº“<br>path = /home/database    å…±äº«æ–‡ä»¶å¤¹åœ¨/home/database<br>public = no    å…³é—­æ‰€æœ‰äººå¯è§<br>writable = yes    å…è®¸å†™å…¥æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šåˆ›å»ºç”¨äºè®¿é—®å…±äº«èµ„æºçš„å¸æˆ·ä¿¡æ¯ï¼Œåœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­SambaæœåŠ¡ç¨‹åºé»˜è®¤ä½¿ç”¨çš„æ˜¯ç”¨æˆ·å£ä»¤è®¤è¯æ¨¡å¼ï¼ˆuserï¼‰ï¼Œå¯ä»¥åšåˆ°ä»…è®©æœ‰å¯†ç ã€å—ä¿¡ä»»çš„ç”¨æˆ·è®¿é—®å…±äº«èµ„æºï¼ŒéªŒè¯çš„è¿‡ç¨‹ä¹Ÿååˆ†çš„ç®€å•ã€‚ä¸è¿‡å’±ä»¬éœ€è¦ä¸ºSambaæœåŠ¡ç¨‹åºå»ºç«‹ç‹¬ç«‹çš„ç”¨æˆ·å¯†ç æ•°æ®åº“åæ‰èƒ½ç™»é™†ä½¿ç”¨ï¼Œå¦å¤–SambaæœåŠ¡çš„æ•°æ®åº“è¦æ±‚å¸å·å¿…é¡»æ˜¯å½“å‰ç³»ç»Ÿä¸­å·²ç»å­˜åœ¨çš„ç”¨æˆ·ï¼Œå¦åˆ™æ—¥ååˆ›å»ºæ–‡ä»¶å°†äº§ç”Ÿæƒé™å±æ€§çš„æ··ä¹±é”™è¯¯ã€‚</span><br><span class="line"></span><br><span class="line">pdbeditå‘½ä»¤ç”¨äºç®¡ç†SMBæœåŠ¡çš„å¸æˆ·ä¿¡æ¯æ•°æ®åº“ï¼Œæ ¼å¼ä¸ºï¼šâ€œpdbedit [é€‰é¡¹] å¸æˆ·â€ï¼Œç¬¬ä¸€æ¬¡æŠŠç”¨æˆ·ä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“æ—¶éœ€è¦ä½¿ç”¨-aå‚æ•°ï¼Œä»¥åä¿®æ”¹ç”¨æˆ·å¯†ç ã€åˆ é™¤ç”¨æˆ·ç­‰ç­‰æ“ä½œå°±ä¸å†éœ€è¦äº†ï¼š</span><br><span class="line"></span><br><span class="line">|å‚æ•°	ä½œç”¨|</span><br><span class="line">|:|</span><br><span class="line">|-a ç”¨æˆ·å|å»ºç«‹Sambaç”¨æˆ·|</span><br><span class="line">|-x ç”¨æˆ·å|åˆ é™¤Sambaç”¨æˆ·|</span><br><span class="line">|-L|åˆ—å‡ºç”¨æˆ·åˆ—è¡¨|</span><br><span class="line">|-Lv|åˆ—å‡ºç”¨æˆ·è¯¦ç»†ä¿¡æ¯çš„åˆ—è¡¨|</span><br><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šåˆ›å»ºç”¨äºå…±äº«èµ„æºçš„æ–‡ä»¶ç›®å½•ï¼Œä¸å…‰è¦è€ƒè™‘åˆ°æ–‡ä»¶è®¿é—®å’Œå†™å…¥æƒé™çš„é—®é¢˜ï¼Œè€Œä¸”ç”±äº/homeç›®å½•æ˜¯ç³»ç»Ÿä¸­æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•ï¼Œå› æ­¤è¿˜éœ€è¦è€ƒè™‘åˆ°æ–‡ä»¶ä¸Šé¢SELinuxå®‰å…¨ä¸Šä¸‹æ–‡çš„ç›‘ç®¡æ§åˆ¶ã€‚å®é™…ä¸Šåˆšåˆšè¿‡æ»¤æ‰çš„æ³¨é‡Šä¿¡æ¯ä¸­å°±æé†’æœ‰äº†ç›¸å…³çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ç­–ç•¥çš„è¯´æ˜ï¼Œå’±ä»¬åªéœ€è¦æŒ‰ç…§ç»™çš„å€¼è¿›è¡Œä¿®æ”¹å³å¯ï¼Œæœ€åå†è®°å¾—æ‰§è¡Œä¸‹restoreconå‘½ä»¤è®©ç›®å½•æ–‡ä»¶ä¸Šé¢æ–°è®¾ç½®çš„SELinuxå®‰å…¨ä¸Šä¸‹æ–‡ç«‹å³ç”Ÿæ•ˆä¸‹å“¦~</span><br></pre></td></tr></table></figure></p>
<p>mkdir /home/database<br>chown -Rf linuxprobe:linuxprobe /home/database<br>semanage fcontext -a -t samba_share_t /home/database<br>restorecon -Rv /home/database<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬3æ­¥ï¼šè®¾ç½®SELinuxæœåŠ¡å¯¹Sambaç¨‹åºè®¿é—®ä¸ªäººç”¨æˆ·å®¶ç›®å½•çš„å…è®¸ç­–ç•¥ï¼Œè¿‡æ»¤ç­›é€‰å‡ºæ‰€æœ‰ä¸sambaæœåŠ¡ç¨‹åºç›¸å…³çš„SELinuxåŸŸç­–ç•¥ï¼Œæ ¹æ®ç­–ç•¥çš„åç§°å’Œç»éªŒé€‰æ‹©å‡ºåˆé€‚çš„ç­–ç•¥æ¡ç›®è¿›è¡Œå¼€å¯å³å¯ï¼š</span><br></pre></td></tr></table></figure></p>
<p>getsebool -a | grep samba<br>setsebool -P samba_enable_home_dirs on<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4æ­¥ï¼šåœ¨SambaæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ä¸­æ ¹æ®å‰é¢æ‰€æåˆ°çš„æ ¼å¼å†™å…¥å…±äº«ä¿¡æ¯ï¼Œåœ¨åŸå§‹çš„é…ç½®æ–‡ä»¶ä¸­[homes]å‚æ•°ä¸ºå…±äº«è¯¥ç”¨æˆ·çš„å®¶ç›®å½•æ•°æ®ï¼Œ[printers]å‚æ•°ä¸ºå…±äº«æ‰“å°æœºè®¾å¤‡ï¼Œè¿™ä¸¤é¡¹å¦‚æœæ‚¨ä»Šåçš„å·¥ä½œä¸­ä¸éœ€è¦ï¼Œå¯ä»¥æ‰‹åŠ¨çš„åˆ é™¤æ‰ï¼Œæ²¡æœ‰é—®é¢˜çš„~</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/samba/smb.conf<br>[global]<br> workgroup = MYGROUP<br> server string = Samba Server Version %v<br> log file = /var/log/samba/log.%m<br> max log size = 50<br> security = user<br> passdb backend = tdbsam<br> load printers = yes<br> cups options = raw<br>[database]<br> comment = Do not arbitrarily modify the database file<br> path = /home/database<br> public = no<br> writable = yes<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">ç¬¬5æ­¥ï¼šæŠŠä¸Šè¿°æ­¥éª¤å®Œæˆåä¹Ÿå°±åŸºæœ¬å®Œæˆäº†SambaæœåŠ¡ç¨‹åºçš„é…ç½®å·¥ä½œäº†ï¼ŒSambaæœåŠ¡ç¨‹åºå«åšsmbï¼Œå› æ­¤é‡å¯ä¸€ä¸‹smbæœåŠ¡ï¼Œæ¸…ç©ºä¸‹iptablesé˜²ç«å¢™å°±å¯ä»¥æ¥æ£€éªŒé…ç½®æ•ˆæœäº†ï¼š</span><br></pre></td></tr></table></figure></p>
<p>systemctl restart smb<br>systemctl enable smb<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### WindowsæŒ‚è½½å…±äº«</span><br><span class="line">##### LinuxæŒ‚è½½å…±äº«</span><br><span class="line">åˆšåˆšå¯èƒ½ä¸å°å¿ƒè®©å¤§å®¶äº§ç”Ÿäº†ä¸€äº›å°è¯¯è§£ï¼Œè®¤ä¸ºSambaæœåŠ¡åªæ˜¯ä¸ºäº†è§£å†³Linuxç³»ç»Ÿå’ŒWindowsç³»ç»Ÿçš„èµ„æºå…±äº«é—®é¢˜è€Œè®¾è®¡çš„ï¼Œå…¶å®SambaæœåŠ¡ç¨‹åºè¿˜å¯ä»¥å®ç°Linuxç³»ç»Ÿä¹‹é—´çš„æ–‡ä»¶å…±äº«å“¦ï¼Œåœ¨å®¢æˆ·ç«¯å®‰è£…ä¸€ä¸‹å…±äº«èµ„æºçš„æ”¯æŒè½¯ä»¶åŒ…ï¼ˆcifs-utilsï¼‰ï¼š</span><br></pre></td></tr></table></figure></p>
<p>yum install cifs-utils<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åœ¨Linuxç³»ç»Ÿå®¢æˆ·ç«¯ä¸Šé¢ä¾æ¬¡æŒ‰ç…§SambaæœåŠ¡ç”¨æˆ·åã€å¯†ç ã€å…±äº«åŸŸçš„é¡ºåºå†™å…¥åˆ°ä¸€ä¸ªè®¤è¯æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸ºäº†ä¿è¯ä¸è¢«å…¶ä»–äººéšæ„çœ‹åˆ°ï¼Œæœ€åå†æŠŠå…¶æƒé™ä¿®æ”¹ä¸ºä»…rootè¶…çº§ç”¨æˆ·æ‰èƒ½å¤Ÿè¯»å†™</span><br></pre></td></tr></table></figure></p>
<p>vim auth.smb<br>username=linuxprobe<br>password=redhat<br>domain=MYGROUP</p>
<p>chmod -Rf 600 auth.smb<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å®Œæˆä¸Šè¿°æ­¥éª¤åå°±å¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸Šé¢åˆ›å»ºä¸€ä¸ªç”¨äºæŒ‚è½½SambaæœåŠ¡å…±äº«èµ„æºçš„ç›®å½•æ–‡ä»¶ï¼Œå¹¶æŠŠæŒ‚è½½ä¿¡æ¯å†™å…¥åˆ°/etc/fstabæ–‡ä»¶ä¸­ï¼Œè¿™æ ·ä¿è¯è¿œç¨‹å…±äº«æŒ‚è½½ä¿¡æ¯åœ¨æœåŠ¡å™¨é‡å¯åä¾ç„¶ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure></p>
<p>mkdir /database<br>vim /etc/fstab<br>//192.168.10.10/database /database cifs credentials=/root/auth.smb 0 0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### NFSç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">å¦‚æœè§‰å¾—SambaæœåŠ¡ç¨‹åºé…ç½®èµ·æ¥å®åœ¨å¾ˆéº»çƒ¦ï¼Œè€Œä¸”æ°å·§éœ€è¦å…±äº«æ–‡ä»¶çš„ä¸»æœºéƒ½æ˜¯Linuxç³»ç»Ÿï¼Œé‚£ä¹ˆåˆ˜é„è€å¸ˆéå¸¸æ¨èå¤§å®¶ä½¿ç”¨NFSæœåŠ¡æ¥å…±äº«æ–‡ä»¶ç»™å®¢æˆ·ç«¯ï¼ŒNFSç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ(Network Files System)æ˜¯ä¸€ä¸ªèƒ½å¤ŸæŠŠLinuxç³»ç»Ÿçš„è¿œç¨‹æ–‡ä»¶å…±äº«èµ„æºæŒ‚è½½åˆ°æœ¬åœ°ç›®å½•çš„æœåŠ¡ï¼ŒNFSæ–‡ä»¶ç³»ç»Ÿåè®®å…è®¸ç½‘ç»œä¸­çš„ä¸»æœºé€šè¿‡TCP/IPåè®®è¿›è¡Œèµ„æºå…±äº«ï¼Œèƒ½å¤Ÿè®©Linuxå®¢æˆ·ç«¯åƒä½¿ç”¨æœ¬åœ°èµ„æºä¸€æ ·è¯»å†™è¿œç«¯NFSæœåŠ¡ç«¯çš„æ–‡ä»¶å†…å®¹ã€‚å¦å¤–ç”±äºNFSç½‘ç»œæ–‡ä»¶ç³»ç»ŸæœåŠ¡å·²ç»åœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­é»˜è®¤å®‰è£…å¥½ï¼Œé…ç½®æ­¥éª¤ä¹Ÿååˆ†çš„ç®€å•ï¼Œå› æ­¤åˆ˜é„è€å¸ˆæœ‰æ—¶è®²è¯¾ä¼šå¼€ç©ç¬‘è¯´NFSæ˜¯need for speedï¼Œæ¥ä¸‹æ¥ä¸å¤§å®¶åˆ†äº«ä¸‹NFSæœåŠ¡é…ç½®èµ·æ¥çš„çˆ½å¿«ä½“éªŒ~è¯·å¤§å®¶å…ˆè‡ªè¡Œç”¨yumè½¯ä»¶ä»“åº“æ£€æŸ¥ç¡®è®¤ä¸‹NFSè½¯ä»¶åŒ…æ˜¯å¦å·²ç»å®‰è£…å¥½å§</span><br></pre></td></tr></table></figure></p>
<p>yum -y install nfs-utils<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">###### é…ç½®NFSæœåŠ¡ç«¯</span><br><span class="line">åœ¨NFSæœåŠ¡ç«¯ä¸»æœºä¸Šé¢å»ºç«‹ç”¨äºNFSæ–‡ä»¶å…±äº«çš„ç›®å½•ï¼Œè®¾ç½®è¾ƒå¤§çš„æƒé™æ¥ä¿è¯å…¶ä»–äººä¹Ÿä¸€æ ·æœ‰å†™å…¥çš„æƒé™</span><br></pre></td></tr></table></figure></p>
<p>mkdir /nfsfile<br>chmod -Rf 777 /nfsfile<br>echo â€œwelcome to linuxprobe.comâ€ &gt; /nfsfile/readme<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NFSæœåŠ¡ç¨‹åºçš„é…ç½®æ–‡ä»¶ä¸º/etc/exportsï¼Œé»˜è®¤é‡Œé¢æ˜¯ç©ºç™½æ²¡æœ‰å†…å®¹çš„ï¼Œå¯ä»¥æŒ‰ç…§å…±äº«ç›®å½•çš„è·¯å¾„ å…è®¸è®¿é—®çš„NFSèµ„æºå®¢æˆ·ç«¯ï¼ˆå…±äº«æƒé™å‚æ•°ï¼‰çš„æ ¼å¼æ¥å†™å…¥å‚æ•°ï¼Œå®šä¹‰è¦å…±äº«çš„ç›®å½•ä¸ç›¸åº”çš„æƒé™ã€‚ä¾‹å¦‚æƒ³è¦æŠŠ/nfsfileç›®å½•å…±äº«ç»™æ‰€æœ‰å±äº192.168.10.0/24è¿™ä¸ªç½‘æ®µçš„ç”¨æˆ·ä¸»æœºï¼Œå¹¶ä¸”è®©è¿™äº›ç”¨æˆ·æ‹¥æœ‰è¯»å†™æƒé™ï¼Œè‡ªåŠ¨åŒæ­¥å†…å­˜æ•°æ®åˆ°æœ¬åœ°ç¡¬ç›˜ï¼Œä»¥åŠæŠŠå¯¹æ–¹rootè¶…çº§ç”¨æˆ·æ˜ å°„ä¸ºæœ¬åœ°çš„åŒ¿åç”¨æˆ·ç­‰ç­‰ç‰¹æ®Šæƒé™å‚æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ ¼å¼æ¥å†™å…¥é…ç½®æ–‡ä»¶ï¼š</span><br><span class="line"></span><br><span class="line">|å‚æ•°|ä½œç”¨|</span><br><span class="line">|:|</span><br><span class="line">|ro|åªè¯»é»˜è®¤|</span><br><span class="line">|rw|è¯»å†™æ¨¡å¼|</span><br><span class="line">|root_squash|å½“NFSå®¢æˆ·ç«¯ä½¿ç”¨rootç”¨æˆ·è®¿é—®æ—¶ï¼Œæ˜ å°„ä¸ºNFSæœåŠ¡ç«¯çš„åŒ¿åç”¨æˆ·ã€‚|</span><br><span class="line">|no_root_squash|å½“NFSå®¢æˆ·ç«¯ä½¿ç”¨rootç”¨æˆ·è®¿é—®æ—¶ï¼Œæ˜ å°„ä¸ºNFSæœåŠ¡ç«¯çš„rootç”¨æˆ·ã€‚|</span><br><span class="line">|all_squash|ä¸è®ºNFSå®¢æˆ·ç«¯ä½¿ç”¨ä»»ä½•å¸æˆ·ï¼Œå‡æ˜ å°„ä¸ºNFSæœåŠ¡ç«¯çš„åŒ¿åç”¨æˆ·ã€‚|</span><br><span class="line">|sync|åŒæ—¶å°†æ•°æ®å†™å…¥åˆ°å†…å­˜ä¸ç¡¬ç›˜ä¸­ï¼Œä¿è¯ä¸ä¸¢å¤±æ•°æ®ã€‚|</span><br><span class="line">|async|ä¼˜å…ˆå°†æ•°æ®ä¿å­˜åˆ°å†…å­˜ï¼Œç„¶åå†å†™å…¥ç¡¬ç›˜ï¼Œæ•ˆç‡æ›´é«˜ï¼Œä½†å¯èƒ½é€ æˆæ•°æ®ä¸¢å¤±ã€‚|</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/exports<br>/nfsfile 192.168.10.*(rw,sync,root_squash)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å¯åŠ¨è¿è¡ŒNFSå…±äº«æœåŠ¡ç¨‹åºï¼Œç”±äºNFSæœåŠ¡åœ¨æ–‡ä»¶å…±äº«è¿‡ç¨‹ä¸­æ˜¯ä¾èµ–RPCæœåŠ¡è¿›è¡Œå·¥ä½œäº†ï¼ŒRPCæœåŠ¡ç”¨äºæŠŠæœåŠ¡å™¨åœ°å€å’ŒæœåŠ¡ç«¯å£å·ç­‰ä¿¡æ¯é€šçŸ¥ç»™å®¢æˆ·ç«¯ï¼Œå› æ­¤è¦ä½¿ç”¨NFSå…±äº«æœåŠ¡çš„è¯ï¼Œé¡ºæ‰‹ä¹Ÿè¦æŠŠrpcbindæœåŠ¡ç¨‹åºå¯åŠ¨ï¼Œå¹¶ä¸”æŠŠè¿™ä¸¤ä¸ªæœåŠ¡ä¸€èµ·åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­å§</span><br></pre></td></tr></table></figure></p>
<p>systemctl restart rpcbind<br>systemctl enable rpcbind<br>systemctl start nfs-server<br>systemctl enable nfs-server<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">###### é…ç½®NFSå®¢æˆ·ç«¯</span><br><span class="line">é…ç½®NFSå®¢æˆ·ç«¯çš„æ­¥éª¤ä¹Ÿååˆ†ç®€å•ï¼Œé¦–å…ˆç”¨showmountå‘½ä»¤æŸ¥è¯¢NFSæœåŠ¡ç«¯çš„è¿œç¨‹å…±äº«ä¿¡æ¯ï¼Œè¾“å‡ºæ ¼å¼ä¸ºâ€œå…±äº«çš„ç›®å½•åç§° å…è®¸ä½¿ç”¨å®¢æˆ·ç«¯åœ°å€â€ï¼š</span><br><span class="line"></span><br><span class="line">|å‚æ•°|ä½œç”¨|</span><br><span class="line">|:|</span><br><span class="line">|-e|æ˜¾ç¤ºNFSæœåŠ¡ç«¯çš„å…±äº«åˆ—è¡¨|</span><br><span class="line">|-a|æ˜¾ç¤ºæœ¬æœºæŒ‚è½½NFSèµ„æºçš„æƒ…å†µ|</span><br><span class="line">|-v|æ˜¾ç¤ºç‰ˆæœ¬å·|</span><br></pre></td></tr></table></figure></p>
<p>showmount -e 192.168.10.10<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç„¶ååœ¨å®¢æˆ·ç«¯ç³»ç»Ÿä¸Šé¢åˆ›å»ºä¸€ä¸ªæŒ‚è½½ç›®å½•ï¼Œä½¿ç”¨mountå‘½ä»¤çš„-tå‚æ•°æŒ‡å®šæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹ï¼Œä»¥åŠåé¢å†™ä¸ŠæœåŠ¡ç«¯çš„IPåœ°å€ï¼Œå…±äº«å‡ºå»çš„ç›®å½•ä»¥åŠæŒ‚è½½åˆ°ç³»ç»Ÿæœ¬åœ°çš„ç›®å½•ã€‚</span><br></pre></td></tr></table></figure></p>
<p>mkdir /nfsfile<br>mount -t nfs 192.168.10.10:/nfsfile /nfsfile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æœ€åæŒ‚è½½æˆåŠŸåå°±åº”è¯¥èƒ½å¤Ÿé¡ºåˆ©æŸ¥çœ‹åˆ°åˆšåˆšå†™å…¥æ–‡ä»¶å†…å®¹äº†ï¼Œå½“ç„¶å¦‚æœåŒå­¦ä»¬å¸Œæœ›è¿œç¨‹NFSæ–‡ä»¶å…±äº«èƒ½ä¸€ç›´æœ‰æ•ˆï¼Œè¿˜å¯ä»¥å†™å…¥åˆ°fstabæ–‡ä»¶ä¸­</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/fstab<br>192.168.10.10:/nfsfile /nfsfile nfs defaults 0 0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### AutoFsè‡ªåŠ¨æŒ‚è½½æœåŠ¡</span><br><span class="line">ä¸è®ºå’±ä»¬æ˜¯æƒ³ä½¿ç”¨å‰é¢å­¦ä¹ çš„Sambaè¿˜æ˜¯NFSæœåŠ¡ï¼Œéƒ½è¦æŠŠæŒ‚è½½ä¿¡æ¯å†™å…¥åˆ°/etc/fstabä¸­ï¼Œè¿™æ ·è¿œç¨‹å…±äº«èµ„æºå°±ä¼šè‡ªåŠ¨çš„éšæœåŠ¡å™¨å¼€æœºè€ŒæŒ‚è½½ï¼Œè™½ç„¶è¿™æ ·ä¸€åŠ³æ°¸é€¸ç¡®å®å¾ˆæ–¹ä¾¿ï¼Œä½†å¦‚æœæŒ‚è½½çš„è¿œç¨‹èµ„æºå¾ˆå¤šçš„è¯ï¼Œæ¯•ç«Ÿä¼šæˆ–å¤šæˆ–å°‘æ¶ˆè€—ç€æœåŠ¡å™¨çš„ä¸€å®šç½‘ç»œå¸¦å®½å’ŒCPUè®¡ç®—æ€§èƒ½ã€‚å¦‚æœæŒ‚è½½åé•¿æœŸä¸å»ä½¿ç”¨è¿™äº›æœåŠ¡ï¼Œé‚£ä¹ˆæ— ç–‘è¿™ç¬”æŸè€—æ˜¯ç™½ç™½è¢«æµªè´¹æ‰äº†ï¼Œå½“ç„¶è¿˜ä¼šæœ‰åŒå­¦è¯´å¯ä»¥æ¯æ¬¡ä½¿ç”¨å‰éƒ½æ‰§è¡Œä¸‹mountå‘½ä»¤æ‰‹åŠ¨çš„æŒ‚è½½ä¸Šï¼Œè¿™è™½ç„¶æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä½†æ¯æ¬¡éƒ½è¦å»æŒ‚è½½ä¸€ä¸‹å†ä½¿ç”¨ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯åˆå¾ˆéº»çƒ¦å‘¢ï¼Ÿ</span><br><span class="line"></span><br><span class="line">AutoFsæœåŠ¡ç¨‹åºä¸Mountå‘½ä»¤ä¸åŒä¹‹å¤„åœ¨äºå®ƒæ˜¯ä¸€ç§å®ˆæŠ¤è¿›ç¨‹ï¼Œåªæœ‰æ£€æµ‹åˆ°ç”¨æˆ·è¯•å›¾è®¿é—®ä¸€ä¸ªå°šæœªæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿæ—¶æ‰è‡ªåŠ¨çš„æ£€æµ‹å¹¶æŒ‚è½½è¯¥æ–‡ä»¶ç³»ç»Ÿã€‚æ¢å¥è¯è¯´ï¼ŒæŠŠæŒ‚è½½ä¿¡æ¯å¡«å…¥/etc/fstabæ–‡ä»¶åç³»ç»Ÿå°†åœ¨æ¯æ¬¡å¼€æœºæ—¶éƒ½è‡ªåŠ¨æŠŠå…¶æŒ‚è½½ï¼Œè€Œè¿è¡ŒAutoFsæœåŠ¡ååˆ™æ˜¯å½“ç”¨æˆ·éœ€è¦ä½¿ç”¨è¯¥æ–‡ä»¶ç³»ç»Ÿäº†æ‰ä¼šåŠ¨æ€çš„æŒ‚è½½ï¼ŒèŠ‚çº¦æœåŠ¡å™¨çš„ç½‘ç»œä¸ç³»ç»Ÿèµ„æºã€‚</span><br></pre></td></tr></table></figure></p>
<p>yum install -y autofs<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç”Ÿäº§ç¯å¢ƒä¸­ä¸€èˆ¬éƒ½ä¼šåŒæ—¶ç®¡ç†ç€å¾ˆå¤šè®¾å¤‡çš„æŒ‚è½½å·¥ä½œï¼Œå¦‚æœæŠŠè¿™äº›è®¾å¤‡æŒ‚è½½ä¿¡æ¯éƒ½å†™å…¥åˆ°autofsæœåŠ¡ä¸»é…ç½®æ–‡ä»¶ä¸­çš„è¯è‚¯å®šæ— ç–‘ä¼šè®©ä¸»é…ç½®æ–‡ä»¶è‡ƒè‚¿ä¸å ªï¼Œä¸åˆ©äºæœåŠ¡æ‰§è¡Œæ•ˆç‡ï¼Œä¹Ÿä¸åˆ©äºæ—¥åä¿®æ”¹é‡Œé¢çš„é…ç½®å†…å®¹ï¼Œæ‰€ä»¥åœ¨autofsæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ä¸­éœ€è¦æŒ‰ç…§â€œæŒ‚è½½ç›®å½• å­é…ç½®æ–‡ä»¶â€çš„æ ¼å¼å†™å…¥å‚æ•°ã€‚æŒ‚è½½ç›®å½•æ˜¯è®¾å¤‡è¦æŒ‚è½½ä½ç½®çš„ä¸Šä¸€çº§ç›®å½•ï¼Œä¾‹å¦‚å’±ä»¬çš„å…‰ç›˜è®¾å¤‡ä¸€èˆ¬æ˜¯æŒ‚è½½åˆ°/media/cdromç›®å½•ä¸­çš„ï¼Œé‚£ä¹ˆæ­¤å¤„å°±åº”è¯¥å†™æˆ/mediaå³å¯ï¼Œè€Œå¯¹åº”çš„å­é…ç½®æ–‡ä»¶åˆ™æ˜¯å¯¹è¿™ä¸ªç›®å½•å†…æŒ‚è½½è®¾å¤‡ä¿¡æ¯çš„è¿›ä¸€æ­¥è¯´æ˜ï¼Œå­é…ç½®æ–‡ä»¶æ˜¯éœ€è¦ç”¨æˆ·è‡ªè¡Œå®šä¹‰çš„ï¼Œæ–‡ä»¶åå­—æ²¡æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œä½†åç¼€éœ€ä»¥.miscç»“æŸã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/auto.master<br>/media /etc/iso.misc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å­é…ç½®æ–‡ä»¶ä¸­åº”æŒ‰ç…§â€œæŒ‚è½½ç›®å½• æŒ‚è½½æ–‡ä»¶ç±»å‹åŠæƒé™ :è®¾å¤‡åç§°â€çš„æ ¼å¼å†™å…¥å‚æ•°ï¼Œä¾‹å¦‚æƒ³è¦æŠŠè®¾å¤‡æŒ‚è½½åˆ°/media/isoç›®å½•ä¸­ï¼Œåˆ™æ­¤æ—¶å†™isoå³å¯ï¼Œè€Œ-fstypeä¸ºæ–‡ä»¶ç³»ç»Ÿæ ¼å¼å‚æ•°ï¼Œiso9660ä¸ºå…‰ç›˜ç³»ç»Ÿè®¾å¤‡æ ¼å¼ï¼Œroã€nosuidåŠnodevä¸ºå…‰ç›˜è®¾å¤‡å…·ä½“çš„æƒé™å‚æ•°ï¼Œæœ€ç»ˆ/dev/cdromåˆ™æ˜¯å®šä¹‰è¦æŒ‚è½½çš„è®¾å¤‡åç§°ï¼Œé…ç½®å®Œæˆåé¡ºæ‰‹å†æŠŠautofsæœåŠ¡ç¨‹åºå¯åŠ¨å¹¶åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­å§ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/iso.misc<br>iso   -fstype=iso9660,ro,nosuid,nodev :/dev/cdrom</p>
<p>systemctl start autofs<br>systemctl enable autofs<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## ç¬¬åå››èŠ‚è¯¾</span><br><span class="line">### ä½¿ç”¨BINDæä¾›åŸŸåè§£ææœåŠ¡</span><br><span class="line">#### DNSåŸŸåè§£ææœåŠ¡</span><br><span class="line">åŸŸåç›¸æ¯”äºIPåœ°å€æ¥è®²æ›´æœ‰å¯“æ„ï¼Œå› æ­¤ä¹Ÿæ›´å®¹æ˜“è¢«è®°ä½ï¼Œæ‰€ä»¥ç”¨æˆ·é€šå¸¸æ›´ä¹ æƒ¯è¾“å…¥åŸŸåæ¥è®¿é—®ç½‘ç»œä¸­çš„èµ„æºï¼Œä½†åœ¨äº’è”ç½‘ä¸­è®¡ç®—æœºä¹‹é—´åªèƒ½åŸºäºIPåœ°å€æ¥è¯†åˆ«å¯¹æ–¹ä¸»æœºï¼Œäº’è”ç½‘ä¸­ä¼ è¾“æ•°æ®ä¹Ÿå¿…é¡»æ˜¯åŸºäºå¤–ç½‘çš„IPåœ°å€æ‰èƒ½å®Œæˆã€‚å› æ­¤ä¸ºäº†é™ä½ç½‘æ°‘è®¿é—®äº’è”ç½‘ç½‘ç«™ç­‰èµ„æºçš„é—¨æ§›ï¼Œå°±å‡ºç°ä¸€é¡¹å«åšDNSåŸŸåè§£ææœåŠ¡(Domain Name System)çš„æŠ€æœ¯ï¼Œè¿™æ˜¯ä¸€é¡¹ç”¨äºç®¡ç†å’Œè§£æåŸŸåä¸IPåœ°å€å¯¹åº”å…³ç³»çš„æœåŠ¡ï¼Œç®€å•æ¥è¯´å°±æ˜¯èƒ½å¤Ÿæ¥å—ç”¨æˆ·è¾“å…¥çš„åŸŸåæˆ–IPåœ°å€ï¼Œç„¶åè‡ªåŠ¨æŸ¥æ‰¾å‡ºåŒ¹é…çš„ä¿¡æ¯ï¼Œä½¿ç”¨è¿™é¡¹æŠ€æœ¯åå’±ä»¬åªéœ€è¦åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸²åŸŸåå°±èƒ½æ‰“å¼€æƒ³è¦è®¿é—®çš„ç½‘ç«™äº†ã€‚</span><br><span class="line"></span><br><span class="line">å¹³æ—¶åŒå­¦ä»¬ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯è¾“å…¥æŸä¸ªåŸŸåæ¥è®¿é—®ç½‘ç«™äº†å§ï¼Œè¿™å…¶å®ä»…ä»…æ˜¯DNSåŸŸåè§£ææœåŠ¡åŠŸèƒ½çš„ä¸€å°éƒ¨åˆ†è€Œå·²ã€‚DNSæŠ€æœ¯èƒ½å¤Ÿæä¾›æ­£å‘è§£æå’Œåå‘è§£æï¼Œæ­£å‘è§£æå°±æ˜¯æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æŸä¸ªåŸŸåæŸ¥æ‰¾åˆ°å¯¹åº”çš„IPåœ°å€ä¿¡æ¯ï¼Œè€Œåå‘è§£æåˆ™æ˜¯æ ¹æ®ç”¨æˆ·è¾“å…¥çš„IPåœ°å€æŸ¥æ‰¾åˆ°å¯¹åº”çš„åŸŸåä¿¡æ¯ã€‚å¯¹äºäº’è”ç½‘åºå¤§çš„åŸŸåå’ŒIPåœ°å€å¯¹åº”å…³ç³»æ•°æ®åº“ï¼ŒDNSæœåŠ¡åè®®é‡‡ç”¨ç±»ä¼¼ç›®å½•æ ‘çš„å±‚æ¬¡ç»“æ„è®°å½•åŸŸåä¸IPåœ°å€çš„æ˜ å°„å¯¹åº”å…³ç³»ï¼Œå½¢æˆä¸€ä¸ªåˆ†å¸ƒå¼çš„æ•°æ®åº“ç³»ç»Ÿã€‚</span><br><span class="line"></span><br><span class="line">åŸŸååç¼€è¢«åˆ†ä¸ºäº†å›½é™…åŸŸåã€å›½å†…åŸŸåå’Œå›½å¤–åŸŸåä¸‰ç±»ï¼ŒåŸåˆ™ä¸Šå¯¹æ¯ä¸ªåç¼€éƒ½æ˜¯æœ‰å®šä¹‰çš„ï¼Œä½†å®é™…ä½¿ç”¨ä¸Šå¯ä»¥ä¸å¿…ä¸¥æ ¼éµå®ˆï¼Œç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„åç¼€å°±æ˜¯.comï¼ŒåŸæ„æ˜¯å•†ä¸šå…¬å¸ï¼ˆCommercial organizationsï¼‰ï¼Œå…¶æ¬¡è¿˜æœ‰.orgï¼ˆéè¥åˆ©ç»„ç»‡ï¼‰ã€.govï¼ˆæ”¿åºœéƒ¨é—¨ï¼‰ã€.netï¼ˆç½‘ç»œæœåŠ¡å•†ï¼‰ã€.eduï¼ˆæ•™ç ”æœºæ„ï¼‰ã€.pubï¼ˆå…¬ä¼—å¤§ä¼—ï¼‰ã€.cnï¼ˆä¸­å›½å›½å®¶ï¼‰ç­‰ç­‰åå‡ ä¸ªå¸¸è§çš„åŸŸååç¼€ã€‚</span><br><span class="line"></span><br><span class="line">å½“ä»Šä¸–ç•Œè¶Šæ¥è¶Šä¿¡æ¯åŒ–ï¼Œå¤§æ•°æ®ã€äº‘è®¡ç®—ã€ç‰©è”ç½‘ã€äººå·¥æ™ºèƒ½ç­‰ç­‰æ–°é²œæŠ€æœ¯ä¹Ÿä¸æ–­æ¶Œå‡ºï¼Œå…¨çƒç½‘æ°‘æ•°é‡æ®è¯´å·²ç»è¦è¶…è¿‡äº†35äº¿ï¼Œè€Œä¸”è¿˜åœ¨ä»¥æ¯å¹´10%çš„é€Ÿåº¦é£é€Ÿå¢é•¿ã€‚å‡è®¾æ¯ä¸ªç½‘æ°‘æ¯å¤©åªè®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œè€Œä¸”åªè®¿é—®ä¸€æ¬¡ï¼Œé‚£ä¹ˆä¹Ÿä¼šäº§ç”Ÿå‡º35äº¿æ¬¡å·¦å³çš„æŸ¥è¯¢è¯·æ±‚ï¼Œå¦‚æ­¤åºå¤§çš„è¯·æ±‚æ•°é‡è‚¯å®šæ— æ³•ç”±æŸä¸€ä¸ªæœåŠ¡å™¨å…¨éƒ¨å¤„ç†æ‰ã€‚DNSæŠ€æœ¯ä½œä¸ºäº’è”ç½‘åŸºç¡€è®¾æ–½æœåŠ¡ï¼Œä¸ºäº†èƒ½å¤Ÿä¸ºç½‘æ°‘æä¾›ä¸é—´æ–­ã€ç¨³å®šã€å¿«é€Ÿçš„åŸŸåæŸ¥è¯¢æœåŠ¡ï¼Œè¿›è€Œä¿è¯äº’è”ç½‘çš„æ­£å¸¸è¿è½¬ï¼ŒæŒ‰ç…§å·¥ä½œå½¢å¼ä¸Šåˆ†ä¸ºæœ‰ä¸»æœåŠ¡å™¨ã€ä»æœåŠ¡å™¨å’Œç¼“å­˜æœåŠ¡å™¨ä¸‰ç§ç±»å‹ï¼š</span><br><span class="line"></span><br><span class="line">&gt;ä¸»æœåŠ¡å™¨:åœ¨ç‰¹å®šåŒºåŸŸå†…å…·æœ‰å”¯ä¸€æ€§ã€è´Ÿè´£ç»´æŠ¤è¯¥åŒºåŸŸå†…çš„åŸŸåä¸IPåœ°å€å¯¹åº”å…³ç³»ã€‚</span><br><span class="line">&gt;ä»æœåŠ¡å™¨:ä»ä¸»æœåŠ¡å™¨ä¸­è·å¾—åŸŸåä¸IPåœ°å€å¯¹åº”å…³ç³»å¹¶ç»´æŠ¤ï¼Œä»¥é˜²ä¸»æœåŠ¡å™¨å®•æœºç­‰æƒ…å†µã€‚</span><br><span class="line">&gt;ç¼“å­˜æœåŠ¡å™¨:é€šè¿‡å‘å…¶ä»–åŸŸåè§£ææœåŠ¡å™¨æŸ¥è¯¢è·å¾—åŸŸåä¸IPåœ°å€å¯¹åº”å…³ç³»ï¼Œæé«˜é‡å¤æŸ¥è¯¢æ—¶çš„æ•ˆç‡ã€‚</span><br><span class="line"></span><br><span class="line">ç®€å•æ¥è¯´ï¼Œä¸»æœåŠ¡å™¨å°±æ˜¯çœŸæ­£ç®¡ç†åŸŸåå’ŒIPåœ°å€å…³ç³»çš„ã€‚ä»æœåŠ¡å™¨æ˜¯å¸®åŠ©ä¸»æœåŠ¡å™¨æ‰“ä¸‹æ‰‹ï¼Œåœ¨å„ä¸ªå›½å®¶ã€çœå¸‚ã€åœ°åŒºã€è¡—é“ä¸­è¿›è¡Œéƒ¨ç½²ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿå°±è¿‘è¿›è¡ŒåŸŸåæŸ¥è¯¢ï¼Œè¿›è€Œå‡è½»ä¸»æœåŠ¡å™¨è´Ÿè½½å‹åŠ›ã€‚è€Œç¼“å­˜æœåŠ¡å™¨æ˜¯ä¸€ç§ä¸å¤ªå¸¸ç”¨çš„å·¥ä½œå½¢å¼ï¼Œä¸€èˆ¬æ˜¯å·¥ä½œåœ¨ä¼ä¸šå†…ç½‘çš„ç½‘å…³ä½ç½®ï¼ŒåŠ é€Ÿç”¨æˆ·åŸŸåæŸ¥è¯¢è¯·æ±‚ã€‚è¿™ä¸‰ç§DNSå·¥ä½œå½¢å¼å°†ä¼šåœ¨ä¸‹é¢é€ä¸€è¿›è¡Œè®²è§£ï¼Œç°åœ¨ä»…éœ€è¦å¤§è‡´äº†è§£å³å¯ã€‚</span><br><span class="line"></span><br><span class="line">DNSåŸŸåè§£ææœåŠ¡é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®ç»“æ„ä¿å­˜æµ·é‡åŒºåŸŸæ•°æ®ä¿¡æ¯ï¼Œé€’å½’æŸ¥è¯¢æ˜¯æŒ‡ç”¨äºå®¢æˆ·æœºå‘DNSæœåŠ¡å™¨çš„æŸ¥è¯¢è¯·æ±‚ï¼Œè€Œè¿­ä»£æŸ¥è¯¢æ˜¯æŒ‡ç”¨äºDNSæœåŠ¡å™¨å‘å…¶å®ƒDNSæœåŠ¡å™¨çš„æŸ¥è¯¢è¯·æ±‚ã€‚æ ¹æ®å’±ä»¬åˆšåˆšå­¦ä¹ è¿‡çš„DNSæœåŠ¡å™¨å·¥ä½œå½¢å¼ä»¥åŠæŠ€æœ¯æœåŠ¡æ–¹å¼ï¼Œå¯ä»¥çŒœæƒ³ä¸‹å½“ç”¨æˆ·å‘å°±è¿‘çš„ä¸€å°DNSæœåŠ¡å™¨å‘èµ·äº†å¯¹æŸä¸ªåŸŸåçš„æŸ¥è¯¢è¯·æ±‚ä¹‹åçš„äº‹æƒ…ï¼Œ</span><br></pre></td></tr></table></figure></p>
<ol>
<li>æ£€æŸ¥HOSTSæ–‡ä»¶</li>
<li>æ£€æŸ¥ä¸»æœºæœ¬åœ°ç¼“å­˜</li>
<li>DNSåŒºåŸŸä¿¡æ¯è§£æåº“</li>
<li>æ£€æŸ¥æœåŠ¡å™¨æœ¬åœ°ç¼“å­˜</li>
<li>å‘æ ¹åŸŸDNSå‘èµ·æŸ¥è¯¢</li>
<li>å‘com.åŸŸDNSå‘èµ·æŸ¥è¯¢</li>
<li>å‘linuxprobeåŸŸDNSå‘èµ·æŸ¥è¯¢</li>
<li>å‘wwwåŸŸå‘èµ·æŸ¥è¯¢<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">å½“ç”¨æˆ·å‘å°±è¿‘çš„DNSæœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ªåŸŸåæ—¶ï¼Œæ­£å¸¸æƒ…å†µä¼šç”±æœ¬åœ°DNSæœåŠ¡å™¨å‘æŒ‡å®šçš„DNSæœåŠ¡å™¨ä¸»æœºå‘é€è¿­ä»£æŸ¥è¯¢è¯·æ±‚ï¼Œè€Œå¦‚æœè¯¥DNSæœåŠ¡å™¨ä¸­ä¹Ÿæ²¡æœ‰è¦æŸ¥è¯¢çš„æ•°æ®ï¼Œåˆ™ä¼šè¿›ä¸€æ­¥å‘ä¸Šçº§DNSæœåŠ¡å™¨è¿›è¡Œå¤šæ¬¡è¿­ä»£æŸ¥è¯¢ï¼Œå…¶ä¸­æœ€é«˜çº§ã€æœ€æƒå¨çš„æ ¹DNSæœåŠ¡å™¨ä¸»æœºæ€»å…±æœ‰13å°ï¼Œåˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°ï¼š</span><br><span class="line"></span><br><span class="line">|åç§°|ç®¡ç†å•ä½|åœ°ç†ä½ç½®|IPåœ°å€|</span><br><span class="line">|:|</span><br><span class="line">|A|INTERNIC.NET|ç¾å›½-å¼—å‰å°¼äºšå·|198.41.0.4|</span><br><span class="line">|B|ç¾å›½ä¿¡æ¯ç§‘å­¦ç ”ç©¶æ‰€|ç¾å›½-åŠ åˆ©å¼—å°¼äºšå·|128.9.0.107|</span><br><span class="line">|C|PSINetå…¬å¸|ç¾å›½-å¼—å‰å°¼äºšå·|192.33.4.12|</span><br><span class="line">|D|é©¬é‡Œå…°å¤§å­¦|ç¾å›½-é©¬é‡Œå…°å·|128.8.10.90|</span><br><span class="line">|E|ç¾å›½èˆªç©ºèˆªå¤©ç®¡ç†å±€|ç¾å›½åŠ åˆ©å¼—å°¼äºšå·|192.203.230.10|</span><br><span class="line">|F|å› ç‰¹ç½‘è½¯ä»¶è”ç›Ÿ|ç¾å›½åŠ åˆ©å¼—å°¼äºšå·|192.5.5.241|</span><br><span class="line">|G|ç¾å›½å›½é˜²éƒ¨ç½‘ç»œä¿¡æ¯ä¸­å¿ƒ|ç¾å›½å¼—å‰å°¼äºšå·|192.112.36.4|</span><br><span class="line">|H|ç¾å›½é™†å†›ç ”ç©¶æ‰€|ç¾å›½-é©¬é‡Œå…°å·|128.63.2.53|</span><br><span class="line">|I|Autonomicaå…¬å¸|ç‘å…¸-æ–¯å¾·å“¥å°”æ‘©|192.36.148.17|</span><br><span class="line">|J|VeriSignå…¬å¸|ç¾å›½-å¼—å‰å°¼äºšå·|192.58.128.30|</span><br><span class="line">|K|RIPE NCC|è‹±å›½-ä¼¦æ•¦|193.0.14.129|</span><br><span class="line">|L|IANA|ç¾å›½-å¼—å‰å°¼äºšå·|199.7.83.42|</span><br><span class="line">|M|WIDE Project|æ—¥æœ¬-ä¸œäº¬|202.12.27.33|</span><br><span class="line"></span><br><span class="line">#### å®‰è£…BindæœåŠ¡ç¨‹åº</span><br><span class="line">BINDä¼¯å…‹åˆ©äº’è”ç½‘åŸŸåæœåŠ¡(Berkeley Internet Name Daemon)æ˜¯ä¸€æ¬¾å…¨çƒäº’è”ç½‘ä½¿ç”¨æœ€å¹¿æ³›ã€èƒ½å¤Ÿæä¾›å®‰å…¨å¯é ã€å¿«æ·é«˜æ•ˆçš„åŸŸåè§£æçš„æœåŠ¡ç¨‹åºã€‚DNSåŸŸåè§£ææœåŠ¡ä½œä¸ºäº’è”ç½‘çš„åŸºç¡€è®¾æ–½æœåŠ¡ï¼Œå…¶è´£ä»»ä¹‹é‡åŒå­¦ä»¬å¯æƒ³è€ŒçŸ¥ï¼Œå› æ­¤åˆ˜é„è€å¸ˆæ¨èæ‚¨åœ¨å®‰è£…bindæœåŠ¡ç¨‹åºçš„æ—¶å€™åŠ ä¸Šchrootæ‰©å±•åŒ…ï¼Œchrootä¿—ç§°ä¸ºç›‘ç‰¢å®‰å…¨æœºåˆ¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆçš„é™åˆ¶bindæœåŠ¡ç¨‹åºä»…èƒ½å¯¹è‡ªèº«é…ç½®æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œä»è€Œä¿è¯äº†æ•´ä¸ªæœåŠ¡å™¨çš„å®‰å…¨ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸€ç›´åŠ›èä½¿ç”¨çš„åŠŸèƒ½~</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>yum -y install bind-chroot<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">BindæœåŠ¡ç¨‹åºçš„é…ç½®å¹¶ä¸ç®€å•ï¼Œå› ä¸ºè¦æƒ³ä¸ºç”¨æˆ·æä¾›å¥å…¨çš„DNSæŸ¥è¯¢æœåŠ¡ï¼Œé¦–å…ˆå°±è¦åœ¨æœ¬åœ°ä¿å­˜æœ‰ç›¸å…³çš„åŸŸåæ•°æ®åº“ï¼Œè€Œå¦‚æœæŠŠæ‰€æœ‰åŸŸåå’ŒIPåœ°å€å¯¹åº”å…³ç³»éƒ½å†™å…¥åˆ°æŸä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œé‚£ä¼°è®¡è¦æœ‰ä¸Šåƒä¸‡æ¡çš„å‚æ•°äº†ï¼Œè¿™æ ·æ—¢ä¸åˆ©äºç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œä¹Ÿä¸æ–¹ä¾¿ä»Šåä¿®æ”¹ç»´æŠ¤æ•°æ®ã€‚å› æ­¤åœ¨bindæœåŠ¡ç¨‹åºä¸­æœ‰ä¸‰ä¸ªæ¯”è¾ƒå…³é”®çš„åœ°æ–¹ï¼Œé¦–å…ˆåŒºåŸŸé…ç½®æ–‡ä»¶ï¼ˆ/etc/named.rfc1912.zonesï¼‰æ˜¯ç”¨æ¥ä¿å­˜åŸŸåå’ŒIPåœ°å€å¯¹åº”å…³ç³»æ‰€åœ¨ä½ç½®çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´åƒæ˜¯å’±ä»¬ä¹¦ç±çš„ç›®å½•ä¸€æ ·ï¼Œå¯¹åº”ç€æ¯ä¸ªåŸŸå’ŒIPåœ°å€æ®µå…·ä½“æ‰€åœ¨çš„ä½ç½®ï¼Œå½“éœ€è¦æŸ¥çœ‹æˆ–ä¿®æ”¹çš„æ—¶å€™æ ¹æ®é‡Œé¢çš„ä½ç½®æ‰¾åˆ°ç›¸å…³æ–‡ä»¶å³å¯ã€‚å…¶æ¬¡æ•°æ®é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆ/var/namedï¼‰æ˜¯ç”¨æ¥ä¿å­˜åŸŸåå’ŒIPåœ°å€çœŸå®å¯¹åº”å…³ç³»çš„ç›®å½•ï¼Œå’±ä»¬æŠŠéœ€è¦ä¸ºç”¨æˆ·è§£æçš„åŸŸã€IPåœ°å€æ®µå…³ç³»æ–‡ä»¶æ”¾ç½®åœ¨è¯¥ç›®å½•ä¸­å³å¯ï¼Œæœ€åä¸å¾€å¸¸ä¸åŒçš„æ˜¯ä¸»é…ç½®æ–‡ä»¶ï¼ˆ/etc/named.confï¼‰ï¼ŒbindæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶åªæœ‰58è¡Œï¼Œå…¶ä¸­é™¤å»æ³¨é‡Šä¿¡æ¯å’Œç©ºè¡Œåå®é™…æœ‰æ•ˆå‚æ•°æ‰ä»…ä»…30è¡Œå·¦å³ï¼Œä»…ç”¨äºå®šä¹‰bindæœåŠ¡ç¨‹åºçš„è¿è¡Œå‚æ•°è€Œå·²ã€‚</span><br><span class="line"></span><br><span class="line">BINDä¼¯å…‹åˆ©äº’è”ç½‘åŸŸåæœåŠ¡çš„æœåŠ¡ç¨‹åºåç§°å«åšnamedï¼Œé¦–å…ˆéœ€è¦åœ¨/etcç›®å½•ä¸­æ‰¾åˆ°å¯¹åº”çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œç„¶åæŠŠç¬¬11ã€17è¡Œçš„åœ°å€å‡ä¿®æ”¹ä¸ºanyï¼Œåˆ†åˆ«ä»£è¡¨ç€æœåŠ¡å™¨ä¸Šæ‰€æœ‰IPåœ°å€å‡å¯æä¾›DNSæŸ¥è¯¢æœåŠ¡ï¼Œä»¥åŠå…è®¸æ‰€æœ‰äººå¯¹æœ¬æœºè¿›è¡ŒDNSæŸ¥è¯¢è¯·æ±‚ï¼Œè¿™ä¸¤ä¸ªè¦ä¿®æ”¹çš„åœ°æ–¹è¯·åŒå­¦ä»¬ä¸€å®šè¦ç•™å¿ƒä¿®æ”¹å¥½ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.conf<br>listen-on port 53 { any; };<br>allow-query { any; };<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å¦‚å‰é¢æ‰€è®²åˆ°çš„ï¼Œåœ¨bindæœåŠ¡ç¨‹åºä¸­çš„åŒºåŸŸé…ç½®æ–‡ä»¶ï¼ˆ/etc/named.rfc1912.zonesï¼‰æ˜¯ç”¨æ¥ä¿å­˜åŸŸåå’ŒIPåœ°å€å¯¹åº”å…³ç³»æ‰€åœ¨ä½ç½®çš„æ–‡ä»¶ï¼Œåˆ‡è®°è¿™ä¸ªæ–‡ä»¶ç”¨äºå®šä¹‰åŸŸåä¸IPåœ°å€è§£æè§„åˆ™ä¿å­˜çš„æ–‡ä»¶ä½ç½®ä»¥åŠåŒºåŸŸæœåŠ¡ç±»å‹ç­‰å†…å®¹ï¼Œè€Œä¸æ˜¯å¾€é‡Œé¢å†™å…¥å…·ä½“çš„åŸŸåã€IPåœ°å€å¯¹åº”å…³ç³»ç­‰ç­‰ä¿¡æ¯ã€‚æœåŠ¡ç±»å‹åŒ…æ‹¬æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«ä¸ºhint(æ ¹åŒºåŸŸ)ã€master(ä¸»åŒºåŸŸ)ã€slave(è¾…åŠ©åŒºåŸŸ)ï¼Œå…¶ä¸­å¸¸ç”¨çš„masterå’Œslaveå°±æ˜¯ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨çš„æ„æ€ã€‚</span><br><span class="line"></span><br><span class="line">æ¥ä¸‹æ¥çš„å®éªŒä¸­ä¼šåˆ†åˆ«å¯¹ä¸»é…ç½®æ–‡ä»¶ã€åŒºåŸŸä¿¡æ¯æ–‡ä»¶ä¸æ•°æ®æ–‡ä»¶åšä¿®æ”¹ï¼Œå¦‚æœå®è·µæ“ä½œä¸­æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œæ‚¨æ€€ç–‘æ˜¯å‚æ•°å†™é”™å¯¼è‡´çš„è¯ï¼Œå¯ä»¥æ‰§è¡Œä¸‹named-checkconfå‘½ä»¤æˆ–named-checkzoneå‘½ä»¤æ¥åˆ†åˆ«ç”¨äºæ£€æŸ¥ä¸»é…ç½®ä¸åŒºåŸŸæ•°æ®æ–‡ä»¶ä¸­è¯­æ³•æˆ–å‚æ•°çš„é”™è¯¯ã€‚</span><br><span class="line"></span><br><span class="line">##### æ­£å‘è§£æå®éªŒ</span><br><span class="line">DNSåŸŸåè§£ææœåŠ¡çš„æ­£å‘è§£ææ˜¯æ ¹æ®ä¸»æœºå(åŸŸå)æŸ¥æ‰¾åˆ°å¯¹åº”çš„IPåœ°å€ï¼Œè¿™æ˜¯å¹³æ—¶æœ€å¸¸ç”¨çš„å·¥ä½œæ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç”¨æˆ·è¾“å…¥äº†ä¸€ä¸ªåŸŸååbindæœåŠ¡ç¨‹åºä¼šè¿›è¡Œè‡ªåŠ¨åŒ¹é…ï¼Œç„¶åæŠŠæŸ¥è¯¢åˆ°å¯¹åº”çš„IPåœ°å€è¿”å›ç»™ç”¨æˆ·ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šç¼–è¾‘åŒºåŸŸé…ç½®æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å†…é»˜è®¤å·²ç»æœ‰äº†ä¸€äº›æ— å…³ç´§è¦çš„è§£æå‚æ•°ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®©ç”¨æˆ·æœ‰ä¸ªå‚è€ƒè€Œå·²ï¼ŒåŒå­¦ä»¬å¯ä»¥æŠŠä¸‹é¢å‚æ•°æ·»åŠ è‡³åŒºåŸŸé…ç½®æ–‡ä»¶å†…å®¹çš„æœ€ä¸‹é¢å³å¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŠŠåŸæœ‰ä¿¡æ¯å…¨éƒ¨æ¸…ç©ºï¼Œåªä¿ç•™è‡ªå·±çš„åŸŸåè§£æä¿¡æ¯</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.rfc1912.zones<br>zone â€œlinuxprobe.comâ€ IN {<br>type master;<br>file â€œlinuxprobe.com.zoneâ€;<br>allow-update {none;};<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šç¼–è¾‘åŸŸåæ•°æ®æ–‡ä»¶ï¼Œå’±ä»¬å¯ä»¥ä»/var/namedç›®å½•ä¸­å¤åˆ¶ä¸€ä»½æ­£å‘è§£æçš„æ¨¡æ¿æ–‡ä»¶ï¼ˆnamed.localhostï¼‰ï¼Œç„¶åæŠŠåŸŸåå’ŒIPåœ°å€çš„å¯¹åº”æ•°æ®å¡«å†™åˆ°æ–‡ä»¶åä¿å­˜å³å¯ï¼Œå¤åˆ¶çš„æ—¶å€™è¯·åŠ ä¸Š-aå‚æ•°ï¼Œæ„åœ¨ä¿ç•™åŸå§‹æ–‡ä»¶çš„æ‰€æœ‰è€…ã€æ‰€æœ‰ç»„ã€æƒé™å±æ€§ç­‰ä¿¡æ¯ï¼Œè¿™æ ·è®©bindæœåŠ¡ç¨‹åºèƒ½é¡ºåˆ©çš„è¯»å–è¯¥æ–‡ä»¶çš„å†…å®¹ï¼š</span><br></pre></td></tr></table></figure></p>
<p>cd /var/named/<br>ls -al named.localhost<br>cp -a named.localhost linuxprobe.com.zone<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç„¶åç¼–è¾‘åŸŸåæ•°æ®æ–‡ä»¶ï¼Œè®°å¾—ç¼–å†™åè¦é‡å¯ä¸€ä¸‹namedæœåŠ¡æ‰èƒ½è®©æ–°çš„è§£ææ•°æ®ç”Ÿæ•ˆå“¦~å¦å¤–ç”±äºæ­£å‘è§£ææ–‡ä»¶ä¸­çš„å‚æ•°è¾ƒå¤šã€è€Œä¸”ç›¸å¯¹éƒ½æ¯”è¾ƒé‡è¦ï¼Œæ‰€ä»¥åˆ˜é„è€å¸ˆåœ¨æ¯ä¸ªå‚æ•°åé¢éƒ½åšäº†ç®€è¦è¯´æ˜</span><br></pre></td></tr></table></figure></p>
<p>vim linuxprobe.com.zone<br>systemctl restart named<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>$TTL 1D    #ç”Ÿå­˜å‘¨æœŸä¸º1å¤©<br>@    IN SOA    linuxprobe.com.    root.linuxprobe.com.    (    </p>
<p>#æˆæƒä¿¡æ¯å¼€å§‹:    #DNSåŒºåŸŸçš„åœ°å€    #åŸŸåç®¡ç†å‘˜çš„é‚®ç®±(ä¸è¦ç”¨@ç¬¦å·)<br>0;serial    #æ›´æ–°åºåˆ—å·<br>1D;refresh    #æ›´æ–°æ—¶é—´<br>1H;retry    #é‡è¯•å»¶æ—¶<br>1W;expire    #å¤±æ•ˆæ—¶é—´<br>3H;)minimum    #æ— æ•ˆè§£æè®°å½•çš„ç¼“å­˜æ—¶é—´<br>NS    ns.linuxprobe.com.    #åŸŸåæœåŠ¡å™¨è®°å½•<br>ns    IN A    192.168.10.10    #åœ°å€è®°å½•(ns.linuxprobe.com.)<br>IN MX 10    mail.linuxprobe.com.    #é‚®ç®±äº¤æ¢è®°å½•<br>mail    IN A    192.168.10.10    #åœ°å€è®°å½•(mail.linuxprobe.com.)<br>www    IN A    192.168.10.10    #åœ°å€è®°å½•(<a href="http://www.linuxprobe.com." target="_blank" rel="noopener">www.linuxprobe.com.</a>)<br>bbs    IN A    192.168.10.20    #åœ°å€è®°å½•(bbs.linuxprobe.com.)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">nslookupå‘½ä»¤ç”¨äºæ£€æµ‹èƒ½å¦ä»ç½‘ç»œDNSæœåŠ¡å™¨ä¸­æŸ¥è¯¢åˆ°åŸŸåä¸IPåœ°å€çš„è§£æè®°å½•ï¼Œè¿›è€Œæ›´å‡†ç¡®çš„æ£€æŸ¥DNSæœåŠ¡æ˜¯å¦å·²ç»èƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›æœåŠ¡ã€‚</span><br></pre></td></tr></table></figure></p>
<p>nslookup <a href="http://www.linuxprobe.com" target="_blank" rel="noopener">www.linuxprobe.com</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### åå‘è§£æå®éªŒ</span><br><span class="line">DNSåŸŸåè§£ææœåŠ¡çš„åå‘è§£æä½œç”¨æ˜¯æ ¹æ®ç”¨æˆ·æäº¤çš„IPåœ°å€æŸ¥æ‰¾åˆ°å¯¹åº”çš„åŸŸåä¿¡æ¯ï¼Œè¿™ç§è§£ææ–¹å¼ç›¸æ¯”äºæ­£å‘è§£ææ¥è®²ç¡®å®å¾ˆå°‘è¢«ä½¿ç”¨ã€‚ä¸€èˆ¬çš„ä½œç”¨å°±æ˜¯å¯¹æŸä¸ªIPåœ°å€ä¸Šæ‰€æœ‰ç»‘å®šçš„åŸŸåè¿›è¡Œæ•´ä½“å±è”½ï¼Œå±è”½ç”±è¿™äº›åŸŸåå‘é€å‡ºæ¥çš„åƒåœ¾é‚®ä»¶ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹æŸä¸ªIPåœ°å€è¿›è¡ŒåŸŸååå‘è§£æï¼Œèƒ½å¤Ÿå¤§è‡´åˆ¤æ–­å‡ºæœ‰å¤šå°‘ä¸ªç½‘ç«™æ­£åœ¨è¿è¡Œåœ¨ä¸Šé¢ï¼Œå¯¹äºè´­ä¹°è™šæ‹Ÿä¸»æœºæ—¶åˆ¤æ–­æœ‰æ— ä¸¥é‡è¶…å”®é—®é¢˜å¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šç¼–è¾‘åŒºåŸŸé…ç½®æ–‡ä»¶ï¼Œé™¤äº†æ ¼å¼ä¸è¦å†™é”™ä»¥å¤–ï¼ŒåŒå­¦ä»¬è¿˜éœ€è¦è®°ä½æ­¤å¤„å®šä¹‰çš„æ•°æ®æ–‡ä»¶åç§°ï¼Œä¸€ä¼šè¦å†/var/namedç›®å½•ä¸­å»ºç«‹ä¸å…¶åŒåå¯¹åº”çš„æ–‡ä»¶æ‰ç®—é…ç½®å¦¥å½“ï¼Œåå‘è§£ææ˜¯æŠŠIPåœ°å€è§£ææˆåŸŸåæ ¼å¼ï¼Œå› æ­¤å®šä¹‰çš„zoneï¼ˆåŒºåŸŸï¼‰åº”è¯¥è¦æŠŠIPåœ°å€åå†™ï¼ŒåŸå…ˆæ˜¯192.168.10.0ï¼Œé‚£ä¹ˆåå†™åå°±æ˜¯10.168.192å•¦ï¼Œåªå†™IPåœ°å€çš„ç½‘ç»œä½ï¼ŒæŠŠä¸‹åˆ—å‚æ•°æ·»åŠ è‡³æ­£å‘è§£æå‚æ•°åé¢å§ï¼š</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.rfc1912.zones<br>zone â€œ10.168.192.in-addr.arpaâ€ IN {<br>type master;<br>file â€œ192.168.10.arpaâ€;<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šç¼–è¾‘åŸŸåæ•°æ®æ–‡ä»¶ï¼Œé¦–å…ˆåœ¨/var/namedç›®å½•ä¸­å¤åˆ¶ä¸€ä»½åå‘è§£æçš„æ¨¡æ¿æ–‡ä»¶ï¼ˆnamed.loopbackï¼‰ï¼Œç„¶åæŠŠä¸‹é¢å‚æ•°å¡«å†™è‡³æ–‡ä»¶ä¸­å³å¯ï¼ŒIPåœ°å€ä»…éœ€è¦å†™ä¸»æœºä½ã€‚</span><br></pre></td></tr></table></figure></p>
<p>cp -a named.loopback 192.168.10.arpa<br>vim 192.168.10.arpa<br>systemctl restart named<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>$TTL 1D<br>@    IN SOA    linuxprobe.com.    root.linuxprobe.com.    (<br>0;serial<br>1D;refresh<br>1H;retry<br>1W;expire<br>3H);minimum<br>NS    ns.linuxprobe.com.<br>ns    A    192.168.10.10<br>10    PTR    ns.linuxprobe.com.    #PTRä¸ºæŒ‡é’ˆè®°å½•ï¼Œä»…ç”¨äºåå‘è§£æä¸­ã€‚<br>10    PTR    mail.linuxprobe.com.<br>10    PTR    <a href="http://www.linuxprobe.com" target="_blank" rel="noopener">www.linuxprobe.com</a>.<br>20    PTR    bbs.linuxprobe.com.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬3æ­¥ï¼šæ£€éªŒè§£æç»“æœï¼Œåˆšåˆšæ­£å‘è§£æå®éªŒä¸­å·²ç»æŠŠç³»ç»Ÿç½‘å¡ä¸­DNSåœ°å€å‚æ•°ä¿®æ”¹æˆäº†æœ¬æœºIPåœ°å€ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨nslookupå‘½ä»¤æ¥æ£€éªŒè§£æç»“æœï¼Œä»…éœ€è¾“å…¥IPåœ°å€å³å¯æŸ¥è¯¢åˆ°å¯¹åº”çš„åŸŸåä¿¡æ¯</span><br></pre></td></tr></table></figure></p>
<p>nslookup 192.168.10.10<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### éƒ¨ç½²ä»æœåŠ¡å™¨</span><br><span class="line">ä½œä¸ºäº’è”ç½‘çš„åŸºç¡€è®¾æ–½æœåŠ¡ï¼Œå’±ä»¬æœ‰å¿…è¦ä¿è¯DNSåŸŸåè§£ææœåŠ¡çš„æ­£å¸¸è¿è½¬ï¼Œä¸ºç½‘æ°‘æä¾›ä¸é—´æ–­ã€ç¨³å®šã€å¿«é€Ÿçš„åŸŸåæŸ¥è¯¢æœåŠ¡ã€‚ä»æœåŠ¡å™¨æ˜¯DNSå·¥ä½œæ¨¡å¼çš„ä¸€ç§ç±»å‹ï¼Œéƒ¨ç½²ä»æœåŠ¡å™¨ä¸»è¦å°±æ˜¯ä¸ºäº†å‡è½»ä¸»æœåŠ¡å™¨çš„è´Ÿè½½å‹åŠ›ï¼Œä»¥åŠå½“ç½‘æ°‘è®¿é—®å°±è¿‘çš„æœ¬åœ°DNSæœåŠ¡å™¨æ—¶è¿˜èƒ½æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œä¹Ÿå°±æ˜¯è¯´ä»æœåŠ¡å™¨å¯ä»¥ä»ä¸»æœåŠ¡å™¨ä¸ŠæŠ“å–æŒ‡å®šçš„åŒºåŸŸæ•°æ®æ–‡ä»¶ï¼Œèµ·åˆ°å¤‡ä»½è§£æè®°å½•ä¸è´Ÿè½½å‡è¡¡çš„ä½œç”¨ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šåœ¨ä¸»æœåŠ¡å™¨çš„åŒºåŸŸä¿¡æ¯æ–‡ä»¶ä¸­å…è®¸è¯¥ä»æœåŠ¡å™¨çš„æ›´æ–°è¯·æ±‚ï¼Œå³ä¿®æ”¹allow-update &#123; å…è®¸æ›´æ–°åŒºåŸŸä¿¡æ¯çš„ä¸»æœºåœ°å€;&#125;;å‚æ•°ï¼Œç„¶åè®°å¾—é‡å¯ä¸‹ä¸»æœåŠ¡å™¨çš„DNSæœåŠ¡ç¨‹åºå“¦ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.rfc1912.zones<br>zone â€œlinuxprobe.comâ€ IN {<br>type master;<br>file â€œlinuxprobe.com.zoneâ€;<br>allow-update { 192.168.10.20; };<br>};<br>zone â€œ10.168.192.in-addr.arpaâ€ IN {<br>type master;<br>file â€œ192.168.10.arpaâ€;<br>allow-update { 192.168.10.20; };<br>};</p>
<p>systemctl restart named<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šåœ¨ä»æœåŠ¡å™¨ä¸­å¡«å†™ä¸»æœåŠ¡å™¨åœ°å€ä¸è¦æŠ“å–çš„åŒºåŸŸä¿¡æ¯ï¼Œç„¶åé‡å¯æœåŠ¡å³å¯ã€‚æ³¨æ„æ­¤æ—¶çš„æœåŠ¡ç±»å‹åº”è¯¥æ˜¯slaveï¼ˆä»ï¼‰ï¼Œè€Œä¸å†æ˜¯masterï¼ˆä¸»ï¼‰ï¼Œmasterså‚æ•°åé¢åº”è¯¥ä¸ºä¸»æœåŠ¡å™¨çš„IPåœ°å€ï¼Œä»¥åŠfileå‚æ•°åé¢å®šä¹‰çš„æ˜¯åŒæ­¥æ–‡ä»¶åè¦ä¿å­˜åˆ°çš„ä½ç½®ï¼Œç¨åå¯ä»¥åœ¨è¯¥ç›®å½•å†…çœ‹åˆ°åŒæ­¥çš„æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.rfc1912.zones<br>zone â€œlinuxprobe.comâ€ IN {<br>type slave;<br>masters { 192.168.10.10; };<br>file â€œslaves/linuxprobe.com.zoneâ€;<br>};<br>zone â€œ10.168.192.in-addr.arpaâ€ IN {<br>type slave;<br>masters { 192.168.10.10; };<br>file â€œslaves/192.168.10.arpaâ€;<br>};</p>
<p>systemctl restart named<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬3æ­¥ï¼šæ£€éªŒè§£æç»“æœï¼Œå½“é‡å¯ä»æœåŠ¡å™¨çš„DNSæœåŠ¡ç¨‹åºåï¼Œä¸€èˆ¬å°±å·²ç»è‡ªåŠ¨ä»ä¸»æœåŠ¡å™¨ä¸Šé¢åŒæ­¥äº†åŸŸåæ•°æ®æ–‡ä»¶ï¼Œé»˜è®¤ä¼šæ”¾ç½®åœ¨åŒºåŸŸé…ç½®æ–‡ä»¶ä¸­æ‰€å®šä¹‰çš„ç›®å½•ä½ç½®ä¸­ã€‚éšåä¿®æ”¹ä¸‹ä»æœåŠ¡å™¨çš„ç½‘å¡å‚æ•°ï¼ŒæŠŠDNSåœ°å€å‚æ•°ä¿®æ”¹æˆ192.168.10.20ï¼Œè¿™æ ·å³ä½¿ç”¨ä»æœåŠ¡å™¨è‡ªèº«æä¾›çš„DNSåŸŸåè§£ææœåŠ¡ï¼Œæœ€åå°±èƒ½ç”¨nslookupå‘½ä»¤é¡ºåˆ©çš„çœ‹åˆ°è§£æç»“æœäº†ã€‚</span><br></pre></td></tr></table></figure></p>
<p>cd /var/named/slaves<br>ls </p>
<p>#192.168.10.arpa linuxprobe.com.zone<br>nslookup<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### å®‰å…¨çš„åŠ å¯†ä¼ è¾“</span><br><span class="line">DNSåŸŸåè§£ææœåŠ¡æ˜¯äº’è”ç½‘çš„åŸºç¡€å»ºè®¾è®¾æ–½ï¼Œå‡ ä¹æ‰€æœ‰çš„ç½‘ç»œåº”ç”¨éƒ½ä¾èµ–äºDNSè§£ææœåŠ¡åšå‡ºçš„æŸ¥è¯¢ç»“æœï¼Œå¦‚æœäº’è”ç½‘ä¸­çš„DNSè§£ææœåŠ¡ä¸èƒ½æ­£å¸¸è¿è½¬ï¼Œé‚£ä¹ˆå³ä½¿Webç½‘ç«™æˆ–Emailé‚®å±€æœåŠ¡éƒ½è¿è¡Œæ­£å¸¸ï¼Œç”¨æˆ·ä¹Ÿæ— æ³•æ‰¾åˆ°å¹¶ä½¿ç”¨å®ƒä»¬äº†ã€‚</span><br><span class="line"></span><br><span class="line">13å°å…¨çƒæ ¹DNSæœåŠ¡å™¨ä»¥åŠäº’è”ç½‘ä¸­çš„DNSæœåŠ¡å™¨ç»å¤§å¤šæ•°(è¶…è¿‡95%)æ˜¯åŸºäºBINDæœåŠ¡ç¨‹åºæ­å»ºçš„ï¼ŒBINDæœåŠ¡ç¨‹åºä¸ºäº†èƒ½å¤Ÿå®‰å…¨çš„æä¾›è§£ææœåŠ¡ï¼Œç›®å‰å·²ç»æ”¯æŒäº†TSIG(TSIGRFC 2845)åŠ å¯†æœºåˆ¶ï¼ŒTSIGä¸»è¦æ˜¯åˆ©ç”¨å¯†ç ç¼–ç æ–¹å¼ä¿æŠ¤åŒºåŸŸä¿¡æ¯çš„ä¼ é€(Zone Transfer)ï¼Œä¹Ÿå°±æ˜¯è¯´TSIGåŠ å¯†æœºåˆ¶ä¿è¯äº†DNSæœåŠ¡å™¨ä¹‹é—´ä¼ é€åŸŸååŒºåŸŸä¿¡æ¯çš„å®‰å…¨æ€§ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šåœ¨ä¸»æœåŠ¡å™¨ä¸­ç”Ÿæˆå¯†é’¥ï¼Œdnssec-keygenå‘½ä»¤ç”¨äºç”Ÿæˆå®‰å…¨çš„DNSæœåŠ¡å¯†é’¥ï¼Œå¸¸ç”¨å‚æ•°å¦‚ä¸‹è¡¨ï¼Œå‘½ä»¤å‚æ•°æ ¼å¼ä¸ºï¼š&quot;dnssec-keygen [å‚æ•°] &quot;ï¼Œç”Ÿæˆä¸€ä¸ªä¸»æœºåç§°ä¸ºmaster-slaveçš„128ä½HMAC-MD5ç®—æ³•çš„å¯†é’¥æ–‡ä»¶ï¼Œæ‰§è¡Œå‘½ä»¤åé»˜è®¤ä¼šåœ¨å½“å‰ç›®å½•ä¸­ç”Ÿæˆå…¬é’¥å’Œç§é’¥æ–‡ä»¶ï¼Œå’±ä»¬éœ€è¦æŠŠç§é’¥æ–‡ä»¶ä¸­çš„Keyå‚æ•°åé¢çš„å€¼è®°å½•ä¸‹æ¥ï¼Œå¾…ä¼šè¦å†™å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•°	ä½œç”¨</span><br><span class="line">-a	æŒ‡å®šåŠ å¯†ç®—æ³•ï¼ˆåŒ…æ‹¬:RSAMD5 (RSA)ã€RSASHA1ã€DSAã€NSEC3RSASHA1ã€NSEC3DSAç­‰ï¼‰</span><br><span class="line">-b	å¯†é’¥é•¿åº¦(HMAC-MD5é•¿åº¦åœ¨1-512ä½ä¹‹é—´)</span><br><span class="line">-n	å¯†é’¥çš„ç±»å‹(HOSTä¸ºä¸ä¸»æœºç›¸å…³çš„)</span><br></pre></td></tr></table></figure></p>
<p>dnssec-keygen -a HMAC-MD5 -b 128 -n HOST master-slave<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>cat Kmaster-slave.+157+46845.private</p>
<p>Private-key-format: v1.3<br>Algorithm: 157 (HMAC_MD5)<br>Key: 1XEEL3tG5DNLOw+1WHfE3Q==<br>Bits: AAA=<br>Created: 20170607080621<br>Publish: 20170607080621<br>Activate: 20170607080621<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šåœ¨ä¸»æœåŠ¡å™¨ä¸­åˆ›å»ºå¯†é’¥éªŒè¯æ–‡ä»¶ï¼Œé¦–å…ˆåº”è¿›å…¥åˆ°bindæœåŠ¡ç¨‹åºç›®å½•ä¸­ï¼Œç„¶åæŠŠåˆšåˆšç”Ÿæˆå‡ºçš„å¯†é’¥åç§°ã€åŠ å¯†ç®—æ³•å’Œç§é’¥åŠ å¯†å­—ç¬¦ä¸²æŒ‰ç…§ä¸‹é¢æ ¼å¼å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œæœ€åä¸ºäº†å®‰å…¨èµ·è§ï¼Œå’±ä»¬æŠŠæ–‡ä»¶çš„æ‰€æœ‰ç»„ä¿®æ”¹æˆnamedï¼Œæƒé™è®¾ç½®çš„è¦å°ä¸€ç‚¹å¹¶æŠŠè¯¥æ–‡ä»¶åœ¨/etcç›®å½•ä¸­åšä¸€ä¸ªç¡¬é“¾æ¥æ–‡ä»¶ï¼š</span><br></pre></td></tr></table></figure></p>
<p>cd /var/named/chroot/etc/</p>
<p>vim transfer.key<br>key â€œmaster-slaveâ€ {<br>algorithm hmac-md5;<br>secret â€œ1XEEL3tG5DNLOw+1WHfE3Q==â€;<br>};</p>
<p>chown root:named transfer.key<br>chmod 640 transfer.key<br>ln transfer.key /etc/transfer.key<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬3æ­¥ï¼šå¼€å¯å¹¶åŠ è½½bindæœåŠ¡çš„å¯†é’¥éªŒè¯åŠŸèƒ½ï¼Œé¦–å…ˆéœ€è¦åœ¨ä¸»æœåŠ¡å™¨çš„ä¸»é…ç½®æ–‡ä»¶ä¸­åŠ è½½å¯†é’¥éªŒè¯æ–‡ä»¶ï¼Œç„¶åè®¾ç½®åªå¯¹æœ‰master-slaveå¯†é’¥è®¤è¯çš„DNSæœåŠ¡å™¨å…è®¸åŒæ­¥åŸŸååŒºåŸŸæ•°æ®æ–‡ä»¶ï¼š</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.conf<br>include â€œ/etc/transfer.keyâ€;<br>options {<br> listen-on port 53 { any; };<br> listen-on-v6 port 53 { ::1; };<br> directory â€œ/var/namedâ€;<br> dump-file â€œ/var/named/data/cache_dump.dbâ€;<br> statistics-file â€œ/var/named/data/named_stats.txtâ€;<br> memstatistics-file â€œ/var/named/data/named_mem_stats.txtâ€;<br> allow-query { any; };<br> allow-transfer { key master-slave; };</p>
<p> systemctl restart named<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è‡³æ­¤DNSä¸»æœåŠ¡å™¨çš„TSIGå¯†é’¥åŠ å¯†ä¼ è¾“åŠŸèƒ½å°±å·²ç»å®Œæˆäº†ï¼Œè¿™æ ·æ¸…ç©ºä¸‹DNSä»æœåŠ¡å™¨çš„åŒºåŸŸæ•°æ®åŒæ­¥ç›®å½•ï¼Œç„¶åå†æ¬¡é‡å¯ä¸€ä¸‹bindæœåŠ¡ç¨‹åºï¼Œä½†æ­¤æ—¶å°±å·²ç»ä¸èƒ½åƒåˆšåˆšé‚£æ ·è‡ªåŠ¨è·å–åˆ°åŸŸååŒºåŸŸæ•°æ®æ–‡ä»¶å•¦ã€‚</span><br><span class="line">&gt;~ä¸ç¦è®©åˆ˜é„è€å¸ˆæƒ³èµ·æ¥äº†åœ¨00åå°å­¦ç”Ÿè´´å§é‡Œçœ‹åˆ°è¿‡çš„æç¬‘æ®µå­â€”â€”â€œæˆ‘å–œæ¬¢ä¸Šäº†ç­èŠ±ï¼Œä½†å¥¹æ˜¯QQä¼šå‘˜ï¼Œæ€»æ„Ÿè§‰è‡ªå·±é…ä¸ä¸Šå¥¹â€ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬4æ­¥ï¼šé…ç½®ä»æœåŠ¡å™¨æ”¯æŒå¯†é’¥éªŒè¯ï¼Œé…ç½®DNSä»æœåŠ¡å™¨å’Œä¸»æœåŠ¡å™¨çš„æ–¹æ³•å…¶å®å¤§è‡´ç›¸åŒï¼Œéœ€è¦åœ¨bindæœåŠ¡ç¨‹åºçš„ç›®å½•ä¸­åˆ›å»ºå¯†é’¥è®¤è¯æ–‡ä»¶ï¼Œè®¾ç½®ç›¸åº”æƒé™ååšé“¾æ¥æ–‡ä»¶åˆ°/etc/ç›®å½•ï¼š</span><br></pre></td></tr></table></figure></p>
<p>cd /var/named/chroot/etc</p>
<p>vim transfer.key<br>key â€œmaster-slaveâ€ {<br>algorithm hmac-md5;<br>secret â€œ1XEEL3tG5DNLOw+1WHfE3Q==â€;<br>};</p>
<p>chown root:named transfer.key<br>chmod 640 transfer.key<br>ln transfer.key /etc/transfer.key<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬5æ­¥ï¼šå¼€å¯å¹¶åŠ è½½ä»æœåŠ¡å™¨çš„å¯†é’¥éªŒè¯åŠŸèƒ½ï¼Œæ“ä½œæ­¥éª¤ä¹ŸåŒæ ·æ˜¯åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­åŠ è½½å¯†é’¥è®¤è¯æ–‡ä»¶ï¼Œç„¶åæŒ‰ç…§æŒ‡å®šæ ¼å¼å†™ä¸Šä¸»æœåŠ¡å™¨çš„IPåœ°å€å’Œå¯†é’¥åç§°ï¼Œä½†æ³¨æ„å‚æ•°ä½ç½®ä¸è¦å¤ªé å‰ï¼Œå¤§çº¦åœ¨43è¡Œå·¦å³æ¯”è¾ƒåˆé€‚ï¼Œå¦åˆ™bindæœåŠ¡ç¨‹åºä¼šå› ä¸ºæ²¡æœ‰åŠ è½½å®Œé¢„è®¾å‚æ•°è€ŒæŠ¥é”™ï¼š</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.conf<br>include â€œ/etc/transfer.keyâ€;<br>dnssec-enable yes;<br>dnssec-validation yes;<br>dnssec-lookaside auto;<br>server 192.168.10.10<br>{<br>keys { master-slave; };<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬6æ­¥ï¼šDNSä»æœåŠ¡å™¨åŒæ­¥åŸŸååŒºåŸŸæ•°æ®ï¼ŒåŒæ–¹ä¸¤å°æœåŠ¡å™¨çš„bindæœåŠ¡ç¨‹åºéƒ½å·²ç»é…ç½®å¦¥å½“ï¼Œå¹¶è®¾ç½®åŒ¹é…åˆ°äº†ç›¸åŒçš„å¯†é’¥æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥åœ¨ä»æœåŠ¡å™¨ä¸Šé¢é‡å¯ä¸‹bindæœåŠ¡ç¨‹åºï¼Œå°±åˆèƒ½é¡ºåˆ©çš„åŒæ­¥åˆ°åŒºåŸŸæ–‡ä»¶å•¦ã€‚</span><br><span class="line"></span><br><span class="line">#### DNSç¼“å­˜æœåŠ¡å™¨</span><br><span class="line">DNSç¼“å­˜æœåŠ¡å™¨(Caching DNS Server)æ˜¯ä¸€ç§ä¸è´Ÿè´£åŸŸåæ•°æ®ç»´æŠ¤ã€ä¹Ÿä¸è´Ÿè´£åŸŸåè§£æçš„DNSæœåŠ¡ç±»å‹ï¼Œç®€å•æ¥è¯´ç¼“å­˜æœåŠ¡å™¨å°±æ˜¯æŠŠç”¨æˆ·ç»å¸¸ä½¿ç”¨åˆ°çš„åŸŸåä¸IPåœ°å€è§£æè®°å½•ä¿å­˜åœ¨ä¸»æœºæœ¬åœ°ä¸­ï¼Œæå‡ä¸‹æ¬¡è§£æçš„æ•ˆç‡ã€‚DNSç¼“å­˜æœåŠ¡å™¨ä¸€èˆ¬ç”¨äºå¯¹é«˜å“è´¨ä¸Šç½‘æœ‰éœ€æ±‚çš„ä¼ä¸šå†…ç½‘ä¹‹ä¸­ï¼Œä½†å®é™…çš„åº”ç”¨å¹¶ä¸å¹¿æ³›ï¼Œè€Œä¸”ç¼“å­˜æœåŠ¡å™¨è§£ææˆåŠŸä¸å¦è¿˜ä¸æŒ‡å®šçš„ä¸Šçº§DNSæœåŠ¡å™¨å…è®¸ç­–ç•¥ç›¸å…³ï¼Œå› æ­¤åŒå­¦ä»¬å½“å‰ä»…éœ€äº†è§£ä¸‹å³å¯ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨bindæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç¼“å­˜è½¬å‘å‚æ•°ï¼Œåœ¨é»˜è®¤å‚æ•°ä¸‹æ–¹æ·»åŠ ä¸€è¡Œå‚æ•°&quot;forwarders &#123; ä¸Šæ¸¸DNSæœåŠ¡å™¨åœ°å€; &#125;;&quot;ï¼Œä¸Šæ¸¸DNSæœåŠ¡å™¨åœ°å€æŒ‡çš„æ˜¯ä»ä½•å¤„å–å¾—åŒºåŸŸæ•°æ®æ–‡ä»¶ï¼Œä¸»è¦è€ƒè™‘æŸ¥è¯¢é€Ÿåº¦ã€ç¨³å®šæ€§ã€å®‰å…¨æ€§ç­‰å› ç´ ï¼Œåˆ˜é„è€å¸ˆä½¿ç”¨çš„æ˜¯åŒ—äº¬å¸‚å…¬å…±DNSæœåŠ¡å™¨:210.73.64.1ï¼Œè¯·è¯»è€…é€‰æ‹©å‰å…ˆPingä¸‹èƒ½å¦é€šä¿¡ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´è§£æå¤±è´¥!!</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.conf<br>options {<br> listen-on port 53 { any; };<br> listen-on-v6 port 53 { ::1; };<br> directory â€œ/var/namedâ€;<br> dump-file â€œ/var/named/data/cache_dump.dbâ€;<br> statistics-file â€œ/var/named/data/named_stats.txtâ€;<br> memstatistics-file â€œ/var/named/data/named_mem_stats.txtâ€;<br> allow-query { any; };<br> forwarders { 210.73.64.1; };</p>
<p>systemctl restart named<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">é‡å¯DNSæœåŠ¡åéªŒè¯æˆæœï¼ŒæŠŠå®¢æˆ·ç«¯ä¸»æœºç½‘å¡çš„DNSåœ°å€å‚æ•°æŒ‡å‘ä¸ºDNSç¼“å­˜æœåŠ¡å™¨ï¼ˆ192.168.10.10ï¼‰ï¼Œå¦‚å›¾13-8æ‰€ç¤ºã€‚è¿™æ ·å³å¯è®©å®¢æˆ·ç«¯ä½¿ç”¨ç”±æœ¬åœ°DNSæœåŠ¡å™¨æä¾›çš„åŸŸåæŸ¥è¯¢è§£ææœåŠ¡ï¼ŒéªŒè¯DNSç¼“å­˜æœåŠ¡å™¨æ˜¯å¦å¯ä»¥æ­£å¸¸è§£æåŸŸåã€‚</span><br><span class="line"></span><br><span class="line">#### åˆ†ç¦»è§£ææŠ€æœ¯</span><br><span class="line">ç°åœ¨å–œæ¬¢çœ‹ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹ä¹¦ç±çš„æµ·å¤–ç•™å­¦ç”Ÿä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå¦‚æœç»§ç»­æŠŠç½‘ç«™æœåŠ¡å™¨ï¼ˆhttp://www.linuxprobe.com/ï¼‰æ¶è®¾åœ¨åŒ—äº¬å¸‚æœºæˆ¿å†…ï¼Œé‚£ä¹ˆå›½å¤–è¯»è€…è®¿é—®èµ·æ¥é€Ÿåº¦å¿…ç„¶ä¼šå¾ˆæ…¢ï¼Œè‹¥æŠŠç½‘ç«™æœåŠ¡å™¨æ¶è®¾åœ¨ç¾å›½æœºæˆ¿çš„è¯ï¼Œé‚£åˆä¼šè®©å›½å†…è¯»è€…è®¿é—®å˜å¾—å¾ˆéº»çƒ¦ã€‚æ—¢ç„¶è¯»è€…æœ‰éœ€æ±‚ï¼Œåˆ˜é„è€å¸ˆä¹Ÿä¸å·®é’±ï¼Œäºæ˜¯ä¾¿å¯ä»¥è´­ä¹°å¤šå°æœåŠ¡å™¨éƒ¨ç½²åœ¨å…¨çƒå„åœ°ï¼Œç„¶åé‡‡ç”¨DNSæœåŠ¡çš„åˆ†ç¦»è§£æåŠŸèƒ½ï¼Œå³å¯è®©ä¸åŒæ¥æºçš„è¯»è€…å³ä¾¿è®¿é—®çš„æ˜¯ç›¸åŒçš„ç½‘å€ï¼Œæœ€ç»ˆè·å–ç½‘ç«™æ•°æ®çš„æœåŠ¡å™¨ä¹Ÿæ˜¯ä¸åŒçš„ã€‚ç®€å•æ¥è¯´ï¼Œå°±åƒå¦‚å›¾13-9æ‰€ç¤ºï¼Œè®©å›½å†…ç”¨æˆ·è‡ªåŠ¨åŒ¹é…åˆ°åŒ—äº¬æœåŠ¡å™¨ï¼Œè€Œæµ·å¤–ç•™å­¦ç”Ÿè‡ªåŠ¨åŒ¹é…åˆ°ç¾å›½æœåŠ¡å™¨ã€‚</span><br><span class="line"></span><br><span class="line">&gt;DNSï¼šåŒ—äº¬ï¼š122.71.115.10</span><br><span class="line">&gt;DNSï¼šç¾å›½ï¼š106.185.25.10</span><br><span class="line"></span><br><span class="line">&gt;åŒ—äº¬ç”¨æˆ·ï¼š122.71.115.1</span><br><span class="line">&gt;æµ·å¤–ç”¨æˆ·ï¼š106.185.25.1</span><br><span class="line"></span><br><span class="line">é‚£ä¹ˆä¸ºäº†è§£å†³ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹è®¿é—®é€Ÿåº¦çš„é—®é¢˜ï¼Œç«™åŠ¡ç®¡ç†å‘˜å·²ç»åœ¨ç¾å›½æœºæˆ¿è´­ä¹°å¹¶æ¶è®¾å¥½äº†ä¹¦ç±ç½‘ç«™æœåŠ¡å™¨ï¼Œå’±ä»¬éœ€è¦åŠ¨æ‰‹éƒ¨ç½²DNSæœåŠ¡å™¨å¹¶å®ç°åˆ†ç¦»è§£æåŠŸèƒ½ï¼Œè®©åŒ—äº¬ç”¨æˆ·ä¸ç¾å›½ç”¨æˆ·è®¿é—®ç›¸åŒåŸŸåæ—¶ä¹Ÿèƒ½è§£æå‡ºä¸åŒçš„IPåœ°å€ã€‚å»ºè®®åŒå­¦ä»¬è¿˜åŸè™šæ‹Ÿæœºåˆ°æœ€åˆå§‹çŠ¶æ€åé‡å¯å®‰è£…bindæœåŠ¡ç¨‹åºï¼Œé¿å…å¤šä¸ªå®éªŒä¹‹é—´äº§ç”Ÿå†²çªã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šä¿®æ”¹bindæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ï¼ŒæŠŠç›‘å¬ç«¯å£ä¸å…è®¸æŸ¥è¯¢ä¸»æœºä¿®æ”¹ä¸ºanyï¼Œç”±äºè‡ªå·±é…ç½®çš„DNSåˆ†ç¦»è§£æåŠŸèƒ½ä¸DNSæ ¹åŸŸæœåŠ¡å™¨é…ç½®å‚æ•°æœ‰å†²çªï¼Œæ‰€ä»¥éœ€è¦æŠŠ51-54è¡Œå·¦å³çš„æ ¹åŸŸä¿¡æ¯åˆ é™¤æ‰ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.conf<br>åˆ é™¤ä¸‹é¢å†…å®¹<br>zone â€œ.â€ IN {<br>type hint;<br>file â€œnamed.caâ€;<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šç¼–è¾‘åŸŸååŒºåŸŸé…ç½®æ–‡ä»¶ï¼ŒæŠŠåŒºåŸŸé…ç½®æ–‡ä»¶ä¸­åŸæœ‰é»˜è®¤çš„æ•°æ®æ¸…ç©ºï¼Œç„¶åæŒ‰ç…§ä»¥ä¸‹æ ¼å¼å†™å…¥å‚æ•°ã€‚é¦–å…ˆç”¨aclå‚æ•°åˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªå˜é‡åç§°ï¼ˆchinaä¸americanï¼‰ï¼Œè¿™æ ·å½“ä¸‹é¢å†éœ€è¦åŒ¹é…IPåœ°å€çš„æ—¶å€™ï¼Œå°±åªéœ€è¾“å…¥å˜é‡åç§°å³å¯ï¼Œè¿™æ ·ä¸ä»…æ›´å®¹æ˜“é˜…è¯»è¯†åˆ«ï¼Œè€Œä¸”ä¹Ÿåˆ©äºä»Šåä¿®æ”¹ç»´æŠ¤ã€‚ä¸»è¦éš¾ç‚¹æ˜¯ç†è§£viewå‚æ•°æ¡†å†…çš„ä½œç”¨ï¼Œé€šè¿‡åŒ¹é…ç”¨æˆ·åˆ°åº•æ¥æºäºä¸­å›½è¿˜æ˜¯ç¾å›½çš„IPåœ°å€ï¼Œç„¶åå»åˆ†åˆ«åŠ è½½ä¸åŒçš„åŒºåŸŸæ•°æ®æ–‡ä»¶ï¼ˆlinuxprobe.com.chinaä¸linuxprobe.com.americanï¼‰ï¼Œè¿™æ ·å½“æŠŠå¯¹åº”çš„IPåœ°å€åˆ†åˆ«å†™å…¥åˆ°åŒºåŸŸæ•°æ®æ–‡ä»¶åï¼Œå³å¯å®ç°DNSçš„åˆ†ç¦»è§£æåŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯”å¦‚ä¸­å›½çš„ç”¨æˆ·è®¿é—®linuxprobe.comåŸŸçš„æ—¶å€™ï¼Œä¼šå»æŒ‰ç…§linuxprobe.com.chinaåŒºåŸŸæ•°æ®æ–‡ä»¶å†…çš„IPåœ°å€æ‰¾åˆ°å¯¹åº”çš„æœåŠ¡å™¨ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/named.rfc1912.zones<br>acl â€œchinaâ€ { 122.71.115.0/24; };<br>acl â€œamericanâ€ { 106.185.25.0/24;};<br>view â€œchinaâ€{<br>match-clients { â€œchinaâ€; };<br>zone â€œlinuxprobe.comâ€ {<br>type master;<br>file â€œlinuxprobe.com.chinaâ€;<br>};<br>};<br>view â€œamericanâ€ {<br>match-clients { â€œamericanâ€; };<br>zone â€œlinuxprobe.comâ€ {<br>type master;<br>file â€œlinuxprobe.com.americanâ€;<br>};<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬3æ­¥ï¼šå»ºç«‹åŒºåŸŸæ•°æ®æ–‡ä»¶ï¼Œåˆ†åˆ«é€šè¿‡æ¨¡æ¿æ–‡ä»¶åˆ›å»ºå‡ºä¸¤ä»½ä¸åŒåç§°çš„åŒºåŸŸæ•°æ®æ–‡ä»¶ï¼Œåç§°åº”ä¸ä¸Šé¢åŒºåŸŸé…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°å¯¹åº”ï¼š</span><br></pre></td></tr></table></figure></p>
<p>cd /var/named<br>cp -a named.localhost linuxprobe.com.china<br>cp -a named.localhost linuxprobe.com.american<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vim linuxprobe.com.china</span><br></pre></td></tr></table></figure></p>
<p>$TTL 1D    #ç”Ÿå­˜å‘¨æœŸä¸º1å¤©<br>@    IN SOA    linuxprobe.com.    root.linuxprobe.com.    (    </p>
<p>#æˆæƒä¿¡æ¯å¼€å§‹:    #DNSåŒºåŸŸçš„åœ°å€    #åŸŸåç®¡ç†å‘˜çš„é‚®ç®±(ä¸è¦ç”¨@ç¬¦å·)<br>0;serial    #æ›´æ–°åºåˆ—å·<br>1D;refresh    #æ›´æ–°æ—¶é—´<br>1H;retry    #é‡è¯•å»¶æ—¶<br>1W;expire    #å¤±æ•ˆæ—¶é—´<br>3H;minimum    #æ— æ•ˆè§£æè®°å½•çš„ç¼“å­˜æ—¶é—´<br>NS    ns.linuxprobe.com.    #åŸŸåæœåŠ¡å™¨è®°å½•<br>ns    IN A    122.71.115.10    #åœ°å€è®°å½•(ns.linuxprobe.com.)<br>www    IN A    122.71.115.15    #åœ°å€è®°å½•(<a href="http://www.linuxprobe.com." target="_blank" rel="noopener">www.linuxprobe.com.</a>)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vim linuxprobe.com.american</span><br></pre></td></tr></table></figure></p>
<p>$TTL 1D    #ç”Ÿå­˜å‘¨æœŸä¸º1å¤©<br>@    IN SOA    linuxprobe.com.    root.linuxprobe.com.    (    </p>
<p>#æˆæƒä¿¡æ¯å¼€å§‹:    #DNSåŒºåŸŸçš„åœ°å€    #åŸŸåç®¡ç†å‘˜çš„é‚®ç®±(ä¸è¦ç”¨@ç¬¦å·)<br>0;serial    #æ›´æ–°åºåˆ—å·<br>1D;refresh    #æ›´æ–°æ—¶é—´<br>1H;retry    #é‡è¯•å»¶æ—¶<br>1W;expire    #å¤±æ•ˆæ—¶é—´<br>3H;minimum    #æ— æ•ˆè§£æè®°å½•çš„ç¼“å­˜æ—¶é—´<br>NS    ns.linuxprobe.com.    #åŸŸåæœåŠ¡å™¨è®°å½•<br>ns    IN A    106.185.25.10    #åœ°å€è®°å½•(ns.linuxprobe.com.)<br>www    IN A    106.185.25.15    #åœ°å€è®°å½•(<a href="http://www.linuxprobe.com." target="_blank" rel="noopener">www.linuxprobe.com.</a>)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬4æ­¥ï¼šé‡æ–°å¯åŠ¨namedæœåŠ¡ç¨‹åºåéªŒè¯ç»“æœï¼Œè®¾ç½®å®¢æˆ·ç«¯ä¸»æœºï¼ˆWindowsç³»ç»Ÿæˆ–Linuxç³»ç»Ÿå‡å¯ï¼‰çš„IPç½‘å¡åœ°å€åˆ†åˆ«ä¸º122.71.115.1ä¸106.185.25.1ï¼ŒDNSåœ°å€åˆ†åˆ«ä¸ºæœåŠ¡å™¨ä¸»æœºçš„ä¸¤ä¸ªIPåœ°å€ï¼Œè¿™æ ·å½“å’±ä»¬å°è¯•ç”¨nslookupå‘½ä»¤è§£æåŸŸåçš„æ—¶å€™å°±ä¼šå¾ˆæ¸…æ™°çš„çœ‹åˆ°è§£æç»“æœï¼Œè®©ä¸åŒæ¥æºçš„ç”¨æˆ·è®¿é—®åˆ°ä¸åŒçš„æœåŠ¡å™¨ã€‚</span><br></pre></td></tr></table></figure></p>
<p>nslookup <a href="http://www.linuxprobe.com" target="_blank" rel="noopener">www.linuxprobe.com</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## ç¬¬åäº”èŠ‚è¯¾</span><br><span class="line">### ä½¿ç”¨DHCPåŠ¨æ€ç®¡ç†ä¸»æœºåœ°å€</span><br><span class="line">#### åŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†åè®®</span><br><span class="line">DHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†åè®®(Dynamic Host Configuration Protocol)æ˜¯ä¸€ç§åŸºäºUDPåè®®ä¸”ä»…é™ç”¨äºå±€åŸŸç½‘å†…ä½¿ç”¨çš„ç½‘ç»œåè®®ï¼Œæœ€ä¸»è¦çš„ç”¨é€”æ˜¯ä¸ºå±€åŸŸç½‘å†…éƒ¨è®¾å¤‡æˆ–ç½‘ç»œä¾›åº”å•†è‡ªåŠ¨åˆ†é…IPåœ°å€ç­‰ç½‘å¡å‚æ•°ï¼Œé€šå¸¸ä¼šåº”ç”¨åœ¨å¤§å‹çš„å±€åŸŸç½‘ç¯å¢ƒä¸­æˆ–å±€åŸŸç½‘å†…å­˜åœ¨æ¯”è¾ƒå¤šçš„ç§»åŠ¨åŠå…¬è®¾å¤‡ã€‚DHCPæœåŠ¡ç¨‹åºèƒ½å¤Ÿä½¿å±€åŸŸç½‘å†…çš„ä¸»æœºè‡ªåŠ¨ä¸”åŠ¨æ€çš„è·å–IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³åœ°å€ä»¥åŠDNSæœåŠ¡å™¨åœ°å€ç­‰ç½‘å¡ä¿¡æ¯ï¼Œå› æ­¤èƒ½å¤Ÿæœ‰æ•ˆçš„æå‡IPåœ°å€ä½¿ç”¨ç‡ï¼Œæé«˜ç½‘ç»œé…ç½®æ•ˆç‡ï¼Œå‡å°‘ç®¡ç†å’Œç»´æŠ¤æˆæœ¬ã€‚</span><br><span class="line"></span><br><span class="line">ç®€å•æ¥è¯´ï¼ŒDHCPåè®®å°±æ˜¯è®©å®¢æˆ·ç«¯è‡ªåŠ¨è·å¾—ç½‘å¡å‚æ•°çš„æœåŠ¡ï¼Œå¦‚å›¾14-1æ‰€ç¤ºï¼Œè®¾æƒ³æŸæœºæˆ¿å†…æœ‰å¤šå°ä¸»æœºï¼Œå¦‚æœè¦ç»™æ¯å°ä¸»æœºæ‰‹å·¥è®¾ç½®ç½‘å¡å‚æ•°ä¸€å®šéå¸¸éº»çƒ¦ï¼Œè€Œä¸”ä»Šåç»´æŠ¤ä¹Ÿè¦é æ‰‹åŠ¨ä¿®æ”¹ç½‘å¡å‚æ•°æ‰è¡Œï¼Œé‚£å¦‚æœæœºæˆ¿å†…æœ‰100å°æˆ–è€…1000å°ä¸»æœºå‘¢ï¼Ÿæ‰‹å·¥è®¾ç½®ç½‘å¡ä¿¡æ¯å°±å˜å¾—ååˆ†ç¬¨æ‹™ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¸ªè¿ç»´äººå‘˜åŸæ„æ¯å¤©åšè¿™ä¹ˆæ¯ç‡¥ã€é‡å¤æ€§é«˜çš„å·¥ä½œå§ã€‚DHCPåè®®ä¸å…‰èƒ½å®ç°å¯¹ç½‘å¡å‚æ•°çš„è‡ªåŠ¨åˆ†é…ï¼Œè€Œä¸”è¿˜èƒ½ä¿è¯ä»»ä½•IPåœ°å€åœ¨åŒä¸€æ—¶åˆ»åªèƒ½ç”±ä¸€å°å®¢æˆ·æœºä½¿ç”¨ï¼Œä¸”èƒ½å¤Ÿä¸ºæŒ‡å®šä¸»æœºåˆ†é…å›ºå®šçš„IPåœ°å€ã€‚</span><br><span class="line"></span><br><span class="line">DHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†åè®®çš„åº”ç”¨ååˆ†å¹¿æ³›ï¼Œä¸è®ºæ˜¯æœåŠ¡å™¨æœºæˆ¿è¿˜æ˜¯å®¶åº­éƒ½ä¼šåœ¨æ—¥å¸¸ä¸­ä½¿ç”¨åˆ°å®ƒï¼Œæ¯”å¦‚æŸä½åŒå­¦å¼€äº†ä¸€å®¶å’–å•¡é¦†ï¼Œè‚¯å®šå¾ˆå¤šé¡¾å®¢éƒ½æƒ³ä¸€è¾¹æƒ¬æ„çš„å–ç€å’–å•¡ä¸€è¾¹è¿ç€WIFIåˆ·ä¼šå¾®ä¿¡æœ‹å‹åœˆå§ï¼Œè¯•æƒ³ä¸€ä¸‹ä½œä¸ºè€æ¿çš„æ‚¨ï¼Œéœ€è¦åœ¨æ¯ä½é¡¾å®¢è®¾å¤‡ä¸Šæ‰‹åŠ¨çš„è®¾ç½®ä¸‹ç½‘å¡IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³åœ°å€ç­‰ç­‰ä¿¡æ¯ï¼Œè¿™ä¸ç”¨å¤šæƒ³å°±çŸ¥é“ä¸åˆ‡å®é™…äº†ã€‚å¦å¤–è¿˜é¢ä¸´ç€ä¸€ä¸ªæ½œåœ¨é—®é¢˜ï¼Œå› ä¸ºæ¯ä¸ªç±»ä¼¼äº192.168.10.0/24çš„IPåœ°å€æ®µæœ€å¤šåªèƒ½å®¹çº³ä¸¤ç™¾å¤šä¸ªä¸»æœºï¼Œè€Œå’–å•¡å…ä¸€å¤©çš„å®¢æµé‡ä¸€å®šä¸æ­¢ä¸¤ç™¾å¤šäººå§ï¼Œå¦‚æœç»™æ¯ä¸ªäººéƒ½æ‰‹å·¥åˆ†é…äº†ä¸€ä¸ªIPåœ°å€ï¼Œé‚£ä¹ˆå½“é¡¾å®¢ç¦»å¼€å’–å•¡é¦†çš„æ—¶å€™ä¹Ÿå°†å¸¦èµ°è¿™ä¸ªIPåœ°å€ï¼Œä»¥åå¾ˆéš¾å†äº¤ç»™å…¶ä»–äººç»§ç»­ä½¿ç”¨ï¼Œé€ æˆäº†ä¸å°çš„èµ„æºæµªè´¹ï¼Œä¹Ÿå¢åŠ äº†IPåœ°å€çš„ç®¡ç†æˆæœ¬ã€‚</span><br><span class="line"></span><br><span class="line">æ—¢ç„¶ç¡®å®šä»Šåç”Ÿäº§ç¯å¢ƒä¸­è‚¯å®šç¦»ä¸å¼€DHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†åè®®äº†ï¼Œé‚£ä¹ˆä¹Ÿå°±å¾ˆæœ‰å¿…è¦å¥½å¥½ç†Ÿæ‚‰ä¸€ä¸‹DHCPçš„å¸¸è§æœ¯è¯­äº†ï¼š</span><br><span class="line"></span><br><span class="line">&gt;ä½œç”¨åŸŸ:ä¸€ä¸ªå®Œæ•´çš„IPåœ°å€æ®µï¼ŒDHCPåè®®æ ¹æ®ä½œç”¨åŸŸæ¥ç®¡ç†ç½‘ç»œçš„åˆ†å¸ƒã€åˆ†é…IPåœ°å€åŠå…¶ä»–é…ç½®å‚æ•°ã€‚</span><br><span class="line">&gt;è¶…çº§ä½œç”¨åŸŸ:ç”¨äºåŒä¸€ç‰©ç†ç½‘ç»œä¸Šå¤šä¸ªé€»è¾‘IPåœ°å€å­ç½‘æ®µï¼ŒåŒ…å«ä½œç”¨åŸŸçš„åˆ—è¡¨ï¼Œå¹¶å¯¹å­ä½œç”¨åŸŸç»Ÿä¸€ç®¡ç†ã€‚</span><br><span class="line">&gt;æ’é™¤èŒƒå›´:æŠŠæŸäº›IPåœ°å€åœ¨ä½œç”¨åŸŸä¸­æ’é™¤ï¼Œç¡®ä¿è¿™äº›IPåœ°å€ä¸ä¼šè¢«æä¾›ç»™DHCPå®¢æˆ·æœºã€‚</span><br><span class="line">&gt;åœ°å€æ± :åœ¨å®šä¹‰DHCPæœåŠ¡çš„ä½œç”¨åŸŸå¹¶åº”ç”¨æ’é™¤èŒƒå›´åï¼Œå‰©ä½™ç”¨æ¥åŠ¨æ€åˆ†é…ç»™DHCPå®¢æˆ·æœºçš„IPåœ°å€èŒƒå›´ã€‚</span><br><span class="line">&gt;ç§Ÿçº¦:å³DHCPå®¢æˆ·æœºèƒ½å¤Ÿä½¿ç”¨åŠ¨æ€åˆ†é…åˆ°çš„IPåœ°å€çš„æ—¶é—´ã€‚</span><br><span class="line">&gt;é¢„çº¦:ä¿è¯å±€åŸŸå­ç½‘ä¸­ç‰¹å®šè®¾å¤‡æ€»æ˜¯è·å–åˆ°ç›¸åŒçš„IPåœ°å€ã€‚</span><br><span class="line"></span><br><span class="line">#### éƒ¨ç½²dhcpdæœåŠ¡ç¨‹åº</span><br><span class="line">dhcpdæœåŠ¡ç¨‹åºæ˜¯Linuxç³»ç»Ÿä¸­ç”¨äºæä¾›DHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†åè®®çš„æœåŠ¡ï¼Œç¡®è®¤yumä»“åº“é…ç½®å¦¥å½“åå°±å¯ä»¥ç›´æ¥å®‰è£…äº†ï¼ŒDHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†æœåŠ¡åŠŸèƒ½è™½ç„¶ååˆ†ä¸°å¯Œå¼ºå¤§ï¼Œä½†dhcpdæœåŠ¡ç¨‹åºçš„é…ç½®æ­¥éª¤å´ååˆ†ç®€å•ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šé™ä½äº†Linuxç³»ç»Ÿå®ç°DHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†æœåŠ¡çš„é—¨æ§›ã€‚</span><br></pre></td></tr></table></figure></p>
<p>yum -y install dhcp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æ˜¯çš„ï¼Œæ‚¨æ²¡æœ‰çœ‹é”™ï¼æ‰“å¼€dhcpdæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶å‘ç°åªæœ‰3è¡Œæ³¨é‡Šè¯­å¥ï¼Œå¤§æ„æ˜¯å‘Šè¯‰å’±ä»¬é…ç½®æ–‡ä»¶éœ€è¦å…¨éƒ¨ç”±è‡ªå·±æ¥å†™ï¼Œå¦‚æœä¸ç†Ÿæ‚‰çš„è¯å¯ä»¥çœ‹ä¸‹ç¬¬2è¡Œä¸­çš„å‚è€ƒç¤ºä¾‹æ–‡ä»¶ï¼Œå†æˆ–è€…ä¹°æœ¬åˆ˜é„è€å¸ˆçš„ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹è‡ªå­¦ä¹¦ç±å§~å“ˆå“ˆï¼Œæœ€åä¸€å¥æ˜¯ç©ç¬‘äº†ã€‚å¦‚å›¾14-2æ‰€ç¤ºï¼Œä¸€ä¸ªæ ‡å‡†çš„DHCPé…ç½®æ–‡ä»¶åº”è¯¥åŒ…æ‹¬å…¨å±€é…ç½®å‚æ•°ã€å­ç½‘ç½‘æ®µå£°æ˜ã€åœ°å€é…ç½®é€‰é¡¹ä»¥åŠåœ°å€é…ç½®å‚æ•°ï¼š</span><br></pre></td></tr></table></figure></p>
<p>cat /etc/dhcp/dhcpd.conf<br>ddns-update-style interim;<br>ignore client-updates;<br>subnet 192.168.10.1 netmask 255.255.255.0 {<br>    option routers 192.168.10.1;<br>    option subnet-mask 255.255.255.0;<br>    default-lease-time 21600;<br>    max-lease-time 43200;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å…¨å±€é…ç½®å‚æ•°ç”¨äºå®šä¹‰DHCPæœåŠ¡çš„æ•´ä½“è¿è¡Œå‚æ•°ï¼Œè€Œå­ç½‘ç½‘æ®µå£°æ˜ç”¨äºé…ç½®æ•´ä¸ªå­ç½‘æ®µçš„åœ°å€å±æ€§ï¼ŒdhcpdæœåŠ¡ç¨‹åºé…ç½®æ–‡ä»¶çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œåˆ˜é„è€å¸ˆä¸ºåŒå­¦ä»¬æŒ‘é€‰äº†æœ€å¸¸ç”¨å‚æ•°ã€‚å¹¶é€ä¸€è¿›è¡Œäº†ç®€å•ä»‹ç»ï¼Œä¸ºæ¥ä¸‹æ¥å®éªŒæ‰“ä¸‹åŸºç¡€ï¼š</span><br><span class="line"></span><br><span class="line">|å‚æ•°|ä½œç”¨|</span><br><span class="line">|:|</span><br><span class="line">|ddns-update-style ç±»å‹|å®šä¹‰DDNSæœåŠ¡åŠ¨æ€æ›´æ–°çš„ç±»å‹ï¼Œç±»å‹åŒ…æ‹¬:noneï¼ˆä¸æ”¯æŒåŠ¨æ€æ›´æ–°ï¼‰ï¼Œinterimï¼ˆäº’åŠ¨æ›´æ–°æ¨¡å¼ï¼‰ä¸ad-hoc(ç‰¹æ®Šæ›´æ–°æ¨¡å¼)ã€‚|</span><br><span class="line">|allow/ignore client-updates|å…è®¸/å¿½ç•¥å®¢æˆ·æœºæ›´æ–°DNSè®°å½•ã€‚|</span><br><span class="line">|default-lease-time 21600|é»˜è®¤è¶…æ—¶æ—¶é—´ã€‚|</span><br><span class="line">|max-lease-time 43200|æœ€å¤§è¶…æ—¶æ—¶é—´ã€‚|</span><br><span class="line">|option domain-name-servers 8.8.8.8|å®šä¹‰DNSæœåŠ¡å™¨åœ°å€ã€‚|</span><br><span class="line">|option domain-name &quot;domain.org&quot;|å®šä¹‰DNSåŸŸåã€‚|</span><br><span class="line">|range|å®šä¹‰ç”¨äºåˆ†é…çš„IPåœ°å€æ± ã€‚|</span><br><span class="line">|option subnet-mask|å®šä¹‰å®¢æˆ·æœºçš„å­ç½‘æ©ç ã€‚|</span><br><span class="line">|option routers|å®šä¹‰å®¢æˆ·æœºçš„ç½‘å…³åœ°å€ã€‚|</span><br><span class="line">|broadcase-address|å¹¿æ’­åœ°å€	å®šä¹‰å®¢æˆ·æœºçš„å¹¿æ’­åœ°å€ã€‚|</span><br><span class="line">|ntp-server IPåœ°å€|å®šä¹‰å®¢æˆ·æœºçš„ç½‘ç»œæ—¶é—´æœåŠ¡å™¨ï¼ˆNTPï¼‰ã€‚|</span><br><span class="line">|nis-servers IPåœ°å€|å®šä¹‰å®¢æˆ·æœºçš„NISåŸŸæœåŠ¡å™¨çš„åœ°å€ã€‚|</span><br><span class="line">|hardware ç¡¬ä»¶ç±»å‹ MACåœ°å€|æŒ‡å®šç½‘å¡æ¥å£çš„ç±»å‹ä¸MACåœ°å€ã€‚|</span><br><span class="line">|server-name ä¸»æœºå|é€šçŸ¥DHCPå®¢æˆ·æœºæœåŠ¡å™¨çš„ä¸»æœºåã€‚|</span><br><span class="line">|fixed-address IPåœ°å€|å°†æŸä¸ªå›ºå®šIPåœ°å€åˆ†é…ç»™æŒ‡å®šä¸»æœºã€‚|</span><br><span class="line">|time-offset åç§»å·®|æŒ‡å®šå®¢æˆ·æœºä¸æ ¼æ—å°¼æ²»æ—¶é—´çš„åç§»å·®ã€‚|</span><br><span class="line"></span><br><span class="line">#### è‡ªåŠ¨ç®¡ç†IPåœ°å€</span><br><span class="line">DHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†åè®®çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æ›´é«˜æ•ˆçš„é›†ä¸­ç®¡ç†å±€åŸŸç½‘å†…IPåœ°å€èµ„æºï¼Œä½œä¸ºè¿ç»´äººå‘˜åªéœ€è¦åœ¨æœºæˆ¿å†…éƒ¨ç½²ä¸€å°DHCPæœåŠ¡å™¨ï¼Œæ¥ä¸‹æ¥çš„äº‹æƒ…å°±ä¸ç”¨æ“å¿ƒäº†ã€‚DHCPæœåŠ¡ä¼šè‡ªåŠ¨æŠŠIPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³ã€DNSåœ°å€ç­‰ç­‰ç½‘å¡ä¿¡æ¯åˆ†é…ç»™æœ‰éœ€è¦çš„å®¢æˆ·ç«¯ï¼Œå½“å®¢æˆ·ç«¯çš„ç§Ÿçº¦æ—¶é—´åˆ°æœŸåè¿˜å¯ä»¥è‡ªåŠ¨å›æ”¶æ‰€åˆ†é…çš„IPåœ°å€ï¼Œä»¥ä¾¿äº¤ç»™åé¢æ–°åŠ å…¥çš„å®¢æˆ·ä¸»æœºã€‚ä¸ºäº†è®©å®éªŒæ›´æœ‰æŒ‘æˆ˜æ€§ï¼Œåˆ˜é„è€å¸ˆæ¥æ¨¡æ‹Ÿä¸€ä¸ªçœŸå®ç”Ÿäº§ç¯å¢ƒçš„éœ€æ±‚å§â€”â€”â€œæœºæˆ¿è¿è¥éƒ¨é—¨: æ˜æ—¥çº¦æœ‰50åå¤–æ¥å­¦å‘˜è‡ªå¸¦ç¬”è®°æœ¬è®¾å¤‡æ¥æˆ‘å¸åŸ¹è®­å­¦ä¹ ï¼Œè¯·ä¿è¯å­¦å‘˜èƒ½å¤Ÿç”¨æœºæˆ¿æœ¬åœ°DHCPæœåŠ¡å™¨è‡ªåŠ¨è·å–IPåœ°å€å¹¶æ­£å¸¸ä¸Šç½‘â€ï¼Œæœºæˆ¿ç½‘æ®µåŠå‚æ•°å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</span><br><span class="line"></span><br><span class="line">|å‚æ•°åç§°	å€¼|</span><br><span class="line">|:|</span><br><span class="line">|é»˜è®¤ç§Ÿçº¦æ—¶é—´	|21600ç§’|</span><br><span class="line">|æœ€å¤§ç§Ÿçº¦æ—¶é—´	|43200ç§’|</span><br><span class="line">|IPåœ°å€èŒƒå›´|192.168.10.50~192.168.10.150|</span><br><span class="line">|å­ç½‘æ©ç |255.255.255.0|</span><br><span class="line">|ç½‘å…³åœ°å€|192.168.10.1|</span><br><span class="line">|DNSæœåŠ¡åœ°å€|192.168.10.1|</span><br><span class="line">|æœç´¢åŸŸ|linuxprobe.com|</span><br><span class="line"></span><br><span class="line">vim /etc/dhcp/dhcpd.conf</span><br></pre></td></tr></table></figure></p>
<p>ddns-update-style none;    #è®¾ç½®DDNSæœåŠ¡ä¸è‡ªåŠ¨åŠ¨æ€æ›´æ–°ã€‚<br>ignore client-updates;    #å¿½ç•¥å®¢æˆ·æœºæ›´æ–°DNSè®°å½•ã€‚<br>subnet 192.168.10.0 netmask 255.255.255.0 {    #ä½œç”¨åŸŸä¸º192.168.10.0/24ç½‘æ®µã€‚<br>range 192.168.10.50 192.168.10.150;    #IPåœ°å€æ± ä¸º192.168.10.50-150 #ï¼ˆçº¦100ä¸ªIPåœ°å€ï¼‰ã€‚<br>option subnet-mask 255.255.255.0;    #å®šä¹‰å®¢æˆ·æœºé»˜è®¤çš„å­ç½‘æ©ç ã€‚<br>option routers 192.168.10.1;    #å®šä¹‰å®¢æˆ·æœºçš„ç½‘å…³åœ°å€ã€‚<br>option domain-name â€œlinuxprobe.comâ€;    #å®šä¹‰é»˜è®¤çš„æœç´¢åŸŸã€‚<br>option domain-name-servers 192.168.10.1;    #å®šä¹‰å®¢æˆ·æœºçš„DNSåœ°å€ã€‚<br>default-lease-time 21600;     #å®šä¹‰é»˜è®¤ç§Ÿçº¦æ—¶é—´ã€‚<br>max-lease-time 43200;    #å®šä¹‰æœ€å¤§é¢„çº¦æ—¶é—´ã€‚<br>}    #æ­¤ä¸ºç»“æŸç¬¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åœ¨çº¢å¸½è®¤è¯åŠç”Ÿäº§ç¯å¢ƒä¸­å¤§å¤šéƒ½éœ€è¦æŠŠé…ç½®è¿‡çš„æœåŠ¡åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ã€‚</span><br></pre></td></tr></table></figure></p>
<p>systemctl start dhcpd<br>systemctl enable dhcpd<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### åˆ†é…å›ºå®šIPåœ°å€</span><br><span class="line">åœ¨DHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†åè®®ä¸­æœ‰ä¸ªæœ¯è¯­å«åšâ€œé¢„çº¦â€ï¼Œé¢„çº¦æŒ‡çš„æ˜¯ä¿è¯å±€åŸŸç½‘ä¸­ç‰¹å®šçš„è®¾å¤‡æ€»æ˜¯è·å–åˆ°å›ºå®šçš„IPåœ°å€ï¼Œæ¢å¥è¯è¯´å°±æ˜¯dhcpdæœåŠ¡ç¨‹åºä¼šæŠŠæŸä¸ªIPåœ°å€ç§è—ä¸‹æ¥ï¼Œåªæœ‰åŒ¹é…åˆ°ç‰¹å®šä¸»æœºäº†æ‰ä¼šæ‹¿å‡ºæ¥åˆ†é…ï¼Œè®©æŸä¸ªç‰¹å®šä¸»æœºæ€»èƒ½è·å–åˆ°å›ºå®šçš„IPåœ°å€ã€‚</span><br><span class="line"></span><br><span class="line">è¦æƒ³æŠŠIPåœ°å€ä¸æŸä¸ªä¸»æœºç›¸äº’ç»‘å®šï¼Œé‚£ä¹ˆéœ€è¦è¯¥ä¸»æœºçš„MACç½‘å¡ç‰©ç†åœ°å€æ‰å¯ä»¥ï¼ŒMACåœ°å€æ˜¯ç½‘å¡ä¸Šé¢çš„ä¸€ä¸²ç‹¬ç«‹æ ‡è¯†ç¬¦ï¼Œå› æ­¤ä¸ç”¨æ‹…å¿ƒå†²çªçš„æƒ…å†µï¼Œå¦‚å›¾14-6æ‰€ç¤ºï¼Œå’±ä»¬åœ¨Linuxç³»ç»Ÿæˆ–Windowsç³»ç»Ÿä¸­éƒ½å¯ä»¥é€šè¿‡æŸ¥çœ‹ç½‘å¡çŠ¶æ€æ¥æŸ¥çœ‹åˆ°è¿™ä¸ªMACå€¼ï¼ŒdhcpdæœåŠ¡ç¨‹åºçš„é…ç½®å‚æ•°æ ¼å¼å¦‚ä¸‹ï¼š</span><br></pre></td></tr></table></figure></p>
<p>host ä¸»æœºåç§° {<br>hardware    ethernet    #è¯¥ä¸»æœºçš„MACåœ°å€;<br>fixed-address    #æ¬²æŒ‡å®šçš„IPåœ°å€;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æ­¤æ—¶ä¸€å®šæœ‰åŒå­¦ä¼šé—®å¦‚æœä¸æ–¹ä¾¿æŸ¥çœ‹MACåœ°å€æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”å¦‚ç»™å…¬å¸è€æ¿çš„æœºå™¨ç»‘å®šIPåœ°å€ï¼Œæ€»ä¸èƒ½éšä¾¿å°±å»çœ‹åˆ«äººç”µè„‘ä¿¡æ¯å§ï¼Œåˆ˜é„è€å¸ˆå°±æ¥å‘Šè¯‰å¤§å®¶ä¸€ä¸ªå¾ˆå¥½çš„åŠæ³•ï¼Œé¦–å…ˆå’±ä»¬å¯åŠ¨dhcpdæœåŠ¡ç¨‹åºï¼Œç„¶åä¸ºè€æ¿çš„ä¸»æœºåˆ†é…ä¸€ä¸ªIPåœ°å€ï¼Œè¿™æ ·åœ¨DHCPæœåŠ¡å™¨æœ¬åœ°çš„æ—¥å¿—æ–‡ä»¶ä¸­å°±ä¼šä¿å­˜æœ‰äº†è¿™æ¬¡çš„IPåœ°å€åˆ†é…è®°å½•ï¼Œé€šè¿‡çœ‹æ—¥å¿—æ–‡ä»¶æ¥è·å–åˆ°å¯¹æ–¹ç”µè„‘çš„ç½‘å¡MACåœ°å€å•¦~</span><br></pre></td></tr></table></figure></p>
<p>tail -f /var/log/messages<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Windowsç³»ç»Ÿä¸­ç›´æ¥æŸ¥çœ‹åˆ°çš„MACåœ°å€æ˜¯ç±»ä¼¼äº00-0c-29-27-c6-12è¿™æ ·çš„ï¼Œå¾ˆæ˜æ˜¾MACåœ°å€è™½ç„¶å€¼æ˜¯ä¸€æ ·çš„ï¼Œä½†é—´éš”ç¬¦å˜æˆäº†-ï¼ˆå‡å·ï¼‰ï¼Œå› æ­¤å’±ä»¬åœ¨Linuxç³»ç»Ÿä¸­é…ç½®dhcpdæœåŠ¡ç¨‹åºçš„æ—¶å€™ä¸€å®šè¦ä¿è¯é‡Œé¢çš„MACåœ°å€éƒ½æ˜¯ä»¥:ï¼ˆå†’å·ï¼‰æ¥é—´éš”çš„å“¦~</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/dhcp/dhcpd.conf<br>ddns-update-style none;<br>ignore client-updates;<br>subnet 192.168.10.0 netmask 255.255.255.0 {<br>range 192.168.10.50 192.168.10.150;<br>option subnet-mask 255.255.255.0;<br>option routers 192.168.10.1;<br>option domain-name â€œlinuxprobe.comâ€;<br>option domain-name-servers 192.168.10.1;<br>default-lease-time 21600;<br>max-lease-time 43200;<br>host linuxprobe {<br>hardware ethernet 00:0c:29:27:c6:12;<br>fixed-address 192.168.10.88;<br>}<br>}</p>
<p>systemctl restart dhcpd<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### ä½¿ç”¨Postfixä¸Dovecotéƒ¨ç½²é‚®ä»¶ç³»ç»Ÿ</span><br><span class="line">#### ç”µå­é‚®ä»¶ç³»ç»Ÿ</span><br><span class="line">20ä¸–çºª60å¹´ä»£æ­£å¤„åœ¨ç¾è‹ä¸¤å›½çš„å†·æˆ˜æ—¶æœŸï¼Œç¾å›½å†›æ–¹è®¤ä¸ºåº”è¯¥åœ¨ç§‘æŠ€æŠ€æœ¯ä¸ŠæŒç»­å æ®é¢†å…ˆåœ°ä½ï¼Œè¿™æ ·æœ‰åŠ©äºåœ¨æœªæ¥çš„æˆ˜äº‰ä¸­å–å¾—ä¼˜åŠ¿ï¼Œå› æ­¤ä¾¿ç”±ç¾å›½å›½é˜²éƒ¨èµ„åŠ©å¹¶å‘èµ·äº†ä¸€é¡¹å«åšARPANETçš„ç§‘ç ”é¡¹ç›®ï¼Œè¿™é¡¹ç§‘ç ”é¡¹ç›®å³æ˜¯å¤§å®¶æ‰€ç†ŸçŸ¥çš„é˜¿å¸•ç½‘è®¡åˆ’ï¼Œä¹Ÿå°±æ˜¯å½“ä»Šäº’è”ç½‘æŠ€æœ¯çš„é›å½¢ï¼Œé˜¿å¸•ç½‘è®¡åˆ’å®ç°äº†äººç±»é¦–æ¬¡æ„ä¹‰ä¸Šçš„å°åŒ…äº¤æ¢ç½‘ç»œã€‚ä½†å¾ˆå¿«åœ¨1971å¹´å°±é‡åˆ°äº†ä¸¥å³»é—®é¢˜ï¼Œå‚äºé˜¿å¸•ç½‘ç§‘ç ”é¡¹ç›®çš„ç§‘å­¦å®¶å·¥ä½œåœ¨ç¾å›½ä¸åŒåœ°åŒºï¼Œç”šè‡³è¿˜å› ä¸ºæ—¶å·®çš„å½±å“è€Œä¸èƒ½åŠæ—¶çš„åˆ†äº«å„è‡ªçš„ç ”ç©¶æˆæœï¼Œå› æ­¤ç§‘å­¦å®¶ä»¬è¿«åˆ‡çš„éœ€è¦ä¸€ç§èƒ½å¤Ÿå€ŸåŠ©äºç½‘ç»œä¸”å»ºç«‹åœ¨è®¡ç®—æœºä¹‹é—´çš„ä¼ è¾“æ•°æ®çš„æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">ä¹‹å‰å­¦ä¹ çš„WEBç½‘ç«™æœåŠ¡æˆ–FTPæ–‡ä»¶ä¼ è¾“æœåŠ¡ä¹Ÿèƒ½å¤Ÿå®ç°æ•°æ®äº¤æ¢ï¼Œä½†è¿™äº›ä¼ è¾“æ–¹å¼éƒ½è¦åƒæ‰“ç”µè¯ä¸€æ ·ï¼ŒåŒæ–¹éƒ½å¿…é¡»åŒæ—¶åœ¨çº¿æ‰èƒ½å®Œæˆä¼ è¾“å·¥ä½œï¼Œå¦‚æœå¯¹æ–¹çš„ä¸»æœºå®•æœºæˆ–ç§‘ç ”äººå‘˜ä¸´æ—¶ç¦»å¼€ï¼Œå°±æœ‰å¯èƒ½é”™è¿‡æŸäº›ç§‘ç ”ç»“æœäº†ã€‚å¥½åœ¨å½“æ—¶éº»çœç†å·¥å­¦é™¢çš„Ray Tomlinsonåšå£«ä¹Ÿå‚ä¸åˆ°äº†é˜¿å¸•ç½‘è®¡åˆ’çš„ç§‘ç ”é¡¹ç›®ä¸­ï¼Œä»–è§‰å¾—æœ‰å¿…è¦è®¾è®¡ä¸€ç§ç±»ä¼¼äºâ€œä¿¡ä»¶â€çš„ä¼ è¾“æœåŠ¡ï¼Œå‡†å¤‡ä¸€ä¸ªä¿¡ç®±ï¼Œè¿™æ ·å³ä¾¿å¯¹æ–¹ä¸´æ—¶ä¸åœ¨çº¿ä¹Ÿèƒ½å¤Ÿå®Œæˆæ•°æ®çš„æ¥æ”¶ï¼Œå½“å¯¹æ–¹ä¸Šçº¿åå†æ¥å¤„ç†å°±å¯ä»¥äº†ï¼Œäºæ˜¯Ray Tomlinsonåšå£«ç”¨äº†å°†è¿‘ä¸€å¹´çš„æ—¶é—´å°±å®Œæˆäº†Emailç”µå­é‚®ä»¶çš„è®¾è®¡ï¼Œå¹¶åœ¨1971å¹´ç§‹å¤©ä½¿ç”¨SNDMSGè½¯ä»¶å‘è‡ªå·±çš„å¦ä¸€å°ç”µè„‘å‘é€å‡ºäº†äººç±»å†å²ä¸Šç¬¬ä¸€å°Emailç”µå­é‚®ä»¶ï¼Œå®ƒæ ‡å¿—ç€é‚®ä»¶ç³»ç»Ÿåœ¨äººç±»äº’è”ç½‘ä¸­è¯ç”Ÿäº†ã€‚</span><br><span class="line"></span><br><span class="line">æ—¢ç„¶è¦åœ¨äº’è”ç½‘ä¸­ç»™å…¶ä»–äººå‘é€ç”µå­é‚®ä»¶ï¼Œé‚£ä¹ˆå¯¹æ–¹ç”¨æˆ·çš„æ˜µç§°ä»£å·å¿…é¡»æ˜¯å…·æœ‰å”¯ä¸€æ€§çš„ï¼Œå¦åˆ™è¿™å°é‚®ä»¶å¯èƒ½ä¼šåŒæ—¶å‘ç»™å¤šä¸ªé‡åçš„ç”¨æˆ·ï¼Œä¹Ÿæˆ–è€…å¹²è„†è°éƒ½æ”¶ä¸åˆ°äº†ã€‚å› æ­¤å½“æ—¶Ray Tomlinsonåšå£«å†³å®šé€‰æ‹©ç”¨â€œå§“å@ç”µè„‘ä¸»æœºåç§°â€çš„æ ¼å¼æ¥è§„èŒƒç”µå­é‚®ç®±çš„åç§°ï¼Œè€Œé€‰æ‹©ç”¨@ç¬¦å·åšé—´éš”ç¬¦çš„åŸå› å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºRay Tomlinsonåšå£«è§‰å¾—äººç±»çš„å§“åå’Œç”µè„‘ä¸»æœºåç§°ä¸­åº”è¯¥ä¸ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ª@ç¬¦å·å§~æ‰€ä»¥å…·æœ‰äº†ç›¸å¯¹çš„å”¯ä¸€æ€§ï¼Œå°±é€‰æ‹©äº†è¿™ä¸ªç¬¦å·ï¼~</span><br><span class="line"></span><br><span class="line">ç”µå­é‚®ä»¶ç³»ç»Ÿçš„ä¼ è¾“åŸºäºé‚®ä»¶åè®®å®Œæˆï¼Œå¸¸è§çš„é‚®ä»¶åè®®åŒ…æ‹¬SMTPç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼Œç”¨äºå‘é€å’Œä¸­è½¬å‘å‡ºçš„ç”µå­é‚®ä»¶ï¼Œå ç”¨æœåŠ¡å™¨çš„25/TCPç«¯å£å·ã€‚POP3ç¬¬ä¸‰ç‰ˆé‚®å±€åè®®ï¼Œç”¨äºæŠŠé‚®ä»¶å­˜å‚¨åˆ°æœ¬åœ°ä¸»æœºï¼Œå ç”¨æœåŠ¡å™¨çš„110/TCPç«¯å£å·ã€‚IMAP4ç¬¬å››ç‰ˆäº’è”ç½‘ä¿¡æ¯è®¿é—®åè®®ï¼Œç”¨äºåœ¨æœ¬åœ°ä¸»æœºä¸Šè®¿é—®é‚®ä»¶ï¼Œå ç”¨æœåŠ¡å™¨çš„143/TCPç«¯å£å·ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨ç”µå­é‚®ä»¶ç³»ç»ŸæœåŠ¡ä¸­ç”¨äºä¸ºç”¨æˆ·æ”¶å‘é‚®ä»¶çš„æœåŠ¡å™¨è¢«å«åšMUAç”¨æˆ·ä»£ç†ï¼ˆMail User Agentï¼‰ï¼Œå¦å¤–æ—¢ç„¶ç”µå­é‚®ä»¶ç³»ç»Ÿèƒ½å¤Ÿè®©å®¢æˆ·ä¸åœ¨çº¿çš„æƒ…å†µä¸‹ä¾ç„¶å¯ä»¥å®Œæˆæ•°æ®ä¼ è¾“ï¼Œé‚£è‚¯å®šè¦æœ‰ä¸€ä¸ªç”¨äºå¸®åŠ©ç”¨æˆ·ä¸´æ—¶ä¿å­˜é‚®ä»¶æ•°æ®çš„â€œä¿¡ç®±â€æœåŠ¡å™¨å§ï¼Œè¿™ä¸ªç”¨äºä¿å­˜ç”¨æˆ·é‚®ä»¶çš„æœåŠ¡å™¨å«åšMDAé‚®ä»¶æŠ•é€’ä»£ç†ï¼ˆMail Delivery Agentï¼‰ï¼Œå®ƒçš„å·¥ä½œä¸»è¦æ˜¯æŠŠæ¥è‡ªäºMTAçš„é‚®ä»¶ä¿å­˜åˆ°æœ¬æœºçš„æ”¶ä»¶ç®±ä¸­ï¼Œè€Œä¸åŒçš„ç”µå­é‚®ä»¶æœåŠ¡ä¾›åº”å•†ä¹‹é—´å‘é€é‚®ä»¶è¿˜è¦ç»è¿‡MTAé‚®ä»¶ä¼ è¾“ä»£ç†(Mail Transfer Agent)çš„è½¬å‘å¤„ç†ï¼Œå®ƒçš„å·¥ä½œå°±æ˜¯æŠŠæ¥è‡ªäºMUAçš„é‚®ä»¶è½¬å‘è‡³åˆé€‚çš„MTAæœåŠ¡å™¨ä¸­ï¼Œä¾‹å¦‚ä»æ–°æµªé‚®ç®±å‘é€ä¸€å°é‚®ä»¶åˆ°è°·æ­Œé‚®ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">MUA-&gt;MTA-&gt;MTA-&gt;MUA</span><br><span class="line"></span><br><span class="line">å‘ä¿¡äºº(MUA)ä½¿ç”¨STMPå‘é€é‚®ä»¶åˆ°æ–°æµªæœåŠ¡å™¨(MTA)ï¼Œæ–°æµªæœåŠ¡å™¨(MTA)ä½¿ç”¨STMPå‘é€é‚®ä»¶åˆ°è°·æ­ŒæœåŠ¡å™¨(MTA),è°·æ­ŒæœåŠ¡å™¨(MTA)ä½¿ç”¨POP3æˆ–IMAP4è®©æ”¶ä¿¡äºº(MUA)æ¥æ”¶é‚®ä»¶</span><br><span class="line"></span><br><span class="line">æ€»ç»“æ¥è¯´ï¼Œä¸€èˆ¬çš„ç½‘ç»œæœåŠ¡ç¨‹åºä¼ è¾“ä¿¡æ¯å°±åƒæ‹¨æ‰“ç”µè¯ä¸€æ ·ï¼Œéœ€è¦å¯¹æ–¹å½“å‰ä¹Ÿä¿æŒåœ¨çº¿ï¼Œå¦åˆ™ä¼šæŠ¥é”™è¿æ¥è¶…æ—¶ï¼Œè€Œç”µå­é‚®ä»¶ç³»ç»Ÿçš„ç”¨æˆ·åœ¨å‘é€é‚®ä»¶åå°±ä¸å¿…é¡»ç­‰å¾…æŠ•é€’å·¥ä½œå®Œæˆå†ä¸‹çº¿ï¼Œå› ä¸ºå¦‚æœå¯¹æ–¹ä¸»æœºå®•æœºæˆ–ä¸´æ—¶ç¦»å¼€äº†ï¼Œé‚£ä¹ˆå‘ä»¶æœåŠ¡å™¨å°±ä¼šæŠŠè¦å‘é€çš„å†…å®¹è‡ªåŠ¨çš„æš‚æ—¶ä¿å­˜åˆ°æœ¬åœ°ï¼Œæ£€æµ‹åˆ°å¯¹æ–¹æœåŠ¡å™¨æ¢å¤åä¼šç«‹å³å†æ¬¡æŠ•é€’ï¼Œè¿™æœŸé—´ä¸€èˆ¬æ— éœ€è¿ç»´äººå‘˜æ“ä½œã€‚å¦å¤–å¦‚æœåŒå­¦ä»¬æœ‰å…´è¶£å­¦å®Œä¹‹ååœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ä¸€ä¸ªä¼ä¸šçº§çš„ç”µå­é‚®ä»¶ç³»ç»Ÿï¼Œåˆ˜é„è€å¸ˆç»™å¤§å®¶æ€»ç»“äº†å››ç‚¹éœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼Œé¦–å…ˆæ˜¯ååƒåœ¾ä¸åç—…æ¯’æ¨¡å—ï¼Œå®ƒèƒ½å¤Ÿå¾ˆæœ‰æ•ˆçš„é˜»æ­¢åƒåœ¾é‚®ä»¶æˆ–ç—…æ¯’é‚®ä»¶å¯¹ä¼ä¸šé‚®ç®±çš„å¹²æ‰°ï¼Œå…¶æ¬¡æ˜¯é‚®ä»¶åŠ å¯†ï¼Œæœ‰æ•ˆä¿æŠ¤ä¼ä¸šå†…é‚®ä»¶å†…å®¹ä¸è¢«éª‡å®¢ç›—å–å’Œç¯¡æ”¹ï¼Œè€Œé‚®ä»¶ç›‘æ§å®¡æ ¸æ¨¡å—åˆ™æ˜¯å¾ˆå¥½çš„ç›‘ç®¡æªæ–½ï¼Œæœ‰æ•ˆçš„ç›‘æ§å…¨ä½“èŒå‘˜é‚®ä»¶å†…å®¹ä¸­æœ‰æ— æ•æ„Ÿè¯ï¼Œé€éœ²ä¼ä¸šèµ„æ–™ç­‰è¿è§„è¡Œä¸ºï¼Œæœ€åå°±æ˜¯è¦å¼ºè°ƒä¸‹ç¨³å®šæ€§äº†ï¼Œç”µå­é‚®ä»¶ç³»ç»Ÿçš„ç¨³å®šæ€§è‡³å…³é‡è¦ï¼Œè¿ç»´äººå‘˜åº”åšåˆ°ä¿è¯ç”µå­é‚®ä»¶ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œï¼Œå¹¶åŠæ—¶åšå¥½é˜²èŒƒDDOSåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»çš„å‡†å¤‡ã€‚</span><br><span class="line"></span><br><span class="line">#### éƒ¨ç½²åŸºç¡€ç”µå­é‚®ä»¶ç³»ç»Ÿ</span><br><span class="line">ä¸€ä¸ªæœ€åŸºç¡€çš„ç”µå­é‚®ä»¶ç³»ç»Ÿè‚¯å®šè¦åŒ…æ‹¬æœ‰å‘ä»¶æœåŠ¡å’Œæ”¶ä»¶æœåŠ¡ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨åŸºäºSMTPåè®®çš„PostfixæœåŠ¡ç¨‹åºæ¥æä¾›å‘ä»¶æœåŠ¡åŠŸèƒ½ï¼Œä»¥åŠç”¨åŸºäºPOP3åè®®çš„DovecotæœåŠ¡ç¨‹åºæ¥æä¾›æ”¶ä»¶æœåŠ¡åŠŸèƒ½ï¼Œè¿™æ ·å®¢æˆ·ç«¯åœ¨ä½¿ç”¨ç±»ä¼¼äºOutLook Expressæˆ–Foxmailçš„å®¢æˆ·ç«¯æœåŠ¡ç¨‹åºæ—¶å°±å¯ä»¥æ­£å¸¸çš„æ”¶å‘ä¿¡ä»¶äº†ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨çº¢å¸½RHEL5ã€çº¢å¸½RHEL6åŠè¯¸å¤šæ—©æœŸLinuxç³»ç»Ÿä¸­é»˜è®¤ä½¿ç”¨çš„å‘ä»¶æœåŠ¡æ˜¯ç”±sendmailæœåŠ¡ç¨‹åºæ¥æä¾›çš„ï¼Œè€Œåœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­å·²ç»æ›¿æ¢æˆäº†PostfixæœåŠ¡ç¨‹åºï¼ŒPostfixç›¸æ¯”Sendmailç»™æˆ‘æœ€å¤§çš„æ„Ÿè§‰å°±æ˜¯é…ç½®å˜å¾—ç®€å•äº†ï¼Œå‡å°‘äº†å¾ˆå¤šä¸å¿…è¦çš„é…ç½®æ­¥éª¤ï¼Œè€Œä¸”åœ¨ç¨³å®šæ€§ã€å¹¶å‘é‡ç­‰æ–¹é¢ç¡®å®ä¹Ÿæœ‰å¾ˆå¤§çš„æ”¹è¿›ï¼Œåˆ˜é„è€å¸ˆç›¸ä¿¡PostfixæœåŠ¡ç¨‹åºä¼šä¸€ç›´ä¿ç•™ä¸‹å»çš„ï¼ŒåŒå­¦ä»¬è¦å¥½å¥½å­¦ä¹ å•¦~</span><br><span class="line"></span><br><span class="line">äººä»¬ç”Ÿæ´»ä¸­çš„é‚®ç®±åœ°å€ä¸€èˆ¬éƒ½æ˜¯ç±»ä¼¼äºâ€œroot@linuxprobe.comâ€ è¿™æ ·çš„æ ·å­ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§â€œç”¨æˆ·å@ä¸»æœºåœ°å€ï¼ˆåŸŸåï¼‰â€æ ¼å¼è§„èŒƒçš„ï¼Œå¦‚æœç»™æˆ‘ä¸€ä¸²â€œroot@192.168.10.10â€çš„ä¿¡æ¯ï¼Œåˆ˜é„è€å¸ˆå¯èƒ½çŒœä¸åˆ°æ˜¯ä¸ªé‚®ç®±åœ°å€ï¼Œè§‰å¾—æ›´åƒæ˜¯SSHåè®®çš„è¿æ¥ä¿¡æ¯å§ï¼Œå› æ­¤è¦æƒ³æ›´å¥½çš„æ£€éªŒé…ç½®ç”µå­é‚®ä»¶ç³»ç»Ÿçš„æ•ˆæœï¼Œéœ€è¦å…ˆæŠŠbindæœåŠ¡ç¨‹åºéƒ¨ç½²èµ·æ¥ï¼Œä¸ºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æä¾›DNSåŸŸåè§£æçš„æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šé…ç½®æœåŠ¡å™¨ä¸»æœºåç§°ï¼Œéœ€è¦ä¿è¯æœåŠ¡å™¨ä¸»æœºåç§°ä¸å‘ä¿¡åŸŸåä¿æŒä¸€è‡´ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vi /etc/hostname<br>mail.linuxprobe.com<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šä¸ºç”µå­é‚®ä»¶ç³»ç»Ÿæä¾›åŸŸåè§£æã€‚</span><br></pre></td></tr></table></figure></p>
<p>cat /etc/named.conf<br>10 options {<br> 11 listen-on port 53 { any; };<br> 12 listen-on-v6 port 53 { ::1; };<br> 13 directory â€œ/var/namedâ€;<br> 14 dump-file â€œ/var/named/data/cache_dump.dbâ€;<br> 15 statistics-file â€œ/var/named/data/named_stats.txtâ€;<br> 16 memstatistics-file â€œ/var/named/data/named_mem_stats.txtâ€;<br> 17 allow-query { any; };<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>cat /etc/named.rfc1912.zones<br>zone â€œlinuxprobe.comâ€ IN {<br>type master;<br>file â€œlinuxprobe.com.zoneâ€;<br>allow-update {none;};<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>cat /var/named/linuxprobe.com.zone<br>$TTL 1D<br>@    IN SOA    linuxprobe.com.    root.linuxprobe.com.    (<br>0;serial<br>1D;refresh<br>1H;retry<br>1W;expire<br>3H;minimum<br>NS    ns.linuxprobe.com.<br>ns    IN A    192.168.10.10<br>@    IN MX 10    mail.linuxprobe.com.<br>mail    IN A    192.168.10.10<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### é…ç½®PostfixæœåŠ¡ç¨‹åº</span><br><span class="line">Postfixæ˜¯ä¸€æ¬¾ç”±IBMé›†å›¢å‡ºèµ„ç ”å‘çš„å…è´¹å¼€æºç”µå­é‚®ä»¶æœåŠ¡ç¨‹åºï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„å…¼å®¹SendmailæœåŠ¡ç¨‹åºï¼Œä¹Ÿå°±æ˜¯è¯´Sendmailç”¨æˆ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿ç§»åˆ°æ–°çš„æœåŠ¡ä¸Šé¢ï¼ŒPostfixæœåŠ¡çš„æ”¶ä»¶ã€å‘ä»¶æ€§èƒ½ç¡®å®å¼ºè¿‡SendmailæœåŠ¡ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨å¢åŠ ã€å‡å°‘è¿›ç¨‹çš„æ•°é‡æ¥ä¿è¯ç”µå­é‚®ä»¶ç³»ç»Ÿçš„é«˜æ€§èƒ½ä¸ç¨³å®šæ€§ï¼Œå¦å¤–PostfixæœåŠ¡ç¨‹åºæ˜¯ç”±è¯¸å¤šçš„å°æ¨¡å—ç»„æˆï¼Œæ¯ä¸ªå°æ¨¡å—éƒ½å¯ä»¥å®Œæˆç‰¹å®šçš„åŠŸèƒ½ï¼Œå› æ­¤åœ¨ä»Šåçš„ç”Ÿäº§å·¥ä½œç¯å¢ƒä¸­å¯ä»¥çµæ´»æ­é…å®ƒä»¬ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šå®‰è£…PostfixæœåŠ¡ç¨‹åºï¼Œå½“ç„¶è¿™ä¸€æ­¥åœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­æ˜¯å¤šä½™çš„ï¼Œåˆ˜é„è€å¸ˆæŠŠæ­¥éª¤å†™ä¸‹æ¥çš„ç›®çš„æ˜¯ä¸ºäº†è®©åŒå­¦ä»¬è¯»å®Œè¿™æœ¬ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹åä¸ä»…èƒ½å¤ŸæŒæ¡çº¢å¸½RHELç³»ç»Ÿï¼Œè¿˜èƒ½ç«‹å³ä¸Šæ‰‹fedoraã€centosç­‰ç­‰ä¸»æµçš„Linuxç³»ç»Ÿï¼Œå½“é‚£äº›ç³»ç»Ÿæ²¡æœ‰PostfixæœåŠ¡ç¨‹åºçš„æ—¶å€™ä¹Ÿä¸ç”¨æ…Œ~å¯¹äº†ï¼Œæœ€åè®°å¾—æŠŠiptablesé˜²ç«å¢™ç»™ç¦ç”¨æ‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¤–éƒ¨ç”¨æˆ·è®¿é—®ä¸äº†å’±ä»¬çš„ç”µå­é‚®ä»¶ç³»ç»Ÿã€‚</span><br></pre></td></tr></table></figure></p>
<p>yum -y install postfix<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šé…ç½®PostfixæœåŠ¡ç¨‹åºï¼Œå¯¹äºåˆæ¬¡çœ‹åˆ°PostfixæœåŠ¡ç¨‹åºä¸»é…ç½®æ–‡ä»¶ï¼ˆ/etc/postfix/main.cfï¼‰çš„åŒå­¦ä¸€å®šä¼šè¢«å“åˆ°å§ï¼Œç«Ÿç„¶è¶³è¶³æœ‰679è¡Œå·¦å³å‘¢ï¼Œä½†å…¶å®ä¸å¿…æ‹…å¿ƒï¼Œè¿™é‡Œé¢ç»å¤§å¤šæ•°çš„å†…å®¹ä¾ç„¶æ˜¯æ³¨é‡Šä¿¡æ¯ï¼Œè€Œä¸”åˆ˜é„è€å¸ˆä¸€ç›´åœ¨å¼ºè°ƒLinuxç³»ç»Ÿæ­£ç¡®çš„å­¦ä¹ æ–¹æ³•ï¼Œè´Ÿè´£ä»»çš„å¥½è€å¸ˆä¸åº”åªæ˜¯åšä¹¦æœ¬çš„æ¬è¿å·¥ï¼Œæ›´åº”è¯¥åšä¸€åä¼˜è´¨å†…å®¹çš„æç‚¼è€…ï¼Œå› æ­¤åˆ˜é„è€å¸ˆç¿»éäº†é…ç½®å‚æ•°ä»‹ç»ï¼Œä»¥åŠç»“åˆè¿ç»´å·¥ä½œç»éªŒæœ€ç»ˆæ€»ç»“å‡ºäº†æœ€åº”è¯¥æŒæ¡çš„7ä¸ªå‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">|å‚æ•°|ä½œç”¨|</span><br><span class="line">|:|</span><br><span class="line">|myhostname|é‚®å±€ç³»ç»Ÿçš„ä¸»æœºåã€‚|</span><br><span class="line">|mydomain|é‚®å±€ç³»ç»Ÿçš„åŸŸåã€‚|</span><br><span class="line">|myorigin|ä»æœ¬æœºå¯„å‡ºé‚®ä»¶çš„åŸŸååç§°ã€‚|</span><br><span class="line">|inet_interfaces|ç›‘å¬çš„ç½‘å¡æ¥å£ã€‚|</span><br><span class="line">|mydestination|å¯æ¥æ”¶é‚®ä»¶çš„ä¸»æœºåæˆ–åŸŸåã€‚|</span><br><span class="line">|mynetworks|è®¾ç½®å¯è½¬å‘é‚£äº›ä¸»æœºçš„é‚®ä»¶ã€‚|</span><br><span class="line">|relay_domains|è®¾ç½®å¯è½¬å‘é‚£äº›ç½‘åŸŸçš„é‚®ä»¶|</span><br><span class="line"></span><br><span class="line">PostfixæœåŠ¡ç¨‹åºæ€»å…±éœ€è¦ä¿®æ”¹äº”å¤„ï¼Œé¦–å…ˆæ˜¯åœ¨çº¦76è¡Œå·¦å³å®šä¹‰æœ‰ä¸€ä¸ªåç§°ä¸ºmyhostnameçš„å˜é‡ï¼Œå®ƒç”¨æ¥ä¿å­˜æœåŠ¡å™¨çš„ä¸»æœºåç§°ï¼Œè¯»è€…è¯·è®°ä½è¿™ä¸ªå˜é‡çš„åç§°ï¼Œä¸‹è¾¹å‚æ•°éœ€è¦è°ƒç”¨å®ƒã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/postfix/main.cf<br>myhostname = mail.linuxprobe.com<br>mydomain = linuxprobe.com<br>myorigin = $mydomain<br>inet_interfaces = all<br>mydestination = $myhostname, $mydomain<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬3æ­¥:åˆ›å»ºç”µå­é‚®ä»¶ç³»ç»Ÿçš„ç™»é™†å¸å·ï¼ŒPostfixä¸VsftpdæœåŠ¡ç¨‹åºä¸€æ ·éƒ½å¯ä»¥è°ƒç”¨æœ¬åœ°ç³»ç»Ÿå¸å·å’Œå¯†ç ï¼Œå› æ­¤åœ¨æœ¬åœ°è¿›è¡Œå¸¸è§„å¸å·åˆ›å»ºå³å¯ï¼Œæœ€åå†æŠŠé…ç½®å¦¥å½“çš„postfixæœåŠ¡é‡å¯ï¼ŒåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­å°±å¤§åŠŸå‘Šæˆäº†ï¼~</span><br></pre></td></tr></table></figure></p>
<p>useradd boss<br>echo â€œlinuxprobeâ€ | passwd â€“stdin boss</p>
<p>systemctl restart postfix<br>systemctl enable postfix<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### é…ç½®DovecotæœåŠ¡ç¨‹åº</span><br><span class="line">Dovecotæ˜¯ä¸€æ¬¾èƒ½å¤Ÿä¸ºLinuxç³»ç»Ÿæä¾›IMAPå’ŒPOP3ç”µå­é‚®ä»¶æœåŠ¡çš„å¼€æºè½¯ä»¶ç¨‹åºï¼Œæ‹¥æœ‰æé«˜çš„å®‰å…¨æ€§ï¼Œå¹¶ä¸”é…ç½®èµ·æ¥ä¹Ÿååˆ†ç®€å•ï¼Œæ‰§è¡Œæ•ˆç‡å¾ˆå¿«ï¼Œè€Œä¸”å ç”¨çš„æœåŠ¡å™¨ç¡¬ä»¶èµ„æºä¹Ÿè¾ƒå°‘ï¼Œæ˜¯éå¸¸æ¨èçš„ç”µå­é‚®ä»¶ç³»ç»Ÿçš„æ”¶ä»¶æœåŠ¡è½¯ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1æ­¥ï¼šå®‰è£…DovecotæœåŠ¡ç¨‹åºè½¯ä»¶åŒ…</span><br></pre></td></tr></table></figure></p>
<p>yum install dovecot<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2æ­¥ï¼šé…ç½®éƒ¨ç½²DovecotæœåŠ¡ç¨‹åºï¼Œå¯¹DovecotæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶éœ€è¦ä¿®æ”¹2-3å¤„ï¼Œé¦–å…ˆæ˜¯åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­çš„çº¦24è¡Œå·¦å³ï¼ŒæŠŠDovecotæœåŠ¡ç¨‹åºæ”¯æŒçš„ç”µå­é‚®ä»¶åè®®ä¿®æ”¹ä¸ºimapã€pop3å’Œlmtpã€‚ç„¶ååœ¨è¯¥è¡Œçš„ä¸‹é¢æ·»åŠ ä¸€è¡Œå‚æ•°æ¥å…è®¸å®¢æˆ·ä½¿ç”¨æ˜æ–‡è¿›è¡Œå¯†ç éªŒè¯ï¼Œè¿™æ˜¯ç”±äºDovecotæœåŠ¡ç¨‹åºä¸ºäº†ä¿è¯ç”µå­é‚®ä»¶ç³»ç»Ÿå®‰å…¨è€Œé»˜è®¤å¼ºåˆ¶å®¢æˆ·å¿…é¡»ä½¿ç”¨åŠ å¯†æ–¹å¼è¿›è¡Œç™»é™†ï¼Œè€Œå½“å‰ç”±äºå’±ä»¬æ²¡æœ‰åŠ å¯†ç³»ç»Ÿçš„æ”¯æŒï¼Œå› æ­¤éœ€è¦æ·»åŠ å‚æ•°æ¥å…è®¸å®¢æˆ·çš„æ˜æ–‡ç™»é™†è¡Œä¸ºã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/dovecot/dovecot.conf</p>
<h1 id="Protocols-we-want-to-be-serving"><a href="#Protocols-we-want-to-be-serving" class="headerlink" title="Protocols we want to be serving."></a>Protocols we want to be serving.</h1><p>protocols = imap pop3 lmtp<br>disable_plaintext_auth = no<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æœ€åæ˜¯åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­çš„çº¦48è¡Œå·¦å³ï¼Œè®¾ç½®å…è®¸ç™»é™†çš„ç½‘æ®µåœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´åŒå­¦ä»¬å¯ä»¥åœ¨è¿™é‡Œé™åˆ¶åªæœ‰æ¥è‡ªäºæŸä¸ªç½‘æ®µçš„å®¢æˆ·æ‰èƒ½ä½¿ç”¨ç”µå­é‚®ä»¶ç³»ç»Ÿï¼Œå¦‚æœæƒ³å…è®¸æ‰€æœ‰äººéƒ½èƒ½æ¥ä½¿ç”¨ï¼Œå¯ä»¥ä¸ç”¨ä¿®æ”¹æœ¬æ¡å‚æ•°ï¼š</span><br></pre></td></tr></table></figure></p>
<p>login_trusted_networks = 192.168.10.0/24<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬3æ­¥ï¼šé…ç½®é‚®ä»¶æ ¼å¼ä¸å­˜å‚¨è·¯å¾„ï¼Œéœ€è¦ç¼–è¾‘dovecotæœåŠ¡ç¨‹åºå•ç‹¬çš„å­é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰è¦æŠŠæ”¶åˆ°çš„é‚®ä»¶ä¿¡æ¯ä¿å­˜åˆ°æœåŠ¡å™¨æœ¬åœ°çš„è·¯å¾„ï¼Œè€Œè¿™ä¸ªè·¯å¾„é»˜è®¤å·²ç»æ˜¯è¢«å®šä¹‰å¥½çš„ï¼Œåªéœ€è¦æŠŠæ­¤é…ç½®æ–‡ä»¶ä¸­ç¬¬25è¡Œå‰é¢çš„#ï¼ˆäº•å·ï¼‰æ³¨é‡Šä¿¡æ¯å»æ‰å³å¯ï¼š</span><br></pre></td></tr></table></figure></p>
<p>mail_location = mbox:~/mail:INBOX=/var/mail/%u<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç„¶ååˆ‡æ¢åˆ°è¯¥ç”¨æˆ·èº«ä»½ååœ¨å®¶ç›®å½•ä¸­å»ºç«‹ç”¨äºä¿å­˜é‚®ä»¶çš„ç›®å½•ï¼Œè®°å¾—é‡å¯ä¸€ä¸‹æœåŠ¡å¹¶åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹å°±å®Œæˆäº†å¯¹DovecotæœåŠ¡ç¨‹åºçš„å…¨éƒ¨é…ç½®éƒ¨ç½²æ­¥éª¤ï¼š</span><br></pre></td></tr></table></figure></p>
<p>su - boss<br>mkdir -p mail/.imap/INBOX<br>exit</p>
<p>systemctl restart dovecot<br>systemctl enable dovecot<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### å®¢æˆ·ä½¿ç”¨ç”µå­é‚®ä»¶ç³»ç»Ÿ</span><br><span class="line">å¦‚ä½•å¾—çŸ¥ç”µå­é‚®ä»¶ç³»ç»Ÿå·²ç»èƒ½å¤Ÿæ­£å¸¸æ”¶å‘ä¿¡ä»¶äº†å‘¢ï¼Ÿå’±ä»¬å¯ä»¥ç”¨ç›®å‰æœ€å¸¸ç”¨çš„Windows7ç³»ç»Ÿæ¥è¿›è¡ŒéªŒè¯ï¼Œåˆ˜é„è€å¸ˆé€‰æ‹©ç”¨Windowsç³»ç»Ÿè‡ªå¸¦çš„Outlookè½¯ä»¶è¿›è¡Œæ”¶å‘ä¿¡ä»¶æµ‹è¯•ï¼Œå½“ç„¶æˆ–è®¸å¾ˆå¤šåŒå­¦éƒ½å·²ç»åœ¨å·¥ä½œä¸­ä¹ æƒ¯Foxmailä¹‹ç±»çš„è½¯ä»¶æ¥ç®¡ç†é‚®ä»¶ï¼Œè¿™éƒ½æ˜¯æ²¡å½±å“çš„ï¼Œä¸è®ºæ˜¯ä»€ä¹ˆé‚®ä»¶ç®¡ç†è½¯ä»¶éƒ½èƒ½ç™»é™†åˆ°ç”µå­é‚®ä»¶ç³»ç»Ÿä¸­æ¥ã€‚å¦å¤–è¯·åŒå­¦ä»¬è‡ªè¡Œé…ç½®Windows7ç³»ç»Ÿç½‘å¡å‚æ•°ä»¥åŠDNSåœ°å€ä¸ºæœåŠ¡å™¨åœ°å€ï¼ˆ192.168.10.10ï¼‰ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸çš„è§£æé‚®ä»¶åŸŸåã€‚</span><br><span class="line"></span><br><span class="line">å½“åŒå­¦ä»¬ä½¿ç”¨Outlookè½¯ä»¶æˆåŠŸå‘é€é‚®ä»¶åä¾¿å¯ä»¥åœ¨ç”µå­é‚®ä»¶æœåŠ¡å™¨ä¸Šé¢ä½¿ç”¨mailå‘½ä»¤æŸ¥çœ‹åˆ°æ–°é‚®ä»¶æé†’äº†ï¼Œè€Œå¦‚æœæƒ³æŸ¥çœ‹é‚®ä»¶çš„å®Œæ•´å†…å®¹åªéœ€è¾“å…¥å‰é¢çš„ç¼–å·å³å¯ã€‚</span><br></pre></td></tr></table></figure></p>
<p>mail<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### è®¾ç½®ç”¨æˆ·åˆ«åé‚®ç®±</span><br><span class="line">ç”¨æˆ·åˆ«ååŠŸèƒ½æ˜¯ä¸€é¡¹ç®€ä¾¿å¥½ç”¨çš„é‚®ä»¶å¸å·ä¼ªè£…æŠ€æœ¯ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªè™šæ‹Ÿé‚®ç®±å¸å·æ¥æ¥å—ä»–äººé‚®ä»¶ï¼Œä»¥ä¿è¯çœŸå®é‚®ä»¶åœ°å€ä¸è¢«æ³„éœ²ï¼ŒåŒæ—¶è¿˜å¯ä»¥ç”¨äºæ¥æ”¶å¤šä¸ªé‚®ç®±çš„ä¿¡ä»¶å†…å®¹ã€‚</span><br></pre></td></tr></table></figure></p>
<p>cat /etc/aliases<br>newaliases<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## ç¬¬åå…­èŠ‚è¯¾</span><br><span class="line">### ä½¿ç”¨Squidéƒ¨ç½²ä»£ç†ç¼“å­˜æœåŠ¡</span><br><span class="line">#### ä»£ç†ç¼“å­˜æœåŠ¡</span><br><span class="line">Squidä¸€æ¬¾åœ¨Linuxç³»ç»Ÿä¸­æœ€ä¸ºæµè¡Œçš„é«˜æ€§èƒ½ä»£ç†æœåŠ¡è½¯ä»¶ï¼Œé€šå¸¸å®ƒä¼šè¢«ç”¨ä½œæ˜¯Webç½‘ç«™çš„å‰ç½®ç¼“å­˜æœåŠ¡ï¼Œèƒ½å¤Ÿæ›¿ä»£ç”¨æˆ·å‘ç½‘ç«™æºæœåŠ¡å™¨è¯·æ±‚é¡µé¢æ•°æ®å¹¶è¿›è¡Œç¼“å­˜ã€‚ç®€å•æ¥è®²ï¼ŒSquidæœåŠ¡ç¨‹åºä¼šæŒ‰ç…§æ¥æ”¶åˆ°çš„ç”¨æˆ·è¯·æ±‚æ¥è·å–ç½‘é¡µã€å›¾ç‰‡ç­‰ç”¨æˆ·æ‰€éœ€çš„æ•°æ®å¹¶è‡ªåŠ¨å­˜å‚¨åœ¨æœåŠ¡å™¨å†…ï¼Œå½“åé¢çš„ç”¨æˆ·å†æ¥è¯·æ±‚ç›¸åŒæ•°æ®æ—¶ï¼Œåˆ™å¯ä»¥ç›´æ¥æŠŠåˆšåˆšå‚¨å­˜åœ¨æœåŠ¡å™¨æœ¬åœ°çš„æ•°æ®äº¤ç»™ç”¨æˆ·ï¼Œè¿™æ ·ä¸ä»…å¤§å¹…å‡å°‘äº†ç”¨æˆ·çš„ç­‰å¾…æ—¶é—´ï¼Œè¿›è€Œè¿˜èƒ½å‡è½»ç½‘ç«™æºæœåŠ¡å™¨çš„è´Ÿè½½å‹åŠ›ã€‚</span><br><span class="line"></span><br><span class="line">SquidæœåŠ¡ç¨‹åºé…ç½®èµ·æ¥ç›¸å¯¹ç®€å•ï¼Œæ•ˆç‡é«˜ï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œå®ƒèƒ½æ”¯æŒå¦‚HTTPã€FTPã€SSLç­‰å¤šç§åè®®çš„æ•°æ®ç¼“å­˜ï¼ŒåŸºäºACLè®¿é—®æ§åˆ¶åˆ—è¡¨å’ŒARLè®¿é—®æƒé™åˆ—è¡¨åŠŸèƒ½çš„å†…å®¹è¿‡æ»¤ä¸æƒé™ç®¡ç†åŠŸèƒ½ï¼ŒåŸºäºå¤šç§æ¡ä»¶æ¥ç¦æ­¢ç”¨æˆ·è®¿é—®å­˜åœ¨å¨èƒæˆ–ä¸é€‚å®œçš„ç½‘ç«™èµ„æºï¼Œåœ¨ä¿è¯ä¼ä¸šå†…ç½‘å®‰å…¨çš„åŒæ—¶è¿˜æ•´ä½“çš„æé«˜äº†å®¢æˆ·æœºçš„ç½‘é¡µè®¿é—®é€Ÿåº¦ï¼Œå¸®åŠ©èŠ‚çœç½‘ç»œå¸¦å®½ã€‚ç”±äºç¼“å­˜ä»£ç†æœåŠ¡ä¸ä»…ä¼šæ¶ˆè€—æœåŠ¡å™¨è¾ƒå¤šçš„CPUè®¡ç®—æ€§èƒ½ã€å†…å­˜åŠç¡¬ç›˜ç©ºé—´ç­‰ç¡¬ä»¶èµ„æºï¼ŒåŒæ—¶è¿˜éœ€è¦è¾ƒå¤§çš„ç½‘ç»œå¸¦å®½æ¥ä¿è¯ç»™ç”¨æˆ·ä¼ é€æ•°æ®çš„æ•ˆç‡ï¼Œæ¯å¹´çš„ç½‘ç»œå¸¦å®½å¼€é”€å°±æœ‰å¯èƒ½è¶…è¿‡æ•°åä¸‡å…ƒï¼Œå› æ­¤å¾ˆå¤šIDCæˆ–CDNæœåŠ¡ä¾›åº”å•†å°±ä¼šæŠŠç¼“å­˜ä»£ç†èŠ‚ç‚¹æœåŠ¡å™¨æ”¾ç½®åœ¨å›½å†…äºŒä¸‰çº¿åŸå¸‚æ¥èŠ‚çº¦æˆæœ¬ï¼ŒSquidæœåŠ¡ç¨‹åºåœ¨ä¸ºç”¨æˆ·æä¾›ç¼“å­˜ä»£ç†æœåŠ¡æ—¶ï¼Œå¯ä»¥ä»åŠŸèƒ½ä½œç”¨ä¸Šåˆ†ä¸ºæ­£å‘ä»£ç†å’Œåå‘ä»£ç†ï¼š</span><br><span class="line"></span><br><span class="line">æ­£å‘ä»£ç†æ¨¡å¼æ˜¯è®©ç”¨æˆ·é€šè¿‡SquidæœåŠ¡ç¨‹åºè·å–åˆ°ç½‘ç«™é¡µé¢ç­‰èµ„æºï¼Œå…·ä½“æœåŠ¡æ–¹å¼ä¸Šåˆå¯ä»¥åˆ†ä¸ºæ ‡å‡†ä»£ç†æ¨¡å¼ä¸é€æ˜ä»£ç†æ¨¡å¼ï¼Œæ ‡å‡†æ­£å‘ä»£ç†æ¨¡å¼æ˜¯æŠŠç½‘ç«™æ•°æ®ç¼“å­˜åˆ°æœåŠ¡å™¨æœ¬åœ°ï¼Œæé«˜æ•°æ®èµ„æºè¢«å†æ¬¡è®¿é—®æ—¶çš„æ•ˆç‡ï¼Œä½†ç”¨æˆ·å¿…éœ€åœ¨ä¸Šç½‘æ—¶åœ¨æµè§ˆå™¨ç­‰è½¯ä»¶ä¸­å¡«å†™ä»£ç†æœåŠ¡å™¨çš„IPåœ°å€ä¸ç«¯å£å·ä¿¡æ¯ï¼Œå¦åˆ™é»˜è®¤ä¸ä½¿ç”¨ä»£ç†æœåŠ¡ï¼Œé€æ˜æ­£å‘ä»£ç†æ¨¡å¼çš„åŠŸèƒ½ä½œç”¨ä¸æ ‡å‡†æ­£å‘ä»£ç†æ¨¡å¼å®Œå…¨ç›¸åŒï¼ŒåŒºåˆ«æ˜¯ç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šä»£ç†æœåŠ¡å™¨çš„IPåœ°å€ä¸ç«¯å£å·ï¼Œæ‰€ä»¥è¿™ç§ä»£ç†æœåŠ¡å¯¹äºç”¨æˆ·æ¥è®²æ˜¯ç›¸å¯¹é€æ˜çš„å·¥ä½œæ¨¡å¼ã€‚</span><br><span class="line"></span><br><span class="line">æ­£å‘ä»£ç† Client-&gt;SquidæœåŠ¡å™¨-&gt;Internet</span><br><span class="line"></span><br><span class="line">æ—¥å¸¸ä¸­ç½‘ç«™æ™®éçš„åŠ è½½æœ‰å¤§é‡å›¾ç‰‡ã€è§†é¢‘ç­‰é™æ€èµ„æºå†…å­˜ï¼Œè¿™äº›é™æ€èµ„æºç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒç¨³å®šçš„æ•°æ®ä¿¡æ¯ï¼Œå’±ä»¬å¯ä»¥ä½¿ç”¨SquidæœåŠ¡ç¨‹åºæä¾›çš„åå‘ä»£ç†æ¨¡å¼æ¥å“åº”ç”¨æˆ·è®¿é—®ç½‘ç«™é¡µé¢ä¸­é™æ€èµ„æºçš„è¯·æ±‚ã€‚è€Œä¸”å¦‚æœåå‘ä»£ç†æœåŠ¡å™¨ä¸­æ°å·§å·²ç»æœ‰äº†ç”¨æˆ·è¦è®¿é—®çš„é™æ€èµ„æºåˆ™ç›´æ¥æŠŠç¼“å­˜çš„å†…å®¹å‘é€ç»™ç”¨æˆ·ï¼Œè¿™æ ·ä¸ä»…åŠ å¿«äº†ç”¨æˆ·çš„ç½‘ç«™è®¿é—®é€Ÿåº¦ï¼Œè€Œä¸”è¿˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç½‘ç«™æœåŠ¡å™¨çš„è´Ÿè½½å‹åŠ›ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åå‘ä»£ç† Client-&gt;SquidæœåŠ¡å™¨-&gt;Internet</span><br><span class="line">Clientã€SquidæœåŠ¡å™¨åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘</span><br><span class="line"></span><br><span class="line">æ€»ç»“æ¥è¯´ï¼Œæ­£å‘ä»£ç†æ¨¡å¼ä¸€èˆ¬ä¼šè¢«ç”¨äºä¼ä¸šå±€åŸŸç½‘ä¹‹ä¸­ï¼Œè®©å†…ç½‘ç”¨æˆ·ç»Ÿä¸€çš„é€šè¿‡SquidæœåŠ¡å™¨è®¿é—®äº’è”ç½‘èµ„æºï¼Œä¸ä»…èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘å…¬ç½‘å¸¦å®½å¼€é”€ï¼Œæœ€ä¸»è¦çš„æ˜¯è¿˜èƒ½åšåˆ°ç½‘ç«™å†…å®¹çš„ç­›æŸ¥é™åˆ¶ï¼Œä¸€æ—¦å†…ç½‘ç”¨æˆ·è®¿é—®çš„ç½‘ç«™å†…å®¹åŒ¹é…åˆ°äº†ç¦æ­¢è§„åˆ™å°±ä¼šè‡ªåŠ¨å±è”½ç½‘ç«™ï¼Œæ˜¯éå¸¸ä¸é”™çš„å†…å®¹ç›‘ç®¡æ–¹æ¡ˆã€‚è€Œåå‘ä»£ç†æ¨¡å¼ä¸€èˆ¬æ˜¯ä¸ºå¤§ä¸­å‹ç½‘ç«™æä¾›ç¼“å­˜æœåŠ¡çš„ï¼ŒæŠŠç½‘ç«™ä¸­çš„é™æ€èµ„æºä¿å­˜åœ¨å›½å†…å¤šä¸ªèŠ‚ç‚¹æœºæˆ¿ä¸­ï¼Œå½“æœ‰ç”¨æˆ·å‘èµ·ç½‘ç«™èµ„æºè¯·æ±‚çš„æ—¶å€™å¯ä»¥å°±è¿‘ä¸ºç”¨æˆ·åˆ†é…èŠ‚ç‚¹å¹¶ä¼ è¾“èµ„æºï¼Œæ˜¯ä¸€ç§åœ¨å¤§å‹ç½‘ç«™ä¸­ååˆ†æ™®éä½¿ç”¨çš„æŠ€æœ¯ã€‚</span><br><span class="line"></span><br><span class="line">#### é…ç½®SquidæœåŠ¡ç¨‹åº</span><br><span class="line">å®‰è£…squidæœåŠ¡ç¨‹åº</span><br></pre></td></tr></table></figure></p>
<p>yum install squid<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SquidæœåŠ¡ç¨‹åºçš„é…ç½®æ–‡ä»¶ä¹Ÿæ˜¯è¢«å­˜æ”¾åœ¨/etcç›®å½•ä¸­ä»¥æœåŠ¡åç§°å‘½åçš„ä¸€ä¸ªç›®å½•ä¸­äº†ï¼Œåˆ˜é„è€å¸ˆç»™åŒå­¦ä»¬æ•´ç†å‡ºäº†æœ€å¸¸ç”¨çš„ä¸€äº›é…ç½®å‚æ•°ï¼Œå¤§å®¶åªéœ€å…ˆå¤§è‡´æµè§ˆä¸€ä¸‹å³å¯ï¼š</span><br><span class="line"></span><br><span class="line">|å‚æ•°|ä½œç”¨|</span><br><span class="line">|:|</span><br><span class="line">|http_port 3128|ç›‘å¬çš„ç«¯å£å·ã€‚|</span><br><span class="line">|cache_mem 64M|å†…å­˜ç¼“å†²åŒºçš„å¤§å°ã€‚|</span><br><span class="line">|cache_dir ufs /var/spool/squid 2000 16 256|ç¡¬ç›˜ç¼“å†²åŒºçš„å¤§å°ã€‚|</span><br><span class="line">|cache_effective_user squid|è®¾ç½®ç¼“å­˜çš„æœ‰æ•ˆç”¨æˆ·ã€‚|</span><br><span class="line">|cache_effective_group squid|è®¾ç½®ç¼“å­˜çš„æœ‰æ•ˆç”¨æˆ·ç»„ã€‚|</span><br><span class="line">|dns_nameservers IPåœ°å€|ä¸€èˆ¬ä¸è®¾ç½®ï¼Œç”¨æœåŠ¡å™¨é»˜è®¤çš„DNSåœ°å€ã€‚|</span><br><span class="line">|cache_access_log /var/log/squid/access.log|è®¿é—®æ—¥å¿—æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ã€‚|</span><br><span class="line">|cache_log /var/log/squid/cache.log|ç¼“å­˜æ—¥å¿—æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ã€‚|</span><br><span class="line">|visible_hostname linuxprobe.com|è®¾ç½®SquidæœåŠ¡ä¸»æœºçš„åç§°ã€‚|</span><br><span class="line"></span><br><span class="line">#### æ­£å‘ä»£ç†</span><br><span class="line">æ ‡å‡†æ­£å‘ä»£ç†</span><br><span class="line"></span><br><span class="line">SquidæœåŠ¡ç¨‹åºè½¯ä»¶åŒ…åœ¨æ­£ç¡®å®‰è£…å¹¶å¯åŠ¨åé»˜è®¤å°±å·²ç»å¯ä»¥ä¸ºç”¨æˆ·æä¾›æ ‡å‡†æ­£å‘ä»£ç†æ¨¡å¼æœåŠ¡äº†ï¼Œè€Œä¸éœ€è¦å•ç‹¬å†å»ä¿®æ”¹é…ç½®æ–‡ä»¶æˆ–è€…å…¶ä»–æ“ä½œã€‚</span><br></pre></td></tr></table></figure></p>
<p>systemctl restart squid<br>systemctl enable squid<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å¦‚æ­¤å…¬å¼€è€Œæ²¡æœ‰å¯†ç éªŒè¯çš„ä»£ç†æœåŠ¡ç»ˆå½’è§‰å¾—ä¸æ”¾å¿ƒï¼Œä¸‡ä¸€æœ‰å…¶ä»–äººä¹Ÿæ¥â€œè¹­ç½‘â€ä»£ç†æœåŠ¡æ€ä¹ˆåŠå‘¢ï¼ŸSquidæœåŠ¡ç¨‹åºé»˜è®¤çš„ä¼šå ç”¨3128ã€3401ä¸4827ç­‰ç«¯å£å·ï¼Œå’±ä»¬å¯ä»¥æŠŠé»˜è®¤å ç”¨çš„ç«¯å£å·ä¿®æ”¹æˆå…¶ä»–å€¼ï¼Œè¿™æ ·åº”è¯¥èƒ½èµ·åˆ°ä¸€å®šçš„ä¿æŠ¤ä½œç”¨å§~åŒå­¦ä»¬éƒ½çŸ¥é“åœ¨Linuxç³»ç»Ÿé…ç½®æœåŠ¡ç¨‹åºå°±æ˜¯åœ¨ä¿®æ”¹è¯¥æœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œå› æ­¤ç›´æ¥åœ¨/etcç›®å½•ä¸­æ‰¾åˆ°å’ŒsquidæœåŠ¡ç¨‹åºåŒåç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠå…¶ä¸­http_portå‚æ•°åé¢åŸæœ‰3128ä¿®æ”¹ä¸º10000ï¼Œè¿™æ ·å³æ˜¯æŠŠSquidæœåŠ¡ç¨‹åºçš„ä»£ç†æœåŠ¡ç«¯å£ä¿®æ”¹æˆäº†æ–°å€¼ï¼Œå½“ç„¶æœ€åä¸è¦å¿˜è®°å†é‡å¯ä¸‹æœåŠ¡ç¨‹åºå“¦~</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/squid/squid.conf<br>http_port 10000</p>
<p>systemctl restart squid<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æœ‰æ²¡æœ‰çªç„¶è§‰å¾—è¿™ä¸€å¹•ä¼¼æ›¾ç›¸è¯†ï¼Ÿåœ¨å‰é¢çš„ç¬¬10ç« 10.5.3å°èŠ‚å’±ä»¬å­¦ä¹ è¿‡åŸºäºç«¯å£å·æ¥éƒ¨ç½²httpdæœåŠ¡ç¨‹åºçš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½ï¼Œå½“æ—¶åœ¨ç¼–è¾‘å®Œé…ç½®æ–‡ä»¶åé‡å¯æœåŠ¡ç¨‹åºæ—¶è¢«ç›´æ¥æç¤ºæŠ¥é”™äº†ï¼Œè™½ç„¶ç°åœ¨é‡å¯æœåŠ¡ç¨‹åºå¹¶æ²¡æœ‰ç›´æ¥æŠ¥é”™ï¼Œä½†å…¶å®å®¢æˆ·å¹¶ä¸èƒ½ä½¿ç”¨ä»£ç†æœåŠ¡å‘¢ã€‚SElinuxå®‰å…¨å­ç³»ç»Ÿè®¤ä¸ºSquidæœåŠ¡ç¨‹åºä½¿ç”¨3128ç«¯å£å·æ˜¯ç†æ‰€åº”å½“çš„ï¼Œé»˜è®¤ç­–ç•¥è§„åˆ™ä¸­ä¹Ÿæ˜¯å…è®¸çš„ï¼Œä½†ç°åœ¨å´åœ¨å°è¯•ä½¿ç”¨æ–°çš„10000ç«¯å£å·ï¼Œè¿™æ˜¯åŸæœ¬å¹¶ä¸å±äºSquidæœåŠ¡ç¨‹åºåº”è¯¥ä½¿ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨æŠŠæ–°çš„ç«¯å£å·æ·»åŠ åˆ°squidæœåŠ¡ç¨‹åºåœ¨SElinuxåŸŸçš„å…è®¸åˆ—è¡¨ä¸­å³å¯</span><br></pre></td></tr></table></figure></p>
<p>semanage port -l | grep squid_port_t<br>semanage port -a -t squid_port_t -p tcp 10000<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### ACLè®¿é—®æ§åˆ¶</span><br><span class="line">åœ¨æ—¥å¸¸å·¥ä½œä¸­ä¼ä¸šå‘˜å·¥åªæœ‰é€šè¿‡å…¬å¸å†…éƒ¨ç½‘å…³æœåŠ¡å™¨æ‰èƒ½ç™»é™†åˆ°äº’è”ç½‘ä¸­ï¼Œé‚£ä¹ˆå½“æŠŠSquidæœåŠ¡ç¨‹åºéƒ¨ç½²æˆä¸ºäº†å…¬å¸ä¼ä¸šçš„ç½‘å…³æœåŠ¡å™¨åACLè®¿é—®æ§åˆ¶åˆ—è¡¨åŠŸèƒ½ä¹Ÿæ˜¯éå¸¸å®ç”¨çš„äº†ï¼Œå®ƒå¯ä»¥æ ¹æ®æŒ‡å®šçš„ç­–ç•¥æ¡ä»¶æ¥è¿›è¡Œå¯¹æ•°æ®ç¼“å­˜æˆ–é™åˆ¶ç”¨æˆ·çš„è®¿é—®æ“ä½œï¼Œè€Œå¤§å¤šæ•°çš„æƒ…å†µè¿™ç§é™åˆ¶ç­–ç•¥éƒ½ä¼šååˆ†å¥æ•ˆï¼Œå¾ˆå¤šå…¬å¸åˆ†æ—¶æ®µä¸è®©å‘˜å·¥é€›æ·˜å®ã€æ‰“ç½‘é¡µæ¸¸æˆéƒ½å¯ä»¥é€šè¿‡SquidæœåŠ¡ç¨‹åºçš„ACLè®¿é—®æ§åˆ¶åˆ—è¡¨åŠŸèƒ½å®ç°ã€‚å¦‚æœè¯»è€…ä¸­æœ‰æƒ³ä»¥ååšä¼ä¸šçš„åŒå­¦ï¼Œç‰¢è®°æœ¬å°èŠ‚æ‰€æ•™çš„å†…å®¹ï¼Œä»¥åå¯ä»¥ç¦æ­¢æŸå‡ ä¸ªæ‹›è˜ç½‘ç«™æˆ–ç«äº‰å¯¹æ‰‹çš„ç½‘ç«™ï¼Œç»å¯¹èƒ½å¤Ÿæœ‰æ•ˆé™ä½å‘˜å·¥çš„è·³æ§½å‡ ç‡å‘¢~</span><br><span class="line"></span><br><span class="line">ACLè®¿é—®æ§åˆ¶åˆ—è¡¨åŠŸèƒ½æ˜¯ç”±å¤šä¸ªè§„åˆ™ç­–ç•¥æ¡ç›®ç»„æˆçš„ï¼ŒSquidæœåŠ¡ç¨‹åºå¯ä»¥æ ¹æ®æŒ‡å®šçš„æ¡ä»¶æ¥å…è®¸æˆ–é™åˆ¶è®¿é—®è¯·æ±‚ï¼ŒåŒ¹é…é¡ºåºä¼šåƒé˜²ç«å¢™ç­–ç•¥ä¸€æ ·ç”±ä¸Šè‡³ä¸‹ï¼Œä¸€æ—¦åŒ¹é…åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®åˆ™ç«‹å³æ‰§è¡Œç›¸åº”æ“ä½œå¹¶ç»“æŸåŒ¹é…è¿‡ç¨‹ã€‚ä¸ºäº†é¿å…ACLè®¿é—®æ§åˆ¶åˆ—è¡¨åŠŸèƒ½æŠŠæ‰€æœ‰æµé‡éƒ½ç¦æ­¢æˆ–å…¨éƒ¨æµé‡éƒ½å…è®¸ï¼Œä¹Ÿå°±èµ·ä¸åˆ°è®¿é—®æ§åˆ¶çš„é¢„æƒ³æ•ˆæœäº†ï¼Œå› æ­¤è¿ç»´å·¥ç¨‹å¸ˆä»¬é€šå¸¸ä¼šåœ¨æ§åˆ¶åˆ—è¡¨çš„æœ€ä¸‹é¢éƒ¨åˆ†å†™ä¸Šdeny allæˆ–è€…allow allæ¥é¿å…å®‰å…¨éšæ‚£ã€‚ä¸ºäº†è®©åŒå­¦ä»¬æ›´å¥½çš„ç†è§£SquidæœåŠ¡ç¨‹åºæä¾›çš„ACLè®¿é—®æ§åˆ¶åˆ—è¡¨åŠŸèƒ½æœ‰å¤šä¹ˆçš„å¼ºå¤§ï¼Œåˆ˜é„è€å¸ˆæ¥ä¸‹æ¥é€šè¿‡å››ä¸ªå°å®éªŒæ¥ç»™å¤§å®¶æ“ä½œæ¼”ç¤ºï¼Œå¹¶è¿›è¡Œè¯¦ç»†çš„æè¿°ã€‚</span><br><span class="line"></span><br><span class="line">ç¬¬1ä¸ªå®éªŒï¼šåªå…è®¸æ¥IPåœ°å€ä¸º192.168.10.20çš„å®¢æˆ·ä¸»æœºä½¿ç”¨æœåŠ¡å™¨æœ¬åœ°SquidæœåŠ¡ç¨‹åºæä¾›çš„ä»£ç†æœåŠ¡ï¼Œç¦æ­¢å…¶ä½™æ‰€æœ‰çš„ä¸»æœºä»£ç†è¯·æ±‚ã€‚é…ç½®æ–‡ä»¶ä¾ç„¶æ˜¯SquidæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ï¼Œä½†éœ€è¦ç•™å¿ƒä¸‹é…ç½®å‚æ•°çš„ä¹¦å†™ä½ç½®ï¼Œå› ä¸ºå¦‚æœå¤ªé å‰çš„è¯ï¼Œæœ‰äº›SquidæœåŠ¡ç¨‹åºè‡ªèº«çš„è¯­å¥éƒ½æ²¡æœ‰åŠ è½½å®Œï¼Œå°±ä¼šå¯¼è‡´ç­–ç•¥ä¸ç”Ÿæ•ˆçš„ï¼Œå½“ç„¶ä¹Ÿä¸ç”¨å¤ªé åï¼Œå¤§çº¦åœ¨26-32è¡Œå·¦å³å°±å¯ä»¥ï¼Œè¿™æ ·åˆ†å¼€ä¹¦å†™çš„è¯ä¼šéå¸¸ä¾¿äºä»Šåçš„ä¿®æ”¹ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/squid/squid.conf<br> 8 acl localnet src 10.0.0.0/8 # RFC1918 possible internal network<br> 9 acl localnet src 172.16.0.0/12 # RFC1918 possible internal network<br> 10 acl localnet src 192.168.0.0/16 # RFC1918 possible internal network<br> 11 acl localnet src fc00::/7 # RFC 4193 local private network range<br> 12 acl localnet src fe80::/10 # RFC 4291 link-local (directly plugged) mac hines<br> 13<br> 14 acl SSL_ports port 443<br> 15 acl Safe_ports port 80 # http<br> 16 acl Safe_ports port 21 # ftp<br> 17 acl Safe_ports port 443 # https<br> 18 acl Safe_ports port 70 # gopher<br> 19 acl Safe_ports port 210 # wais<br> 20 acl Safe_ports port 1025-65535 # unregistered ports<br> 21 acl Safe_ports port 280 # http-mgmt<br> 22 acl Safe_ports port 488 # gss-http<br> 23 acl Safe_ports port 591 # filemaker<br> 24 acl Safe_ports port 777 # multiling http<br> 25 acl CONNECT method CONNECT<br> 26 acl client src 192.168.10.20<br> 31 http_access allow client<br> 32 http_access deny all<br> 33 http_access deny !Safe_ports<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬2ä¸ªå®éªŒï¼šç¦æ­¢æ‰€æœ‰å®¢æˆ·ä¸»æœºè®¿é—®ç½‘å€ä¸­åŒ…å«linuxå…³é”®è¯çš„ç½‘ç«™è¯·æ±‚ï¼Œè¿™ç§ACLè®¿é—®æ§åˆ¶åˆ—è¡¨åŠŸèƒ½æ¨¡å¼æ˜¯æ¯”è¾ƒç²—çŸ¿ã€æš´åŠ›çš„ï¼Œä»»ä½•ç”¨æˆ·è®¿é—®çš„ç½‘å€ä¸­åªè¦å¸¦æœ‰äº†æŸä¸ªå…³é”®è¯å°±ä¼šè¢«ç«‹å³ç¦æ­¢ï¼Œè€Œä¸å½±å“å…¶ä»–ç½‘ç«™çš„è®¿é—®è¯·æ±‚ã€‚</span><br></pre></td></tr></table></figure></p>
<p> vim /etc/squid/squid.conf<br>  8 acl localnet src 10.0.0.0/8 # RFC1918 possible internal network<br> 9 acl localnet src 172.16.0.0/12 # RFC1918 possible internal network<br> 10 acl localnet src 192.168.0.0/16 # RFC1918 possible internal network<br> 11 acl localnet src fc00::/7 # RFC 4193 local private network range<br> 12 acl localnet src fe80::/10 # RFC 4291 link-local (directly plugged) mac hines<br> 13<br> 14 acl SSL_ports port 443<br> 15 acl Safe_ports port 80 # http<br> 16 acl Safe_ports port 21 # ftp<br> 17 acl Safe_ports port 443 # https<br> 18 acl Safe_ports port 70 # gopher<br> 19 acl Safe_ports port 210 # wais<br> 20 acl Safe_ports port 1025-65535 # unregistered ports<br> 21 acl Safe_ports port 280 # http-mgmt<br> 22 acl Safe_ports port 488 # gss-http<br> 23 acl Safe_ports port 591 # filemaker<br> 24 acl Safe_ports port 777 # multiling http<br> 25 acl CONNECT method CONNECT</p>
<p> acl deny_keyword url_regex -i linux</p>
<p> 31 http_access deny deny_keyword<br> 33 http_access deny !Safe_ports<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬3ä¸ªå®éªŒï¼šå¦‚æœæ˜¯ç›´æ¥ç¦ç”¨äº†æŸä¸ªç½‘å€å…³é”®è¯ï¼Œé‚£è‚¯å®šä¼šæœ‰ä¸€å¤§æ‰¹ç½‘ç«™è¢«è¯¯å°ï¼Œè¿™æ ·åœ¨å·¥ä½œä¸­å°±æœ‰å¯èƒ½å½±å“äº†åŒäº‹ä»¬æ­£å¸¸çš„å·¥ä½œï¼Œå› æ­¤å’±ä»¬æ˜¯å¯ä»¥ç›´æ¥ç¦æ­¢æŸä¸ªç‰¹å®šçš„ç½‘å€çš„ã€‚</span><br></pre></td></tr></table></figure></p>
<p> vim /etc/squid/squid.conf<br>  8 acl localnet src 10.0.0.0/8 # RFC1918 possible internal network<br> 9 acl localnet src 172.16.0.0/12 # RFC1918 possible internal network<br> 10 acl localnet src 192.168.0.0/16 # RFC1918 possible internal network<br> 11 acl localnet src fc00::/7 # RFC 4193 local private network range<br> 12 acl localnet src fe80::/10 # RFC 4291 link-local (directly plugged) mac hines<br> 14 acl SSL_ports port 443<br> 15 acl Safe_ports port 80 # http<br> 16 acl Safe_ports port 21 # ftp<br> 17 acl Safe_ports port 443 # https<br> 18 acl Safe_ports port 70 # gopher<br> 19 acl Safe_ports port 210 # wais<br> 20 acl Safe_ports port 1025-65535 # unregistered ports<br> 21 acl Safe_ports port 280 # http-mgmt<br> 22 acl Safe_ports port 488 # gss-http<br> 23 acl Safe_ports port 591 # filemaker<br> 24 acl Safe_ports port 777 # multiling http<br> 25 acl CONNECT method CONNECT</p>
<p>acl deny_url url_regex <a href="http://www.linuxcool.com" target="_blank" rel="noopener">http://www.linuxcool.com</a></p>
<p> 31 http_access deny deny_url<br> 33 http_access deny !Safe_ports<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬4ä¸ªå®éªŒï¼šç¦æ­¢ä¼ä¸šå†…éƒ¨ä¸‹è½½æŸäº›åç¼€çš„æ–‡ä»¶ï¼Œè¿™å…¶å®æ˜¯ä¸€ä»¶é•¿æœŸè®©è¿ç»´äººå‘˜å¤´ç–¼çš„äº‹æƒ…ï¼Œå› ä¸ºåœ¨ä¼ä¸šå†…ç½‘ä¸­æ€»æ˜¯ä¼šæœ‰äº›äººä¼šå·å·ä¸‹è½½ä¸œè¥¿ï¼Œè¦ä¹ˆå°±æ˜¯æ¸¸æˆï¼Œè¦ä¹ˆå°±æ˜¯å›å®¶çœ‹çš„ç”µå½±ï¼Œå¯¼è‡´å…¶ä»–åŒäº‹ç½‘é€Ÿç‰¹åˆ«æ…¢ï¼Œè¿˜æœ‰å¯èƒ½å½±å“ç”Ÿäº§ç¯å¢ƒçš„æ­£å¸¸è¿è½¬ã€‚è¿™æ ·çš„è¯å’±ä»¬å¯ä»¥ç¦æ­¢æ‰€æœ‰ç”¨æˆ·è®¿é—®raræˆ–mp3ç­‰åç¼€æ–‡ä»¶çš„è¯·æ±‚ï¼Œè¿™æ ·èƒ½é˜²ä½ä¸å°‘ç”µè„‘å°ç™½ï¼Œè®©ä»–ä»¬çŸ¥éš¾è€Œé€€ï¼Œä½†å¦‚æœå¯¹æ–¹æ˜¯åœ¨ç”¨è¿…é›·ç­‰P2Pä¸‹è½½è½¯ä»¶çš„è¯å°±åªèƒ½ç”¨ä¸“ä¸šçº§WAFåº”ç”¨é˜²æŠ¤é˜²ç«å¢™ç³»ç»Ÿæ‰èƒ½ç¦æ­¢äº†ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/squid/squid.conf<br>8 acl localnet src 10.0.0.0/8 # RFC1918 possible internal network<br> 9 acl localnet src 172.16.0.0/12 # RFC1918 possible internal network<br> 10 acl localnet src 192.168.0.0/16 # RFC1918 possible internal network<br> 11 acl localnet src fc00::/7 # RFC 4193 local private network range<br> 12 acl localnet src fe80::/10 # RFC 4291 link-local (directly plugged) mac hines<br> 13<br> 14 acl SSL_ports port 443<br> 15 acl Safe_ports port 80 # http<br> 16 acl Safe_ports port 21 # ftp<br> 17 acl Safe_ports port 443 # https<br> 18 acl Safe_ports port 70 # gopher<br> 19 acl Safe_ports port 210 # wais<br> 20 acl Safe_ports port 1025-65535 # unregistered ports<br> 21 acl Safe_ports port 280 # http-mgmt<br> 22 acl Safe_ports port 488 # gss-http<br> 23 acl Safe_ports port 591 # filemaker<br> 24 acl Safe_ports port 777 # multiling http<br> 25 acl CONNECT method CONNECT</p>
<p>acl badfile urlpath_regex -i .mp3$ .rar$</p>
<p> 31 http_access deny badfile<br> 33 http_access deny !Safe_ports<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### é€æ˜æ­£å‘ä»£ç†</span><br><span class="line">æ­£å‘ä»£ç†æœåŠ¡ä¸€èˆ¬æ˜¯é¢å‘äºä¼ä¸šå†…éƒ¨æ‰€æœ‰æˆå‘˜çš„ï¼Œä½†æ¯ä¸ªä¼ä¸šæˆå‘˜å¯¹ç”µè„‘çš„ç†Ÿæ‚‰ç¨‹åº¦ä¹Ÿä¸å…¨ç›¸åŒï¼Œå°¤å…¶æ‚¨æ‰€åœ¨çš„å…¬å¸ä¸æ˜¯ITè¡Œä¸šï¼Œé‚£æƒ³æ•™ä¼šåŒäº‹ä»¬ä½¿ç”¨ä»£ç†æœåŠ¡è¿˜çœŸæ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…å‘¢ï¼Œæœ‰äº›æ—¶å€™å…¬å¸é¢†å¯¼ä¹Ÿä¼šä¸ºäº†ä½¿ç”¨ACLè®¿é—®æ§åˆ¶åˆ—è¡¨åŠŸèƒ½é™åˆ¶å‘˜å·¥åœ¨å…¬å¸å†…ä¸Šç½‘çš„è¡Œä¸ºï¼Œå¼ºåˆ¶è¦æ±‚æ‰€æœ‰äººé€šè¿‡ä»£ç†æœåŠ¡ä¸Šç½‘ï¼Œè¿™æ—¶å°±å¿…é¡»è¦ç”¨é€æ˜çš„æ­£å‘ä»£ç†æ¨¡å¼äº†ã€‚é€æ˜ä»£ç†æŠ€æœ¯ä¸­çš„é€æ˜æŒ‡çš„æ˜¯è®©ç”¨æˆ·åœ¨æ²¡æœ‰æ„ŸçŸ¥çš„æƒ…å†µä¸‹å°±ä½¿ç”¨äº†ä»£ç†æœåŠ¡ï¼Œè¿™æ ·ä¸€æ–¹é¢æ˜¯ä¸éœ€è¦ç”¨æˆ·å»æ‰‹åŠ¨é…ç½®ä»£ç†æœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œè¿›è€Œé™ä½äº†ä»£ç†æœåŠ¡çš„ä½¿ç”¨é—¨æ§›ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸ºäº†æ›´å¥½çš„ç›‘ç£å‘˜å·¥ä¸Šç½‘çš„è¡Œä¸ºï¼Œè¦æƒ³ä¸Šç½‘å°±å¿…é¡»é€šè¿‡SquidæœåŠ¡ç¨‹åºä»£ç†æ‰è¡Œã€‚</span><br><span class="line"></span><br><span class="line">é€æ˜ä»£ç†æŠ€æœ¯æ˜¯ä¸€ç§æ™®éä¸ä¼šè¢«ç”¨æˆ·æ„ŸçŸ¥åˆ°çš„ä»£ç†æ¨¡å¼ï¼Œç”¨æˆ·æ— éœ€åœ¨æµè§ˆå™¨æˆ–å…¶ä»–è½¯ä»¶ä¸­é…ç½®ä»£ç†æœåŠ¡å™¨åœ°å€ã€ç«¯å£å·ç­‰ä¿¡æ¯ï¼Œè€Œæ˜¯ç›´æ¥ç”±DHCPæœåŠ¡å™¨æŠŠç½‘å¡é…ç½®ä¿¡æ¯åˆ†å‘ç»™å®¢æˆ·ä¸»æœºï¼Œå…¶ä¸­æŠŠç½‘å…³åœ°å€æŒ‡å‘åˆ°SquidæœåŠ¡å™¨å³å¯ã€‚è¿™æ ·ä¸è®ºç”¨æˆ·æ˜¯åœ¨æœ¬åœ°ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ç½‘ç«™ï¼Œè¿˜æ˜¯åœ¨QQä¸Šé¢èŠå¤©å°±éƒ½ä¼šé»˜è®¤é€šè¿‡ä»£ç†æœåŠ¡äº†ã€‚</span><br><span class="line"></span><br><span class="line">æ—¢ç„¶è¦è®©ç”¨æˆ·ä¸å»é…ç½®ä»£ç†æœåŠ¡å™¨çš„ä¿¡æ¯å°±èƒ½ä½¿ç”¨ä»£ç†æœåŠ¡ï¼Œé‚£å’±ä»¬ä½œä¸ºæŠ€æœ¯çš„è¿è¥å•†ä¹Ÿå°±å¿…é¡»æå‰æŠŠç½‘ç»œåŠæ•°æ®è½¬å‘åŠŸèƒ½é…ç½®å¥½ï¼Œéœ€è¦ä½¿ç”¨ç¬¬8ç« 8.3.2å°èŠ‚å­¦ä¹ çš„SNATæºåœ°å€è½¬æ¢åè®®æ¥å®Œæˆæ•°æ®çš„è½¬å‘ï¼Œè®©å®¢æˆ·ç«¯ä¸»æœºå¯ä»¥æŠŠæ•°æ®äº¤ç»™Squidä»£ç†æœåŠ¡å™¨å¹¶è½¬å‘è‡³å¤–ç½‘ä¸­ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è®©SquidæœåŠ¡å™¨ä½œä¸ºä¸€ä¸ªä¸­é—´äººï¼Œå®ç°å†…ç½‘å®¢æˆ·ç«¯ä¸»æœºä¸å¤–éƒ¨äº’è”ç½‘ä¹‹é—´æ•°æ®è½¬å‘äº¤æ¢ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„â€œä¼ è¯è€…â€ï¼Œç”±äºè¿˜æœªéƒ¨ç½²å®ç°SNATæºåœ°å€è½¬æ¢åè®®åŠŸèƒ½ï¼Œå› æ­¤å½“å‰å†…ç½‘å®¢æˆ·ç«¯ä¸»æœºæ˜¯è‚¯å®šä¸èƒ½è®¿é—®å¤–ç½‘çš„ã€‚</span><br></pre></td></tr></table></figure></p>
<p>iptables -t nat -A POSTROUTING -p udp â€“dport 53 -o eth0 -j MASQUERADE</p>
<p>echo â€œnet.ipv4.ip_forward=1â€ &gt;&gt; /etc/sysctl.conf<br>sysctl -p<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä¸é…ç½®DNSå’ŒSNATè½¬å‘æ•°æ®ç›¸æ¯”ï¼ŒSquidæœåŠ¡ç¨‹åºçš„é€æ˜ä»£ç†æ¨¡å¼é…ç½®è¿‡ç¨‹å°±æ˜¾å¾—ååˆ†ç®€å•äº†ï¼Œåªéœ€è¦åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­æœåŠ¡å™¨ç«¯å£å·çš„åé¢è¿½åŠ ä¸Šä¸­é€æ˜ï¼ˆtransparentï¼‰çš„è‹±è¯­å•è¯ï¼Œç„¶åæŠŠçº¦62è¡Œçš„#ï¼ˆäº•å·ï¼‰æ³¨é‡Šç¬¦å»é™¤è®¾ç½®ç¼“å­˜çš„ä¿å­˜è·¯å¾„å°±å¯ä»¥äº†ã€‚ä¿å­˜é€€å‡ºé…ç½®æ–‡ä»¶åå†åˆ†åˆ«ä½¿ç”¨squid -k parseæ¥æ£€æŸ¥ä¸‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼Œä»¥åŠä½¿ç”¨squid -zå‘½ä»¤æ¥å¯¹SquidæœåŠ¡ç¨‹åºçš„é€æ˜ä»£ç†æŠ€æœ¯è¿›è¡Œåˆå§‹åŒ–ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/squid/squid.conf<br>http_port 3128 transparent<br>cache_dir ufs /var/spool/squid 100 16 256<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>squid -k parse<br>squid -z<br>systemctl restart squid<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">é…ç½®å¦¥å½“å¹¶é‡å¯SquidæœåŠ¡ç¨‹åºæ²¡æœ‰æŠ¥é”™ä¿¡æ¯åï¼Œå’±ä»¬å°±å¯ä»¥ç»§ç»­æ¥å®ŒæˆSNATæºåœ°å€æ•°æ®è½¬å‘åŠŸèƒ½äº†ï¼ŒåŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ä½¿ç”¨iptablesé˜²ç«å¢™ç®¡ç†å‘½ä»¤æŠŠæ‰€æœ‰å®¢æˆ·ç«¯ä¸»æœºå¯¹ç½‘ç«™80ç«¯å£çš„è¯·æ±‚è½¬å‘è‡³SquidæœåŠ¡å™¨æœ¬åœ°çš„3128ç«¯å£ä¸Šæ¥åšè½¬å‘ï¼Œå…·ä½“é…ç½®å‚æ•°å¦‚ä¸‹ï¼Œè¿™æ—¶å®¢æˆ·ç«¯ä¸»æœºå†åˆ·æ–°ä¸‹æµè§ˆå™¨å°±åˆèƒ½çœ‹åˆ°ç½‘ç«™å†…å®¹å•¦ã€‚</span><br></pre></td></tr></table></figure></p>
<p>iptables -t nat -A PREROUTING  -p tcp -m tcp â€“dport 80 -j REDIRECT â€“to-ports 3128<br>iptables -t nat -A POSTROUTING -s 192.168.10.0/24 -o eth0 -j SNAT â€“to æ‚¨çš„æ¡¥æ¥ç½‘å¡IPåœ°å€<br>service iptables save<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç°åœ¨è‚¯å®šæœ‰åŒå­¦åœ¨æƒ³â€”â€”å¦‚æœå¼€å¯äº†SNATæºåœ°å€è½¬æ¢åè®®ï¼Œé‚£ä¹ˆæ•°æ®ä¸å°±æ˜¯ç›´æ¥è¢«è½¬å‘åˆ°å¤–ç½‘äº†å—ï¼Ÿæ˜¯å¦è¿˜ä¾ç„¶åœ¨ä½¿ç”¨SquidæœåŠ¡ç¨‹åºæä¾›çš„ä»£ç†æœåŠ¡å‘¢ï¼Ÿå…¶å®åªè¦ä»”ç»†çš„çœ‹ä¸‹iptablesé˜²ç«å¢™å‘½ä»¤å°±ä¼šå‘ç°ï¼Œåˆ˜é„è€å¸ˆåˆšåˆšå¹¶ä¸æ˜¯å•çº¯çš„å¼€å¯äº†SNATæºåœ°å€è½¬æ¢åŠŸèƒ½ï¼Œè€Œæ˜¯é€šè¿‡æŠŠå®¢æˆ·æœºè®¿é—®å¤–ç½‘80ç«¯å£çš„è¯·æ±‚è½¬å‘è‡³äº†æœ¬åœ°æœåŠ¡å™¨çš„3128ç«¯å£å·ä¸Šé¢ï¼Œä»è€Œè¿˜æ˜¯å¼ºåˆ¶ç”¨æˆ·å¿…é¡»é€šè¿‡SquidæœåŠ¡ç¨‹åºæ‰èƒ½ä¸Šç½‘ï¼Œä¸ºäº†éªŒè¯è¿™ä¸ªè¯´æ³•ï¼Œå’±ä»¬å¯ä»¥ç¼–è¾‘SquidæœåŠ¡ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼Œå•ç‹¬ç¦æ­¢æ‰ä¹¦ç±åœ¨çº¿å­¦ä¹ ç½‘ç«™ï¼ˆhttp://www.linuxprobe.com/ï¼‰ï¼Œç„¶ååˆ·æ–°å®¢æˆ·ç«¯ç½‘é¡µå³å¯çœ‹åˆ°åˆè¢«ç¦æ­¢äº†ã€‚</span><br><span class="line"></span><br><span class="line">#### åå‘ä»£ç†</span><br><span class="line">ç½‘ç«™é¡µé¢æ˜¯ç”±é™æ€èµ„æºå’ŒåŠ¨æ€èµ„æºä¸€èµ·ç»„æˆçš„ç½‘ç»œèµ„æºï¼Œå…¶ä¸­é™æ€èµ„æºåŒ…æ‹¬æœ‰ç½‘ç«™æ¶æ„CSSæ–‡ä»¶ã€å¤§é‡çš„å›¾ç‰‡ã€è§†é¢‘ç­‰æ•°æ®ï¼Œè¿™äº›æ•°æ®ç›¸å¯¹æ¯”äºåŠ¨æ€èµ„æºæ¥è¯´æ›´åŠ çš„ç¨³å®šï¼Œä¸€èˆ¬æ˜¯ä¸ä¼šç»å¸¸å‘ç”Ÿæ”¹å˜çš„æ•°æ®ï¼Œè€Œä¸”éšç€å»ºç«™æŠ€æœ¯çš„æ›´æ–°æ¢ä»£ï¼Œäººä»¬çš„å®¡ç¾ä¹Ÿåœ¨ä¸æ–­æå‡ï¼Œå› æ­¤å›¾ç‰‡å†…å®¹è¶Šæ¥è¶Šå æ®äº†ç½‘ç«™ä¸­å¤§é¢ç§¯çš„ç©ºé—´ã€‚å¦‚æœèƒ½å¤ŸæŠŠé™æ€èµ„æºä»ç½‘ç«™é¡µé¢ä¸­æŠ½ç¦»å‡ºå»ï¼Œç„¶ååœ¨å…¨å›½å„åœ°éƒ¨ç½²é™æ€èµ„æºæ•°æ®çš„ç¼“å­˜èŠ‚ç‚¹ï¼Œè¿™æ ·ä¸ä»…èƒ½å¤Ÿå¤§å¹…æå‡ç”¨æˆ·è®¿é—®ç½‘ç«™é¡µé¢çš„é€Ÿåº¦ï¼Œè€Œä¸”å½“ç”±ç¼“å­˜æœåŠ¡å™¨èŠ‚ç‚¹å“åº”å¤„ç†é™æ€èµ„æºè¯·æ±‚æ—¶ï¼Œç½‘ç«™æºæœåŠ¡å™¨çš„è´Ÿè½½å‹åŠ›é—®é¢˜ä¹Ÿä¼šå¾—åˆ°æ˜æ˜¾çš„æ”¹å–„ã€‚</span><br><span class="line"></span><br><span class="line">åå‘ä»£ç†æ˜¯SquidæœåŠ¡ç¨‹åºçš„é‡è¦å·¥ä½œæ¨¡å¼ä¹‹ä¸€ï¼ŒåŸç†æ˜¯æŠŠä¸€éƒ¨åˆ†ç”¨æˆ·åŸæœ¬åº”è¯¥å‘ç½‘ç«™æºæœåŠ¡å™¨å‘èµ·çš„è¯·æ±‚äº¤ç”±ç»™Squidç¼“å­˜æœåŠ¡å™¨èŠ‚ç‚¹æ¥å¤„ç†ã€‚ä½†è¿™ç§æŠ€æœ¯çš„å¼Šç«¯ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¦‚æœæœ‰ä¸€ä¸ªåå¿ƒè‚ çš„äººæŠŠè‡ªå·±çš„åŸŸåå’ŒæœåŠ¡å™¨åå‘ä»£ç†åˆ°æŸä¸ªçŸ¥åçš„ç½‘ç«™ä¸Šé¢ï¼Œè¿™æ ·ç†è®ºä¸Šæ¥è®²å½“ç”¨æˆ·è®¿é—®åˆ°äº†è¿™ä¸ªéª‡å®¢è‡ªå·±çš„åŸŸåæ—¶ï¼Œä¹Ÿä¼šçœ‹åˆ°å’Œé‚£ä¸ªçŸ¥åç½‘ç«™ä¸€æ‘¸ä¸€æ ·çš„å†…å®¹ï¼Œæœ‰äº›è¯ˆéª—ç½‘ç«™å°±æ˜¯è¿™æ ·éª—å–ç½‘æ°‘ä¿¡ä»»çš„ï¼Œå› æ­¤å½“å‰è®¸å¤šçš„ç½‘ç«™éƒ½å·²ç»é»˜è®¤ç¦æ­¢äº†åå‘ä»£ç†ï¼Œæˆ–è€…å¼€å¯äº†CDNå†…å®¹åˆ†å‘ç½‘ç»œçš„ç½‘ç«™ä¹Ÿæ˜¯å¯ä»¥é¿å…è¿™ç§å†…å®¹çªƒå–è¡Œä¸ºçš„ã€‚å¦‚æœç½‘ç«™å¼€å¯äº†é˜²æŠ¤åŠŸèƒ½çš„è¯ä¸€èˆ¬ä¼šçœ‹åˆ°å¦‚å›¾16-15æ‰€ç¤ºçš„æŠ¥é”™ä¿¡æ¯ï¼Œåˆ˜é„è€å¸ˆåœ¨æ­¤ä¸ºäº†å®éªŒéœ€è¦ä¸´æ—¶å…³é—­äº†ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹ä¹¦ç±åœ¨çº¿å­¦ä¹ ç½‘ç«™çš„CDNæœåŠ¡åŠé˜²æŠ¤æ’ä»¶ï¼Œè¯·åŒå­¦ä»¬ä¹Ÿå°½é‡é€‰æ‹©ç”¨è‡ªå·±çš„ç½‘ç«™æˆ–åšå®¢è¿›è¡Œå®éªŒæ“ä½œï¼Œé¿å…å½±å“åˆ°å…¶ä»–ç½‘ç«™çš„æ­£å¸¸è¿è½¬ï¼Œç»™åˆ«äººé€ æˆéº»çƒ¦ã€‚</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨SquidæœåŠ¡ç¨‹åºæ¥é…ç½®åå‘ä»£ç†æœåŠ¡æ˜¯éå¸¸ç®€å•çš„ï¼Œé¦–å…ˆæ‰¾åˆ°ä¸€ä¸ªç½‘ç«™æºæœåŠ¡å™¨çš„IPåœ°å€ï¼Œç„¶åç¼–è¾‘SquidæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ï¼ŒæŠŠ3128ç«¯å£å·ä¿®æ”¹æˆæœåŠ¡å™¨åœ°å€å’Œç«¯å£å·ï¼Œæ­¤æ—¶æ­£å‘è§£ææœåŠ¡ä¼šè¢«æš‚åœï¼Œä¸èƒ½åŒæ—¶ä¸åå‘ä»£ç†ä¸€èµ·ä½¿ç”¨ï¼Œç„¶åæŒ‰ç…§ä¸‹é¢å‚æ•°çš„æ ¼å¼å†™å…¥è¦åå‘ä»£ç†çš„ç½‘ç«™æºæœåŠ¡å™¨IPåœ°å€ä¿¡æ¯ï¼Œä¿å­˜é€€å‡ºåé‡å¯SquidæœåŠ¡ç¨‹åºå³å¯ã€‚</span><br></pre></td></tr></table></figure></p>
<p>vim /etc/squid/squid.conf<br>http_port æ‚¨çš„æ¡¥æ¥ç½‘å¡IPåœ°å€:80 vhost<br>cache_peer ç½‘ç«™æºæœåŠ¡å™¨IPåœ°å€ parent 80 0 originserver<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### ä½¿ç”¨OpenLDAPéƒ¨ç½²ç›®å½•æœåŠ¡</span><br><span class="line">#### äº†è§£ç›®å½•æœåŠ¡</span><br><span class="line">å›å¿†å‰é¢æ‰€å­¦çš„ç« èŠ‚ï¼Œæˆ‘ä»¬å‘ç°å…¶å®ç›®å½•å¯ä»¥è¢«ç†è§£æˆæ˜¯ä¸€ç§ä¸ºæŸ¥è¯¢ã€æµè§ˆæˆ–æœç´¢çš„æ•°æ®åº“ï¼Œä½†æ•°æ®åº“åˆåˆ†ä¸ºäº†ç›®å½•æ•°æ®åº“å’Œå…³ç³»æ•°æ®åº“ï¼Œç›®å½•æ•°æ®åº“ä¸»è¦ç”¨äºå­˜å‚¨è¾ƒå°çš„ä¿¡æ¯ï¼ˆå¦‚å§“åã€ç”µè¯ã€ä¸»æœºåç­‰ï¼‰ï¼ŒåŒæ—¶å…·æœ‰å¾ˆå¥½çš„è¯»æ€§èƒ½ï¼Œä½†åœ¨å†™æ€§èƒ½æ–¹é¢æ¯”è¾ƒå·®ï¼Œæ‰€ä»¥ä¸é€‚åˆå­˜æ”¾é‚£äº›éœ€è¦ç»å¸¸ä¿®æ”¹çš„æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">ç›®å½•æœåŠ¡åˆ™æ˜¯ç”±ç›®å½•æ•°æ®åº“å’Œä¸€å¥—èƒ½å¤Ÿè®¿é—®å’Œå¤„ç†æ•°æ®åº“ä¿¡æ¯çš„åè®®ç»„æˆçš„æœåŠ¡åè®®ï¼Œç”¨äºé›†ä¸­çš„ç®¡ç†ä¸»æœºå¸å·å¯†ç ï¼Œå‘˜å·¥åå­—ç­‰æ•°æ®ï¼Œå¤§å¤§çš„æå‡äº†ç®¡ç†å·¥ä½œæ•ˆç‡ã€‚è½»é‡çº§ç›®å½•è®¿é—®åè®®LDAP(Lightweight Directory Access Protocol)æ˜¯åœ¨ç›®å½•è®¿é—®åè®®X.500çš„åŸºç¡€ä¸Šç ”å‘çš„ï¼Œä¸»è¦çš„ä¼˜åŠ¿æ˜¯ï¼š</span><br><span class="line"></span><br><span class="line">&gt;X.500ç›®å½•åè®®åŠŸèƒ½éå¸¸è‡ƒè‚¿ï¼Œæ¶ˆè€—å¤§é‡èµ„æºï¼Œæ— æ³•åšåˆ°å¿«é€ŸæŸ¥è¯¢ä¸”ä¸æ”¯æŒTCP/IPåè®®ç½‘ç»œã€‚</span><br><span class="line"></span><br><span class="line">LDAPé‡‡ç”¨æ ‘çŠ¶ç»“æ„å­˜å‚¨æ•°æ®ï¼ˆç±»ä¼¼äºå‰é¢å­¦ä¹ çš„DNSæœåŠ¡ç¨‹åºï¼‰ï¼Œç”¨äºåœ¨IPç½‘ç»œå±‚é¢å®ç°å¯¹åˆ†å¸ƒå¼ç›®å½•çš„è®¿é—®å’Œç®¡ç†æ“ä½œï¼Œæ¡ç›®æ˜¯LDAPåè®®ä¸­æœ€åŸºæœ¬çš„å…ƒç´ ï¼Œå¯ä»¥æƒ³è±¡æˆå­—å…¸ä¸­çš„å•è¯æˆ–è€…æ•°æ®åº“ä¸­çš„è®°å½•ï¼Œé€šå¸¸å¯¹LDAPæœåŠ¡ç¨‹åºçš„æ·»åŠ ã€åˆ é™¤ã€æ›´æ”¹ã€æœç´¢éƒ½æ˜¯ä»¥æ¡ç›®ä¸ºåŸºæœ¬å¯¹è±¡çš„ã€‚</span><br></pre></td></tr></table></figure></p>
<p>dn:æ¯ä¸ªæ¡ç›®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¦‚ä¸Šå›¾ä¸­linuxprobeçš„dnå€¼æ˜¯ï¼š<br>cn=linuxprobe,ou=marketing,ou=people,dc=mydomain,dc=org</p>
<p>rdn:ä¸€èˆ¬ä¸ºdnå€¼ä¸­æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå¦‚ä¸Šå›¾ä¸­linuxprobeçš„rdnå€¼æ˜¯ï¼š<br>cn=linuxprobe</p>
<p>base DN:æ­¤ä¸ºåŸºå‡†DNå€¼ï¼Œè¡¨ç¤ºé¡¶å±‚çš„æ ¹éƒ¨ï¼Œä¸Šå›¾ä¸­çš„base DNå€¼æ˜¯ï¼š<br>dc=mydomain,dc=org<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è€Œæ¯ä¸ªæ¡ç›®å¯ä»¥æœ‰å¤šä¸ªå±æ€§ï¼ˆå¦‚å§“åã€åœ°å€ã€ç”µè¯ç­‰ï¼‰ï¼Œæ¯ä¸ªå±æ€§ä¸­ä¼šä¿å­˜ç€å¯¹è±¡åç§°ä¸å¯¹åº”å€¼ï¼ŒLDAPå·²ç»ä¸ºè¿ç»´äººå‘˜å¯¹å¸¸è§çš„å¯¹è±¡å®šä¹‰äº†å±æ€§ï¼Œå…¶ä¸­æœ‰ï¼š</span><br><span class="line"></span><br><span class="line">|å±æ€§åç§°|å±æ€§åˆ«å|è¯­æ³•|æè¿°|å€¼ï¼ˆä¸¾ä¾‹ï¼‰|</span><br><span class="line">|:|</span><br><span class="line">|commonName|cn|Directory String|åå­—|sean|</span><br><span class="line">|surname|sn|Directory String|å§“æ°|Chow|</span><br><span class="line">|organizationalUnitName|ou|Directory String|å•ä½ï¼ˆéƒ¨é—¨ï¼‰åç§°|IT_SECTION|</span><br><span class="line">|organization|o|Directory String|ç»„ç»‡ï¼ˆå…¬å¸ï¼‰åç§°|linuxprobe|</span><br><span class="line">|telephoneNumber||Telephone Number|ç”µè¯å·ç |911|</span><br><span class="line">|objectClass|||å†…ç½®å±æ€§|organizationalPerson|</span><br><span class="line"></span><br><span class="line">#### ç›®å½•æœåŠ¡å®éªŒ</span><br><span class="line">OpenLdapæ˜¯åŸºäºLDAPåè®®çš„å¼€æºç¨‹åºï¼Œå®ƒçš„ç¨‹åºåç§°å«åšslapdï¼Œæœ¬æ¬¡å®éªŒéœ€è¦ç”¨åˆ°ä¸¤å°ä¸»æœºï¼š</span><br></pre></td></tr></table></figure></p>
<p>ä¸»æœºåç§°    æ“ä½œç³»ç»Ÿ    IPåœ°å€<br>LDAPæœåŠ¡ç«¯<br>(instructor.linuxprobe.com)    çº¢å¸½RHEL7æ“ä½œç³»ç»Ÿ    192.168.10.10<br>LDAPå®¢æˆ·ç«¯    çº¢å¸½RHEL7æ“ä½œç³»ç»Ÿ    192.168.10.20<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### é…ç½®LDAPæœåŠ¡ç«¯</span><br><span class="line">å®‰è£…openldapä¸ç›¸å…³çš„è½¯ä»¶åŒ…</span><br><span class="line"></span><br><span class="line">â€‹```bash</span><br><span class="line">yum install -y openldap openldap-clients openldap-servers migrationtools</span><br></pre></td></tr></table></figure></p>
<p>ç”Ÿæˆå¯†é’¥æ–‡ä»¶ï¼ˆè®°ä¸‹ç”Ÿæˆå‡ºçš„å€¼ï¼Œåé¢è¦ç”¨ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">slappasswd -s linuxprobe -n &gt; /etc/openldap/passwd</span><br><span class="line"></span><br><span class="line">cat /etc/openldap/passwd</span><br><span class="line">&#123;SSHA&#125;v/GJvGG8SbIuCxhfTDVhkmWEuz2afNIR</span><br></pre></td></tr></table></figure>
<p>å†™å…¥ä¸€æ¡ä¸»æœºä¸IPåœ°å€çš„è§£æè®°å½•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;192.168.10.10 instructor.linuxprobe.com&quot; &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºLDAPç›®å½•æœåŠ¡æ˜¯ä»¥æ˜æ–‡çš„æ–¹å¼åœ¨ç½‘ç»œä¸­ä¼ è¾“æ•°æ®çš„ï¼ˆåŒ…æ‹¬å¯†ç ï¼‰ï¼Œè¿™æ ·çœŸçš„å¾ˆä¸å®‰å…¨ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨TLSåŠ å¯†æœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨opensslå·¥å…·ç”ŸæˆX509æ ¼å¼çš„è¯ä¹¦æ–‡ä»¶ï¼ˆæœ‰æ•ˆæœŸä¸º365å¤©ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -x509 -nodes -out /etc/openldap/certs/cert.pem -keyout /etc/openldap/certs/priv.pem -days 365</span><br><span class="line"></span><br><span class="line">å¿…é¡»è¾“å…¥çš„é€‰é¡¹</span><br><span class="line">Common Name (eg, your name or your server hostname) []:instructor.linuxprobe.com</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹è¯ä¹¦çš„æ‰€å±ä¸æƒé™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/openldap/certs/</span><br><span class="line">chown ldap:ldap *</span><br><span class="line">chmod 600 priv.pem</span><br></pre></td></tr></table></figure>
<p>å¤åˆ¶ä¸€ä»½LDAPçš„é…ç½®æ¨¡æ¿</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆæ•°æ®åº“æ–‡ä»¶ï¼ˆä¸ç”¨æ‹…å¿ƒæŠ¥é”™ä¿¡æ¯ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slaptest</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹LDAPæ•°æ®åº“çš„æ‰€å±ä¸»ä¸ç»„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown ldap:ldap /var/lib/ldap/*</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨slapdæœåŠ¡ç¨‹åºå¹¶è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart slapd</span><br><span class="line">systemctl enable slapd</span><br></pre></td></tr></table></figure>
<p>åœ¨LDAPç›®å½•æœåŠ¡ä¸­ä½¿ç”¨LDIF(LDAP Interchange Format)æ ¼å¼æ¥ä¿å­˜ä¿¡æ¯ï¼Œè€ŒLDIFæ˜¯ä¸€ç§æ ‡å‡†çš„æ–‡æœ¬æ–‡ä»¶ä¸”å¯ä»¥éšæ„çš„å¯¼å…¥å¯¼å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ä¸€ç§â€œæ ¼å¼â€æ ‡å‡†åŒ–LDIFæ–‡ä»¶çš„å†™æ³•ï¼Œè¿™ä¸­æ ¼å¼å«åšâ€œschemaâ€ï¼Œschemaç”¨äºæŒ‡å®šä¸€ä¸ªç›®å½•ä¸­æ‰€åŒ…å«å¯¹è±¡çš„ç±»å‹ï¼Œä»¥åŠæ¯ä¸€ä¸ªç±»å‹ä¸­çš„å¯é€‰å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†schemaç†è§£ä¸ºé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„â€œç±»â€ï¼Œé€šè¿‡â€œç±»â€å®šä¹‰å‡ºå…·ä½“çš„å¯¹è±¡ï¼Œå› æ­¤å…¶å®LDIFæ•°æ®æ¡ç›®åˆ™éƒ½æ˜¯é€šè¿‡schemaæ•°æ®æ¨¡å‹åˆ›å»ºå‡ºæ¥çš„å…·ä½“å¯¹è±¡ï¼š</p>
<p>ldapaddå‘½ä»¤ç”¨äºå°†LDIFæ–‡ä»¶å¯¼å…¥åˆ°ç›®å½•æœåŠ¡æ•°æ®åº“ä¸­ï¼Œæ ¼å¼ä¸ºï¼šâ€œldapadd [å‚æ•°] LDIFæ–‡ä»¶â€ã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>-x</td>
<td>è¿›è¡Œç®€å•è®¤è¯ã€‚</td>
</tr>
<tr>
<td>-D</td>
<td>ç”¨äºç»‘å®šæœåŠ¡å™¨çš„dnã€‚</td>
</tr>
<tr>
<td>-hï¼š</td>
<td>ç›®å½•æœåŠ¡çš„åœ°å€ã€‚</td>
</tr>
<tr>
<td>-wï¼š</td>
<td>ç»‘å®šdnçš„å¯†ç ã€‚</td>
</tr>
<tr>
<td>-fï¼š</td>
<td>ä½¿ç”¨LDIFæ–‡ä»¶è¿›è¡Œæ¡ç›®æ·»åŠ çš„æ–‡ä»¶ã€‚</td>
</tr>
</tbody>
</table>
<p>æ·»åŠ cosineå’Œnisæ¨¡å—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/openldap/schema/</span><br><span class="line"></span><br><span class="line">ldapadd -Y EXTERNAL -H ldapi:/// -D &quot;cn=config&quot; -f cosine.ldif</span><br><span class="line">ldapadd -Y EXTERNAL -H ldapi:/// -D &quot;cn=config&quot; -f nis.ldif</span><br></pre></td></tr></table></figure>
<p>åˆ›å»º/etc/openldap/changes.ldifæ–‡ä»¶ï¼Œå¹¶å°†ä¸‹é¢çš„ä¿¡æ¯å¤åˆ¶è¿›å»ï¼ˆæ³¨æ„æœ‰ä¸€å¤„è¦ä¿®æ”¹çš„åœ°æ–¹ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/openldap/changes.ldif</span><br><span class="line">olcRootPW: æ­¤å¤„è¾“å…¥ä¹‹å‰ç”Ÿæˆçš„å¯†ç ï¼ˆå¦‚&#123;SSHA&#125;v/GJvGG8SbIuCxhfTDVhkmWEuz2afNIRï¼‰</span><br></pre></td></tr></table></figure>
<p>å°†æ–°çš„é…ç½®æ–‡ä»¶æ›´æ–°åˆ°slapdæœåŠ¡ç¨‹åºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/changes.ldif</span><br></pre></td></tr></table></figure>
<p>åˆ›å»º/etc/openldap/base.ldifæ–‡ä»¶ï¼Œå¹¶å°†ä¸‹é¢çš„ä¿¡æ¯å¤åˆ¶è¿›å»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/openldap/base.ldif</span><br><span class="line">dn: dc=linuxprobe,dc=com</span><br><span class="line">dc: linuxprobe</span><br><span class="line">objectClass: top</span><br><span class="line">objectClass: domain</span><br><span class="line"></span><br><span class="line">dn: ou=People,dc=linuxprobe,dc=com</span><br><span class="line">ou: People</span><br><span class="line">objectClass: top</span><br><span class="line">objectClass: organizationalUnit</span><br><span class="line"></span><br><span class="line">dn: ou=Group,dc=linuxprobe,dc=com</span><br><span class="line">ou: Group</span><br><span class="line">objectClass: top</span><br><span class="line">objectClass: organizationalUnit</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºç›®å½•çš„ç»“æ„æœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldapadd -x -w linuxprobe -D cn=Manager,dc=linuxprobe,dc=com -f /etc/openldap/base.ldif</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºæµ‹è¯•ç”¨çš„ç”¨æˆ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -d /home/ldap ldapuser</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®å¸æˆ·çš„è¿ç§»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/share/migrationtools/migrate_common.ph</span><br><span class="line">$DEFAULT_MAIL_DOMAIN = &quot;linuxprobe.com&quot;;</span><br><span class="line">$DEFAULT_BASE = &quot;dc=linuxprobe,dc=com&quot;;</span><br></pre></td></tr></table></figure>
<p>å°†å½“å‰ç³»ç»Ÿä¸­çš„ç”¨æˆ·è¿ç§»è‡³ç›®å½•æœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/share/migrationtools/</span><br><span class="line"></span><br><span class="line">grep &quot;:10[0-9][0-9]&quot; /etc/passwd &amp;gt; passwd</span><br><span class="line"></span><br><span class="line">./migrate_passwd.pl passwd users.ldif</span><br><span class="line"></span><br><span class="line">ldapadd -x -w linuxprobe -D cn=Manager,dc=linuxprobe,dc=com -f users.ldif</span><br></pre></td></tr></table></figure>
<p>å°†å½“å‰ç³»ç»Ÿä¸­çš„ç”¨æˆ·ç»„è¿ç§»è‡³ç›®å½•æœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/share/migrationtools/</span><br><span class="line"></span><br><span class="line">grep &quot;:10[0-9][0-9]&quot; /etc/group &amp;gt; group</span><br><span class="line"></span><br><span class="line">./migrate_group.pl group groups.ldif</span><br><span class="line"></span><br><span class="line">ldapadd -x -w linuxprobe -D cn=Manager,dc=linuxprobe,dc=com -f groups.ldif</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•linuxprobeç”¨æˆ·çš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldapsearch -x cn=ldapuser -b dc=linuxprobe,dc=com</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®ldapæ—¥å¿—æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/rsyslog.conf</span><br><span class="line">local4.* /var/log/ldap.log</span><br><span class="line">systemctl restart rsyslog</span><br></pre></td></tr></table></figure></p>
<p>å®‰è£…httpdæœåŠ¡ç¨‹åº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y httpd</span><br><span class="line">cp /etc/openldap/certs/cert.pem /var/www/html</span><br><span class="line">systemctl restart httpd</span><br><span class="line">systemctl enable httpd</span><br></pre></td></tr></table></figure>
<h5 id="é…ç½®LDAPå®¢æˆ·ç«¯"><a href="#é…ç½®LDAPå®¢æˆ·ç«¯" class="headerlink" title="é…ç½®LDAPå®¢æˆ·ç«¯"></a>é…ç½®LDAPå®¢æˆ·ç«¯</h5><p>å°†LDAPæœåŠ¡ç«¯ä¸»æœºåä¸IPåœ°å€çš„è§£æè®°å½•å†™å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;192.168.10.10 instructor.linuxprobe.com&quot; &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure>
<p>å®‰è£…ç›¸å…³çš„è½¯ä»¶åŒ…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install openldap-clients nss-pam-ldapd authconfig-gtk pam_krb5</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç³»ç»Ÿè®¤è¯å·¥å…·ï¼Œå¹¶å¡«å†™LDAPæœåŠ¡ä¿¡æ¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">system-config-authentication</span><br></pre></td></tr></table></figure></p>
<p>ç¨ç­‰ç‰‡åˆ»åï¼ŒéªŒè¯æœ¬åœ°æ˜¯å¦å·²ç»æœ‰äº†ldapuserç”¨æˆ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id ldapuser</span><br></pre></td></tr></table></figure>
<h5 id="è‡ªåŠ¨æŒ‚è½½ç”¨æˆ·ç›®å½•"><a href="#è‡ªåŠ¨æŒ‚è½½ç”¨æˆ·ç›®å½•" class="headerlink" title="è‡ªåŠ¨æŒ‚è½½ç”¨æˆ·ç›®å½•"></a>è‡ªåŠ¨æŒ‚è½½ç”¨æˆ·ç›®å½•</h5><p>è™½ç„¶åœ¨å®¢æˆ·ç«¯å·²ç»èƒ½å¤Ÿä½¿ç”¨LDAPéªŒè¯å¸æˆ·äº†ï¼Œä½†æ˜¯å½“åˆ‡æ¢åˆ°ldapuserç”¨æˆ·æ—¶ä¼šæç¤ºæ²¡æœ‰è¯¥ç”¨æˆ·çš„å®¶ç›®å½•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su - ldapuser</span><br><span class="line">su: warning: cannot change directory to /home/ldapuser: No such file or directory</span><br><span class="line">mkdir: cannot create directory &apos;/home/ldapuser&apos;: Permission denied</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯æœ¬æœºå¹¶æ²¡æœ‰è¯¥ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®NFSæœåŠ¡å°†ç”¨æˆ·çš„å®¶ç›®å½•è‡ªåŠ¨æŒ‚è½½è¿‡æ¥ï¼š</p>
<p>åœ¨LDAPæœåŠ¡ç«¯æ·»åŠ å…±äº«ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/exports</span><br><span class="line">/home/ldap 192.168.10.20 (rw,sync,root_squash)</span><br><span class="line"></span><br><span class="line">#é‡å¯nfs-server</span><br><span class="line">systemct restart nfs-server</span><br></pre></td></tr></table></figure>
<p>åœ¨LDAPå®¢æˆ·ç«¯æŸ¥çœ‹å…±äº«ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e 192.168.10.10</span><br></pre></td></tr></table></figure>
<p>å°†å…±äº«ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/ldap</span><br><span class="line">mount -t nfs 192.168.10.10:/home/ldap /home/ldap</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡å°è¯•åˆ‡æ¢åˆ°ldapuserç”¨æˆ·ï¼Œè¿™æ ·éå¸¸é¡ºåˆ©ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe ldap]# su - ldapuser</span><br><span class="line">Last login: Tue Oct  6 11:51:25 CST 2015 on pts/3</span><br><span class="line">[ldapuser@linuxprobe ~]$</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/fstab</span><br><span class="line">192.168.10.10:/home/ldap /home/ldap nfs defaults 0 0</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬åä¸ƒèŠ‚è¯¾"><a href="#ç¬¬åä¸ƒèŠ‚è¯¾" class="headerlink" title="ç¬¬åä¸ƒèŠ‚è¯¾"></a>ç¬¬åä¸ƒèŠ‚è¯¾</h2><h3 id="ä½¿ç”¨iSCSIæœåŠ¡éƒ¨ç½²ç½‘ç»œå­˜å‚¨"><a href="#ä½¿ç”¨iSCSIæœåŠ¡éƒ¨ç½²ç½‘ç»œå­˜å‚¨" class="headerlink" title="ä½¿ç”¨iSCSIæœåŠ¡éƒ¨ç½²ç½‘ç»œå­˜å‚¨"></a>ä½¿ç”¨iSCSIæœåŠ¡éƒ¨ç½²ç½‘ç»œå­˜å‚¨</h3><h4 id="iSCSIæŠ€æœ¯ä»‹ç»"><a href="#iSCSIæŠ€æœ¯ä»‹ç»" class="headerlink" title="iSCSIæŠ€æœ¯ä»‹ç»"></a>iSCSIæŠ€æœ¯ä»‹ç»</h4><p>ç¡¬ç›˜æ˜¯è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡ä¸­é‡è¦çš„ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ï¼Œå­˜å‚¨è®¾å¤‡çš„IOè¯»å†™é€Ÿåº¦å¿«æ…¢ä¹Ÿç›´æ¥å½±å“ç€æœåŠ¡å™¨æ•´ä½“æ€§èƒ½çš„é«˜ä½ï¼Œå’±ä»¬åœ¨ä¹¦ç±ç¬¬6ç« ã€ç¬¬7ç« åˆ†åˆ«ç»†è‡´çš„å­¦ä¹ äº†ç¡¬ç›˜å­˜å‚¨ç»“æ„ã€RAIDç£ç›˜é˜µåˆ—æŠ€æœ¯åŠLVMé€»è¾‘å·ç®¡ç†æŠ€æœ¯ç­‰ç­‰å­˜å‚¨è®¾å¤‡æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯æ— è®ºæ˜¯è½¯ä»¶è¿˜æ˜¯ç¡¬ä»¶å±‚é¢çš„ï¼Œå¤§å¤šéƒ½æ˜¯åœ¨åŠªåŠ›è§£å†³ç¡¬ç›˜å­˜å‚¨è®¾å¤‡çš„è¯»å†™æ…¢å¿«é—®é¢˜æˆ–ä¿éšœå­˜å‚¨å†…å®¹æ•°æ®å®‰å…¨ã€‚ä¸ºäº†èƒ½å¤Ÿè®©å­˜å‚¨è®¾å¤‡æ›´åŠ å¼ºå¤§ï¼Œä¸€ç™¾å¹´æ¥äººç±»ä¸€ç›´åœ¨åŠªåŠ›å‘æŒ¥å¼ºå¤§çš„åˆ›é€ åŠ›æ¥ä¸æ–­æ”¹è¿›ç€ç‰©ç†ç¡¬ç›˜è®¾å¤‡çš„æ¥å£åè®®ï¼Œå½“å‰ç¡¬ç›˜æ¥å£ç±»å‹ä¸»è¦æœ‰IDEã€SCSIå’ŒSATAä¸‰ç§ã€‚SCSIå°å‹è®¡ç®—æœºç³»ç»Ÿæ¥å£æ˜¯ä¸€ç§è®¡ç®—æœºä¸ç¡¬ç›˜æˆ–å…‰é©±ç­‰è®¾å¤‡ç³»ç»Ÿçº§æ¥å£æœ€å¸¸è§çš„æ ‡å‡†åè®®ï¼Œåœ¨å½“ä»Šå­˜å‚¨è®¾å¤‡ä¸Šæœ€å¸¸ä½¿ç”¨çš„ä¸€ç§æ¥å£åè®®ï¼ŒSCSIæ¥å£åè®®çš„å‡ºç°ç»ˆç»“äº†IDEæ¥å£æ—¶ä»£ï¼Œäººä»¬å†ä¹Ÿä¸ç”¨å¿å—è§åˆ°æ•°æ®ä¼ è¾“å¾ˆæ…¢çš„æƒ…å†µäº†ã€‚</p>
<p>ä¸è®ºæ˜¯ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„ç¡¬ç›˜æ¥å£ï¼Œç¡¬ç›˜æ•°æ®æ€»æ˜¯è¦é€šè¿‡è®¡ç®—æœºä¸»æ¿ä¸Šçš„æ€»çº¿æ¥è·ŸCPUå¤„ç†å™¨ã€å†…å­˜è®¾å¤‡è¿›è¡Œæ•°æ®äº¤æ¢ä¼ è¾“ï¼Œè¿™æ ·ç‰©ç†ç¯å¢ƒçš„é™åˆ¶å¤§å¤§å¢åŠ äº†ç¡¬ç›˜èµ„æºå…±äº«çš„ä¸ä¾¿æ·æ€§ï¼Œå½“æ—¶äººä»¬è‚¯å®šåœ¨æƒ³å¦‚æœèƒ½å¤ŸæŠŠç¡¬ç›˜å­˜å‚¨èµ„æºä¹Ÿèƒ½æ”¾åˆ°äº’è”ç½‘ä¸Šé‚£è¯¥å¤šæ–¹ä¾¿å•Šï¼Œäºæ˜¯IBMå…¬å¸ä¾¿å¼€å§‹åŠ¨æ‰‹ç ”å‘åŸºäºTCP/IPç½‘ç»œåè®®å’ŒSCSIæ¥å£åè®®çš„æ–°å‹å­˜å‚¨æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯ç›®å‰æ‰€çœ‹åˆ°çš„iSCSIå°å‹è®¡ç®—æœºç³»ç»Ÿæ¥å£ï¼ˆInternet Small Computer System Interfaceï¼‰ã€‚è¿™æ˜¯ä¸€ç§èƒ½å¤ŸæŠŠSCSIæ¥å£ä¸ä»¥å¤ªç½‘æŠ€æœ¯ç›¸ç»“åˆçš„æ–°å‹å­˜å‚¨æŠ€æœ¯ï¼ŒåŸºäºiSCSIåè®®ä¾¿èƒ½åœ¨ç½‘ç»œä¸­ä¼ è¾“SCSIæ¥å£çš„å‘½ä»¤å’Œæ•°æ®å†…å®¹äº†ï¼Œè¿™æ ·ä¸ä»…å…‹æœäº†ä¼ ç»ŸSCSIæ¥å£è®¾å¤‡çš„ç‰©ç†å±€é™æ€§ï¼Œå®ç°è®©æœºæˆ¿ä¹‹é—´å¯ä»¥è·¨è¶Šçœå¸‚æ¥å…±äº«å­˜å‚¨è®¾å¤‡èµ„æºï¼Œè¿˜å¯ä»¥åšåˆ°åœ¨ä¸åœæœºçš„çŠ¶æ€ä¸‹æ‰©å±•å­˜å‚¨å®¹é‡ã€‚</p>
<p>åˆ˜é„è€å¸ˆè®¤ä¸ºåŒå­¦ä»¬ä¸ä»…åº”è¯¥å­¦ä¹ å¥½è¿™é¡¹æŠ€æœ¯ï¼Œæ›´è¦çŸ¥é“iscsiå­˜å‚¨æŠ€æœ¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ä¼˜åŠ¿å’Œç¼ºç‚¹ï¼Œè¿™æ ·åœ¨å·¥ä½œä¸­æ‰èƒ½çµæ´»ä½¿ç”¨ã€‚é¦–å…ˆæ¥è®²ï¼Œä½¿ç”¨iscsiå­˜å‚¨æŠ€æœ¯ç¡®å®éå¸¸ä¾¿æ·ï¼Œä»å­˜å‚¨èµ„æºè·å–å½¢å¼ä¸Šå‘ç”Ÿäº†å¾ˆå¤§çš„å˜åŒ–ï¼Œè§£è„±äº†ç‰©ç†ç¯å¢ƒçš„é™åˆ¶ï¼ŒåŒæ—¶è¿˜èƒ½å¤ŸæŠŠå­˜å‚¨èµ„æºåˆ†å¼€ç»™å¤šä¸ªæœåŠ¡å™¨ä¸€èµ·ä½¿ç”¨ï¼Œæ˜¯ä¸€ç§éå¸¸æ¨èçš„ç½‘ç»œå­˜å‚¨æŠ€æœ¯ã€‚ä½†iscsiå­˜å‚¨åè®®çš„æŠ€æœ¯å±€é™æ€§ä¹Ÿååˆ†æ˜æ˜¾ï¼Œé‚£å°±æ˜¯ç½‘é€Ÿï¼ä»¥å‰ç¡¬ç›˜è®¾å¤‡æ˜¯ç›´æ¥é€šè¿‡ä¸»æ¿ä¸Šçš„æ€»çº¿è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œä½†å½“å‰åˆ™éœ€è¦è®©äº’è”ç½‘æ¥ä½œä¸ºæ•°æ®ä¼ è¾“çš„è½½ä½“ï¼Œåœ¨ä¼ è¾“é€Ÿç‡ä¸Šä»¥åŠç¨³å®šæ€§ä¸Šé¢éƒ½æ˜¯å½“å‰é‡åˆ°çš„ç“¶é¢ˆé—®é¢˜ï¼Œéšç€äº’è”ç½‘å’Œç½‘ç»œæŠ€æœ¯çš„æŒç»­å‘å±•ï¼Œç›¸ä¿¡iscsiæŠ€æœ¯åœ¨æœªæ¥ä¹Ÿä¼šè¢«ä¸æ–­å¾—åˆ°æ”¹å–„çš„ã€‚</p>
<p>å¯¹äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ï¼Œæ—¢ç„¶å’±ä»¬è¦é€šè¿‡ä»¥å¤ªç½‘æ¥ä¼ è¾“ç¡¬ç›˜æ•°æ®ï¼Œé‚£æ•°æ®æ˜¯é€šè¿‡ç½‘å¡ä¼ å…¥åˆ°ç”µè„‘ä¸­çš„å—ï¼Ÿè¿™å°±æœ‰å¿…è¦å‘åŒå­¦ä»¬ä»‹ç»ä¸‹iSCSI-HBAå¡äº†ï¼Œä¸€èˆ¬çš„ç½‘å¡æ˜¯è¿æ¥çš„ç½‘ç»œæ€»çº¿å’Œå†…å­˜ï¼Œæ˜¯ç”¨æ¥ä¾›è®¡ç®—æœºä¸Šç½‘çš„ï¼Œè€ŒiSCSI-HBAå¡åˆ™æ˜¯è¿æ¥çš„SCSIæ¥å£æˆ–FCæ€»çº¿å’Œå†…å­˜ï¼Œæ˜¯ä¸“é—¨ä¾›ä¸»æœºä¹‹é—´äº¤æ¢å­˜å‚¨æ•°æ®çš„ï¼Œåè®®ä¹Ÿæœ‰æœ¬è´¨çš„åŒºåˆ«ï¼ŒiSCSI-HBAå¡å¦‚å›¾17-1æ‰€ç¤ºï¼ŒLinuxç³»ç»ŸæœåŠ¡å™¨ä¼šåŸºäºiSCSIåè®®æŠŠSCSIç¡¬ç›˜è®¾å¤‡ã€å‘½ä»¤ä¸æ•°æ®æ‰“åŒ…æˆæ ‡å‡†çš„TCP/IPæ•°æ®åŒ…ï¼Œç„¶åé€šè¿‡ä»¥å¤ªç½‘ä¼ è¾“åˆ°ç›®æ ‡çš„å­˜å‚¨è®¾å¤‡ï¼Œè€Œå½“è¿œç«¯çš„è®¡ç®—æœºç³»ç»Ÿæ¥æ”¶åˆ°è¿™äº›æ•°æ®åŒ…åè¿˜éœ€è¦åŸºäºiSCSIåè®®æŠŠTCP/IPæ•°æ®åŒ…è§£å‹æˆSCSIè®¾å¤‡ã€å‘½ä»¤ä¸æ•°æ®ã€‚</p>
<h4 id="åˆ›å»ºRAIDç£ç›˜é˜µåˆ—"><a href="#åˆ›å»ºRAIDç£ç›˜é˜µåˆ—" class="headerlink" title="åˆ›å»ºRAIDç£ç›˜é˜µåˆ—"></a>åˆ›å»ºRAIDç£ç›˜é˜µåˆ—</h4><p>æ—¢ç„¶è¦ä½¿ç”¨iSCSIæŠ€æœ¯ä¸ºè¿œç¨‹ç”¨æˆ·æä¾›ç¡¬ç›˜å­˜å‚¨èµ„æºï¼Œé‚£é¦–å…ˆåº”è¯¥ä¿è¯æœåŠ¡å™¨å­˜å‚¨èµ„æºçš„ç¨³å®šæ€§å’Œå¯ç”¨æ€§ï¼Œå¦åˆ™ä¸€æ—¦è¿œç¨‹ç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°æ•…éšœï¼Œé‚£æ’é”™ç»´ä¿®èµ·æ¥çš„éš¾åº¦ç›¸æ¯”è¾ƒæœ¬åœ°ç¡¬ç›˜è®¾å¤‡æ¥è®²æ˜¯è¦å¤æ‚å›°éš¾å¾ˆå¤šçš„ã€‚</p>
<p>ä½¿ç”¨mdadmå‘½ä»¤åˆ›å»ºRAIDç£ç›˜é˜µåˆ—ç»„ï¼Œ-Cvå‚æ•°ä¸ºåˆ›å»ºé˜µåˆ—ç»„å¹¶æ˜¾ç¤ºè¿‡ç¨‹ï¼Œ/dev/md0ä¸ºç”Ÿæˆçš„é˜µåˆ—ç»„åç§°ï¼Œ-n 3å‚æ•°ä¸ºåˆ›å»ºRAID5çº§åˆ«ç£ç›˜é˜µåˆ—ç»„æ‰€éœ€è¦ç”¨çš„ç¡¬ç›˜ä¸ªæ•°ï¼Œ-l 5å‚æ•°ä¸ºRAIDç£ç›˜é˜µåˆ—ç»„çš„çº§åˆ«ï¼Œ-x 1å‚æ•°ä¸ºç£ç›˜é˜µåˆ—ç»„çš„çƒ­å¤‡ç›˜ä¸ªæ•°ï¼Œåœ¨å‘½ä»¤çš„æœ€åé¢é€ä¸€å†™ä¸Šè¦ä½¿ç”¨çš„ç¡¬ç›˜åç§°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdadm -Cv /dev/md0 -n 3 -l 5 -x 1 /dev/sd&#123;b,c,d,e&#125;</span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸåå°±å¾—åˆ°äº†ä¸€å—åç§°ä¸º/dev/md0çš„æ–°è®¾å¤‡ï¼Œè¿™æ˜¯ä¸€å—RAID5çº§åˆ«çš„ç£ç›˜é˜µåˆ—ç»„ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€å—çƒ­å¤‡ç›˜ä¸ºç¡¬ç›˜æ•°æ®ä¿é©¾æŠ¤èˆªï¼Œå¯ä½¿ç”¨mdadm -Då‘½ä»¤å‚æ•°æ¥æŸ¥çœ‹è®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ã€‚å¦å¤–ç”±äºä½¿ç”¨è¿œç¨‹è®¾å¤‡æ—¶ææœ‰å¯èƒ½å‡ºç°è¯†åˆ«é¡ºåºå‘ç”Ÿå˜åŒ–çš„æƒ…å†µï¼Œå¦‚æœç›´æ¥åœ¨fstabæŒ‚è½½é…ç½®æ–‡ä»¶ä¸­å†™/dev/sdbã€/dev/sdcç­‰è®¾å¤‡åç§°çš„è¯ï¼Œå°±æœ‰å¯èƒ½ä¸‹ä¸€æ¬¡æŒ‚è½½é”™äº†å­˜å‚¨è®¾å¤‡ï¼ŒUUIDå€¼ä¸ºè®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ç¬¦ ï¼Œæ˜¯ä¸€ç§åŒºåˆ†æœ¬åœ°æˆ–è¿œç¨‹è®¾å¤‡æœ€ç²¾å‡†çš„æ–¹æ³•ï¼Œå’±ä»¬éœ€è¦æŠŠè¿™æ®µå­—ç¬¦ä¸²è®°å½•ä¸‹æ¥ï¼Œä¸€ä¼šå¡«å†™åˆ°æŒ‚è½½é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mdadm -D /dev/md0</span><br><span class="line">UUID : 3370f643:c10efd6a:44e91f2a:20c71f3e</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®iSCSIæœåŠ¡ç«¯"><a href="#é…ç½®iSCSIæœåŠ¡ç«¯" class="headerlink" title="é…ç½®iSCSIæœåŠ¡ç«¯"></a>é…ç½®iSCSIæœåŠ¡ç«¯</h4><p>iSCSIæŠ€æœ¯åœ¨å·¥ä½œå½¢å¼ä¸Šåˆ†ä¸ºæœåŠ¡ç«¯ï¼ˆtargetï¼‰ä¸å®¢æˆ·ç«¯ï¼ˆinitiatorï¼‰ï¼ŒiSCSIæœåŠ¡ç«¯å³ç”¨äºå­˜æ”¾ç¡¬ç›˜å­˜å‚¨èµ„æºçš„æœåŠ¡å™¨ï¼Œä½œä¸ºå‰é¢åˆ›å»ºRAIDç£ç›˜é˜µåˆ—ç»„çš„å­˜å‚¨ç«¯ï¼Œèƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›å¯ç”¨çš„å­˜å‚¨èµ„æºã€‚è€ŒiSCSIå®¢æˆ·ç«¯åˆ™æ˜¯ç”¨æˆ·ä½¿ç”¨çš„è½¯ä»¶ï¼Œç”¨äºè·å–è¿œç¨‹æœåŠ¡ç«¯çš„å­˜å‚¨èµ„æºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install targetd targetcli</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæˆåå¯åŠ¨iSCSIçš„æœåŠ¡ç«¯targetdç¨‹åºï¼Œç„¶åæŠŠæœåŠ¡ç¨‹åºåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼Œä»¥ä¾¿ä¸‹æ¬¡é‡å¯æœåŠ¡å™¨åä¾ç„¶èƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›iSCSIå…±äº«å­˜å‚¨èµ„æºæœåŠ¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start targetd</span><br><span class="line">systemctl enable targetd</span><br></pre></td></tr></table></figure>
<p>ç¬¬2æ­¥ï¼šé…ç½®iSCSIæœåŠ¡ç«¯å…±äº«èµ„æºï¼Œtargetcliæ˜¯ç”¨äºç®¡ç†iSCSIæœåŠ¡ç«¯å­˜å‚¨èµ„æºçš„ä¸“ç”¨é…ç½®å‘½ä»¤ï¼Œå®ƒèƒ½å¤Ÿæä¾›ç±»ä¼¼äºå‰é¢å­¦ä¹ è¿‡çš„fdiskå‘½ä»¤çš„äº¤äº’å¼é…ç½®åŠŸèƒ½ï¼Œå°†iSCSIå…±äº«èµ„æºçš„é…ç½®å†…å®¹æŠ½è±¡æˆäº†â€œç›®å½•â€çš„å½¢å¼ï¼Œå’±ä»¬åªéœ€è¦æŠŠå„ç±»é…ç½®ä¿¡æ¯å†™å…¥åˆ°å¯¹åº”â€œç›®å½•â€ä¸­å³å¯ã€‚éš¾ç‚¹ä¸»è¦é›†ä¸­åœ¨è®¤è¯†æ¯ä¸ªâ€œå‚æ•°ç›®å½•â€çš„ä½œç”¨ï¼Œå½“æŠŠé…ç½®å‚æ•°æ­£ç¡®å¦¥å½“çš„å¡«å†™åˆ°â€œç›®å½•â€ä¸­åï¼ŒiSCSIæœåŠ¡ç«¯ä¹Ÿå°±èƒ½å¤Ÿæä¾›å­˜å‚¨è®¾å¤‡èµ„æºæœåŠ¡äº†ï¼Œæ€»ä½“æ¥è¯´åœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­é…ç½®iSCSIå…±äº«èµ„æºç›¸æ¯”è¾ƒ5å’Œ6ç‰ˆæœ¬å˜å¾—å¾ˆç®€å•äº†ã€‚</p>
<p>æ‰§è¡Œtargetcliå‘½ä»¤åå°±èƒ½çœ‹åˆ°äº¤äº’å¼çš„é…ç½®ç•Œé¢äº†ï¼Œè¿™é‡Œé¢å¯ä»¥ä½¿ç”¨å¾ˆå¤šçš„Linuxå‘½ä»¤ï¼Œåˆ©ç”¨ä½¿ç”¨lsæŸ¥çœ‹å‚æ•°ç›®å½•çš„ç»“æ„ï¼Œæˆ–è€…ä½¿ç”¨cdæ¥è¿›è¡Œåˆ‡æ¢ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚/backstores/blockæ˜¯iSCSIæœåŠ¡ç«¯å¯¹å…±äº«è®¾å¤‡çš„é…ç½®ä½ç½®ï¼Œéœ€è¦æŠŠåˆšåˆšåˆ›å»ºçš„RAID5ç£ç›˜é˜µåˆ—ç»„md0æ–‡ä»¶åŠ å…¥åˆ°èµ„æºæ± ä¸­å¹¶é‡æ–°å‘½åä¸ºdisk0ï¼Œè¿™æ ·ç”¨æˆ·ä¸ä¼šçŸ¥é“æ˜¯ç”±æœåŠ¡å™¨é‚£å—ç¡¬ç›˜æä¾›çš„å…±äº«å­˜å‚¨èµ„æºï¼Œè€Œåªä¼šçœ‹åˆ°å«åšdisk0çš„å­˜å‚¨è®¾å¤‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">targetcli</span><br><span class="line"></span><br><span class="line">ls</span><br><span class="line">cd /backstores/block</span><br><span class="line">create disk0 /dev/md0</span><br></pre></td></tr></table></figure>
<p>ç¬¬3æ­¥ï¼šåˆ›å»ºiSCSI targetåç§°åŠé…ç½®å…±äº«èµ„æºï¼ŒiSCSI targetåç§°æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè¿™æ˜¯ä¸€ä¸²ç”¨äºæè¿°å…±äº«èµ„æºçš„ç›¸å¯¹å”¯ä¸€çš„å­—ç¬¦ä¸²ï¼Œç¨åç”¨æˆ·æ‰«æå‘ç°iSCSIæœåŠ¡ç«¯æ—¶å¯çœ‹åˆ°è¿™ä¸²å…±äº«èµ„æºçš„ä¿¡æ¯ï¼Œå› æ­¤ç³»ç»Ÿç”ŸæˆååŒå­¦ä»¬ä¸éœ€è¦è®°ä½å®ƒä»¬ã€‚åç§°ç”Ÿæˆåè¿˜ä¼šåœ¨å«åš/iscsiçš„å‚æ•°ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªä¸å…¶åŒåçš„æ–°â€œç›®å½•â€ç”¨æ¥å­˜æ”¾å…±äº«èµ„æºï¼Œå’±ä»¬éœ€è¦æŠŠåˆšåˆšåŠ å…¥åˆ°iSCSIå…±äº«èµ„æºæ± ä¸­çš„ç¡¬ç›˜è®¾å¤‡æ·»åŠ åˆ°æ­¤å¤„ï¼Œè¿™æ ·ç¨åç”¨æˆ·ç™»é™†iSCSIæœåŠ¡ç«¯æ—¶å³å¯é»˜è®¤ä½¿ç”¨è¿™ä¸ªè®¾å¤‡æä¾›çš„å…±äº«å­˜å‚¨èµ„æºäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">targetcli</span><br><span class="line"></span><br><span class="line">cd iscsi</span><br><span class="line">create</span><br><span class="line">cd iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80</span><br><span class="line">cd tpg1/luns</span><br><span class="line">create /backstores/block/disk0</span><br></pre></td></tr></table></figure>
<p>ç¬¬4æ­¥ï¼šè®¾ç½®ACLè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ŒiSCSIåè®®æ˜¯é€šè¿‡å®¢æˆ·ç«¯åç§°è¿›è¡ŒéªŒè¯çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·è·å–å­˜å‚¨å…±äº«èµ„æºçš„æ—¶å€™ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œè€Œåªè¦iSCSIå®¢æˆ·ç«¯çš„åç§°ä¸æœåŠ¡ç«¯ä¸­è®¾ç½®çš„ACLè®¿é—®æ§åˆ¶åˆ—è¡¨åç§°ä¸€è‡´å³å¯ï¼Œå› æ­¤éœ€è¦åœ¨iSCSIæœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶ä¸­å†™å…¥ä¸€ä¸²èƒ½å¤ŸéªŒè¯ç”¨æˆ·ä¿¡æ¯çš„åç§°ï¼Œåˆ˜é„è€å¸ˆæ¨èç›´æ¥åœ¨åˆšåˆšç³»ç»Ÿç”Ÿæˆçš„iSCSI targetåè¿½åŠ ä¸Šç±»ä¼¼äº:clientçš„å‚æ•°å³å¯ï¼Œè¿™æ ·æ—¢èƒ½ä¿è¯ç”¨æˆ·åç§°å…·æœ‰å”¯ä¸€æ€§ï¼Œåˆéå¸¸ä¾¿äºç®¡ç†å’Œé˜…è¯»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">targetcli</span><br><span class="line"></span><br><span class="line">cd iscsi</span><br><span class="line">cd iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80</span><br><span class="line">cd tpg1/acls</span><br><span class="line">create iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80:client</span><br></pre></td></tr></table></figure>
<p>ç¬¬5æ­¥ï¼šè®¾ç½®iSCSIæœåŠ¡ç«¯çš„ç›‘å¬IPåœ°å€å’Œç«¯å£å·ï¼Œå› ä¸ºåœ¨ç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡å™¨ä¸Šé¢å¯èƒ½æœ‰å¤šå—ç½‘å¡ï¼Œé‚£ä¹ˆåˆ°åº•ç”±é‚£ä¸ªç½‘å¡æˆ–IPåœ°å€å¯¹å¤–æä¾›å…±äº«å­˜å‚¨èµ„æºå‘¢ï¼Ÿè¿™å°±éœ€è¦å’±ä»¬æ‰‹å·¥çš„åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰iSCSIæœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œå³åœ¨portalså‚æ•°ç›®å½•ä¸­å†™ä¸ŠæœåŠ¡å™¨çš„IPåœ°å€å³å¯ï¼Œæ¥ä¸‹æ¥ä¼šç”±ç³»ç»Ÿè‡ªåŠ¨æé†’ä¸»æœº192.168.10.10çš„3260ç«¯å£å°†å‘å¤–æä¾›iSCSIå…±äº«å­˜å‚¨èµ„æºæœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">targetcli</span><br><span class="line"></span><br><span class="line">cd iscsi</span><br><span class="line">cd iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80</span><br><span class="line">cd tpg1/portals</span><br><span class="line">create 192.168.10.10</span><br></pre></td></tr></table></figure>
<p>ç¬¬6æ­¥ï¼šé…ç½®å¦¥å½“åæ£€æŸ¥é…ç½®ä¿¡æ¯ï¼Œé‡å¯iSCSIæœåŠ¡ç«¯ç¨‹åºå¹¶é…ç½®é˜²ç«å¢™ç­–ç•¥ï¼Œåœ¨é…ç½®å¦¥å½“å‚æ•°æ–‡ä»¶åå¯å¤§è‡´æµè§ˆä¸‹åˆšåˆšé…ç½®çš„ä¿¡æ¯ï¼ŒåŒå­¦ä»¬ä¹Ÿåº”è¯¥è·Ÿä¸‹é¢çš„ä¿¡æ¯åŸºæœ¬ä¿æŒä¸€è‡´ã€‚ç¡®è®¤ä¿¡æ¯æ— è¯¯åå¯è¾“å…¥exitå‘½ä»¤æ¥é€€å‡ºé…ç½®å‘½ä»¤ï¼Œä½†æ­¤å¤„åˆ‡è®°ä¸è¦ä¹ æƒ¯æ€§çš„æŒ‰ctrl+cæ¥ç»“æŸè¿›ç¨‹ï¼Œè¿™æ ·çš„è¯é…ç½®æ–‡ä»¶æ˜¯æ²¡æœ‰è¢«ä¿å­˜çš„ï¼Œä¹Ÿå°±å‰åŠŸå°½å¼ƒäº†ã€‚æœ€åé‡å¯ä¸€ä¸‹iSCSIæœåŠ¡ç«¯ç¨‹åºï¼Œå†è®¾ç½®firewalldé˜²ç«å¢™å¯¹3260/Tcpç«¯å£å·çš„æµé‡æ”¾è¡Œç­–ç•¥ï¼Œä¹Ÿå°±å®Œæˆäº†iSCSIæœåŠ¡ç«¯å…¨éƒ¨çš„é…ç½®æ­¥éª¤äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart targetd</span><br><span class="line"></span><br><span class="line">firewall-cmd --permanent --add-port=3260/tcp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®Linuxå®¢æˆ·ç«¯"><a href="#é…ç½®Linuxå®¢æˆ·ç«¯" class="headerlink" title="é…ç½®Linuxå®¢æˆ·ç«¯"></a>é…ç½®Linuxå®¢æˆ·ç«¯</h4><p>ç°åœ¨å·²ç»æœ‰äº†å¾ˆå¤šçš„LinuxæœåŠ¡é…ç½®ç»éªŒï¼Œå¯ä»¥æ€»ç»“æ¥è¯´ä¸è®ºæ˜¯ä»€ä¹ˆæœåŠ¡ï¼Œå®¢æˆ·ç«¯çš„é…ç½®æ­¥éª¤éƒ½ä¼šæ¯”æœåŠ¡ç«¯æ›´ç®€å•ä¸€äº›ï¼Œåœ¨çº¢å¸½RHEL7ç³»ç»Ÿä¸­iSCSIå®¢æˆ·ç«¯æœåŠ¡ç¨‹åºinitiatorå·²ç»è¢«é»˜è®¤å®‰è£…å¥½äº†ï¼Œè€Œå¦‚æœæ‚¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ²¡æœ‰é»˜è®¤å®‰è£…çš„è¯ï¼Œå¯ä»¥ç”¨yumè½¯ä»¶ä»“åº“æ¥æ‰‹å·¥å®‰è£…ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install iscsi-initiator-utils</span><br></pre></td></tr></table></figure>
<p>å¦‚å‰é¢æ‰€æåˆ°çš„iSCSIåè®®æ˜¯é€šè¿‡å®¢æˆ·ç«¯åç§°è¿›è¡ŒéªŒè¯çš„ï¼Œè€Œè¯¥åç§°ä¹Ÿå°±æ˜¯iSCSIå®¢æˆ·ç«¯çš„å”¯ä¸€æ ‡è¯†ï¼Œè¿™ä¸²ä¿¡æ¯å¿…é¡»ä¸æœåŠ¡ç«¯é…ç½®æ–‡ä»¶ä¸­ACLè®¿é—®æ§åˆ¶åˆ—è¡¨ä¸­çš„ä¿¡æ¯åŒ¹é…ä¸€è‡´ï¼Œå¦åˆ™å®¢æˆ·ç«¯åœ¨å°è¯•ä½¿ç”¨å­˜å‚¨å…±äº«æ—¶å°±ä¼šå¼¹å‡ºéªŒè¯å¤±è´¥çš„æŠ¥é”™ä¿¡æ¯ã€‚ç¼–è¾‘åœ¨iSCSIå®¢æˆ·ç«¯ä¸­çš„initiatoråç§°æ–‡ä»¶ï¼ŒæŠŠåˆšåˆšæœåŠ¡ç«¯çš„ACLè®¿é—®æ§åˆ¶åˆ—è¡¨åç§°å¡«å†™è¿›å…¥ï¼Œç„¶åé‡å¯ä¸€ä¸‹å®¢æˆ·ç«¯iscsidæœåŠ¡ç¨‹åºå¹¶åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/iscsi/initiatorname.iscsi</span><br><span class="line">InitiatorName=iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80:client</span><br><span class="line"></span><br><span class="line">systemctl restart iscsid</span><br><span class="line">systemctl enable iscsid</span><br></pre></td></tr></table></figure>
<p>åœ¨iSCSIå®¢æˆ·ç«¯ä½¿ç”¨å…±äº«å­˜å‚¨èµ„æºçš„æ­¥éª¤å¾ˆç®€å•ï¼Œåªéœ€è¦è®°ä½åˆ˜é„è€å¸ˆçš„ä¸€ä¸ªå°å£è¯€â€œå…ˆå‘ç°ï¼Œå†ç™»é™†ï¼Œæœ€åæŒ‚è½½å¹¶ä½¿ç”¨â€ã€‚iscsiadmæ˜¯ç”¨äºç®¡ç†ã€æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤iSCSIæ•°æ®åº“é…ç½®æ–‡ä»¶çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æˆ·éœ€è¦å…ˆä½¿ç”¨è¿™ä¸ªiscsiadmå‘½ä»¤å¯¹è¿œç¨‹iSCSIæœåŠ¡ç«¯è¿›è¡Œæ‰«æå‘ç°ï¼ŒæŸ¥çœ‹è¯¥æœåŠ¡å™¨ä¸Šé¢æœ‰é‚£äº›å¯ç”¨çš„å…±äº«å­˜å‚¨èµ„æºï¼Œ-m discoveryå‚æ•°ä¸ºå®šä¹‰æ“ä½œç›®çš„æ˜¯æ‰«æå‘ç°å¯ç”¨å­˜å‚¨èµ„æºï¼Œ-t stå‚æ•°ä¸ºæ‰«æå‘ç°æ“ä½œçš„ç±»å‹ï¼Œ-p 192.168.10.10å‚æ•°ä¸ºå¯¹æ–¹iSCSIæœåŠ¡ç«¯çš„IPåœ°å€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iscsiadm -m discovery -t st -p 192.168.10.10</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨iscsiadmå‘½ä»¤æ‰«æå‘ç°åˆ°è¿œç¨‹iSCSIæœåŠ¡ç«¯ä¸Šå¯ç”¨çš„å­˜å‚¨èµ„æºåç§°åï¼Œç„¶åå°±è¦è¿›è¡Œç™»é™†äº†ï¼Œ-m nodeå‚æ•°ä¸ºå°†æœ¬æœºä½œä¸ºä¸€å°èŠ‚ç‚¹æœåŠ¡å™¨ï¼Œ-T  iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80å‚æ•°ä¸ºè¦ä½¿ç”¨çš„å­˜å‚¨èµ„æºåç§°ï¼Œå­—ç¬¦ä¸²å¾ˆé•¿æ‰‹æ‰“å®¹æ˜“é”™ï¼ŒåŒå­¦ä»¬ç›´æ¥å¤åˆ¶ä¸Šé¢æ‰«æå‘ç°åˆ°çš„ç»“æœå³å¯ï¼Œ-p 192.168.10.10å‚æ•°ä¾ç„¶ä¸ºå¯¹æ–¹iSCSIæœåŠ¡ç«¯çš„IPåœ°å€ï¼Œæœ€åä½¿ç”¨â€“loginæˆ–-lå‚æ•°è¿›è¡Œç™»é™†éªŒè¯å§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80 -p 192.168.10.10 --login</span><br></pre></td></tr></table></figure>
<p>åœ¨å¯¹iSCSIæœåŠ¡ç«¯è¿›è¡Œç™»é™†éªŒè¯æ˜¾ç¤ºé¡ºåˆ©æˆåŠŸåå°±ä¼šåœ¨ç³»ç»Ÿä¸­å¤šäº†ä¸€å—åä¸º/dev/sdbçš„è®¾å¤‡æ–‡ä»¶ï¼Œè¿˜è®°å¾—ç¬¬6ç« ä¸­åˆ˜é„è€å¸ˆè¯´è¿‡udevæœåŠ¡åœ¨å‘½åç¡¬ç›˜åç§°çš„æ—¶å€™ä¸æ’æ§½æ˜¯æ²¡æœ‰å…³ç³»çš„å§~è¿™ä¸ªè¿œç¨‹çš„å­˜å‚¨èµ„æºè®¾å¤‡æ–‡ä»¶å°±è¿™ä¹ˆæ´»ç”Ÿç”Ÿçš„å‡ºç°åˆ°äº†iSCSIå®¢æˆ·ç«¯ä¸»æœºä¸Šé¢ï¼Œæ¥ä¸‹æ¥å¯ä»¥åƒä½¿ç”¨è‡ªå·±ç”µè„‘ä¸Šçš„ç¡¬ç›˜ä¸€æ ·æ¥å¯¹è¿™å—è®¾å¤‡è¿›è¡Œæ“ä½œäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file /dev/sdb</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å¯ä»¥æŒ‰ç…§ä¹‹å‰æ‰€å­¦ä¹ è¿‡çš„ç¡¬ç›˜æ ‡å‡†æµç¨‹è¿›è¡Œæ“ä½œï¼Œè¿™éƒ¨åˆ†å†…å®¹åŒå­¦ä»¬åº”è¯¥æ—©å·²çƒ‚ç†Ÿäºèƒ¸ï¼Œå¦‚æœå¿˜è®°çš„è¯å¯ä»¥ç¿»å›åˆ°ç¬¬6ç« å†å¤ä¹ ä¸€ä¸‹ï¼Œç”±äºè¿™å—å­˜å‚¨èµ„æºæœ¬èº«ä¹Ÿå°±åªæœ‰40GBå®¹é‡äº†ï¼Œå› æ­¤ä¹Ÿå°±ä¸è¿›è¡Œåˆ†åŒºæ­¥éª¤äº†ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œæ ¼å¼åŒ–å¹¶æŒ‚è½½ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs /dev/sdb</span><br><span class="line">mkdir /iscsi</span><br><span class="line">mount /dev/sdb /iscsi</span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸ªå®éªŒåšæˆåŠŸåéƒ½ä¼šæ„Ÿåˆ°åƒè§£å‡ºä¸€é“æ•°å­¦é¢˜ä¼¼å¾—å–œæ‚¦å§~æ¥ä¸‹æ¥è¿™å—ç¡¬ç›˜è®¾å¤‡å°±åƒåœ¨å®¢æˆ·ç«¯ä¸»æœºæœ¬åœ°çš„ç¡¬ç›˜è®¾å¤‡ä¸€æ ·å·¥ä½œï¼Œä½†æœ‰ä¸€ç‚¹éœ€è¦åŒå­¦ä»¬æ ¼å¤–çš„ç•™æ„ï¼Œå°±æ˜¯ç”±äºudevæœåŠ¡å¯¹ç¡¬ç›˜è®¾å¤‡çš„å‘½åè§„åˆ™æ˜¯æŒ‰ç…§ç³»ç»Ÿè¯†åˆ«é¡ºåºæ“ä½œçš„ï¼Œé‚£ä¹ˆå½“å®¢æˆ·ç«¯ä¸»æœºåŒæ—¶ä½¿ç”¨å¤šä¸ªè¿œç¨‹å­˜å‚¨èµ„æºæ—¶ï¼Œå¦‚æœä¸‹ä¸€æ¬¡è¯†åˆ«è¿œç¨‹å…±äº«è®¾å¤‡çš„é¡ºåºå‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯æ‰€æŒ‚è½½ç›®å½•å†…çš„æ–‡ä»¶å¯èƒ½ä¹Ÿä¼šéšä¹‹æ··ä¹±ã€‚æ‰€ä»¥ä¸ºäº†é˜²æ­¢æ­¤ç±»é—®é¢˜å‡ºç°ï¼Œå’±ä»¬åº”è¯¥åœ¨/etc/fatabé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨è®¾å¤‡çš„UUIDå”¯ä¸€æ ‡è¯†ç¬¦è¿›è¡ŒæŒ‚è½½ï¼Œè¿™æ ·ä¸è®ºè¿œç¨‹è®¾å¤‡èµ„æºè¯†åˆ«çš„é¡ºåºå†æ€æ ·å‘ç”Ÿå˜åŒ–ï¼Œç³»ç»Ÿä¹Ÿä¸€æ ·èƒ½é©¬ä¸Šæ‰¾åˆ°è®¾å¤‡æ‰€å¯¹åº”çš„æ­£ç¡®ç›®å½•ã€‚blkidå‘½ä»¤ç”¨äºæŸ¥çœ‹è®¾å¤‡çš„åç§°ã€æ–‡ä»¶ç³»ç»ŸåŠUUIDå†…å®¹ï¼Œå¯ä»¥ç”¨ç¬¬3ç« ä¸­å­¦ä¹ çš„ç®¡é“ç¬¦è¿›è¡Œè¿‡æ»¤æ˜¾ç¤ºå‡ºé’ˆå¯¹/dev/sdbè®¾å¤‡çš„å†…å®¹ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blkid | grep /dev/sdb</span><br></pre></td></tr></table></figure>
<p>æœ€æœ€æœ€æœ€åˆ˜é„è€å¸ˆè¿˜è¦å†å•°å—¦ä¸€å¥ï¼Œç”±äº/dev/sdbæ˜¯ä¸€å—ç½‘ç»œå­˜å‚¨è®¾å¤‡ï¼Œè€ŒiSCSIåè®®æ˜¯åŸºäºTCP/IPç½‘ç»œåè®®è¿›è¡Œä¼ è¾“æ•°æ®çš„ï¼Œå› æ­¤å¿…é¡»åœ¨/etc/fstabé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸Š_netdevå‚æ•°ï¼Œä»£è¡¨å½“ç³»ç»Ÿè”ç½‘å¯åŠ¨åå†è¿›è¡ŒæŒ‚è½½æ“ä½œï¼Œé¿å…ç³»ç»Ÿå¼€æœºæ—¶é—´è¿‡é•¿æˆ–å¯åŠ¨å¤±è´¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/fstab</span><br><span class="line">UID=eb9cbf2f-fce8-413a-b770-8b0f243e8ad6 /iscsi xfs defaults,_netdev 0 0</span><br></pre></td></tr></table></figure>
<p>å¯¹äº†ï¼Œå¦‚æœåŒå­¦ä»¬ä¸å†éœ€è¦ä½¿ç”¨iSCSIå…±äº«è®¾å¤‡èµ„æºäº†ï¼Œå¯ä»¥ç”¨iscsiadmå‘½ä»¤çš„-uå‚æ•°æ¥å°†å…¶è®¾å¤‡å¸è½½æ‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iscsiadm -m node -T iqn.2003-01.org.linux-iscsi.linuxprobe.x8664:sn.d497c356ad80 -u</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®Windowså®¢æˆ·ç«¯"><a href="#é…ç½®Windowså®¢æˆ·ç«¯" class="headerlink" title="é…ç½®Windowså®¢æˆ·ç«¯"></a><a href="http://www.linuxprobe.com/chapter-17.html#175_Windows" target="_blank" rel="noopener">é…ç½®Windowså®¢æˆ·ç«¯</a></h4><h3 id="ä½¿ç”¨MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#ä½¿ç”¨MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="ä½¿ç”¨MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>ä½¿ç”¨MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h3><h4 id="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"><a href="#æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ"></a>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</h4><p>æ•°æ®åº“æ˜¯æŒ‡æŒ‰ç…§æŸäº›ç‰¹å®šç»“æ„æ¥å­˜å‚¨æ•°æ®èµ„æ–™çš„è½¯ä»¶ä»“åº“ç¨‹åºï¼Œåœ¨å½“ä»Šè¿™ä¸ªäº’è”ç½‘åŠå¤§æ•°æ®æŠ€æœ¯è¿…é€Ÿå´›èµ·çš„ç–¯ç‹‚æ—¶ä»£ï¼Œåœ¨äººä»¬ç”Ÿæ´»ä¸­ä¹Ÿæ— æ—¶æ— åˆ»éƒ½åœ¨æ¥è§¦ç€æµ·é‡çš„æ•°æ®ä¿¡æ¯ï¼Œæ•°æ®åº“æŠ€æœ¯å·²ç»ä»æœ€åˆåªèƒ½å¤Ÿå­˜å‚¨ç®€å•è¡¨æ ¼å‘å±•åˆ°äº†å­˜å‚¨æµ·é‡æ•°æ®çš„å¤§å‹åˆ†å¸ƒå¼æ¨¡å¼ã€‚å°¤å…¶æ˜¯åœ¨ä¿¡æ¯åŒ–ç¤¾ä¼šç¯å¢ƒä¸‹ï¼Œèƒ½å¤Ÿå……åˆ†æœ‰æ•ˆåœ°ç®¡ç†å’Œåˆ©ç”¨å„ç±»ä¿¡æ¯èµ„æºï¼Œæ˜¯è¿›è¡Œç§‘å­¦ç ”ç©¶å’Œå†³ç­–ç®¡ç†çš„é‡è¦å‰ææ¡ä»¶ï¼ŒåŒæ—¶ç°åœ¨æ•°æ®åº“æŠ€æœ¯ä¹Ÿæ˜¯ç®¡ç†ä¿¡æ¯ç³»ç»Ÿã€åŠå…¬è‡ªåŠ¨åŒ–ç³»ç»Ÿã€å†³ç­–æ”¯æŒç³»ç»Ÿç­‰å„ç±»ä¿¡æ¯ç³»ç»Ÿçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œæ˜¯è¿›è¡Œç§‘å­¦ç ”ç©¶å’Œå†³ç­–ç®¡ç†çš„é‡è¦æŠ€æœ¯æ‰‹æ®µã€‚</p>
<p>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ç§èƒ½å¤Ÿå¯¹æ•°æ®åº“å†…å®¹è¿›è¡Œå»ºç«‹ã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥æ‰¾ã€ç»´æŠ¤ç­‰ç­‰æ“ä½œçš„è½¯ä»¶ç¨‹åºï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿé€šè¿‡æŠŠè®¡ç®—æœºä¸­å…·ä½“çš„ç‰©ç†æ•°æ®è½¬æ¢æˆé€‚åˆç”¨æˆ·ç†è§£çš„æŠ½è±¡é€»è¾‘æ•°æ®ï¼Œæœ‰æ•ˆé™ä½ç®¡ç†æ•°æ®åº“çš„æŠ€æœ¯é—¨æ§›ï¼Œå› æ­¤å³ä¾¿æ˜¯å­¦ä¹ Linuxè¿ç»´æ–¹å‘çš„å·¥ç¨‹å¸ˆä¹Ÿèƒ½å¤Ÿå¯¹æ•°æ®åº“å†…å®¹è¿›è¡ŒåŸºæœ¬çš„ç®¡ç†æ“ä½œã€‚ä½†åˆ˜é„è€å¸ˆæœ‰å¿…è¦æé†’åŒå­¦ä»¬æ‚¨æ‰‹ä¸­çš„è¿™æœ¬ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹ä¹¦ç±çš„æŠ€æœ¯ä¸»çº¿ä¾ç„¶æ˜¯å­¦ä¹ Linuxç³»ç»Ÿçš„è¿ç»´æŠ€æœ¯ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„å­¦ä¹ æ˜¯åœ¨ä¸»çº¿ä¹‹ä¸Šçš„ä¸æ–­æ‰©å±•å†…å®¹ä¹‹ä¸€ï¼Œä¸èƒ½æŒ‡æœ›ç”¨ä¸€ä¸¤å¤©æ—¶é—´å°±èƒ½ç²¾é€šæŸé—¨è®¡ç®—æœºè¯­è¨€æˆ–æŸé¡¹æŠ€æœ¯ï¼Œå› æ­¤å¦‚æœå­¦ä¹ æœ¬ç« èŠ‚å†…å®¹åå¯¹æ•°æ®åº“ç®¡ç†ç³»ç»ŸæŠ€æœ¯å˜å¾—å…´è¶£åè¶³ï¼Œé‚£ä¹ˆå°±ä¸ºè‡ªå·±å†å®šä¸‹ä¸€ä¸ªé•¿è¿œå­¦ä¹ ç›®æ ‡ã€‚</p>
<p>Mysqlæ˜¯ä¸€æ¬¾å½“å‰å¸‚åœºå æœ‰ç‡éå¸¸é«˜çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå®ƒçš„æŠ€æœ¯ååˆ†æˆç†Ÿï¼Œé…ç½®æ­¥éª¤ç›¸å¯¹ç®€å•ã€å¹¶ä¸”å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ï¼Œä½†ç”±äº2009å¹´Sunå…¬å¸è¢«æ”¶è´­äº†ï¼ŒMysqlé¡¹ç›®ä¹Ÿè¢«è½¬å…¥åˆ°äº†oracleå…¬å¸ä¸­å˜æˆäº†ä¸€é¡¹è™½ç„¶å¼€æºã€ä½†å´åˆå­˜åœ¨å¤šé¡¹ä¸“åˆ©å°é—­çš„è½¯ä»¶ç¨‹åºã€‚å’±ä»¬åœ¨ä¹¦ç±ç¬¬0ç« ä¸­ä»‹ç»è¿‡å¼€æºè½¯ä»¶æ˜¯å…¨çƒé»‘å®¢ã€æå®¢ã€ç¨‹åºå‘˜ç­‰æŠ€æœ¯é«˜æ‰‹åœ¨å¼€æºç¤¾åŒºçš„å¤§æ——ä¸‹çš„å…¬å…±æ™ºæ…§ç»“æ™¶ï¼Œè‡ªå·±çš„åŠ³åŠ¨æˆæœè¢«å…¶ä»–å…¬å¸å•†ä¸šåŒ–è‡ªç„¶ä¹Ÿä¼¤äº†ä¸€å¤§æ‰¹å¼€æºå·¥ä½œè€…çš„å¿ƒï¼Œå› æ­¤ç”±Mysqlé¡¹ç›®åˆ›å§‹è€…é‡æ–°ç ”å‘äº†ä¸€æ¬¾åä¸ºMariaDBçš„å…¨æ–°æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œè¿™æ¬¾è½¯ä»¶å½“å‰æ˜¯ç”±å¼€æºç¤¾åŒºç»´æŠ¤çš„åˆ†æ”¯äº§å“ï¼Œå‡ ä¹å®Œå…¨å…¼å®¹Mysqlæ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚åŒæ—¶ç”±äºå„å¤§å…¬å¸ä¹‹é—´ä¹Ÿå­˜åœ¨ç€ç«äº‰å…³ç³»æˆ–åˆ©ç›Šå…³ç³»ï¼Œå› æ­¤åœ¨Mysqlè½¯ä»¶è¢«æ”¶è´­åé€æ¸ä»å¼€æºé™·å…¥å°é—­çš„è¿‡ç¨‹ä¸­ï¼Œå·²ç»æœ‰ç±»ä¼¼äºè°·æ­Œå…¬å¸ã€ç»´åŸºç™¾ç§‘å…¬å¸ç­‰ç­‰æŠ€æœ¯é¢†è¢–å†³å®šè½¬ç§»Mysqlæ•°æ®åº“çš„ä¸šåŠ¡åˆ°MariaDBæ•°æ®åº“ï¼ŒLinuxå¼€æºç³»ç»Ÿçš„é¢†è¢–å‚å•†çº¢å¸½ å…¬å¸ä¹Ÿå·²ç»å†³å®šæŠŠRHEL7ç³»ç»Ÿã€Centos7ç³»ç»Ÿä»¥åŠæœ€æ–°Fedoraç³»ç»Ÿçš„å…¨çº¿äº§å“çš„é»˜è®¤æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå®šä¸ºmariadbï¼Œéšåè¿˜æœ‰å¤§é‡å¦‚Opensuseã€Slackwareç­‰ç­‰æ•°åä¸ªå¸¸è§Linuxç³»ç»Ÿåšå‡ºäº†åŒæ ·çš„è¡¨æ€ã€‚</p>
<p>ä½†å¦ç™½è®²ï¼Œè™½ç„¶è°·æ­Œã€ç»´åŸºç™¾ç§‘åŠçº¢å¸½å…¬å¸è¿™æ ·çš„è¡Œä¸šå·¨å¤´éƒ½å·²ç»å†³å®šé‡‡ç”¨äº†æœ€æ–°çš„MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å°±æ¯”Mysqlæœ‰æ˜æ˜¾çš„ä¼˜åŠ¿äº†ï¼Œåˆ˜é„è€å¸ˆç”¨äº†å°†è¿‘ä¸¤å‘¨çš„æ—¶é—´äº²æµ‹äº†MariaDBä¸Mysqlçš„åŒºåˆ«ï¼Œå¹¶è¿›è¡Œäº†å¤šé¡¹æ€§èƒ½æµ‹è¯•ï¼Œè®¤ä¸ºå…¶å®å¹¶æ²¡æœ‰åƒåª’ä½“è¯´çš„é‚£æ ·æœ‰äº†æ˜æ˜¾ä¼˜åŠ¿ã€‚åœ¨æ€§èƒ½ä¸ŠMariaDBä¸MysqlåŸºæœ¬æ˜¯ä¿æŒä¸€è‡´çš„ï¼Œè€Œæ“ä½œå‘½ä»¤ä¸Šæ›´æ˜¯ååˆ†ç›¸ä¼¼ï¼Œä¸å¤¸å¼ çš„è¯´ï¼Œå½“å’±ä»¬å­¦ä¼šäº†MariaDBæ•°æ®åº“çš„å‘½ä»¤åï¼Œåœ¨ä»Šåçš„å·¥ä½œä¸­é‡åˆ°é‡åˆ°äº†Mysqlæ•°æ®åº“ä¹Ÿèƒ½å¤Ÿè½»æ¾ä¸Šæ‰‹ã€‚</p>
<h4 id="åˆå§‹åŒ–mariaDBæœåŠ¡"><a href="#åˆå§‹åŒ–mariaDBæœåŠ¡" class="headerlink" title="åˆå§‹åŒ–mariaDBæœåŠ¡"></a>åˆå§‹åŒ–mariaDBæœåŠ¡</h4><p>MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿç›¸æ¯”äºMysqlæ•°æ®åº“ç®¡ç†ç³»ç»Ÿæœ‰äº†å¾ˆå¤šæ–°é²œçš„æ‰©å±•ç‰¹æ€§ï¼Œä¾‹å¦‚å¯¹å¾®ç§’çº§åˆ«çš„æ”¯æŒã€çº¿ç¨‹æ± ã€å­æŸ¥è¯¢ä¼˜åŒ–ã€è¿›ç¨‹æŠ¥å‘Šç­‰ç­‰æŠ€æœ¯ï¼Œå†³å®šå­¦ä¹ MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿç»å¯¹æ˜¯ä¸€ä¸ªéå¸¸æ­£ç¡®çš„é€‰æ‹©ã€‚å®‰è£…éƒ¨ç½²MariaDBæ•°æ®åº“ä¸»ç¨‹åºåŠæœåŠ¡ç«¯ç¨‹åºå¹¶åŠ å…¥åˆ°å¼€æœºå¯åŠ¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mariadb mariadb-server</span><br></pre></td></tr></table></figure>
<p>ç¡®è®¤MariaDBæ•°æ®åº“è½¯ä»¶ç¨‹åºå®‰è£…å®Œæ¯•å¹¶å¯åŠ¨æˆåŠŸåè¯·ä¸è¦ç«‹å³ä½¿ç”¨ï¼Œä¸ºäº†ç¡®ä¿æ•°æ®åº“çš„å®‰å…¨æ€§å’Œæ­£å¸¸è¿è½¬ï¼Œå’±ä»¬éœ€è¦å…ˆè¿›è¡Œå¯¹æ•°æ®åº“ç¨‹åºåˆå§‹åŒ–æ“ä½œã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦ç»å†äº”ä¸ªæ­¥éª¤ï¼Œé¦–å…ˆéœ€è¦è®©ç”¨æˆ·æ¥è®¾ç½®rootç”¨æˆ·åœ¨æ•°æ®åº“ä¸­çš„å¯†ç å€¼ï¼Œä½†éœ€è¦æ³¨æ„è¯¥å¯†ç å¹¶érootç®¡ç†å‘˜ç”¨æˆ·åœ¨ç³»ç»Ÿä¸­çš„å¯†ç ï¼Œå› æ­¤é»˜è®¤å¯†ç å€¼åº”è¯¥ä¸ºç©ºï¼Œç›´æ¥å›è½¦å³å¯ã€‚ç„¶åè®¾ç½®rootç”¨æˆ·åœ¨æ•°æ®åº“ä¸­çš„ä¸“æœ‰å¯†ç ï¼Œç„¶åæ˜¯ä¸€æ¬¡åˆ é™¤åŒ¿åå¸æˆ·ä»¥åŠè¿›è¡Œrootç®¡ç†å‘˜å¸æˆ·ä»è¿œç¨‹ç™»é™†æ•°æ®åº“ï¼Œè¿™æ ·åšèƒ½å¤Ÿå¾ˆæœ‰æ•ˆçš„ä¿è¯æ•°æ®åº“ä¸Šè¿è¡Œä¸šåŠ¡çš„å®‰å…¨æ€§ï¼Œç„¶åæ˜¯åˆ é™¤é»˜è®¤çš„æµ‹è¯•æ•°æ®åº“ï¼Œå¹¶å–æ¶ˆå¯¹å…¶æµ‹è¯•æ•°æ®åº“çš„ä¸€ç³»åˆ—è®¿é—®æƒé™ï¼Œæœ€åæ˜¯åˆ·æ–°æˆæƒè¡¨ï¼Œè®©åˆå§‹åŒ–çš„è®¾å®šç«‹å³ç”Ÿæ•ˆã€‚å¯¹äºä¸Šé¢æ‰€è°ˆåˆ°çš„æ•°æ®åº“åˆå§‹åŒ–æ­¥éª¤ï¼Œåˆ˜é„è€å¸ˆå·²ç»åœ¨ä¸‹é¢è¾“å‡ºä¿¡æ¯æ—è¾¹åˆè¿›è¡Œäº†ç®€å•æ³¨é‡Šï¼ŒåŒå­¦ä»¬å¯ä»¥æ›´ç›´è§‚çš„æ˜ç™½è¦è¾“å…¥çš„å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Enter current password for root (enter for none): å½“å‰æ•°æ®åº“å¯†ç ä¸ºç©ºï¼Œç›´æ¥æ•²å‡»å›è½¦ã€‚</span><br><span class="line"></span><br><span class="line">root user without the proper authorisation.</span><br><span class="line">Set root password? [Y/n] y</span><br><span class="line"></span><br><span class="line">New password: è¾“å…¥è¦ä¸ºrootç”¨æˆ·è®¾ç½®çš„æ•°æ®åº“å¯†ç ã€‚</span><br><span class="line">Re-enter new password: é‡å¤å†è¾“å…¥ä¸€æ¬¡å¯†ç ã€‚</span><br><span class="line"></span><br><span class="line">Remove anonymous users? [Y/n] yï¼ˆåˆ é™¤åŒ¿åå¸å·ï¼‰</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? [Y/n] y(ç¦æ­¢rootç”¨æˆ·ä»è¿œç¨‹ç™»å½•)</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? [Y/n] y(åˆ é™¤testæ•°æ®åº“å¹¶å–æ¶ˆå¯¹å…¶çš„è®¿é—®æƒé™)</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n] y(åˆ·æ–°æˆæƒè¡¨ï¼Œè®©åˆå§‹åŒ–åçš„è®¾å®šç«‹å³ç”Ÿæ•ˆ)</span><br></pre></td></tr></table></figure>
<p>å¾ˆå¤šç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦ä½¿ç”¨ç«™åº“åˆ†ç¦»çš„æŠ€æœ¯ï¼Œå› æ­¤å¦‚æœåŒå­¦ä»¬éœ€è¦è®©rootç®¡ç†å‘˜å¸æˆ·èƒ½å¤Ÿç”¨è¿œç¨‹è®¿é—®æ•°æ®åº“æ—¶ï¼Œå¯åœ¨åˆšåˆšåˆå§‹åŒ–è¿‡ç¨‹ä¸­è®¾ç½®å…è®¸rootç®¡ç†å‘˜å¸æˆ·ä»è¿œç¨‹è®¿é—®çš„ç­–ç•¥ï¼Œç„¶åå†è®¾ç½®é˜²ç«å¢™å…è®¸å¯¹æœ¬æœºmysqlæœåŠ¡ç¨‹åºçš„è®¿é—®è¯·æ±‚å³å¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-service=mysql</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<p>ä¸€åˆ‡å°±ç»ª!~å¿«æ¥å°è¯•åˆæ¬¡ç™»é™†åˆ°æ‚¨çš„MariaDBæ•°æ®åº“ä¸­å§ï¼Œåˆ†åˆ«ç”¨-uå‚æ•°æ¥æŒ‡å®šç”¨è¶…çº§ç®¡ç†å‘˜rootç”¨æˆ·æ¥ç™»é™†ï¼Œè€Œ-på‚æ•°ä½œç”¨æ˜¯éªŒè¯è¯¥ç”¨æˆ·çš„å¯†ç å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<p>åŒå­¦ä»¬æœ€ä¸ä¹ æƒ¯çš„åœ°æ–¹ä¸€å®šæ˜¯æ¯æ¬¡æ‰§è¡Œæ•°æ®åº“å‘½ä»¤åéƒ½è¦ç”¨;ï¼ˆåˆ†å·ï¼‰ç»“å°¾ï¼Œè¿™åº”è¯¥ä¹Ÿæ˜¯ä¸Linuxå‘½ä»¤æœ€æ˜¾è‘—çš„åŒºåˆ«çš„ï¼Œæ¯æ¡æ•°æ®åº“å‘½ä»¤åé¢éƒ½è¦åŠ ä¸Šç»“æŸç¬¦ï¼Œä¸€å®šè¦è®°ä½å¹¶ä¸”æ…¢æ…¢ä¹ æƒ¯è¿™ç§è®¾å®šå“¦~ä¾‹å¦‚å¯ä»¥å°è¯•æŸ¥çœ‹ä¸‹å½“å‰æ•°æ®åº“ç®¡ç†ç³»ç»Ÿéƒ½æœ‰é‚£äº›æ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>
<p>å°è¯•ç‰›åˆ€åæ„Ÿè§‰å¦‚ä½•å‘¢ï¼Ÿæ¥ä¸‹æ¥ç”¨æ•°æ®åº“å‘½ä»¤ä¿®æ”¹ä¸‹è¶…çº§ç®¡ç†å‘˜rootç”¨æˆ·åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­çš„å¯†ç å€¼ä¸ºlinuxprobeå§ï¼Œè¿™æ ·é€€å‡ºåå†å°è¯•ç™»é™†ï¼Œå°±ä¼šè¢«æç¤ºè®¿é—®å¤±è´¥å•¦~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set password = password(&apos;linuxprobe&apos;)</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<h4 id="ç®¡ç†ç”¨æˆ·ä»¥åŠæˆæƒ"><a href="#ç®¡ç†ç”¨æˆ·ä»¥åŠæˆæƒ" class="headerlink" title="ç®¡ç†ç”¨æˆ·ä»¥åŠæˆæƒ"></a>ç®¡ç†ç”¨æˆ·ä»¥åŠæˆæƒ</h4><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ€»ä¸èƒ½ä¸€ç›´â€œæ­»å•ƒâ€rootç®¡ç†å‘˜å¸æˆ·å§~ä¸ºäº†ä¿è¯æ•°æ®åº“ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œä»¥åŠè®©å…¶ä»–å·¥ç¨‹å¸ˆäººå‘˜ååŒç®¡ç†æ•°æ®åº“å†…å®¹ï¼Œå’±ä»¬å¯ä»¥åœ¨MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ä¸ºä»–ä»¬åˆ›å»ºå‡ºå¤šä¸ªæ•°æ®åº“ä¸“ç”¨çš„å¸æˆ·ï¼Œç„¶åå†è¿›è¡Œåˆç†çš„æƒé™åˆ†é…ï¼Œè¿™æ ·è¿˜ä¸€å®šèƒ½å¤§å¤§çš„æå‡å·¥ä½œæ•ˆç‡å‘¢ã€‚ç™»é™†æ•°æ®åº“ç®¡ç†ç³»ç»Ÿåä¾¿å¯ä»¥æŒ‰ç…§CREATE USER ç”¨æˆ·å@ä¸»æœºå IDENTIFIED BY â€˜å¯†ç â€™;çš„æ ¼å¼æ¥åˆ›å»ºå‡ºæ•°æ®åº“ä¸“ç”¨å¸å·ä¿¡æ¯ï¼ŒåŒå­¦ä»¬ä¸€å®šè¦åˆ‡è®°æ¯æ¡æ•°æ®åº“å‘½ä»¤åé¢è¿˜æœ‰ä¸ªä¸èƒ½çœç•¥çš„;ï¼ˆåˆ†å·ï¼‰å‘¦~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user luke@localhost IDENTIFIED BY &apos;linuxprobe&apos;;</span><br></pre></td></tr></table></figure>
<p>å¸æˆ·ä¿¡æ¯å¯ä»¥ä½¿ç”¨selectå‘½ä»¤è¯­å¥æ¥è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸‹é¢ä»£ç æŸ¥è¯¢çš„æ˜¯è¯¥ç”¨æˆ·çš„ä¸»æœºåç§°ã€å¸æˆ·åç§°ä»¥åŠç»è¿‡åŠ å¯†çš„å¯†ç å€¼ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mysql</span><br><span class="line">select host,user,password from user where user=&quot;luke&quot;;</span><br></pre></td></tr></table></figure>
<p>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­çš„å‘½ä»¤ä¸€èˆ¬æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ¯”å¦‚ç»™ç”¨æˆ·è¿›è¡Œæˆæƒè€Œä½¿ç”¨çš„grantå‘½ä»¤å§ï¼Œå®ƒå°±è¦æ±‚åœ¨ä½¿ç”¨æ—¶éœ€è¦å†™ä¸Šè¦èµ‹äºˆçš„æƒé™ï¼Œæ•°æ®åº“åŠè¡¨å•åç§°ï¼Œä»¥åŠå¯¹åº”çš„ç”¨æˆ·åŠä¸»æœºä¿¡æ¯ï¼Œä½†å®é™…åªè¦ä¸€æ—¦ç†è§£äº†æ¯ä¸ªå­—æ®µçš„åŠŸèƒ½å«ä¹‰ï¼Œå…¶å®å‘½ä»¤å¤æ‚ä¸€äº›ä¹Ÿä¸éš¾æ‡‚ï¼ŒGRANTæˆæƒå‘½ä»¤çš„å¸¸è§æ ¼å¼å¦‚ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>GRANT æƒé™ ON æ•°æ®åº“.è¡¨å•åç§° TO ç”¨æˆ·å@ä¸»æœºå</td>
<td>å¯¹æŸä¸ªç‰¹å®šæ•°æ®åº“ä¸­çš„ç‰¹å®šè¡¨å•ç»™äºˆæˆæƒã€‚</td>
</tr>
<tr>
<td>GRANT æƒé™ ON æ•°æ®åº“.* TO ç”¨æˆ·å@ä¸»æœºå</td>
<td>å¯¹æŸä¸ªç‰¹å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å•ç»™äºˆæˆæƒã€‚</td>
</tr>
<tr>
<td>GRANT æƒé™ ON <em>.</em> TO ç”¨æˆ·å@ä¸»æœºå</td>
<td>å¯¹æ‰€æœ‰æ•°æ®åº“åŠæ‰€æœ‰è¡¨å•ç»™äºˆæˆæƒã€‚</td>
</tr>
<tr>
<td>GRANT æƒé™1,æƒé™2 ON æ•°æ®åº“.* TO ç”¨æˆ·å@ä¸»æœºå</td>
<td>å¯¹æŸä¸ªæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å•ç»™äºˆå¤šä¸ªæˆæƒã€‚</td>
</tr>
<tr>
<td>GRANT ALL PRIVILEGES ON <em>.</em> TO ç”¨æˆ·å@ä¸»æœºå</td>
<td>å¯¹æ‰€æœ‰æ•°æ®åº“åŠæ‰€æœ‰è¡¨å•ç»™äºˆå…¨éƒ¨æˆæƒï¼Œï¼ˆè°¨æ…æ“ä½œï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<p>æ™®é€šç”¨æˆ·å½“ç„¶ä¸èƒ½å¤Ÿéšä¾¿ç»™è‡ªå·±æˆæƒå•¦ï¼Œå°±åƒç»™æ¯ä½å…¬æ°‘éƒ½èµ é€äº†ä¸€å°å°é’æœºï¼Œé‚£äººä»¬è‚¯å®šå°±ä¸ä¼šå†ç»§ç»­è¸å®å·¥ä½œäº†ï¼Œäººç±»ç¤¾ä¼šåä½œå…³ç³»ä¹Ÿå°±ä¼šç¬é—´å´©å¡Œå•¦ã€‚æ‰€ä»¥åœ¨åšè¿™ç§é«˜çº§æ“ä½œå‰éœ€è¦å…ˆç™»é™†åˆ°rootç®¡ç†å‘˜å¸æˆ·èº«ä»½ä¸Šæ¥ï¼Œç„¶åå†è¿›è¡Œæˆæƒæ“ä½œï¼Œç»™äºˆlukeç”¨æˆ·å¯¹mysqlæ•°æ®åº“ä¸­userè¡¨å•çš„æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤åŠæ’å…¥æƒé™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">GRANT SELECT,UPDATE,DELETE,INSERT on mysql.user to luke@localhost;</span><br></pre></td></tr></table></figure>
<p>æˆæƒæ“ä½œæ‰§è¡Œåæ¥æŸ¥çœ‹ä¸‹lukeç”¨æˆ·çš„æƒé™å§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show grants for luke@localhost;</span><br></pre></td></tr></table></figure>
<p>å–æ¶ˆlukeç”¨æˆ·å¯¹mysqlæ•°æ®åº“ä¸­userè¡¨å•çš„æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤åŠæ’å…¥æƒé™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">revoke SELECT,UPDATE,DELETE,INSERT on mysql.user from luke@localhost;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºæ•°æ®åº“ä¸è¡¨å•"><a href="#åˆ›å»ºæ•°æ®åº“ä¸è¡¨å•" class="headerlink" title="åˆ›å»ºæ•°æ®åº“ä¸è¡¨å•"></a>åˆ›å»ºæ•°æ®åº“ä¸è¡¨å•</h4><p>MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿæœ€é‡è¦çš„ä½œç”¨ä¹‹ä¸€å°±æ˜¯èƒ½å¤Ÿç®¡ç†æ•°æ®åº“åŠè¡¨å•å†…å®¹ï¼Œä¸€ä¸ªæ•°æ®åº“ä¸­å¯ä»¥å­˜æ”¾å¤šä¸ªæ•°æ®è¡¨ï¼Œæ•°æ®è¡¨æ˜¯æ•°æ®åº“ä¸­æœ€å®è´¨çš„å†…å®¹ï¼Œå’±ä»¬å¯ä»¥å®šä¹‰ç‹¬ä¸€æ— äºŒçš„æ•°æ®åº“è¡¨ç»“æ„ï¼Œç„¶ååˆç†çš„å­˜æ”¾æ•°æ®å†…å®¹ï¼Œè¿™æ ·åœ¨ä»Šåçš„ç»´æŠ¤ã€ä¿®æ”¹æ—¶éƒ½ä¼šä½“éªŒåˆ°ååˆ†ä¾¿æ·ã€‚</p>
<p>æ•°æ®åº“å‘½ä»¤åŠå¯¹åº”çš„ä½œç”¨æ€»ç»“</p>
<table>
<thead>
<tr>
<th>ç”¨æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>CREATE database æ•°æ®åº“åç§°</td>
<td>åˆ›å»ºæ–°çš„æ•°æ®åº“ã€‚</td>
</tr>
<tr>
<td>DESCRIBE è¡¨å•åç§°;</td>
<td>æè¿°è¡¨å•ã€‚</td>
</tr>
<tr>
<td>UPDATE è¡¨å•åç§° SET attribute=æ–°å€¼ WHERE attribute &gt; åŸå§‹å€¼;</td>
<td>æ›´æ–°è¡¨å•ä¸­çš„æ•°æ®ã€‚</td>
</tr>
<tr>
<td>USE æ•°æ®åº“åç§°;</td>
<td>æŒ‡å®šä½¿ç”¨çš„æ•°æ®åº“ã€‚</td>
</tr>
<tr>
<td>SHOW databases;</td>
<td>æ˜¾ç¤ºå½“å‰å·²æœ‰çš„æ•°æ®åº“ã€‚</td>
</tr>
<tr>
<td>SHOW tables;</td>
<td>æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„è¡¨å•ã€‚</td>
</tr>
<tr>
<td>SELECT * FROM è¡¨å•åç§°;</td>
<td>ä»è¡¨å•ä¸­é€‰ä¸­æŸä¸ªè®°å½•å€¼ã€‚</td>
</tr>
<tr>
<td>DELETE FROM è¡¨å•å WHERE attribute=å€¼;</td>
<td>ä»è¡¨å•ä¸­åˆ é™¤æŸä¸ªè®°å½•å€¼ã€‚</td>
</tr>
</tbody>
</table>
<p>æƒ³åˆ›å»ºæ•°æ®è¡¨å•ï¼Œå°±è¦å…ˆåˆ‡æ¢åˆ°æŸä¸ªæŒ‡å®šçš„æ•°æ®åº“ä¸­ï¼Œä¾‹å¦‚å¯ä»¥åœ¨æ–°å»ºçš„linuxprobeæ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªå«åšmybookçš„è¡¨å•ã€‚è¡¨å•åˆå§‹åŒ–å³éœ€è¦å®šä¹‰å­˜å‚¨æ•°æ®å†…å®¹çš„ç»“æ„ï¼Œå’±ä»¬åˆ†åˆ«å®šä¹‰ä¸‰ä¸ªå­—æ®µé¡¹ï¼Œèƒ½å¤Ÿå­˜å‚¨15ä¸ªå­—ç¬¦çš„nameå­—æ®µæ˜¯ç”¨æ¥ä¿å­˜ä¹¦ç±åç§°çš„ï¼Œè€Œæ•´æ•°ç±»å‹çš„priceä¸pagesåˆ™åˆ†åˆ«æ˜¯ä¸€ä¼šå­˜å‚¨ä¹¦ç±ä»·æ ¼å’Œé¡µæ•°ç”¨çš„~è¿™æ ·å½“åˆ›å»ºå‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œå³å¯çœ‹åˆ°è¡¨å•çš„ç»“æ„ä¿¡æ¯å•¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create database linuxprobe;</span><br><span class="line">use linuxprobe;</span><br><span class="line">create table mybook (name char(15),price int,pages int);</span><br><span class="line">describe mybook;</span><br></pre></td></tr></table></figure>
<h4 id="ç®¡ç†è¡¨å•åŠæ•°æ®"><a href="#ç®¡ç†è¡¨å•åŠæ•°æ®" class="headerlink" title="ç®¡ç†è¡¨å•åŠæ•°æ®"></a>ç®¡ç†è¡¨å•åŠæ•°æ®</h4><p>æ¥ä¸‹æ¥å‘åˆšåˆšåˆ›å»ºçš„mybookæ•°æ®åº“è¡¨å•å†™å…¥ä¸€æ¡ä¹¦ç±ä¿¡æ¯ï¼Œæ’å…¥æ•°æ®åº“å†…å®¹è¦ä½¿ç”¨insertå‘½ä»¤ï¼Œå†™æ¸…è¡¨å•åç§°ä»¥åŠå¯¹åº”çš„å­—æ®µé¡¹ç›®ï¼Œå°±å¯ä»¥æ’å…¥ä¸€æ¡åç§°å«åšlinuxprobeçš„ä¹¦ç±å•¦ï¼Œå®ƒçš„ä»·æ ¼å’Œé¡µæ•°åˆ†åˆ«æ˜¯60å…ƒå’Œ518é¡µã€‚å‘½ä»¤æ‰§è¡Œåä¹Ÿå°±æ„å‘³ç€ä¹¦ç±ä¿¡æ¯å·²ç»è¢«å†™å…¥æˆåŠŸäº†ï¼Œå’±ä»¬ä¾¿å¯ä»¥æ¥æŸ¥è¯¢è¡¨å•ä¸­çš„å†…å®¹å•¦ï¼Œä½¿ç”¨selectå‘½ä»¤æŸ¥è¯¢è¡¨å•å†…å®¹çš„æ—¶å€™éœ€è¦åŠ ä¸Šæƒ³è¦æŸ¥è¯¢çš„å­—æ®µï¼Œå¦‚æœæƒ³æŸ¥çœ‹è¡¨å•ä¸­çš„æ‰€æœ‰å†…å®¹ä¹Ÿå¯ä»¥å¹²è„†ä½¿ç”¨*ï¼ˆæ˜Ÿå·ï¼‰é€šé…ç¬¦æ¥æ˜¾ç¤ºæ‰€æœ‰å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO mybook(name,price,pages) VALUES(&apos;linuxprobe&apos;,&apos;60&apos;,&apos;518&apos;);</span><br><span class="line">select * from mybook;</span><br></pre></td></tr></table></figure>
<p>æ•°æ®åº“è¿ç»´äººå‘˜è®²ç©¶å››é—¨åŠŸè¯¾â€”â€”å¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œè¿™æ„å‘³ç€åˆ›å»ºå’Œæ’å…¥æ•°æ®åº“è¡¨å•å†…å®¹ä»…ä»…æ˜¯ç¬¬ä¸€æ­¥ï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥å­¦ä¹ æ•°æ®åº“è¡¨å†…å®¹çš„ä¿®æ”¹æ–¹æ³•ï¼Œä¾‹å¦‚å’±ä»¬å¯ä»¥ç”¨updateå‘½ä»¤æŠŠåˆšåˆšæ’å…¥çš„ä¹¦ç±ä»·æ ¼ä¿®æ”¹ä¸º55å…ƒï¼Œç„¶åå†ç”¨selectå‘½ä»¤æŒ‡å®šæŸ¥çœ‹ä¸‹ä¹¦ç±çš„åç§°å’Œä»·æ ¼ä¿¡æ¯ï¼Œä¸è¦å†ç”¨*ï¼ˆæ˜Ÿå·ï¼‰é€šé…ç¬¦æ˜¾ç¤ºæ‰€æœ‰å†…å®¹å•¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update mybook set price=55 ;</span><br><span class="line">select name,price from mybook;</span><br></pre></td></tr></table></figure>
<p>åŒå­¦ä»¬è¿˜å¯ä»¥ç”¨deleteå‘½ä»¤æ¥åˆ é™¤æŸä¸ªè¡¨å•ä¸­çš„å†…å®¹ï¼Œä¾‹å¦‚å¯ä»¥æ¸…ç©ºåˆ é™¤mybookè¡¨å•ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œè¿™æ ·å†æ¥æŸ¥è¯¢çš„è¯ä¹Ÿçœ‹ä¸åˆ°ä¹¦ç±ä¿¡æ¯å•¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from mybook;</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æ•°æ®åº“è¡¨å•ä¸­éƒ½ä¼šæœ‰æˆåƒä¸Šä¸‡æ¡çš„æ•°æ®æ¡ç›®ï¼Œä¾‹å¦‚åˆšåˆšåˆ›å»ºç”¨äºä¿å­˜ä¹¦ç±ä¿¡æ¯çš„mybookè¡¨å•ï¼Œå¦‚æœç»è¿‡æ—¶é—´çš„æ¨ç§»é‡Œé¢çš„ä¹¦ç±ä¿¡æ¯ä¹Ÿä¼šå˜å¾—è¶Šæ¥è¶Šå¤šï¼Œé‚£ä¹ˆå¦‚æœåªæ˜¯æƒ³æŸ¥çœ‹å”®å–ä»·æ ¼å¤§äºæŸä¸ªä»·æ ¼çš„ä¹¦ç±æ—¶åˆè¯¥å¦‚ä½•å®šä¹‰æŸ¥è¯¢è¯­å¥å‘¢ï¼Ÿå’±ä»¬å…ˆä½¿ç”¨åˆšåˆšå­¦ä¹ è¿‡çš„insertæ’å…¥å‘½ä»¤æ¥ä¾æ¬¡æ’å…¥4æ¡ä¹¦ç±ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO mybook(name,price,pages) VALUES(&apos;linuxprobe1&apos;,&apos;30&apos;,&apos;518&apos;);</span><br><span class="line"></span><br><span class="line">INSERT INTO mybook(name,price,pages) VALUES(&apos;linuxprobe2&apos;,&apos;50&apos;,&apos;518&apos;);</span><br><span class="line"></span><br><span class="line">INSERT INTO mybook(name,price,pages) VALUES(&apos;linuxprobe3&apos;,&apos;80&apos;,&apos;518);</span><br><span class="line"></span><br><span class="line">INSERT INTO mybook(name,price,pages) VALUES(&apos;linuxprobe4&apos;,&apos;100&apos;,&apos;518&apos;);</span><br></pre></td></tr></table></figure>
<p>è¦æƒ³è®©æŸ¥è¯¢ç»“æœæ›´åŠ ç²¾å‡†ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠselectç»“åˆwhereå‘½ä»¤æ¥ä¸€èµ·ä½¿ç”¨äº†ï¼Œwhereæ˜¯ç”¨äºåœ¨æ•°æ®åº“ä¸­è¿›è¡ŒåŒ¹é…æŸ¥è¯¢çš„æ¡ä»¶å‘½ä»¤ï¼Œå’±ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªæŸ¥è¯¢çš„æ¡ä»¶ï¼Œé‚£ä¹ˆå°±ä»…ä¼šæŸ¥æ‰¾å‡ºç¬¦åˆè¯¥æ¡ä»¶çš„æ•°æ®å†…å®¹ï¼Œå¸¸ç”¨çš„å‚æ•°åŒ…æ‹¬æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>ç›¸ç­‰ã€‚</td>
</tr>
<tr>
<td>&lt;&gt;æˆ–!=</td>
<td>ä¸ç›¸ç­‰ã€‚</td>
</tr>
<tr>
<td>&gt;</td>
<td>å¤§äºã€‚</td>
</tr>
<tr>
<td>&lt;</td>
<td>å°äºã€‚</td>
</tr>
<tr>
<td>&gt;=</td>
<td>å¤§äºæˆ–ç­‰äºã€‚</td>
</tr>
<tr>
<td>&lt;=</td>
<td>å°äºæˆ–ç­‰äºã€‚</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>åœ¨æŸä¸ªèŒƒå›´å†…ã€‚</td>
</tr>
<tr>
<td>LIKE</td>
<td>æœç´¢ä¸€ä¸ªä¾‹å­ã€‚</td>
</tr>
<tr>
<td>IN</td>
<td>åœ¨åˆ—ä¸­æœç´¢å¤šä¸ªå€¼ã€‚</td>
</tr>
</tbody>
</table>
<p>åˆ†åˆ«åœ¨mybookè¡¨å•ä¸­æŸ¥æ‰¾å‡ºä»·æ ¼å¤§äº75å…ƒæˆ–ä»·æ ¼ä¸ç­‰äº80å…ƒçš„ä¹¦ç±ï¼Œè¿™ä¸¤ä¸ªæŸ¥è¯¢æ¡ä»¶ç»ƒç†Ÿä¹‹åè¿˜å¯ä»¥å†è‡ªå·±è¯•è¯•æŒ‘æˆ˜ä¸‹ç²¾å‡†æŸ¥è¯¢åç§°ä¸ºlinuxprobe2çš„ä¹¦ç±ä¿¡æ¯å§~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from mybook where price&gt;75;</span><br><span class="line">select * from mybook where price!=80;</span><br></pre></td></tr></table></figure>
<h4 id="æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤"><a href="#æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤" class="headerlink" title="æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤"></a>æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤</h4><p>ç”±äºå’±ä»¬çš„æŠ€æœ¯ä¸»çº¿æ˜¯æˆä¸ºLinuxç³»ç»Ÿè¿ç»´å·¥ç¨‹å¸ˆï¼Œå› æ­¤åœ¨å­¦å®Œä¸Šé¢è¿™äº›æ•°æ®åº“ç®¡ç†å‘½ä»¤åèƒ½å¤Ÿå¯¹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæœ‰ä¸€å®šçš„äº†è§£å°±å·²ç»è¶³å¤Ÿäº†ï¼Œå¦å¤–æ•°æ®åº“çš„å¤‡ä»½åŠæ¢å¤ä¹Ÿæ˜¯æ¯”è¾ƒå®ç”¨çš„æŠ€æœ¯ã€‚mysqldumpå‘½ä»¤ç”¨äºå¤‡ä»½æ•°æ®åº“æ•°æ®ï¼Œæ ¼å¼ä¸ºï¼šâ€œmysqldump [å‚æ•°] [æ•°æ®åº“åç§°]ï¼Œå…¶ä¸­å‚æ•°ä¸mysqlå‘½ä»¤å¤§è‡´ç›¸åŒï¼Œ-uå‚æ•°ç”¨äºå®šä¹‰ç™»é™†æ•°æ®åº“çš„ç”¨æˆ·åç§°ï¼Œè€Œ-på‚æ•°ä»£è¡¨å¯†ç æç¤ºç¬¦ã€‚ä¾‹å¦‚æ¥ä¸‹æ¥æŠŠlinuxprobeæ•°æ®åº“å†…å®¹å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶ä¿å­˜åˆ°rootç®¡ç†å‘˜ç”¨æˆ·çš„å®¶ç›®å½•ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u root -p linuxprobe &gt; /root/linuxprobeDB.dump</span><br></pre></td></tr></table></figure>
<p>è¿›å…¥åˆ°MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­æŠŠlinuxprobeæ•°æ®åº“å®Œæ•´çš„åˆ é™¤æ‰å†é‡æ–°å»ºç«‹ï¼Œè¿™æ ·mybookæ•°æ®åº“è¡¨å•ä¹Ÿå°†è¢«å½»åº•çš„æ¸…ç©ºæ‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">drop database linuxprobe;</span><br><span class="line">show databases;</span><br><span class="line">create database linuxprobe;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±æ˜¯è§è¯æ•°æ®æ¢å¤æ•ˆæœçš„æ—¶åˆ»å•¦ï¼Œä½¿ç”¨è¾“å…¥é‡å®šå‘ç¬¦æŠŠåˆšåˆšå¤‡ä»½çš„æ•°æ®åº“æ–‡ä»¶å¯¼å…¥åˆ°mysqlå‘½ä»¤ä¸­ï¼Œå‘½ä»¤æ‰§è¡ŒæˆåŠŸåå†ç™»é™†åˆ°MariaDBæ•°æ®åº“ä¸­å°±ä¼šå‘ç°åˆèƒ½çœ‹åˆ°æ•°æ®åº“ä»¥åŠè¡¨å•äº†ï¼Œæ¢å¤æ•°æ®åº“å†…å®¹æˆåŠŸï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p linuxprobe &lt; /root/linuxprobeDB.dump</span><br><span class="line"></span><br><span class="line">mysql -u root -p</span><br><span class="line">use linuxprobe;</span><br><span class="line">show tables;</span><br><span class="line">describe mybook;</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬åå…«èŠ‚è¯¾"><a href="#ç¬¬åå…«èŠ‚è¯¾" class="headerlink" title="ç¬¬åå…«èŠ‚è¯¾"></a>ç¬¬åå…«èŠ‚è¯¾</h2><h3 id="ä½¿ç”¨PXE-Kickstartæ— äººå€¼å®ˆå®‰è£…æœåŠ¡"><a href="#ä½¿ç”¨PXE-Kickstartæ— äººå€¼å®ˆå®‰è£…æœåŠ¡" class="headerlink" title="ä½¿ç”¨PXE+Kickstartæ— äººå€¼å®ˆå®‰è£…æœåŠ¡"></a>ä½¿ç”¨PXE+Kickstartæ— äººå€¼å®ˆå®‰è£…æœåŠ¡</h3><h4 id="æ— äººå€¼å®ˆç³»ç»Ÿ"><a href="#æ— äººå€¼å®ˆç³»ç»Ÿ" class="headerlink" title="æ— äººå€¼å®ˆç³»ç»Ÿ"></a>æ— äººå€¼å®ˆç³»ç»Ÿ</h4><p>è™½ç„¶åˆ˜é„è€å¸ˆåœ¨æœ¬ä¹¦ç±ç¬¬1ç« ä¸­æ•™è¿‡åŒå­¦ä»¬ç”¨å…‰ç›˜é•œåƒæ¥å®‰è£…Linuxç³»ç»Ÿçš„æ–¹æ³•ï¼Œä½†å¦ç™½æ¥è®²ï¼Œå¦‚æœç”Ÿäº§ç¯å¢ƒä¸­æœ‰æ•°ç™¾å°æœåŠ¡å™¨éœ€è¦å®‰è£…ç³»ç»Ÿï¼Œé‚£ä¹ˆè¿™ç§å…‰ç›˜é•œåƒçš„å®‰è£…æ–¹å¼å°±æ˜¾å¾—å®åœ¨æ•ˆç‡å¤ªä½äº†ï¼Œå†µä¸”è¿˜è¦ä¸ºè¿™æ•°ç™¾å°æœåŠ¡å™¨è´­ä¹°æ•°ç™¾å¼ çš„ç³»ç»Ÿå®‰è£…å…‰ç›˜æˆ–Uç›˜ç³»ç»Ÿï¼Œç„¶åè¿˜å¿…é¡»å¯¹æ¯å°ç³»ç»Ÿè®¾ç½®å®‰è£…åˆå§‹åŒ–å‘å¯¼ï¼Œè¿™ç§é‡å¤æ€§æé«˜åˆæ— èŠçš„äº‹æƒ…å¯èƒ½ä¼šç™½ç™½æµªè´¹æ‰å’±ä»¬ä¸€æ•´å¤©çš„æ—¶é—´ï¼Œæ˜¯ä¸æ˜¯æƒ³æƒ³éƒ½è§‰å¾—ç—›è‹¦äº†å‘¢ã€‚</p>
<p>å…¶å®å½“ç”Ÿäº§ç¯å¢ƒä¸­å‡ºç°ä¸Šç™¾å°æœåŠ¡å™¨éœ€è¦å®‰è£…ç³»ç»Ÿçš„æ—¶å€™ï¼Œå¯ä»¥ç”¨PXE+TFTP+VSftp+DHCP+KickstartæœåŠ¡æ¥æ•´åˆéƒ¨ç½²å‡ºä¸€ä¸ªæ— äººå€¼å®ˆå®‰è£…ç³»ç»ŸæœåŠ¡æ¥ã€‚è¿™ç§æ— äººå€¼å®ˆå®‰è£…ç³»ç»ŸæœåŠ¡å¯ä»¥å®ç°è‡ªåŠ¨åŒ–çš„å®Œæˆå¯¹æ•°åå°æœåŠ¡å™¨è‡ªåŠ¨å®‰è£…ç³»ç»Ÿçš„å·¥ä½œï¼Œæœ‰æ•ˆçš„é¿å…äº†è¿ç»´å·¥ä½œäººå‘˜é‡å¤æ€§çš„å·¥ä½œï¼Œè¿›è€Œä¹Ÿå¤§å¤§çš„æé«˜äº†å·¥ä½œæ•ˆç‡ã€‚</p>
<p>PXEé¢„å¯åŠ¨æ‰§è¡Œç¯å¢ƒ(å³Preboot execute environment)æ˜¯ä¸€ç§èƒ½å¤Ÿè®©è®¡ç®—æœºé€šè¿‡ç½‘ç»œå¯åŠ¨çš„å¼•å¯¼æ–¹å¼ï¼Œåªè¦ç½‘å¡æ”¯æŒPXEåè®®å³å¯ä½¿ç”¨ï¼Œç”¨äºåœ¨æ— äººå€¼å®ˆå®‰è£…ç³»ç»ŸæœåŠ¡ä¸­å¼•å¯¼å®¢æˆ·æœºå®‰è£…æœåŠ¡ã€‚Kickstartæ˜¯ä¸€ç§æ— äººå€¼å®ˆçš„å®‰è£…æ–¹å¼ï¼Œå·¥ä½œåŸç†å°±æ˜¯é¢„å…ˆæŠŠåŸæœ¬éœ€è¦è¿ç»´äººå‘˜æ‰‹å·¥å¡«å†™çš„å‚æ•°ä¿å­˜æˆä¸€ä¸ªks.cfgæ–‡ä»¶ï¼Œå½“å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°éœ€è¦å¡«å†™å‚æ•°æ—¶åˆ™è‡ªåŠ¨åŒ¹é…Kickstartç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ‰€ä»¥åªè¦Kickstartæ–‡ä»¶åŒ…å«äº†å®‰è£…è¿‡ç¨‹ä¸­æ‰€æœ‰éœ€è¦äººå·¥å¡«å†™çš„å‚æ•°ï¼Œé‚£ä¹ˆç†è®ºä¸Šæ¥è®²è¿ç»´äººå‘˜å°±å®Œå…¨ä¸éœ€è¦å†è¿›è¡Œæ‰‹å·¥æ“ä½œï¼Œå–ç€å’–å•¡ç­‰å¾…å®‰è£…å®Œæ¯•å³å¯ã€‚</p>
<p>å…¶ä¸­TFTPã€Vsftpdä»¥åŠDHCPæœåŠ¡ç¨‹åºçš„é…ç½®éƒ¨ç½²æ–¹æ³•å’±ä»¬å·²ç»åˆ†åˆ«åœ¨ä¹¦ç±ä¸­çš„ç¬¬11ç« å’Œç¬¬14ç« è¿›è¡Œäº†è¯¦ç»†è®²è§£~ç”±äºå¯¹æ–¹å®¢æˆ·ç«¯ä¸»æœºå½“å‰å¹¶æ²¡æœ‰å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œå› æ­¤ä¹Ÿæ— æ³•è¿›è¡ŒéªŒè¯åŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨TFTPç®€å•æ–‡ä»¶ä¼ è¾“åè®®æ¥å¸®åŠ©å®¢æˆ·ç«¯è·å–åˆ°å¼•å¯¼åŠé©±åŠ¨æ–‡ä»¶ã€‚VsftpdæœåŠ¡ç¨‹åºæ˜¯ç”¨äºä¼ è¾“å®Œæ•´ç³»ç»Ÿå®‰è£…é•œåƒçš„ï¼ŒæŠŠå®‰è£…é•œåƒèµ„æ–™é€šè¿‡ç½‘ç»œä¼ è¾“ç»™å®¢æˆ·æœºï¼Œå½“ç„¶åªè¦æŠŠå®‰è£…é•œåƒä¼ é€è¿‡å»å°±å¯ä»¥ï¼Œå› æ­¤åŒå­¦ä»¬å¯ä»¥ç”¨Httpdæ¥æ›¿ä»£VsftpdæœåŠ¡ç¨‹åºã€‚</p>
<h4 id="éƒ¨ç½²ç›¸å…³æœåŠ¡ç¨‹åº"><a href="#éƒ¨ç½²ç›¸å…³æœåŠ¡ç¨‹åº" class="headerlink" title="éƒ¨ç½²ç›¸å…³æœåŠ¡ç¨‹åº"></a>éƒ¨ç½²ç›¸å…³æœåŠ¡ç¨‹åº</h4><h5 id="é…ç½®DHCPæœåŠ¡ç¨‹åº"><a href="#é…ç½®DHCPæœåŠ¡ç¨‹åº" class="headerlink" title="é…ç½®DHCPæœåŠ¡ç¨‹åº"></a>é…ç½®DHCPæœåŠ¡ç¨‹åº</h5><p>DHCPåŠ¨æ€ä¸»æœºåœ°å€ç®¡ç†æœåŠ¡ç¨‹åºç”¨äºä¸ºå®¢æˆ·ä¸»æœºç½‘å¡åˆ†é…å¯ç”¨çš„IPåœ°å€ï¼Œè¿™æ˜¯æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ä¸»æœºè¿›è¡Œæ–‡ä»¶ä¼ è¾“çš„åŸºç¡€ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªæ¥é…ç½®å§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install dhcp</span><br></pre></td></tr></table></figure>
<p>å’±ä»¬å·²ç»åœ¨å‰é¢ç¬¬14ç« çš„è¯¾ç¨‹ä¸­ç»†è‡´çš„å­¦ä¹ è¿‡äº†DHCPæœåŠ¡ç¨‹åºçš„é…ç½®åŠéƒ¨ç½²æ–¹æ³•ï¼Œå› æ­¤åº”è¯¥å¯¹é…ç½®å‚æ•°è¿˜æœ‰äº›å°è±¡å§ï½å¿˜è®°çš„è¯å¯ä»¥å›å»æŸ¥ä¸€æŸ¥ã€‚è¿™æ¬¡çš„é…ç½®æ–‡ä»¶ä¸å‰é¢å­¦ä¹ æ—¶çš„åŒºåˆ«ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œé¦–å…ˆæ˜¯å…è®¸äº†BOOTPå¼•å¯¼ç¨‹åºåè®®ï¼Œç›®çš„æ˜¯è®©åŒºåŸŸç½‘å†…æš‚æ— ç³»ç»Ÿçš„ä¸»æœºä¹Ÿèƒ½å¤Ÿè·å–åˆ°é™æ€ç½‘å¡IPåœ°å€ï¼Œå…¶æ¬¡æ˜¯åœ¨é…ç½®æ–‡ä»¶çš„æœ€ä¸‹é¢åŠ è½½äº†å«åšpxelinux.0çš„å¼•å¯¼é©±åŠ¨æ–‡ä»¶ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯è®©å®¢æˆ·ç«¯ä¸»æœºç½‘å¡è·å–åˆ°IPåœ°å€åä¸»åŠ¨å»è·å–å¼•å¯¼é©±åŠ¨æ–‡ä»¶ï¼Œè‡ªåŠ¨è¿›è¡Œä¸‹ä¸€æ­¥çš„å®‰è£…è¿‡ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/dhcp/dhcpd.conf</span><br><span class="line">allow booting;</span><br><span class="line">allow bootp;</span><br><span class="line">ddns-update-style interim;</span><br><span class="line">ignore client-updates;</span><br><span class="line">subnet 192.168.10.0 netmask 255.255.255.0 &#123;</span><br><span class="line">        option subnet-mask      255.255.255.0;</span><br><span class="line">        option domain-name-servers  192.168.10.10;</span><br><span class="line">        range dynamic-bootp 192.168.10.100 192.168.10.200;</span><br><span class="line">        default-lease-time      21600;</span><br><span class="line">        max-lease-time          43200;</span><br><span class="line">        next-server             192.168.10.10;</span><br><span class="line">        filename                &quot;pxelinux.0&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¡®è®¤DHCPæœåŠ¡ç¨‹åºå‚æ•°å¡«å†™æ­£ç¡®åå°±å¯ä»¥é‡å¯ä¸€ä¸‹æœåŠ¡ï¼Œå¹¶æŠŠDHCPæœåŠ¡ç¨‹åºæ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹äº†ï½è¿™æ ·ä¸‹ä¸€æ¬¡é‡å¯æœåŠ¡å™¨åä¾ç„¶èƒ½å¤Ÿè‡ªåŠ¨åŒ–çš„ä¸ºå®¢æˆ·ä¸»æœºæ— äººå€¼å®ˆå®‰è£…ç³»ç»Ÿï¼Œä¸€åŠ³æ°¸é€¸ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart dhcpd</span><br><span class="line">systemctl enable dhcpd</span><br></pre></td></tr></table></figure>
<h5 id="é…ç½®TFTPæœåŠ¡ç¨‹åº"><a href="#é…ç½®TFTPæœåŠ¡ç¨‹åº" class="headerlink" title="é…ç½®TFTPæœåŠ¡ç¨‹åº"></a>é…ç½®TFTPæœåŠ¡ç¨‹åº</h5><p>å’±ä»¬åœ¨ç¬¬11ç« çš„è¯¾ç¨‹ä¸­å­¦ä¹ è¿‡vsftpdæœåŠ¡ä¸TFTPæœåŠ¡ï¼Œvsftpdæ˜¯ä¸€æ¬¾åŠŸèƒ½ä¸°å¯Œçš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ç¨‹åºï¼Œéœ€è¦ç”¨æˆ·ä½¿ç”¨åŒ¿åã€æœ¬åœ°ç”šè‡³è™šæ‹Ÿç”¨æˆ·æ¥è¿›è¡Œè®¿é—®éªŒè¯ï¼Œä½†å½“å‰çš„å®¢æˆ·ç«¯ä¸»æœºè¿ç³»ç»Ÿéƒ½æ²¡æœ‰å®‰è£…ï¼Œå¦‚ä½•è¿›è¡Œç™»å½•éªŒè¯å‘¢ï¼Ÿè€ŒTFTPæ˜¯ä¸€ç§åŸºäºUDPåè®®çš„ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼Œç”¨æˆ·ä¸éœ€è¦è¿›è¡ŒéªŒè¯å³å¯è·å–åˆ°æ‰€éœ€çš„æ–‡ä»¶èµ„æºï¼Œå› æ­¤æ¥ä¸‹æ¥é…ç½®TFTPæœåŠ¡ç¨‹åºæ¥ä¸ºç”¨æˆ·æä¾›å¼•å¯¼åŠé©±åŠ¨æ–‡ä»¶å§ï½å½“å®¢æˆ·ç«¯æœ‰äº†åŸºæœ¬çš„é©±åŠ¨ç¨‹åºåå†é€šè¿‡vsftpdæœåŠ¡ç¨‹åºæŠŠå®Œæ•´çš„å…‰ç›˜é•œåƒæ–‡ä»¶ä¼ é€è¿‡å»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install tftp-server</span><br></pre></td></tr></table></figure>
<p>TFTPæ˜¯ä¸€ç§éå¸¸ç²¾ç®€çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ç¨‹åºï¼Œå®ƒçš„è¿è¡Œå’Œå…³é—­æ—¶ç”±xintedç½‘ç»œå®ˆæŠ¤è¿›ç¨‹æœåŠ¡æ¥è¿›è¡Œç»Ÿä¸€ç®¡ç†çš„ï¼Œå¹³æ—¶xinetdæœåŠ¡ç¨‹åºä¼šåŒæ—¶ç›‘å¬å¾ˆå¤šä¸ªç³»ç»Ÿçš„ç«¯å£å·ï¼Œç„¶åæ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ç«¯å£å·æ¥è°ƒå–å¯¹åº”çš„æœåŠ¡ç¨‹åºæ¥å“åº”ç”¨æˆ·çš„è¯·æ±‚ã€‚å¦‚æœå’±ä»¬éœ€è¦å¼€å¯TFTPæœåŠ¡ç¨‹åºçš„è¯ï¼Œå°±æŠŠxinetdæœåŠ¡ç¨‹åºå¯¹åº”çš„é…ç½®æ–‡ä»¶ä¸­disableå‚æ•°æ”¹æˆnoå°±å¯ä»¥äº†ï¼Œæ„æ€æ˜¯ä¸è¦ç¦ç”¨TFTPæœåŠ¡ç¨‹åºï¼Œé‚£ä¹Ÿå°±æ˜¯å¼€å¯å®ƒäº†ã€‚é…ç½®æ–‡ä»¶ä¿®æ”¹å¥½åä¿å­˜é€€å‡ºï¼Œç„¶åè®°å¾—æŠŠxinetdæœåŠ¡ç¨‹åºé‡å¯ä¸€ä¸‹ï¼Œç„¶ååŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼ˆçº¢å¸½RHEL7ç³»ç»Ÿä¸­xinetdæœåŠ¡ç¨‹åºé»˜è®¤å·²ç»å¯ç”¨ï¼Œå› æ­¤æ­¤æ—¶æ‰§è¡Œå‘½ä»¤æ²¡æœ‰è¾“å‡ºä¿¡æ¯æ˜¯æ­£å¸¸æƒ…å†µï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/xinetd.d/tftp</span><br><span class="line">service tftp</span><br><span class="line">&#123;</span><br><span class="line">        socket_type             = dgram</span><br><span class="line">        protocol                = udp</span><br><span class="line">        wait                    = yes</span><br><span class="line">        user                    = root</span><br><span class="line">        server                  = /usr/sbin/in.tftpd</span><br><span class="line">        server_args             = -s /var/lib/tftpboot</span><br><span class="line">        disable                 = no</span><br><span class="line">        per_source              = 11</span><br><span class="line">        cps                     = 100 2</span><br><span class="line">        flags                   = IPv4</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart xinetd</span><br><span class="line">systemctl enable xinetd</span><br></pre></td></tr></table></figure>
<p>TFTPæœåŠ¡ç¨‹åºé»˜è®¤ä¼šå ç”¨æœåŠ¡å™¨udpåè®®çš„69ç«¯å£å·ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿˜è¦è®°å¾—åœ¨firewalldé˜²ç«å¢™ç®¡ç†å·¥å…·ä¸­å†™å…¥ä¸€ä¸‹æ°¸ä¹…ç”Ÿæ•ˆçš„å…è®¸ç­–ç•¥ï¼Œè®©å®¢æˆ·ç«¯ä¸»æœºèƒ½å¤Ÿé¡ºåˆ©çš„è·å–åˆ°å¼•å¯¼æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=69/udp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h5 id="é…ç½®SYSLinuxæœåŠ¡ç¨‹åº"><a href="#é…ç½®SYSLinuxæœåŠ¡ç¨‹åº" class="headerlink" title="é…ç½®SYSLinuxæœåŠ¡ç¨‹åº"></a>é…ç½®SYSLinuxæœåŠ¡ç¨‹åº</h5><p>SYSLinuxæ˜¯ç”¨äºæä¾›å¼•å¯¼åŠ è½½çš„æœåŠ¡ç¨‹åºï¼Œä¸å…¶è¯´SYSLinuxè¯´ä¸€ä¸ªæœåŠ¡ç¨‹åºï¼Œä¸å¦‚è¯´æ›´éœ€è¦é‡Œé¢çš„å¼•å¯¼æ–‡ä»¶ï¼Œå®‰è£…å¥½SYSLinuxæœåŠ¡ç¨‹åºè½¯ä»¶åŒ…åå°±ä¼šåœ¨/usr/share/syslinuxç›®å½•ä¸­å‡ºç°å¾ˆå¤šçš„å¼•å¯¼æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install syslinux</span><br></pre></td></tr></table></figure>
<p>å’±ä»¬éœ€è¦å…ˆæŠŠSYSLinuxæä¾›çš„å¼•å¯¼æ–‡ä»¶å¤åˆ¶åˆ°TFTPæœåŠ¡ç¨‹åºçš„é»˜è®¤ç›®å½•ä¸­ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥åœ¨æ— ç³»ç»Ÿçš„æƒ…å†µä¸‹é¡ºåˆ©çš„è·å–åˆ°å¼•å¯¼æ–‡ä»¶äº†ï¼Œåˆšåˆšæåˆ°çš„pxelinux.0æ–‡ä»¶å°±è¢«æ”¾åˆ°è¿™é‡Œå•¦ï¼ˆè¯·åŒå­¦ä»¬ç¡®è®¤å…‰ç›˜é•œåƒå·²è¢«æŒ‚è½½åˆ°äº†/media/cdromç›®å½•äº†ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /var/lib/tftpboot</span><br><span class="line">cp /usr/share/syslinux/pxelinux.0 .</span><br><span class="line">cp /media/cdrom/images/pxeboot/&#123;vmlinuz,initrd.img&#125; .</span><br><span class="line">cp /media/cdrom/isolinux/&#123;vesamenu.c32,boot.msg&#125; .</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨TFTPæœåŠ¡ç¨‹åºçš„ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªå«åšpxelinux.cfgçš„æ–‡ä»¶å¤¹ï¼Œè™½ç„¶æœ‰åç¼€ï¼Œä½†ä¹Ÿä¾ç„¶æ˜¯ç›®å½•å“¦ï¼Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼ä»ç³»ç»Ÿå…‰ç›˜ä¸­æŠŠå¼€æœºé€‰é¡¹èœå•å¤åˆ¶åˆ°è¿™é‡Œç›®å½•ä¸­å‘½åä¸ºdefaultï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯å¼€æœºæ—¶å€™çš„é€‰é¡¹èœå•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir pxelinux.cfg</span><br><span class="line">cp /media/cdrom/isolinux/isolinux.cfg pxelinux.cfg/default</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤çš„å¼€æœºèœå•ä¸­æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œè¦ä¹ˆå®‰è£…ç³»ç»Ÿã€è¦ä¹ˆå¯¹å®‰è£…ä»‹è´¨è¿›è¡Œæ£€éªŒï¼Œè€Œæ—¢ç„¶å·²ç»ç¡®å®šæ˜¯è¦æ— äººå€¼å®ˆå®‰è£…ç³»ç»Ÿå•¦ï¼Œå¦‚æœæ¯å°ä¸»æœºéƒ½è¦æ‰‹åŠ¨é€‰æ‹©ä¸€ä¸‹çš„è¯ä¹Ÿå¤ªéº»çƒ¦å•¦ã€‚å’±ä»¬å°±æ¥ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶æŠŠç¬¬1è¡Œçš„defaultå‚æ•°ä¿®æ”¹ä¸ºlinuxï¼Œè¿™æ ·çš„è¯ç³»ç»Ÿåœ¨å¼€æœºæ—¶å°±ä¼šé»˜è®¤æ‰§è¡Œé‚£ä¸ªåç§°ä¸ºLinuxçš„é€‰é¡¹å•¦ï¼Œè€Œå¯¹åº”çš„Linuxé€‰é¡¹åœ¨64è¡Œå·¦å³ï¼ŒæŠŠé»˜è®¤çš„å…‰ç›˜é•œåƒå®‰è£…æ–¹å¼ä¿®æ”¹æˆFTPç½‘ç»œæ–‡ä»¶ä¼ è¾“æ–¹å¼ï¼ŒæŒ‡å®šå¥½å…‰ç›˜é•œåƒçš„è·å–ç½‘å€ä»¥åŠksåº”ç­”æ–‡ä»¶çš„è·å–è·¯å¾„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">vim pxelinux.cfg/default</span><br><span class="line">1 default linux</span><br><span class="line"> 2 timeout 600</span><br><span class="line"> 3</span><br><span class="line"> 4 display boot.msg</span><br><span class="line"> 5</span><br><span class="line"> 6 # Clear the screen when exiting the menu, instead of leaving the menu displa yed.</span><br><span class="line"> 7 # For vesamenu, this means the graphical background is still displayed witho ut</span><br><span class="line"> 8 # the menu itself for as long as the screen remains in graphics mode.</span><br><span class="line"> 9 menu clear</span><br><span class="line"> 10 menu background splash.png</span><br><span class="line"> 11 menu title Red Hat Enterprise Linux 7.0</span><br><span class="line"> 12 menu vshift 8</span><br><span class="line"> 13 menu rows 18</span><br><span class="line"> 14 menu margin 8</span><br><span class="line"> 15 #menu hidden</span><br><span class="line"> 16 menu helpmsgrow 15</span><br><span class="line"> 17 menu tabmsgrow 13</span><br><span class="line"> 18</span><br><span class="line"> 19 # Border Area</span><br><span class="line"> 20 menu color border * #00000000 #00000000 none</span><br><span class="line"> 21</span><br><span class="line"> 22 # Selected item</span><br><span class="line"> 23 menu color sel 0 #ffffffff #00000000 none</span><br><span class="line"> 24</span><br><span class="line"> 25 # Title bar</span><br><span class="line"> 26 menu color title 0 #ff7ba3d0 #00000000 none</span><br><span class="line"> 27</span><br><span class="line"> 28 # Press [Tab] message</span><br><span class="line"> 29 menu color tabmsg 0 #ff3a6496 #00000000 none</span><br><span class="line"> 30</span><br><span class="line"> 31 # Unselected menu item</span><br><span class="line"> 32 menu color unsel 0 #84b8ffff #00000000 none</span><br><span class="line"> 33</span><br><span class="line"> 34 # Selected hotkey</span><br><span class="line"> 35 menu color hotsel 0 #84b8ffff #00000000 none</span><br><span class="line"> 36</span><br><span class="line"> 37 # Unselected hotkey</span><br><span class="line"> 38 menu color hotkey 0 #ffffffff #00000000 none</span><br><span class="line"> 39</span><br><span class="line"> 40 # Help text</span><br><span class="line"> 41 menu color help 0 #ffffffff #00000000 none</span><br><span class="line"> 42 </span><br><span class="line"> 43 # A scrollbar of some type? Not sure.</span><br><span class="line"> 44 menu color scrollbar 0 #ffffffff #ff355594 none</span><br><span class="line"> 45 </span><br><span class="line"> 46 # Timeout msg</span><br><span class="line"> 47 menu color timeout 0 #ffffffff #00000000 none</span><br><span class="line"> 48 menu color timeout_msg 0 #ffffffff #00000000 none</span><br><span class="line"> 49 </span><br><span class="line"> 50 # Command prompt text</span><br><span class="line"> 51 menu color cmdmark 0 #84b8ffff #00000000 none</span><br><span class="line"> 52 menu color cmdline 0 #ffffffff #00000000 none</span><br><span class="line"> 53 </span><br><span class="line"> 54 # Do not display the actual menu unless the user presses a key. All that is displayed is a timeout message.</span><br><span class="line"> 55 </span><br><span class="line"> 56 menu tabmsg Press Tab for full configuration options on menu items.</span><br><span class="line"> 57 </span><br><span class="line"> 58 menu separator # insert an empty line</span><br><span class="line"> 59 menu separator # insert an empty line</span><br><span class="line"> 59 menu separator # insert an empty line</span><br><span class="line"> 60 </span><br><span class="line"> 61 label linux</span><br><span class="line"> 62 menu label ^Install Red Hat Enterprise Linux 7.0</span><br><span class="line"> 63 kernel vmlinuz</span><br><span class="line"> 64 append initrd=initrd.img inst.stage2=ftp://192.168.10.10 ks=ftp://192.168.10.10/pub/ks.cfg quiet</span><br></pre></td></tr></table></figure>
<h5 id="é…ç½®VSFtpdæœåŠ¡ç¨‹åº"><a href="#é…ç½®VSFtpdæœåŠ¡ç¨‹åº" class="headerlink" title="é…ç½®VSFtpdæœåŠ¡ç¨‹åº"></a>é…ç½®VSFtpdæœåŠ¡ç¨‹åº</h5><p>å’±ä»¬è¿™å¥—æ— äººå€¼å®ˆå®‰è£…ç³»ç»ŸæœåŠ¡çš„å…‰ç›˜é•œåƒé€šè¿‡FTPåè®®è¿›è¡Œä¼ è¾“ï¼Œå› æ­¤è‚¯å®šå°‘ä¸äº†è¦ç”¨åˆ°vsftpdæœåŠ¡ç¨‹åºï¼Œå½“ç„¶åªè¦èƒ½å¤ŸæŠŠå…‰ç›˜é•œåƒé¡ºåˆ©çš„ä¼ é€ç»™å®¢æˆ·ç«¯ä¸»æœºå°±è¾¾åˆ°ç›®çš„å•¦ï¼Œå› æ­¤å¦‚æœæ„¿æ„çš„è¯ä¹Ÿå¯ä»¥ç”¨httpdæœåŠ¡ç¨‹åºæ¥æä¾›HTTPç½‘ç«™è®¿é—®æ–¹å¼ï¼Œä½†æ˜¯å¦‚æœçœŸçš„è¦ç”¨HTTPç½‘ç«™æœåŠ¡æ¥æä¾›å…‰ç›˜é•œåƒï¼ŒåŒå­¦ä»¬å¯ä¸€å®šè¦è®°å¾—æŠŠåˆšåˆšé…ç½®æ–‡ä»¶ä¸­çš„å…‰ç›˜é•œåƒè·å–ç½‘å€å’Œksåº”ç­”æ–‡ä»¶è·å–ç½‘å€ä¿®æ”¹ä¸€ä¸‹å“¦ï½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install vsftpd</span><br></pre></td></tr></table></figure>
<p>åŒå­¦ä»¬å¯åƒä¸‡ä¸è¦å«Œå¼ƒåˆ˜é„è€å¸ˆå•°å—¦ï¼Œé…ç½®æ–‡ä»¶å®‰è£…é…ç½®åä¸€å®šè¦æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼Œè¿™æ ·åœ¨çº¢å¸½è®¤è¯è€ƒè¯•æˆ–ç”Ÿäº§ç¯å¢ƒä¸­æ‰èƒ½å¤Ÿåœ¨æœåŠ¡å™¨é‡å¯åä¾ç„¶ä¸ºç”¨æˆ·æä¾›ç›¸åº”çš„æœåŠ¡ï¼Œå¸Œæœ›åŒå­¦ä»¬è¯»å®Œæ‰‹ä¸­è¿™æœ¬ã€Šlinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹ä¹¦ç±åéƒ½èƒ½å…»æˆè¿™ä¸ªå¥½ä¹ æƒ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart vsftpd</span><br><span class="line">systemctl enable vsftpd</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆéœ€è¦è‡ªè¡Œç¡®è®¤ä¸‹ç³»ç»Ÿå…‰ç›˜é•œåƒæ˜¯å¦å·²ç»è¢«æ­£å¸¸æŒ‚è½½åˆ°äº†/media/cdromç›®å½•ä¸Šäº†ï¼Œç„¶åæŠŠç›®å½•ä¸­çš„å…‰ç›˜é•œåƒèµ„æ–™å…¨éƒ¨çš„å¤åˆ¶åˆ°FTPæœåŠ¡å·¥ä½œç›®å½•ä¸­æ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -r /media/cdrom/* /var/ftp</span><br></pre></td></tr></table></figure>
<p>å¤åˆ¶å…‰ç›˜é•œåƒå…¨éƒ¨çš„æ•°æ®å¤§è‡´éœ€è¦3-5åˆ†é’Ÿï¼Œè¿™æœŸé—´ä¹Ÿä¸è¦é—²ç€å•¦ï¼ŒåŠ¨æ‰‹ç”¨firewalldé˜²ç«å¢™ç®¡ç†å·¥å…·æ·»åŠ ä¸Šå¯¹FTPåè®®çš„æ°¸ä¹…å…è®¸ç­–ç•¥ï¼Œç„¶ååœ¨SELinuxä¸­å¼€å¯å¯¹FTPä¼ è¾“çš„å…è®¸ç­–ç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-service=ftp</span><br><span class="line">firewall-cmd --reload </span><br><span class="line"></span><br><span class="line">setsebool -P ftpd_connect_all_unreserved=on</span><br></pre></td></tr></table></figure>
<h5 id="åˆ›å»ºKickStartåº”ç­”æ–‡ä»¶"><a href="#åˆ›å»ºKickStartåº”ç­”æ–‡ä»¶" class="headerlink" title="åˆ›å»ºKickStartåº”ç­”æ–‡ä»¶"></a>åˆ›å»ºKickStartåº”ç­”æ–‡ä»¶</h5><p>å’±ä»¬ä½¿ç”¨PXE+Kickstartéƒ¨ç½²çš„æ˜¯ä¸€å¥—æ— äººå€¼å®ˆå®‰è£…ç³»ç»ŸæœåŠ¡ï¼Œè€Œä¸æ˜¯å•çº¯çš„æ— äººå€¼å®ˆä¼ è¾“ç³»ç»Ÿå…‰ç›˜é•œåƒæœåŠ¡ï¼Œå› æ­¤éœ€è¦è®©å®¢æˆ·ç«¯ä¸»æœºèƒ½å¤Ÿä¸€è¾¹è·å–å…‰ç›˜é•œåƒèµ„æ–™ï¼Œä¸€è¾¹è¿˜èƒ½å¤ŸæŠŠå®‰è£…è¿‡ç¨‹ä¸­å‡ºç°çš„é€‰é¡¹å¸®å’±ä»¬å¡«å†™å¥½ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœæ‚¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æœ‰ä¸€ç™¾å°æœåŠ¡å™¨è¦å®‰è£…æˆç›¸åŒçš„ç³»ç»Ÿç¯å¢ƒï¼Œé‚£ä¹ˆåœ¨å®‰è£…è¿‡ç¨‹ä¸­ç‚¹å‡»çš„æŒ‰é’®å’Œå¡«å†™çš„ä¿¡æ¯ä¹Ÿåº”è¯¥éƒ½æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆä¸ºä½•ä¸åˆ›å»ºå‡ºä¸€ä¸ªå¤‡å¿˜å½•ä¼¼çš„éœ€æ±‚æ¸…å•å‘¢ï¼Ÿè®©ç³»ç»Ÿæ— äººå€¼å®ˆè‡ªåŠ¨åŒ–å®‰è£…çš„æ—¶å€™å¯ä»¥é‡åˆ°é€‰é¡¹ä¾¿ä»è¯¥æ–‡ä»¶ä¸­æ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œè€Œä¸ç”¨æ¯ä¸ªä¿¡æ¯éƒ½è¦äººå·¥è¾“å…¥å•¦~çœŸæ­£åšåˆ°è§£æ”¾åŒæ‰‹çš„æ— äººå€¼å®ˆè‡ªåŠ¨åŒ–éƒ¨ç½²ç³»ç»Ÿã€‚</p>
<p>å› æ­¤ç»è¿‡ä¸Šé¢å¯¹æ— äººå€¼å®ˆå®‰è£…ç³»ç»Ÿçš„ä»‹ç»ï¼Œåº”è¯¥å·²ç»èƒ½çŒœåˆ°Kickstartå…¶å®å¹¶ä¸èƒ½ç®—æ˜¯ä¸€ä¸ªæœåŠ¡ç¨‹åºï¼Œè€Œæ˜¯åº”ç­”æ–‡ä»¶äº†å§~æ˜¯çš„ï¼Kickstartåº”ç­”æ–‡ä»¶ä¸­åŒ…å«äº†ç³»ç»Ÿå®‰è£…è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨çš„é€‰é¡¹å’Œå‚æ•°ä¿¡æ¯ï¼Œç³»ç»Ÿé€šè¿‡è°ƒå–è¿™ä¸ªåº”ç­”æ–‡ä»¶çš„å†…å®¹è€Œæœ€ç»ˆå®ç°äº†æ— äººå€¼å®ˆå®‰è£…ç³»ç»Ÿã€‚é‚£ä¹ˆæ—¢ç„¶è¿™ä¸ªæ–‡ä»¶å¦‚æ­¤é‡è¦ï¼Œé‚£ä¹ˆé‚£é‡Œå»æ‰¾å‘¢ï¼Ÿå…¶å®åœ¨è¶…çº§ç®¡ç†å‘˜rootç”¨æˆ·çš„å®¶ç›®å½•ä¸­æœ‰ä¸ªå«åšanaconda-ks.cfgçš„æ–‡ä»¶å°±æ˜¯åº”ç­”æ–‡ä»¶å•¦ï¼Œå’±ä»¬å…ˆæŠŠè¿™ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°vsftpdæœåŠ¡ç¨‹åºçš„å·¥ä½œç›®å½•ä¸­ï¼ˆåœ¨å¼€æœºé€‰é¡¹èœå•é…ç½®æ–‡ä»¶ä¸­å·²ç»å®šä¹‰äº†è¯¥æ–‡ä»¶çš„è·å–è·¯å¾„ï¼Œå› æ­¤å¿…é¡»å­˜æ”¾åœ¨pubç›®å½•ä¸­æ¥ï¼‰ã€‚æœ€åè®°å¾—ä½¿ç”¨chmodå‘½ä»¤è®¾ç½®æ‰€æœ‰äººéƒ½æœ‰å¯è¯»å–çš„æƒé™ï¼Œä¿è¯å®¢æˆ·ç«¯ä¸»æœºå¯ä»¥é¡ºåˆ©çš„è·å–åˆ°åº”ç­”æ–‡ä»¶åŠé‡Œé¢çš„å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp ~/anaconda-ks.cfg /var/ftp/pub/ks.cfg</span><br><span class="line">chmod +r /var/ftp/pub/ks.cfg</span><br></pre></td></tr></table></figure>
<p>Kickstartåº”ç­”æ–‡ä»¶å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¤æ‚ï¼Œæ€»å…±åªæœ‰46è¡Œå·¦å³çš„å‚æ•°å’Œæ³¨é‡Šå†…å®¹ï¼ŒåŒå­¦ä»¬å¯ä»¥é€šè¿‡å‚æ•°çš„åç§°åŠä»‹ç»å¿«é€Ÿçš„äº†è§£æ¯ä¸ªå‚æ•°çš„ä½œç”¨ï¼Œå› æ­¤åˆ˜é„è€å¸ˆå°±æŒ‘é€‰å‡ ä¸ªæ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ¥ä¿®æ”¹ä¸‹å§ï¼Œå…¶ä»–å‚æ•°å¯ä»¥è‡ªå·±åŠ¨æ‰‹ä¿®æ”¹è¯•ä¸€è¯•å“¦ã€‚é¦–å…ˆæŠŠçº¦ç¬¬6è¡Œå·¦å³çš„å…‰ç›˜é•œåƒå®‰è£…æ–¹å¼ä¿®æ”¹æˆFTPè¿œç¨‹æ–‡ä»¶åè®®ï¼Œå¹¶ä»”ç»†çš„å¡«å†™å¥½æœåŠ¡ç«¯åœ°å€ï¼Œç„¶åæŠŠçº¦ç¬¬21è¡Œå·¦å³çš„æ—¶åŒºä¿®æ”¹æˆäºšæ´²/ä¸Šæµ·å§~æœ€åå†æ¥æŠŠçº¦29è¡Œå·¦å³çš„ç£ç›˜é€‰é¡¹è®¾ç½®ä¸ºæ¸…ç©ºæ‰€æœ‰ç£ç›˜å†…å®¹å¹¶åˆå§‹åŒ–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">vim /var/ftp/pub/ks.cfg </span><br><span class="line"> 1 #version=RHEL7</span><br><span class="line"> 2 # System authorization information</span><br><span class="line"> 3 auth --enableshadow --passalgo=sha512</span><br><span class="line"> 4 </span><br><span class="line"> 5 # Use CDROM installation media</span><br><span class="line"> 6 url --url=ftp://192.168.10.10</span><br><span class="line"> 7 # Run the Setup Agent on first boot</span><br><span class="line"> 8 firstboot --enable</span><br><span class="line"> 9 ignoredisk --only-use=sda</span><br><span class="line"> 10 # Keyboard layouts</span><br><span class="line"> 11 keyboard --vckeymap=us --xlayouts=&apos;us&apos;</span><br><span class="line"> 12 # System language</span><br><span class="line"> 13 lang en_US.UTF-8</span><br><span class="line"> 14 </span><br><span class="line"> 15 # Network information</span><br><span class="line"> 16 network --bootproto=dhcp --device=eno16777728 --onboot=off --ipv6=auto</span><br><span class="line"> 17 network --hostname=localhost.localdomain</span><br><span class="line"> 18 # Root password</span><br><span class="line"> 19 rootpw --iscrypted $6$pDjJf42g8C6pL069$iI.PX/yFaqpo0ENw2pa7MomkjLyoae2zjMz2UZJ7b H3UO4oWtR1.Wk/hxZ3XIGmzGJPcs/MgpYssoi8hPCt8b/</span><br><span class="line"> 20 # System timezone</span><br><span class="line"> 21 timezone Asia/Shanghai --isUtc</span><br><span class="line"> 22 user --name=linuxprobe --password=$6$a9v3InSTNbweIR7D$JegfYWbCdoOokj9sodEccdO.zL F4oSH2AZ2ss2R05B6Lz2A0v2K.RjwsBALL2FeKQVgf640oa/tok6J.7GUtO/ --iscrypted --gecos =&quot;linuxprobe&quot;</span><br><span class="line"> 23 # X Window System configuration information</span><br><span class="line"> 24 xconfig --startxonboot</span><br><span class="line"> 25 # System bootloader configuration</span><br><span class="line"> 26 bootloader --location=mbr --boot-drive=sda</span><br><span class="line"> 27 autopart --type=lvm</span><br><span class="line"> 28 # Partition clearing information</span><br><span class="line"> 29 clearpart --all --initlabel</span><br><span class="line"> 30 </span><br><span class="line"> 31 %packages</span><br><span class="line"> 32 @base</span><br><span class="line"> 33 @core</span><br><span class="line"> 34 @desktop-debugging</span><br><span class="line"> 35 @dial-up</span><br><span class="line"> 36 @fonts</span><br><span class="line"> 37 @gnome-desktop</span><br><span class="line"> 38 @guest-agents</span><br><span class="line"> 39 @guest-desktop-agents</span><br><span class="line"> 40 @input-methods</span><br><span class="line"> 41 @internet-browser</span><br><span class="line"> 42 @multimedia</span><br><span class="line"> 43 @print-client</span><br><span class="line"> 44 @x11</span><br><span class="line"> 45 </span><br><span class="line"> 46 %end</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè®¤ä¸ºç³»ç»Ÿé»˜è®¤è‡ªå¸¦çš„åº”ç­”æ–‡ä»¶å‚æ•°è¾ƒå°‘ï¼Œæˆ–è€…ä¸èƒ½å¤Ÿæ»¡è¶³ç”Ÿäº§ç¯å¢ƒçš„éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡yumä»“åº“æ¥å®‰è£…system-config-kickstartè½¯ä»¶åŒ…ï¼Œè¿™æ˜¯ä¸€æ¬¾å›¾å½¢åŒ–çš„Kickstartåº”ç­”æ–‡ä»¶ç”Ÿæˆå·¥å…·ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶å‡ºåº”ç­”æ–‡ä»¶æ¥ï¼Œç„¶åå­˜æ”¾åˆ°/var/ftp/pubç›®å½•ä¸­å¹¶æ”¹æˆks.cfgå°±å¯ä»¥å•¦ã€‚</p>
<h5 id="è‡ªåŠ¨éƒ¨ç½²å®¢æˆ·æœº"><a href="#è‡ªåŠ¨éƒ¨ç½²å®¢æˆ·æœº" class="headerlink" title="è‡ªåŠ¨éƒ¨ç½²å®¢æˆ·æœº"></a>è‡ªåŠ¨éƒ¨ç½²å®¢æˆ·æœº</h5><h3 id="ä½¿ç”¨LNMPæ¶æ„éƒ¨ç½²åŠ¨æ€ç½‘ç«™ç¯å¢ƒ"><a href="#ä½¿ç”¨LNMPæ¶æ„éƒ¨ç½²åŠ¨æ€ç½‘ç«™ç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨LNMPæ¶æ„éƒ¨ç½²åŠ¨æ€ç½‘ç«™ç¯å¢ƒ"></a>ä½¿ç”¨LNMPæ¶æ„éƒ¨ç½²åŠ¨æ€ç½‘ç«™ç¯å¢ƒ</h3><h4 id="LNMPåŠ¨æ€ç½‘ç«™æ¶æ„"><a href="#LNMPåŠ¨æ€ç½‘ç«™æ¶æ„" class="headerlink" title="LNMPåŠ¨æ€ç½‘ç«™æ¶æ„"></a>LNMPåŠ¨æ€ç½‘ç«™æ¶æ„</h4><p>LNMPåŠ¨æ€ç½‘ç«™éƒ¨ç½²æ¶æ„æ˜¯ä¸€å¥—ç”±Linuxç³»ç»Ÿ+Nginxç½‘ç«™æœåŠ¡+Mysqlæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ+PHPè„šæœ¬è¯­è¨€ç»„æˆçš„åŠ¨æ€ç½‘ç«™ç³»ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒLNMPä¸­çš„Læ˜¯Linuxç³»ç»Ÿçš„æ„æ€ï¼Œä¸ä»…å¯ä»¥æ˜¯RHELã€Centosã€Fedoraï¼Œè¿˜å¯ä»¥æ˜¯Debianã€Ubuntuç­‰ç­‰ç³»ç»Ÿã€‚</p>
<p>ä½¿ç”¨æºç åŒ…å®‰è£…æœåŠ¡ç¨‹åºå‰é¦–å…ˆè¦è®©æœåŠ¡å™¨å…·å¤‡ç¼–è¯‘ç¨‹åºæºç çš„ç¯å¢ƒï¼Œå…¶ä¸­åŒ…æ‹¬Cè¯­è¨€ã€C++è¯­è¨€ã€Perlè¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œä»¥åŠå„ç§å¸¸è§çš„ç¼–è¯‘æ”¯æŒå‡½æ•°åº“ç¨‹åºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">um install -y apr* autoconf automake bison bzip2 bzip2* compat* cpp curl curl-devel fontconfig fontconfig-devel freetype freetype* freetype-devel gcc gcc-c++ gd gettext gettext-devel glibc kernel kernel-headers keyutils keyutils-libs-devel krb5-devel libcom_err-devel libpng libpng-devel libjpeg* libsepol-devel libselinux-devel libstdc++-devel libtool* libgomp libxml2 libxml2-devel libXpm* libtiff libtiff* make mpfr ncurses* ntp openssl openssl-devel patch pcre-devel perl php-common php-gd policycoreutils telnet t1lib t1lib* nasm nasm* wget zlib-devel</span><br></pre></td></tr></table></figure>
<p>åˆ˜é„è€å¸ˆå·²ç»æŠŠå®‰è£…LNMPåŠ¨æ€ç½‘ç«™éƒ¨ç½²æ¶æ„æ‰€éœ€çš„16ä¸ªè½¯ä»¶æºç åŒ…å’Œ1ä¸ªç”¨äºæ£€æŸ¥æ•ˆæœçš„è®ºå›ç½‘ç«™ç³»ç»Ÿè½¯ä»¶åŒ…ä¸Šä¼ è‡³äº†å’±ä»¬ä¹¦ç±çš„ä¸‹è½½æœåŠ¡å™¨ä¸­ï¼ŒåŒå­¦ä»¬å¯ä»¥åœ¨Windowsç³»ç»Ÿä¸­ä¸‹è½½åé€šè¿‡sshæœåŠ¡ä¼ é€è‡³æœåŠ¡å™¨ä¸­ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨LinuxæœåŠ¡å™¨ä¸­ä½¿ç”¨wgetå‘½ä»¤ä¸‹è½½åˆ°è¿™äº›æºç åŒ…æ–‡ä»¶ï¼Œæ ¹æ®ç¬¬å…­ç« å­¦ä¹ åˆ°çš„FHSåè®®ï¼Œå»ºè®®æŠŠä¸ªäººè¦å®‰è£…çš„è½¯ä»¶åŒ…å­˜æ”¾åœ¨/usr/local/srcç›®å½•ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src</span><br><span class="line"></span><br><span class="line">wget http://down.linuxprobe.com/Tools/cmake-2.8.11.2.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/Discuz_X3.2_SC_GBK.zip</span><br><span class="line">wget http://down.linuxprobe.com/Tools/freetype-2.5.3.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/jpegsrc.v9a.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/libgd-2.1.0.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/libmcrypt-2.5.8.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/libpng-1.6.12.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/libvpx-v1.3.0.tar.bz2</span><br><span class="line">wget http://down.linuxprobe.com/Tools/mysql-5.6.19.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/nginx-1.6.0.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/openssl-1.0.1h.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/php-5.5.14.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/pcre-8.35.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/t1lib-5.1.2.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/tiff-4.0.3.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/yasm-1.2.0.tar.gz</span><br><span class="line">wget http://down.linuxprobe.com/Tools/zlib-1.2.8.tar.gz</span><br><span class="line"></span><br><span class="line">ls</span><br><span class="line">zlib-1.2.8.tar.gz       libmcrypt-2.5.8.tar.gz  pcre-8.35.tar.gz</span><br><span class="line">cmake-2.8.11.2.tar.gz   libpng-1.6.12.tar.gz    php-5.5.14.tar.gz</span><br><span class="line">Discuz_X3.2_SC_GBK.zip  libvpx-v1.3.0.tar.bz2   t1lib-5.1.2.tar.gz</span><br><span class="line">freetype-2.5.3.tar.gz   mysql-5.6.19.tar.gz     tiff-4.0.3.tar.gz</span><br><span class="line">jpegsrc.v9a.tar.gz      nginx-1.6.0.tar.gz      yasm-1.2.0.tar.gz</span><br><span class="line">libgd-2.1.0.tar.gz      openssl-1.0.1h.tar.gz</span><br></pre></td></tr></table></figure>
<p>CMakeæ˜¯ä¸€æ¬¾Linuxç³»ç»Ÿä¸­çš„å¸¸ç”¨ç¼–è¯‘å·¥å…·ï¼Œè¦æƒ³é€šè¿‡æºç åŒ…å®‰è£…æœåŠ¡ç¨‹åºå°±ä¸€å®šè¦ä¸¥æ ¼éµå®ˆä¸Šé¢æ€»ç»“çš„å®‰è£…æ­¥éª¤â€”â€”ä¸‹è½½è§£å‹ã€ç¼–è¯‘ä»£ç ã€ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ã€è¿è¡Œå®‰è£…ç¨‹åºã€‚åœ¨æ¥ä¸‹æ¥è§£å‹ã€ç¼–è¯‘å„ä¸ªè½¯ä»¶åŒ…æºç ç¨‹åºçš„æ—¶å€™éƒ½ä¼šæœ‰å¤§é‡çš„è¾“å‡ºä¿¡æ¯ï¼Œåˆ˜é„è€å¸ˆå°±ä¼šé»˜è®¤çœç•¥ä¸å†™äº†ï¼Œè¯·è¯»è€…ä»¥å®é™…æ“ä½œä¸ºå‡†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar xzvf cmake-2.8.11.2.tar.gz</span><br><span class="line">cd cmake-2.8.11.2/</span><br><span class="line">./configure</span><br><span class="line">make </span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®MysqlæœåŠ¡"><a href="#é…ç½®MysqlæœåŠ¡" class="headerlink" title="é…ç½®MysqlæœåŠ¡"></a>é…ç½®MysqlæœåŠ¡</h4><p>åœ¨å‰é¢ç« èŠ‚ä½¿ç”¨Yumè½¯ä»¶ä»“åº“æ¥å®‰è£…æœåŠ¡ç¨‹åºæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®RPMè½¯ä»¶åŒ…ä¸­çš„æŒ‡ä»¤é›†å®Œæˆé…ç½®è½¯ä»¶ä¿¡æ¯ç­‰ç­‰å·¥ä½œï¼Œä½†ä¸€æ—¦é€‰æ‹©äº†ç”¨æºç åŒ…çš„æ–¹å¼æ¥å®‰è£…æœåŠ¡ç¨‹åºï¼Œè¿™ä¸€åˆ‡å°±éƒ½éœ€è¦è‡ªå·±æ‰‹å·¥å®Œæˆäº†ã€‚ä¾‹å¦‚éœ€è¦å…ˆåœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªåä¸ºmysqlçš„ç”¨æˆ·ï¼Œä»–æ˜¯ä¸“é—¨ç”¨äºè´Ÿè´£è¿è¡ŒMysqlæ•°æ®åº“çš„ç”¨æˆ·ï¼Œè¯·è®°å¾—æŠŠè¿™ç±»å¸æˆ·çš„Bashç»ˆç«¯éƒ½é¡ºæ‰‹è®¾ç½®æˆnologinï¼Œé¿å…é»‘å®¢é€šè¿‡è¯¥ç”¨æˆ·ç™»é™†åˆ°æœåŠ¡å™¨ä¸­ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd mysql -s /sbin/nologin</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªç”¨äºä¿å­˜Mysqlæ•°æ®åº“ç¨‹åºå’Œæ•°æ®åº“æ–‡ä»¶çš„ç›®å½•ï¼Œå¹¶æŠŠè¯¥ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€æœ‰ç»„èº«ä»½ä¿®æ”¹ä¸ºmysqlï¼Œå…¶ä¸­/usr/local/mysqlæ˜¯ç”¨äºä¿å­˜mysqlæ•°æ®åº“æœåŠ¡ç¨‹åºçš„ç›®å½•ï¼Œè€Œ/usr/local/mysql/varåˆ™æ˜¯ç”¨äºä¿å­˜çœŸå®æ•°æ®åº“æ–‡ä»¶çš„ç›®å½•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/mysql/var</span><br><span class="line">chown -Rf mysql:mysql /usr/local/mysql</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥è§£å‹ã€ç¼–è¯‘ã€å®‰è£…Mysqlæ•°æ®åº“æœåŠ¡ç¨‹åºï¼Œå’±ä»¬åœ¨ç¼–è¯‘Mysqlæ•°æ®åº“çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯cmakeå‘½ä»¤ï¼Œ-DCMAKE_INSTALL_PREFIXå‚æ•°ç”¨äºå®šä¹‰Mysqlæ•°æ®åº“æœåŠ¡ç¨‹åºçš„ä¿å­˜ç›®å½•ï¼Œ-DMYSQL_DATADIRå‚æ•°ç”¨äºå®šä¹‰çœŸå®æ•°æ®åº“æ–‡ä»¶çš„ç›®å½•ï¼Œè€Œ-DSYSCONFDIRåˆ™æ˜¯å®šä¹‰Mysqlæ•°æ®åº“é…ç½®æ–‡ä»¶æ‰€ä¿å­˜çš„ç›®å½•ï¼Œç”±äºMysqlæ•°æ®åº“æœåŠ¡ç¨‹åºçš„ä½“ç§¯æ¯”è¾ƒå¤§ï¼Œå› æ­¤ç¼–è¯‘çš„è¿‡ç¨‹æ˜¯æ¯”è¾ƒæ¼«é•¿çš„ï¼Œåœ¨æ­¤æœŸé—´å¯ä»¥ç¨å¾®ä¼‘æ¯ä¸€ä¸‹å•¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar xzvf mysql-5.6.19.tar.gz</span><br><span class="line">cd mysql-5.6.19/</span><br><span class="line"></span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/var -DSYSCONFDIR=/etc</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†è®©Mysqlæ•°æ®åº“ç¨‹åºæ­£å¸¸çš„è¿è½¬èµ·æ¥ï¼Œéœ€è¦å…ˆåˆ é™¤æ‰åœ¨/etcç›®å½•ä¸­çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨Mysqlæ•°æ®åº“ç¨‹åºç›®å½•çš„scriptsæ–‡ä»¶å¤¹å†…å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåä¸ºmysql_install_dbçš„è„šæœ¬ç¨‹åºï¼Œä½¿ç”¨è¿™æ¡å‘½ä»¤çš„â€“userå‚æ•°æŒ‡å®šmysqlæœåŠ¡çš„å¯¹åº”å¸å·åç§°ï¼ˆåœ¨å‰é¢æ­¥éª¤å·²ç»åˆ›å»ºï¼‰ï¼Œâ€“basedirå‚æ•°æŒ‡å®šmysqlæœåŠ¡ç¨‹åºçš„ä¿å­˜ç›®å½•ï¼Œä»¥åŠç”¨â€“datadirå‚æ•°æŒ‡å®šmysqlçœŸå®æ•°æ®åº“çš„æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œè¿™æ ·å³å¯ç”Ÿæˆå‡ºç³»ç»Ÿæ•°æ®åº“æ–‡ä»¶å•¦ï¼Œä¹Ÿä¼šç”Ÿæˆå‡ºæ–°çš„mysqlæœåŠ¡é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/my.cnf</span><br><span class="line">cd /usr/local/mysql</span><br><span class="line">./scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/var</span><br></pre></td></tr></table></figure>
<p>æŠŠç³»ç»Ÿæ–°ç”Ÿæˆçš„Mysqlæ•°æ®åº“é…ç½®æ–‡ä»¶åšä¸€ä¸ªé“¾æ¥æ–‡ä»¶åˆ°/etcç›®å½•ä¸­ï¼Œç„¶åæŠŠç¨‹åºç›®å½•ä¸­çš„å¼€æœºç¨‹åºæ–‡ä»¶å¤åˆ¶åˆ°/etc/rc.d/init.dç›®å½•ä¸­ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†è®©Mysqlæ•°æ®åº“æœåŠ¡ç¨‹åºèƒ½å¤Ÿé€šè¿‡serviceå‘½ä»¤æ¥è¿›è¡Œç®¡ç†å•¦ï¼Œè®°å¾—æŠŠæƒé™ä¿®æ”¹æˆ755ä»¥ä¾¿äºè®©ç”¨æˆ·æœ‰æ‰§è¡Œè¯¥è„šæœ¬çš„æƒé™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ln -s my.cnf /etc/my.cnf </span><br><span class="line">cp ./support-files/mysql.server /etc/rc.d/init.d/mysqld</span><br><span class="line">chmod 755 /etc/rc.d/init.d/mysqld</span><br></pre></td></tr></table></figure>
<p>ç¼–è¾‘åˆšåˆšå¤åˆ¶æ¥çš„Mysqlæ•°æ®åº“è„šæœ¬æ–‡ä»¶ï¼ŒæŠŠå¤§çº¦46ã€47è¡Œçš„basedirä¸datadirå‚æ•°åˆ†åˆ«ä¿®æ”¹ä¸ºMysqlæ•°æ®åº“ç¨‹åºä¿å­˜ç›®å½•å’ŒçœŸå®æ•°æ®åº“æ–‡ä»¶å†…å®¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/rc.d/init.d/mysqld</span><br><span class="line"> 46 basedir=/usr/local/mysql</span><br><span class="line"> 47 datadir=/usr/local/mysql/var</span><br></pre></td></tr></table></figure>
<p>é…ç½®å¥½è„šæœ¬æ–‡ä»¶åä¾¿å¯ä»¥ç”¨serviceå‘½ä»¤å¯åŠ¨mysqldæ•°æ®åº“æœåŠ¡äº†ï¼Œmysqldæ˜¯Mysqlæ•°æ®åº“ç¨‹åºçš„æœåŠ¡åç§°ï¼Œç•™æ„ä¸è¦å†™é”™å°±å¯ä»¥ï¼Œé¡ºæ‰‹å†ç”¨chkconfigå‘½ä»¤æŠŠmysqldæœåŠ¡ç¨‹åºåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­å§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br><span class="line">chkconfig mysqld on</span><br></pre></td></tr></table></figure>
<p>Mysqlæ•°æ®åº“ç¨‹åºæœ‰è®¸å¤šè‡ªå¸¦çš„å‘½ä»¤ï¼Œå¯æ˜¯BASHç»ˆç«¯çš„PATHå˜é‡å¹¶ä¸ä¼šåŒ…å«è¿™äº›å‘½ä»¤æ‰€å­˜æ”¾çš„ç›®å½•ï¼Œå› æ­¤å’±ä»¬ä¹Ÿå°±ä¸èƒ½é¡ºåˆ©çš„å¯¹Mysqlæ•°æ®åº“è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨Mysqlæ•°æ®åº“è‡ªå¸¦çš„å‘½ä»¤å•¦ã€‚æƒ³è¦æŠŠå‘½ä»¤æ‰€ä¿å­˜çš„ç›®å½•æ°¸ä¹…æ€§çš„å®šä¹‰åˆ°PATHå˜é‡ä¸­ï¼Œéœ€è¦ç¼–è¾‘/etc/profileæ–‡ä»¶å¹¶å†™å…¥è¿½åŠ çš„å‘½ä»¤ç›®å½•ï¼Œè¿™æ ·å½“ä¸‹ä¸€æ¬¡æœåŠ¡å™¨é‡å¯æ—¶å°±ä¼šæ°¸ä¹…ç”Ÿæ•ˆäº†ï¼Œå¦‚æœä¸æƒ³é‡å¯å°±ç”Ÿæ•ˆçš„è¯å¯ä»¥ç”¨sourceå‘½ä»¤åŠ è½½ä¸€ä¸‹æ–‡ä»¶ï¼Œé‚£ä¹ˆæ–°çš„PATHå˜é‡å†…å®¹ä¹Ÿå°±æ˜¯ç«‹å³ç”Ÿæ•ˆäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"> 65 for i in /etc/profile.d/*.sh ; do</span><br><span class="line"> 66 if [ -r &quot;$i&quot; ]; then</span><br><span class="line"> 67 if [ &quot;$&#123;-#*i&#125;&quot; != &quot;$-&quot; ]; then</span><br><span class="line"> 68 . &quot;$i&quot;</span><br><span class="line"> 69 else</span><br><span class="line"> 70 . &quot;$i&quot; &gt;/dev/null</span><br><span class="line"> 71 fi</span><br><span class="line"> 72 fi</span><br><span class="line"> 73 done</span><br><span class="line"> 74 export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line"> 75 unset i</span><br><span class="line"> 76 unset -f pathmunge</span><br><span class="line"></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<p>Mysqlæ•°æ®åº“æœåŠ¡ç¨‹åºè¿˜æœ‰ä¸€äº›éœ€è¦è°ƒç”¨çš„ç¨‹åºæ–‡ä»¶å’Œå‡½æ•°åº“æ–‡ä»¶ï¼Œç”±äºå½“å‰æ˜¯é€šè¿‡æºç åŒ…æ–¹å¼å®‰è£…çš„Mysqlæ•°æ®åº“ï¼Œå› æ­¤ç°åœ¨ä¹Ÿå¿…é¡»è¦æ‰‹åŠ¨çš„æŠŠè¿™äº›æ–‡ä»¶é“¾æ¥è¿‡æ¥äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/lib/mysql</span><br><span class="line">ln -s /usr/local/mysql/lib/mysql /usr/lib/mysql</span><br><span class="line">ln -s /tmp/mysql.sock /var/lib/mysql/mysql.sock</span><br><span class="line">ln -s /usr/local/mysql/include/mysql /usr/include/mysql</span><br></pre></td></tr></table></figure>
<p>Mysqlæ•°æ®åº“æœåŠ¡ç¨‹åºå·²ç»å¯åŠ¨ï¼Œå„ä¸ªè°ƒç”¨çš„å‡½æ•°æ–‡ä»¶ä¹Ÿå·²ç»å°±ä½ï¼ŒPATHç¯å¢ƒå˜é‡ä¸­ä¹Ÿå·²ç»åŠ å…¥äº†mysqlæ•°æ®åº“å‘½ä»¤çš„ç›®å½•ï¼Œè¿™ä¸€åˆ‡é…ç½®å¦¥å½“åå°±å¯ä»¥å¯¹mysqlæ•°æ®åº“è¿›è¡Œåˆå§‹åŒ–äº†ï¼Œåˆå§‹åŒ–é…ç½®çš„è¿‡ç¨‹ä¸MariaDBæ•°æ®åº“æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆäº²åˆ‡å‘¢ï¼Œåªæ˜¯æœ€åå˜æˆäº†Thanks for using MySQL!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®NginxæœåŠ¡"><a href="#é…ç½®NginxæœåŠ¡" class="headerlink" title="é…ç½®NginxæœåŠ¡"></a>é…ç½®NginxæœåŠ¡</h4><p>Nginxæ˜¯ä¸€æ¬¾ç›¸å½“ä¼˜ç§€çš„ç”¨äºéƒ¨ç½²åŠ¨æ€ç½‘ç«™çš„æœåŠ¡ç¨‹åºï¼Œå®ƒæœ€åˆæ˜¯ä¸ºä¿„ç½—æ–¯é—¨æˆ·ç«™ç‚¹è€Œè®¾è®¡çš„ç½‘ç«™æœåŠ¡è½¯ä»¶ï¼Œè€Œä½œä¸ºä¸€æ¬¾è½»é‡çº§çš„ç½‘ç«™æœåŠ¡è½¯ä»¶ï¼Œå› å…¶ç¨³å®šæ€§å’Œä¸°å¯Œçš„åŠŸèƒ½è€Œæ·±å—ä¿¡èµ–ã€‚å…¶ä¸­æœ€æœ€æœ€è¢«è®¤å¯çš„æ˜¯ä½ç³»ç»Ÿèµ„æºã€å ç”¨å†…å­˜å°‘ä¸”å¹¶å‘èƒ½åŠ›å¼ºï¼Œç›®å‰å›½å†…å¦‚æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ç­‰é—¨æˆ·ç«™ç‚¹å‡å·²åœ¨ä½¿ç”¨ï¼Œå¸‚åœºå æœ‰ä»½é¢å·²è¾¾åˆ°20%å·¦å³ï¼ˆ2017å¹´æœ€æ–°æ•°æ®ï¼‰ï¼Œå¹¶ä¸”åœ¨ä¸æ–­çš„å¢é•¿ã€‚</p>
<p>Nginxç¨‹åºçš„ç¨³å®šæ€§æ¥è‡ªäºå®ƒé‡‡ç”¨äº†åˆ†é˜¶æ®µçš„èµ„æºåˆ†é…æŠ€æœ¯ï¼Œä½¿å¾—CPUä¸å†…å­˜å ç”¨ç‡ä¼šéå¸¸ä½ï¼Œæ‰€ä»¥ä½¿ç”¨Nginxç¨‹åºéƒ¨ç½²åŠ¨æ€ç½‘ç«™ç¯å¢ƒä¸ä»…ååˆ†çš„ç¨³å®šã€é«˜æ•ˆï¼Œè€Œä¸”æ¶ˆè€—æ›´å°‘çš„ç³»ç»Ÿèµ„æºã€‚Nginxä¸°å¯Œçš„æ¨¡å—åŠŸèƒ½ä¹Ÿå‡ ä¹ä¸Apacheç¨‹åºæ•°é‡ç›¸åŒï¼Œç°åœ¨å·²ç»å®Œå…¨çš„æ”¯æŒäº†proxyã€rewriteã€mod_fcgiã€sslã€vhostsç­‰å¸¸ç”¨æ¨¡å—ã€‚è€Œä¸”è¿˜æ”¯æŒäº†çƒ­éƒ¨ç½²æŠ€æœ¯ï¼Œå³èƒ½å¤Ÿå¯ä»¥7*24ä¸é—´æ–­æä¾›æœåŠ¡ï¼Œå³ä¾¿è¿è¡Œæ•°æœˆä¹Ÿæ— é¡»é‡å¯ï¼Œè¿˜å¯ä»¥åœ¨ä¸æš‚åœæœåŠ¡çš„æƒ…å†µä¸‹ç›´æ¥å¯¹NginxæœåŠ¡ç¨‹åºè¿›è¡Œå‡çº§ã€‚</p>
<p>å¦ç™½æ¥è®²ï¼Œè™½ç„¶Nginxç¨‹åºçš„ä»£ç è´¨é‡éå¸¸é«˜ï¼Œä»£ç å¾ˆè§„èŒƒï¼ŒæŠ€æœ¯æˆç†Ÿï¼Œæ¨¡å—æ‰©å±•ä¹Ÿå¾ˆå®¹æ˜“ï¼Œä½†Nginxä¾ç„¶å­˜åœ¨ä¸å°‘é—®é¢˜ï¼Œæ¯”å¦‚Nginxæ˜¯ç”±ä¿„ç½—æ–¯äººåˆ›å»ºçš„ï¼Œæ‰€ä»¥åœ¨èµ„æ–™æ–‡æ¡£æ–¹é¢è¿˜å¹¶ä¸å®Œå–„ï¼Œä¸­æ–‡æ•™æçš„è´¨é‡æ›´æ˜¯é±¼é¾™æ··æ‚ã€‚ä½†NginxæœåŠ¡ç¨‹åºè¿‘å¹´æ¥è¿…çŒ›çš„å¢é•¿åŠ¿å¤´ï¼Œåˆ˜é„è€å¸ˆé¢„æµ‹æœªæ¥åº”è¯¥èƒ½å¤Ÿåœ¨è½»é‡çº§HTTPæœåŠ¡å™¨å¸‚åœºæœ‰ä¸é”™çš„æœªæ¥ã€‚<br>åœ¨æ­£å¼å®‰è£…NginxæœåŠ¡ç¨‹åºå‰ï¼Œå’±ä»¬è¿˜éœ€è¦ä¸ºå…¶è§£å†³æ‰ç›¸å…³çš„è½¯ä»¶ä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚ç”¨äºæä¾›Perlè¯­è¨€å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“çš„è½¯ä»¶åŒ…pcreï¼Œå¿«æ¥è§£å‹ã€ç¼–è¯‘ã€ç”Ÿæˆã€å®‰è£…å®ƒçš„æœåŠ¡æºç æ–‡ä»¶å§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe ~]# cd /usr/local/src</span><br><span class="line">[root@linuxprobe src]# tar xzvf pcre-8.35.tar.gz </span><br><span class="line">[root@linuxprobe src]# cd pcre-8.35</span><br><span class="line">[root@linuxprobe pcre-8.35]# ./configure --prefix=/usr/local/pcre</span><br><span class="line">[root@linuxprobe pcre-8.35]# make</span><br><span class="line">[root@linuxprobe pcre-8.35]# make install</span><br></pre></td></tr></table></figure>
<p>opensslè½¯ä»¶åŒ…æ˜¯ç”¨äºæä¾›ç½‘ç«™åŠ å¯†è¯ä¹¦æœåŠ¡çš„ç¨‹åºæ–‡ä»¶ï¼Œå®‰è£…è¿™äº›æ–‡ä»¶æ—¶éœ€è¦è‡ªå®šä¹‰ä¸‹æœåŠ¡ç¨‹åºçš„å®‰è£…ç›®å½•ï¼Œä»¥ä¾¿äºç¨åè°ƒç”¨å®ƒä»¬çš„æ—¶å€™æ›´å¯æ§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe pcre-8.35]# cd /usr/local/src</span><br><span class="line">[root@linuxprobe src]# tar xzvf openssl-1.0.1h.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd openssl-1.0.1h</span><br><span class="line">[root@linuxprobe openssl-1.0.1h]# ./config --prefix=/usr/local/openssl</span><br><span class="line">[root@linuxprobe openssl-1.0.1h]# make</span><br><span class="line">[root@linuxprobe openssl-1.0.1h]# make install</span><br></pre></td></tr></table></figure>
<p>opensslè½¯ä»¶åŒ…å®‰è£…åé»˜è®¤ä¼šåœ¨/usr/local/openssl/binç›®å½•ä¸­æä¾›å¾ˆå¤šçš„å¯ç”¨å‘½ä»¤ï¼Œå’±ä»¬éœ€è¦åƒåˆšåˆšé‚£æ ·æŠŠè¿™ä¸ªç›®å½•æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶å†™å…¥åˆ°é…ç½®æ–‡ä»¶é‡Œï¼Œæœ€åæ‰§è¡Œä¸€ä¸‹sourceå‘½ä»¤ä»¥ä¾¿è®©æ–°çš„PATHç¯å¢ƒå˜é‡å†…å®¹å¯ä»¥ç«‹å³ç”Ÿæ•ˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export PATH=$PATH:/usr/local/mysql/bin:/usr/local/openssl/bin</span><br></pre></td></tr></table></figure>
<p>zlibè½¯ä»¶åŒ…æ˜¯ç”¨äºæä¾›å‹ç¼©åŠŸèƒ½çš„å‡½æ•°åº“æ–‡ä»¶ï¼Œå…¶å®å¯¹è¿™äº›ä¸NginxæœåŠ¡ç¨‹åºæœ‰è°ƒç”¨å…³ç³»çš„æœåŠ¡ç¨‹åºåŒå­¦ä»¬ä¸éœ€è¦æ·±å…¥äº†è§£ï¼Œåªè¦å¤§è‡´äº†è§£å…¶ä½œç”¨å°±å·²ç»è¶³å¤Ÿäº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe pcre-8.35]# cd /usr/local/src</span><br><span class="line">[root@linuxprobe src]# tar xzvf zlib-1.2.8.tar.gz </span><br><span class="line">[root@linuxprobe src]# cd zlib-1.2.8</span><br><span class="line">[root@linuxprobe zlib-1.2.8]# ./configure --prefix=/usr/local/zlib</span><br><span class="line">[root@linuxprobe zlib-1.2.8]# make</span><br><span class="line">[root@linuxprobe zlib-1.2.8]# make install</span><br></pre></td></tr></table></figure>
<p>ä¾èµ–å…³ç³»çš„è½¯ä»¶åŒ…å®‰è£…éƒ¨ç½²å¥½ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªç”¨äºæ‰§è¡ŒnginxæœåŠ¡ç¨‹åºçš„ç”¨æˆ·å§ï¼Œè´¦æˆ·åç§°å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†ä¸€å®šè¦è®°ä½ï¼Œä¸‹é¢éœ€è¦è°ƒç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe zlib-1.2.8]# cd ..</span><br><span class="line">[root@linuxprobe src]# useradd www -s /sbin/nologin</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘NginxæœåŠ¡ç¨‹åºå‘½ä»¤éœ€è¦è®¾ç½®çš„å‚æ•°ç‰¹åˆ«çš„å¤šï¼Œå…¶ä¸­â€“prefixå‚æ•°ç”¨äºå®šä¹‰nginxæœåŠ¡ç¨‹åºç¨åå®‰è£…åˆ°çš„ä½ç½®ï¼Œâ€“userä¸â€“groupå‚æ•°ç”¨äºæŒ‡å®šæ‰§è¡ŒnginxæœåŠ¡ç¨‹åºçš„ç”¨æˆ·åå’Œç”¨æˆ·ç»„ã€‚ä½¿ç”¨å‚æ•°è°ƒç”¨opensslã€zlibã€pcreè½¯ä»¶åŒ…æ—¶è¯·å†™è½¯ä»¶æºç åŒ…çš„è§£å‹è·¯å¾„ï¼Œè€Œä¸æ˜¯ç¨‹åºçš„å®‰è£…è·¯å¾„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe src]# tar xzvf nginx-1.6.0.tar.gz </span><br><span class="line">[root@linuxprobe src]# cd nginx-1.6.0/</span><br><span class="line">[root@linuxprobe nginx-1.6.0]# ./configure --prefix=/usr/local/nginx --without-http_memcached_module --user=www --group=www --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-openssl=/usr/local/src/openssl-1.0.1h --with-zlib=/usr/local/src/zlib-1.2.8 --with-pcre=/usr/local/src/pcre-8.35</span><br><span class="line">[root@linuxprobe nginx-1.6.0]# make</span><br><span class="line">[root@linuxprobe nginx-1.6.0]# make install</span><br></pre></td></tr></table></figure>
<p>nginxæœåŠ¡ç¨‹åºè¦æƒ³å¯åŠ¨ä»¥åŠåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ä¹Ÿéœ€è¦æœ‰è„šæœ¬æ–‡ä»¶ï¼Œä½†å¾ˆå¯æƒœé»˜è®¤nginxè½¯ä»¶åŒ…å®‰è£…åå¹¶æ²¡æœ‰ä¸ºç”¨æˆ·æä¾›ï¼Œå› æ­¤åˆ˜é„è€å¸ˆç»™åŒå­¦ä»¬å‡†å¤‡äº†ä¸€ä»½å¯ç”¨çš„å¯åŠ¨è„šæœ¬æ–‡ä»¶ï¼Œåœ¨/etc/rc.d/init.dç›®å½•ä¸­åˆ›å»ºè„šæœ¬æ–‡ä»¶å¹¶ç›´æ¥å¤åˆ¶ä¸‹é¢çš„è„šæœ¬å†…å®¹å³å¯ï¼ˆå·²ç»æœ‰äº†ç¬¬4ç« SHELLè„šæœ¬çš„å­¦ä¹ ç»å†ï¼Œè¿™ä¸ªè„šæœ¬åº”è¯¥æ˜¯å¯ä»¥å¤§è‡´çœ‹æ‡‚çš„å§ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/rc.d/init.d/nginx</span><br><span class="line">#!/bin/bash</span><br><span class="line"># nginx - this script starts and stops the nginx daemon</span><br><span class="line"># chkconfig: - 85 15</span><br><span class="line"># description: Nginx is an HTTP(S) server, HTTP(S) reverse \</span><br><span class="line"># proxy and IMAP/POP3 proxy server</span><br><span class="line"># processname: nginx</span><br><span class="line"># config: /etc/nginx/nginx.conf</span><br><span class="line"># config: /usr/local/nginx/conf/nginx.conf</span><br><span class="line"># pidfile: /usr/local/nginx/logs/nginx.pid</span><br><span class="line"># Source function library.</span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"># Source networking configuration.</span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"># Check that networking is up.</span><br><span class="line">[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0</span><br><span class="line">nginx=&quot;/usr/local/nginx/sbin/nginx&quot;</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line">NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot;</span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line">make_dirs() &#123;</span><br><span class="line"># make required directories</span><br><span class="line">user=`$nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:&quot; | sed &apos;s/[^*]*--user=\([^ ]*\).*/\1/g&apos; -`</span><br><span class="line">        if [ -z &quot;`grep $user /etc/passwd`&quot; ]; then</span><br><span class="line">                useradd -M -s /bin/nologin $user</span><br><span class="line">        fi</span><br><span class="line">options=`$nginx -V 2&gt;&amp;1 | grep &apos;configure arguments:&apos;`</span><br><span class="line">for opt in $options; do</span><br><span class="line">        if [ `echo $opt | grep &apos;.*-temp-path&apos;` ]; then</span><br><span class="line">                value=`echo $opt | cut -d &quot;=&quot; -f 2`</span><br><span class="line">                if [ ! -d &quot;$value&quot; ]; then</span><br><span class="line">                        # echo &quot;creating&quot; $value</span><br><span class="line">                        mkdir -p $value &amp;&amp; chown -R $user $value</span><br><span class="line">                fi</span><br><span class="line">        fi</span><br><span class="line">done</span><br><span class="line">&#125;</span><br><span class="line">start() &#123;</span><br><span class="line">[ -x $nginx ] || exit 5</span><br><span class="line">[ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">make_dirs</span><br><span class="line">echo -n $&quot;Starting $prog: &quot;</span><br><span class="line">daemon $nginx -c $NGINX_CONF_FILE</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; touch $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">stop() &#123;</span><br><span class="line">echo -n $&quot;Stopping $prog: &quot;</span><br><span class="line">killproc $prog -QUIT</span><br><span class="line">retval=$?</span><br><span class="line">echo</span><br><span class="line">[ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</span><br><span class="line">return $retval</span><br><span class="line">&#125;</span><br><span class="line">restart() &#123;</span><br><span class="line">#configtest || return $?</span><br><span class="line">stop</span><br><span class="line">sleep 1</span><br><span class="line">start</span><br><span class="line">&#125;</span><br><span class="line">reload() &#123;</span><br><span class="line">#configtest || return $?</span><br><span class="line">echo -n $&quot;Reloading $prog: &quot;</span><br><span class="line">killproc $nginx -HUP</span><br><span class="line">RETVAL=$?</span><br><span class="line">echo</span><br><span class="line">&#125;</span><br><span class="line">force_reload() &#123;</span><br><span class="line">restart</span><br><span class="line">&#125;</span><br><span class="line">configtest() &#123;</span><br><span class="line">$nginx -t -c $NGINX_CONF_FILE</span><br><span class="line">&#125;</span><br><span class="line">rh_status() &#123;</span><br><span class="line">status $prog</span><br><span class="line">&#125;</span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">start)</span><br><span class="line">        rh_status_q &amp;&amp; exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">restart|configtest)</span><br><span class="line">$1</span><br><span class="line">;;</span><br><span class="line">reload)</span><br><span class="line">        rh_status_q || exit 7</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">condrestart|try-restart)</span><br><span class="line">        rh_status_q || exit 0</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot;</span><br><span class="line">exit 2</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>ä¿å­˜è„šæœ¬æ–‡ä»¶åè®°å¾—ç»™äºˆ755æƒé™ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬å“¦ï½ç„¶åä»¥è·¯å¾„çš„æ–¹å¼æ‰§è¡Œè¿™ä¸ªè„šæœ¬å¹¶ç»™äºˆrestarté‡å¯è¯¥æœåŠ¡çš„å‚æ•°æ‰§è¡Œï¼Œå¹¶ä½¿ç”¨chkconfigå‘½ä»¤å°†å…¶æ·»åŠ è‡³å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼Œå¤§åŠŸå‘Šæˆå•¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe nginx-1.6.0]# chmod 755 /etc/rc.d/init.d/nginx</span><br><span class="line">[root@linuxprobe nginx-1.6.0]# /etc/rc.d/init.d/nginx restart</span><br><span class="line">Restarting nginx (via systemctl):                          [  OK  ]</span><br><span class="line">[root@linuxprobe nginx-1.6.0]# chkconfig nginx on</span><br></pre></td></tr></table></figure>
<p>NginxæœåŠ¡ç¨‹åºå¯åŠ¨åå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨æœ¬åœ°ç½‘å¡IPåœ°å€æŸ¥çœ‹åˆ°é»˜è®¤ç½‘é¡µå•¦ï¼Œç›¸æ¯”äºApacheæœåŠ¡ç¨‹åºçš„é‚£ç§çº¢è‰²çš„é»˜è®¤é¡µé¢ï¼ŒNginxæœåŠ¡ç¨‹åºæ˜¾å¾—æ›´åŠ çš„ç®€æ´å§ã€‚</p>
<h4 id="é…ç½®phpæœåŠ¡"><a href="#é…ç½®phpæœåŠ¡" class="headerlink" title="é…ç½®phpæœåŠ¡"></a>é…ç½®phpæœåŠ¡</h4><p>PHPè¶…æ–‡æœ¬é¢„å¤„ç†å™¨æ˜¯ä¸€ç§é€šç”¨çš„å¼€æºè„šæœ¬è¯­è¨€ï¼Œèµ·å§‹äº1995å¹´ï¼Œå®ƒå¸å–äº†å¦‚Cè¯­è¨€ã€Javaè¯­è¨€åŠPerlè¯­è¨€å¾ˆå¤šçš„ä¼˜ç‚¹ï¼Œå…·æœ‰å¼€æºã€å…è´¹ã€å¿«æ·ã€è·¨å¹³å°æ€§å¼ºã€æ•ˆç‡é«˜ç­‰ç­‰ä¼˜è‰¯ç‰¹æ€§ï¼Œæ˜¯ç›®å‰Webå¼€å‘é¢†åŸŸæœ€å¸¸ç”¨çš„è¯­è¨€ä¹‹ä¸€ï¼Œå’±ä»¬çš„ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹ä¹¦ç±åœ¨çº¿å­¦ä¹ ç«™ç‚¹ç³»ç»Ÿå°±æ˜¯åŸºäºPHPè¯­è¨€ç¯å¢ƒç¼–å†™åŠè¿è¡Œçš„ã€‚è€Œä½¿ç”¨æºç ç¼–è¯‘å®‰è£…PHPè¯­è¨€ç¯å¢ƒå…¶å®å¹¶ä¸å¤æ‚ï¼Œéš¾ç‚¹åœ¨äºè§£å†³PHPè¯­è¨€ç¨‹åºåŒ…å’Œå…¶ä»–è½¯ä»¶çš„ä¾èµ–å…³ç³»ä¸Šï¼Œéœ€è¦å…ˆå®‰è£…éƒ¨ç½²å°†è¿‘åä¸ªç”¨äºæ­å»ºç½‘ç«™é¡µé¢çš„è½¯ä»¶ç¨‹åºåŒ…ï¼Œç„¶åæ‰èƒ½æ­£å¼å®‰è£…PHPè¯­è¨€ç¨‹åºã€‚</p>
<p>yasmæºç åŒ…æ˜¯ä¸€æ¬¾å¸¸è§çš„å¼€æºæ±‡ç¼–å™¨ï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe nginx-1.6.0]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar zxvf yasm-1.2.0.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd yasm-1.2.0</span><br><span class="line">[root@linuxprobe yasm-1.2.0]# ./configure</span><br><span class="line">[root@linuxprobe yasm-1.2.0]# make</span><br><span class="line">[root@linuxprobe yasm-1.2.0]# make install</span><br></pre></td></tr></table></figure>
<p>libmcryptæºç åŒ…æ˜¯ç”¨äºåŠ å¯†ç®—æ³•çš„æ‰©å±•åº“ç¨‹åºï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe yasm-1.2.0]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar zxvf libmcrypt-2.5.8.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd libmcrypt-2.5.8</span><br><span class="line">[root@linuxprobe libmcrypt-2.5.8]# ./configure</span><br><span class="line">[root@linuxprobe libmcrypt-2.5.8]# make</span><br><span class="line">[root@linuxprobe libmcrypt-2.5.8]# make install</span><br></pre></td></tr></table></figure>
<p>libvpxæºç åŒ…æ˜¯ç”¨äºæä¾›è§†é¢‘ç¼–ç å™¨çš„æœåŠ¡ç¨‹åºï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼Œè‚¯å®šæœ‰å¾ˆå¤šä¸ç»†å¿ƒçš„åŒå­¦é¡ºæ‰‹å°±ç”¨äº†tarå‘½ä»¤çš„xzvfå‚æ•°ï¼Œä½†ä»”ç»†çœ‹ä¸€ä¸‹å°±ä¼šå‘ç°libvpxæºç åŒ…çš„åç¼€æ˜¯.tar.bz2ï¼Œä¹Ÿå°±æ˜¯ç”¨bzip2æ ¼å¼è¿›è¡Œçš„å‹ç¼©ï¼Œå› æ­¤è§£å‹çš„æ­£ç¡®å‚æ•°åº”è¯¥æ˜¯xjvfå“¦~ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe libmcrypt-2.5.8]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar xjvf libvpx-v1.3.0.tar.bz2</span><br><span class="line">[root@linuxprobe src]# cd libvpx-v1.3.0</span><br><span class="line">[root@linuxprobe libvpx-v1.3.0]# ./configure --prefix=/usr/local/libvpx --enable-shared --enable-vp9</span><br><span class="line">[root@linuxprobe libvpx-v1.3.0]# make</span><br><span class="line">[root@linuxprobe libvpx-v1.3.0]# make install</span><br></pre></td></tr></table></figure>
<p>tiffæºç åŒ…æ˜¯ç”¨äºæä¾›æ ‡ç­¾å›¾åƒæ–‡ä»¶æ ¼å¼çš„æœåŠ¡ç¨‹åºï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe libvpx-v1.3.0]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar zxvf tiff-4.0.3.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd tiff-4.0.3</span><br><span class="line">[root@linuxprobe tiff-4.0.3]# ./configure --prefix=/usr/local/tiff --enable-shared</span><br><span class="line">[root@linuxprobe tiff-4.0.3]# make</span><br><span class="line">[root@linuxprobe tiff-4.0.3]# make install</span><br></pre></td></tr></table></figure>
<p>libpngæºç åŒ…æ˜¯ç”¨äºæä¾›pngå›¾ç‰‡æ ¼å¼æ”¯æŒå‡½æ•°åº“çš„æœåŠ¡ç¨‹åºï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe tiff-4.0.3]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar zxvf libpng-1.6.12.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd libpng-1.6.12</span><br><span class="line">[root@linuxprobe libpng-1.6.12]# ./configure --prefix=/usr/local/libpng --enable-shared</span><br><span class="line">[root@linuxprobe libpng-1.6.12]# make</span><br><span class="line">[root@linuxprobe libpng-1.6.12]# make install</span><br></pre></td></tr></table></figure>
<p>freetypeæºç åŒ…æ˜¯ç”¨äºæä¾›å­—ä½“æ”¯æŒå¼•æ“çš„æœåŠ¡ç¨‹åºï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe libpng-1.6.12]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar zxvf freetype-2.5.3.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd freetype-2.5.3</span><br><span class="line">[root@linuxprobe freetype-2.5.3]# ./configure --prefix=/usr/local/freetype --enable-shared</span><br><span class="line">[root@linuxprobe freetype-2.5.3]# make</span><br><span class="line">[root@linuxprobe freetype-2.5.3]# make install</span><br></pre></td></tr></table></figure>
<p>jpegæºç åŒ…æ˜¯ç”¨äºæä¾›jpegå›¾ç‰‡æ ¼å¼æ”¯æŒå‡½æ•°åº“çš„æœåŠ¡ç¨‹åºï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe freetype-2.5.3]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar zxvf jpegsrc.v9a.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd jpeg-9a</span><br><span class="line">[root@linuxprobe jpeg-9a]# ./configure --prefix=/usr/local/jpeg --enable-shared</span><br><span class="line">[root@linuxprobe jpeg-9a]# make</span><br><span class="line">[root@linuxprobe jpeg-9a]# make install</span><br></pre></td></tr></table></figure>
<p>libgdæºç åŒ…æ˜¯ç”¨äºæä¾›å›¾å½¢å¤„ç†çš„æœåŠ¡ç¨‹åºï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼Œè€Œåœ¨ç¼–è¯‘libgdæºç åŒ…çš„æ—¶å€™è¯·è®°å¾—å†™å…¥çš„æ˜¯jpegã€libpngã€freetypeã€tiffã€libvpxç­‰æœåŠ¡ç¨‹åºåœ¨ç³»ç»Ÿä¸­çš„å®‰è£…è·¯å¾„ï¼Œå³åœ¨ä¸Šé¢å®‰è£…è¿‡ç¨‹ä¸­ä½¿ç”¨â€“prefixå‚æ•°æŒ‡å®šçš„ç›®å½•è·¯å¾„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe jpeg-9a]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar zxvf libgd-2.1.0.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd libgd-2.1.0</span><br><span class="line">[root@linuxprobe libgd-2.1.0]# ./configure --prefix=/usr/local/libgd --enable-shared --with-jpeg=/usr/local/jpeg --with-png=/usr/local/libpng --with-freetype=/usr/local/freetype --with-fontconfig=/usr/local/freetype --with-xpm=/usr/ --with-tiff=/usr/local/tiff --with-vpx=/usr/local/libvpx</span><br><span class="line">[root@linuxprobe libgd-2.1.0]# make</span><br><span class="line">[root@linuxprobe libgd-2.1.0]# make install</span><br></pre></td></tr></table></figure>
<p>t1libæºç åŒ…æ˜¯ç”¨äºæä¾›å›¾ç‰‡ç”Ÿæˆå‡½æ•°åº“çš„æœåŠ¡ç¨‹åºï¼Œè§£å‹ã€ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹è¾“å‡ºä¿¡æ¯å·²çœç•¥ï¼Œå®‰è£…åæŠŠ/usr/lib64ç›®å½•ä¸­çš„å‡½æ•°æ–‡ä»¶åšä¸€ä¸ªè¿æ¥åˆ°/usr/libç›®å½•ä¸­ï¼Œä»¥ä¾¿ç³»ç»Ÿèƒ½å¤Ÿé¡ºåˆ©è°ƒå–åˆ°å‡½æ•°æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe cd libgd-2.1.0]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar zxvf t1lib-5.1.2.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd t1lib-5.1.2</span><br><span class="line">[root@linuxprobe t1lib-5.1.2]# ./configure --prefix=/usr/local/t1lib --enable-shared</span><br><span class="line">[root@linuxprobe t1lib-5.1.2]# make</span><br><span class="line">[root@linuxprobe t1lib-5.1.2]# make install</span><br><span class="line">[root@linuxprobe t1lib-5.1.2]# ln -s /usr/lib64/libltdl.so /usr/lib/libltdl.so </span><br><span class="line">[root@linuxprobe t1lib-5.1.2]# cp -frp /usr/lib64/libXpm.so* /usr/lib/</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ç»ˆäºæŠŠç¼–è¯‘phpæœåŠ¡æºç åŒ…çš„ç›¸å…³è½¯ä»¶åŒ…éƒ½å·²ç»å®‰è£…éƒ¨ç½²å¦¥å½“äº†ï¼Œåœ¨å¼€å§‹ç¼–è¯‘æºç åŒ…å‰å…ˆå®šä¹‰ä¸€ä¸ªåç§°ä¸ºLD_LIBRARY_PATHçš„å…¨å±€ç¯å¢ƒå˜é‡ï¼Œè¯¥ç¯å¢ƒå˜é‡çš„ä½œç”¨æ˜¯å¸®åŠ©ç³»ç»Ÿæ‰¾åˆ°æŒ‡å®šçš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼Œæ˜¯ç¼–è¯‘phpæœåŠ¡æºç åŒ…çš„å¿…é¡»å…ƒç´ ä¹‹ä¸€ã€‚ç¼–è¯‘phpæœåŠ¡æºç åŒ…æ—¶é™¤äº†å®šä¹‰è¦å®‰è£…åˆ°çš„ç›®å½•ä»¥å¤–ï¼Œè¿˜éœ€è¦ä¾æ¬¡å®šä¹‰é…ç½®PhpæœåŠ¡é…ç½®æ–‡ä»¶ä¿å­˜ç›®å½•ã€Mysqlæ•°æ®åº“æœåŠ¡ç¨‹åºæ‰€åœ¨ç›®å½•ã€Mysqlæ•°æ®åº“æœåŠ¡ç¨‹åºé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ä»¥åŠlibpngã€jpegã€freetypeã€libvpxã€zlibã€t1libç­‰ç­‰æœåŠ¡ç¨‹åºçš„å®‰è£…ç›®å½•è·¯å¾„ï¼Œå¹¶é€šè¿‡å‚æ•°å¯åŠ¨phpæœåŠ¡ç¨‹åºçš„è¯¸å¤šé»˜è®¤åŠŸèƒ½ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe t1lib-5.1.2]# cd ..</span><br><span class="line">[root@linuxprobe src]# tar -zvxf php-5.5.14.tar.gz</span><br><span class="line">[root@linuxprobe src]# cd php-5.5.14</span><br><span class="line">[root@linuxprobe php-5.5.14]# export LD_LIBRARY_PATH=/usr/local/libgd/lib</span><br><span class="line">[root@linuxprobe php-5.5.14]# ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql=/usr/local/mysql --with-mysqli=/usr/local/mysql/bin/mysql_config --with-mysql-sock=/tmp/mysql.sock --with-pdo-mysql=/usr/local/mysql --with-gd --with-png-dir=/usr/local/libpng --with-jpeg-dir=/usr/local/jpeg --with-freetype-dir=/usr/local/freetype --with-xpm-dir=/usr/ --with-vpx-dir=/usr/local/libvpx/ --with-zlib-dir=/usr/local/zlib --with-t1lib=/usr/local/t1lib --with-iconv --enable-libxml --enable-xml --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --enable-opcache --enable-mbregex --enable-fpm --enable-mbstring --enable-ftp --enable-gd-native-ttf --with-openssl --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --without-pear --with-gettext --enable-session --with-mcrypt --with-curl --enable-ctype </span><br><span class="line">[root@linuxprobe php-5.5.14]# make</span><br><span class="line">[root@linuxprobe php-5.5.14]# make install</span><br></pre></td></tr></table></figure>
<p>åœ¨ç­‰å¾…phpæºç åŒ…ç¨‹åºå®‰è£…å®Œæˆåï¼Œéœ€è¦åˆ é™¤æ‰å½“å‰é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åä»phpæœåŠ¡ç¨‹åºç›®å½•ä¸­å¤åˆ¶å¯¹åº”çš„é…ç½®æ–‡ä»¶è¿‡æ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe php-5.5.14]# rm -rf /etc/php.ini</span><br><span class="line">[root@linuxprobe php-5.5.14]# ln -s /usr/local/php/etc/php.ini /etc/php.ini</span><br><span class="line">[root@linuxprobe php-5.5.14]# cp php.ini-production /usr/local/php/etc/php.ini</span><br><span class="line">[root@linuxprobe php-5.5.14]# cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</span><br><span class="line">[root@linuxprobe php-5.5.14]# ln -s /usr/local/php/etc/php-fpm.conf /etc/php-fpm.conf</span><br></pre></td></tr></table></figure>
<p>php-fpm.confæ˜¯phpæœåŠ¡ç¨‹åºçš„é‡è¦é…ç½®æ–‡ä»¶ä¹‹ä¸€ï¼Œå’±ä»¬éœ€è¦å°†å…¶é…ç½®å†…å®¹ä¸­çº¦25è¡Œå·¦å³çš„pidæ–‡ä»¶ä¿å­˜è·¯å¾„å¯ç”¨ï¼Œå¹¶åœ¨çº¦148-149è¡Œçš„userä¸groupå‚æ•°åˆ†åˆ«ä¿®æ”¹ä¸ºwwwå¸æˆ·å’Œç”¨æˆ·ç»„åç§°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe php-5.5.14]# vim /usr/local/php/etc/php-fpm.conf</span><br><span class="line">1 ;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">2 ; FPM Configuration ;</span><br><span class="line">3 ;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">4 </span><br><span class="line">5 ; All relative paths in this configuration file are relative to PHP&apos;s instal l</span><br><span class="line">6 ; prefix (/usr/local/php). This prefix can be dynamically changed by using t he</span><br><span class="line">7 ; &apos;-p&apos; argument from the command line.</span><br><span class="line">8 </span><br><span class="line">9 ; Include one or more files. If glob(3) exists, it is used to include a bunc h of</span><br><span class="line">10 ; files from a glob(3) pattern. This directive can be used everywhere in the</span><br><span class="line">11 ; file.</span><br><span class="line">12 ; Relative path can also be used. They will be prefixed by:</span><br><span class="line">13 ; - the global prefix if it&apos;s been set (-p argument)</span><br><span class="line">14 ; - /usr/local/php otherwise</span><br><span class="line">15 ;include=etc/fpm.d/*.conf</span><br><span class="line">16 </span><br><span class="line">17 ;;;;;;;;;;;;;;;;;;</span><br><span class="line">18 ; Global Options ;</span><br><span class="line">19 ;;;;;;;;;;;;;;;;;;</span><br><span class="line">20 </span><br><span class="line">21 [global]</span><br><span class="line">22 ; Pid file</span><br><span class="line">23 ; Note: the default prefix is /usr/local/php/var</span><br><span class="line">24 ; Default Value: none</span><br><span class="line">25 pid = run/php-fpm.pid</span><br><span class="line">26 </span><br><span class="line">â€¦â€¦â€¦â€¦â€¦â€¦çœç•¥éƒ¨åˆ†è¾“å‡ºä¿¡æ¯â€¦â€¦â€¦â€¦â€¦â€¦</span><br><span class="line">145 ; Unix user/group of processes</span><br><span class="line">146 ; Note: The user is mandatory. If the group is not set, the default user&apos;s g roup</span><br><span class="line">147 ; will be used.</span><br><span class="line">148 user = www</span><br><span class="line">149 group = www</span><br><span class="line">150 </span><br><span class="line">â€¦â€¦â€¦â€¦â€¦â€¦çœç•¥éƒ¨åˆ†è¾“å‡ºä¿¡æ¯â€¦â€¦â€¦â€¦â€¦â€¦</span><br></pre></td></tr></table></figure>
<p>é…ç½®å¦¥å½“åä¾¿å¯æŠŠæœåŠ¡ç®¡ç†è„šæœ¬æ–‡ä»¶å¤åˆ¶åˆ°/etc/rc.d/init.dä¸­å•¦ï¼Œä¸ºäº†èƒ½å¤Ÿæœ‰æ‰§è¡Œè„šæœ¬è¯·è®°å¾—è¦ç»™äºˆ755æƒé™ï¼Œæœ€åæŠŠphp-fpmæœåŠ¡ç¨‹åºåŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe php-5.5.14]# cp sapi/fpm/init.d.php-fpm /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@linuxprobe php-5.5.14]# chmod 755 /etc/rc.d/init.d/php-fpm</span><br><span class="line">[root@linuxprobe php-5.5.14]# chkconfig php-fpm on</span><br></pre></td></tr></table></figure>
<p>ç”±äºphpæœåŠ¡ç¨‹åºçš„é…ç½®å‚æ•°ç›´æ¥ä¼šå½±å“åˆ°Webç½‘ç«™æœåŠ¡çš„è¿è¡Œç¯å¢ƒï¼Œå¦‚æœé»˜è®¤å¼€å¯äº†ä¾‹å¦‚å…è®¸ç”¨æˆ·åœ¨ç½‘é¡µä¸­æ‰§è¡ŒLinuxå‘½ä»¤ç­‰ç­‰ä¸å¿…è¦ä¸”é«˜å±çš„åŠŸèƒ½ï¼Œè¿›è€Œä¼šé™ä½äº†éª‡å®¢å…¥ä¾µç½‘ç«™çš„éš¾åº¦ï¼Œç”šè‡³åŠ å¤§äº†éª‡å®¢ææƒåˆ°æ•´å°æœåŠ¡å™¨çš„ç®¡ç†æƒé™çš„å‡ ç‡ã€‚å› æ­¤éœ€è¦ç¼–è¾‘php.inié…ç½®æ–‡ä»¶ï¼Œåœ¨çº¦305å·¦å³çš„disable_functionså‚æ•°åé¢è¿½åŠ ä¸Šè¦ç¦æ­¢çš„åŠŸèƒ½åç§°å§ï¼Œä¸‹é¢çš„ç¦ç”¨åŠŸèƒ½åå•æ˜¯åˆ˜é„è€å¸ˆä¾æ®è¿è¥ç½‘ç«™ç»éªŒè€Œå®šåˆ¶çš„ï¼Œä¹Ÿè®¸å¹¶ä¸èƒ½é€‚åˆæ¯ä¸ªç”Ÿäº§ç¯å¢ƒï¼ŒåŒå­¦ä»¬å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ ¹æ®è‡ªèº«å·¥ä½œè¦æ±‚è€Œé…Œæƒ…åˆ å‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe php-5.5.14]# vim /usr/local/php/etc/php.ini</span><br><span class="line">â€¦â€¦â€¦â€¦â€¦â€¦çœç•¥éƒ¨åˆ†è¾“å‡ºä¿¡æ¯â€¦â€¦â€¦â€¦â€¦â€¦</span><br><span class="line">300 </span><br><span class="line">301 ; This directive allows you to disable certain functions for security reasons.</span><br><span class="line">302 ; It receives a comma-delimited list of function names. This directive is</span><br><span class="line">303 ; *NOT* affected by whether Safe Mode is turned On or Off.</span><br><span class="line">304 ; http://php.net/disable-functions</span><br><span class="line">305 disable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restor e,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,g etservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd,posix_getegid,posix_geteuid,posix_getgid,po six_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid,posix_getppid,posix_getpwnam,posix_ getpwuid,posix_getrlimit,posix_getsid,posix_getuid,posix_isatty,posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid,posix_ setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname</span><br><span class="line">306 </span><br><span class="line">â€¦â€¦â€¦â€¦â€¦â€¦çœç•¥éƒ¨åˆ†è¾“å‡ºä¿¡æ¯â€¦â€¦â€¦â€¦â€¦â€¦</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±æŠŠphpæœåŠ¡ç¨‹åºé…ç½®å¦¥å½“äº†ï¼Œæœ€åè¿˜éœ€è¦å†ç¼–è¾‘ä¸€ä¸‹nginxæœåŠ¡ç¨‹åºçš„ä¸»é…ç½®æ–‡ä»¶ï¼ŒæŠŠçº¦ç¬¬2è¡Œçš„#ï¼ˆäº•å·ï¼‰å»é™¤ï¼Œåé¢å†™ä¸Šè´Ÿè´£è¿è¡ŒnginxæœåŠ¡ç¨‹åºçš„å¸æˆ·åç§°ç”¨æˆ·ç»„åç§°ï¼ŒæŠŠçº¦45è¡Œå·¦å³çš„indexå‚æ•°åé¢å†™ä¸Šç½‘ç«™çš„é¦–é¡µåç§°ã€‚æœ€åæ˜¯æŠŠçº¦ç¬¬65-71è¡Œå‚æ•°å‰çš„#ï¼ˆäº•å·ï¼‰å»é™¤æ¥å¯åŠ¨å‚æ•°ï¼Œä¸»è¦æ˜¯ä¿®æ”¹çº¦ç¬¬69è¡Œçš„è„šæœ¬åç§°è·¯å¾„å‚æ•°ï¼Œå…¶ä¸­$document_rootå˜é‡å³ä¸ºç½‘ç«™èµ„æ–™å­˜å‚¨çš„æ ¹ç›®å½•è·¯å¾„ï¼Œè‹¥æ²¡æœ‰è®¾ç½®çš„è¯nginxæœåŠ¡ç¨‹åºæ˜¯æ‰¾ä¸åˆ°ç½‘ç«™èµ„æ–™çš„ï¼Œå› æ­¤ä¼šæç¤ºå‡º404é¡µé¢æœªæ‰¾åˆ°çš„æŠ¥é”™ä¿¡æ¯ï¼Œç¡®è®¤å‚æ•°ä¿¡æ¯å¡«å†™æ­£ç¡®åä¾¿å¯é‡å¯nginxæœåŠ¡ä¸php-fpmæœåŠ¡ï¼Œç»“æŸäº†å¯¹LNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒæ¶æ„çš„é…ç½®å®éªŒã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe php-5.5.14]# vim /usr/local/nginx/conf/nginx.conf</span><br><span class="line"> 1 </span><br><span class="line"> 2 user www www;</span><br><span class="line"> 3 worker_processes 1;</span><br><span class="line"> 4 </span><br><span class="line"> 5 #error_log logs/error.log;</span><br><span class="line"> 6 #error_log logs/error.log notice;</span><br><span class="line"> 7 #error_log logs/error.log info;</span><br><span class="line"> 8 </span><br><span class="line"> 9 #pid logs/nginx.pid;</span><br><span class="line"> 10 </span><br><span class="line"> 11 </span><br><span class="line">â€¦â€¦â€¦â€¦â€¦â€¦çœç•¥éƒ¨åˆ†è¾“å‡ºä¿¡æ¯â€¦â€¦â€¦â€¦â€¦â€¦</span><br><span class="line"> 40 </span><br><span class="line"> 41 #access_log logs/host.access.log main;</span><br><span class="line"> 42 </span><br><span class="line"> 43 location / &#123;</span><br><span class="line"> 44 root html;</span><br><span class="line"> 45 index index.html index.htm index.php;</span><br><span class="line"> 46 &#125;</span><br><span class="line"> 47 </span><br><span class="line">â€¦â€¦â€¦â€¦â€¦â€¦çœç•¥éƒ¨åˆ†è¾“å‡ºä¿¡æ¯â€¦â€¦â€¦â€¦â€¦â€¦</span><br><span class="line"> 62 </span><br><span class="line"> 63 #pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line"> 64 </span><br><span class="line"> 65 location ~ \.php$ &#123;</span><br><span class="line"> 66 root html;</span><br><span class="line"> 67 fastcgi_pass 127.0.0.1:9000;</span><br><span class="line"> 68 fastcgi_index index.php;</span><br><span class="line"> 69 fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line"> 70 include fastcgi_params;</span><br><span class="line"> 71 &#125;</span><br><span class="line"> 72 </span><br><span class="line">â€¦â€¦â€¦â€¦â€¦â€¦çœç•¥éƒ¨åˆ†è¾“å‡ºä¿¡æ¯â€¦â€¦â€¦â€¦â€¦â€¦</span><br><span class="line">[root@linuxprobe php-5.5.14]# systemctl restart nginx</span><br><span class="line">[root@linuxprobe php-5.5.14]# systemctl restart php-fpm</span><br></pre></td></tr></table></figure>
<h4 id="æ­å»ºDiscuzè®ºå›"><a href="#æ­å»ºDiscuzè®ºå›" class="headerlink" title="æ­å»ºDiscuzè®ºå›"></a>æ­å»ºDiscuzè®ºå›</h4><p> <a href="http://www.linuxprobe.com/chapter-20.html#203_Discuz" target="_blank" rel="noopener">æ­å»ºDiscuzè®ºå›</a><br>ä¸ºäº†èƒ½å¤Ÿæ£€éªŒLNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒæ˜¯å¦é…ç½®å¦¥å½“ï¼Œå’±ä»¬å¯ä»¥ä½¿ç”¨Discuzç³»ç»Ÿéƒ¨ç½²ä¸Šå»è¯•è¯•çœ‹ï¼ŒDiscuz X3.2æ˜¯ç”±å›½å†…æœ€å¸¸è§çš„ç¤¾åŒºè®ºå›ç³»ç»Ÿï¼Œç»è¿‡åå¤šå¹´çš„ç ”å‘è¿‡ç¨‹å·²ç»æˆä¸ºäº†å…¨çƒæˆç†Ÿåº¦æœ€é«˜ã€è¦†ç›–ç‡æœ€å¹¿çš„è®ºå›ç½‘ç«™ç³»ç»Ÿä¹‹ä¸€ã€‚å¦‚æœèƒ½å¤Ÿåœ¨éƒ¨ç½²çš„LNMPåŠ¨æ€ç½‘ç«™ç¯å¢ƒä¸­æˆåŠŸå®‰è£…ä½¿ç”¨Discuzè®ºå›ç³»ç»Ÿï¼Œä¹Ÿå°±æ„å‘³ç€è¿™å¥—æ¶æ„æ˜¯å¯ç”¨çš„ã€‚Discuz X3.2è½¯ä»¶åŒ…çš„åç¼€æ˜¯.zipæ ¼å¼ï¼Œå› æ­¤åº”å½“ç”¨ä¸“ç”¨çš„unzipå‘½ä»¤æ¥è¿›è¡Œè§£å‹æ“ä½œï¼Œè§£å‹åä¼šåœ¨å½“å‰ç›®å½•ä¸­å‡ºç°ä¸€ä¸ªåä¸ºuploadçš„æ–‡ä»¶ç›®å½•ï¼Œè¿™é‡Œé¢ä¿å­˜çš„å°±æ˜¯Discuzè®ºå›çš„èµ„æ–™ç¨‹åºï¼Œå’±ä»¬æŠŠnginxæœåŠ¡ç¨‹åºç½‘ç«™æ ¹ç›®å½•çš„å†…å®¹æ¸…ç©ºåå°±å¯ä»¥æŠŠè¿™äº›æ–‡ä»¶éƒ½å¤åˆ¶è¿›å»äº†ï¼Œè®°å¾—æŠŠè¯¥ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€æœ‰ç»„ä¿®æ”¹ä¸ºwwwç”¨æˆ·ï¼Œå¹¶è®¾ç½®755æƒé™ä»¥ä¾¿äºèƒ½å¤Ÿè¯»ã€å†™ã€æ‰§è¡Œè¯¥è®ºå›ç³»ç»Ÿå†…çš„æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxprobe php-5.5.14 ]# cd /usr/local/src/</span><br><span class="line">[root@linuxprobe src]# unzip Discuz_X3.2_SC_GBK.zip</span><br><span class="line">[root@linuxprobe src]# rm -rf /usr/local/nginx/html/&#123;index.html,50x.html&#125;*</span><br><span class="line">[root@linuxprobe src]# mv upload/* /usr/local/nginx/html/</span><br><span class="line">[root@linuxprobe src]# chown -Rf www:www /usr/local/nginx/html</span><br><span class="line">[root@linuxprobe src]# chmod -Rf 755 /usr/local/nginx/html</span><br></pre></td></tr></table></figure>
<h4 id="é€‰è´­æœåŠ¡å™¨ä¸»æœº"><a href="#é€‰è´­æœåŠ¡å™¨ä¸»æœº" class="headerlink" title="é€‰è´­æœåŠ¡å™¨ä¸»æœº"></a>é€‰è´­æœåŠ¡å™¨ä¸»æœº</h4><p>äººä»¬æ—¥å¸¸è®¿é—®çš„ç½‘ç«™æ˜¯ç”±åŸŸåã€ç½‘ç«™æºç¨‹åºå’Œä¸»æœºç©ºé—´å…±åŒç»„æˆçš„ï¼Œå…¶ä¸­ä¸»æœºç©ºé—´åˆ™æ˜¯ç”¨äºå­˜æ”¾ç½‘é¡µæºä»£ç å¹¶èƒ½å¤ŸæŠŠç½‘é¡µå†…å®¹å±•ç¤ºç»™ç”¨æˆ·çš„æœåŠ¡å™¨ï¼Œæ—¢ç„¶åŒå­¦ä»¬å·²ç»ç»“æŸäº†å¯¹ã€ŠLinuxå°±è¯¥è¿™ä¹ˆå­¦ã€‹åŸºç¡€ç¯‡çš„å­¦ä¹ æ—…ç¨‹ï¼Œåˆ˜é„è€å¸ˆå†æœ€åå•°å—¦ä¸€ä¸‹è¿™å‡ å¹´åšç½‘ç«™æ€»ç»“çš„æœåŠ¡å™¨ä¸»æœºé€‰è´­çš„æŠ€å·§å§ï¼Œè¿™æ ·æ‚¨ä¹Ÿå¯ä»¥å»æ­å»ºå‡ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢æˆ–è®ºå›ç½‘ç«™å•¦ï¼Œèƒ½å¤ŸæŠŠè‡ªå·±æ‰€å­¦çš„LinuxæŠ€æœ¯å¹²è´§åˆ†äº«ç»™æ›´å¤šäººï¼Œæ„¿å¼€æºä¸–ç•Œç¾å¥½çš„è„šæ­¥æ›´å¿«ä¸€äº›ã€‚</p>
<p>è™šæ‹Ÿä¸»æœº:åœ¨ä¸€å°æœåŠ¡å™¨ä¸­åˆ†å‡ºä¸€å®šçš„ç£ç›˜ç©ºé—´ä¾›ç”¨æˆ·æ”¾ç½®ç½‘ç«™ã€å­˜æ”¾æ•°æ®ç­‰ï¼Œä»…æä¾›åŸºç¡€çš„ç½‘ç«™è®¿é—®ã€æ•°æ®å­˜æ”¾ä¸ä¼ è¾“æµé‡åŠŸèƒ½ï¼Œèƒ½å¤Ÿæå¤§çš„é™ä½ç”¨æˆ·è´¹ç”¨ï¼Œä¹Ÿå‡ ä¹ä¸éœ€è¦ç®¡ç†å‘˜ç»´æŠ¤é™¤ç½‘ç«™æ•°æ®ä»¥å¤–çš„æœåŠ¡ï¼Œé€‚åˆå°å‹ç½‘ç«™ã€‚</p>
<p>VPS(Virtual Private Srver):åœ¨ä¸€å°æœåŠ¡å™¨ä¸­åˆ©ç”¨OpenVZã€Xenæˆ–KVMç­‰è™šæ‹ŸåŒ–æŠ€æœ¯æ¨¡æ‹Ÿå‡ºå¤šä¸ªâ€œä¸»æœºâ€ï¼Œæ¯ä¸ªä¸»æœºéƒ½æœ‰ç‹¬ç«‹çš„IPåœ°å€ã€æ“ä½œç³»ç»Ÿï¼Œå®ç°ä¸åŒVPSä¹‹é—´ç£ç›˜ç©ºé—´ã€å†…å­˜ã€CPUèµ„æºã€è¿›ç¨‹ä¸ç³»ç»Ÿé…ç½®é—´çš„å®Œå…¨éš”ç¦»ï¼Œç®¡ç†å‘˜å¯è‡ªç”±ä½¿ç”¨åˆ†é…åˆ°çš„ä¸»æœºä¸­çš„æ‰€æœ‰èµ„æºï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸€å®šçš„ç»´æŠ¤ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œé€‚åˆå°å‹ç½‘ç«™ã€‚</p>
<p>äº‘æœåŠ¡å™¨(ECS):æ˜¯ä¸€ç§æ•´åˆäº†è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œï¼Œèƒ½å¤Ÿåšåˆ°å¼¹æ€§ä¼¸ç¼©çš„è®¡ç®—æœåŠ¡ï¼Œå…¶ä½¿ç”¨èµ·æ¥ä¸VPSå‡ ä¹ä¸€æ ·ï¼Œä½†å·®åˆ«æ˜¯äº‘æœåŠ¡å™¨å»ºç«‹åœ¨ä¸€ç»„é›†ç¾¤æœåŠ¡å™¨ä¸­ï¼Œæ¯ä¸ªæœåŠ¡å™¨éƒ½ä¼šä¿å­˜ä¸€ä¸ªä¸»æœºçš„é•œåƒï¼ˆå¤‡ä»½ï¼‰ï¼Œå¤§å¤§çš„æå‡äº†å®‰å…¨ç¨³å®šæ€§ï¼Œå¦å¤–è¿˜å…·å¤‡äº†çµæ´»æ€§ä¸æ‰©å±•æ€§ï¼Œç”¨æˆ·åªéœ€æŒ‰ä½¿ç”¨é‡ä»˜è´¹å³å¯ï¼Œé€‚åˆå¤§ä¸­å°å‹ç½‘ç«™ã€‚</p>
<p>ç‹¬ç«‹æœåŠ¡å™¨:è¿™å°æœåŠ¡å™¨ä»…æä¾›ç»™æ‚¨ä½¿ç”¨ï¼Œè¯¦ç»†æ¥è®²åˆå¯ä»¥åŒºåˆ†ä¸ºç§Ÿç”¨æ–¹å¼ä¸æ‰˜ç®¡æ–¹å¼ã€‚ç§Ÿç”¨æ–¹å¼æ˜¯ç”¨æˆ·åªéœ€æŠŠç¡¬ä»¶é…ç½®è¦æ±‚å‘ŠçŸ¥IDCæœåŠ¡å•†ï¼ŒæœåŠ¡å™¨ç¡¬ä»¶è®¾å¤‡ç”±æœºæˆ¿è´Ÿè´£ç»´æŠ¤ï¼Œè¿ç»´ç®¡ç†å‘˜ä¸€èˆ¬éœ€è¦è‡ªè¡Œå®‰è£…ç›¸åº”çš„è½¯ä»¶å¹¶éƒ¨ç½²ç½‘ç«™æœåŠ¡ï¼Œç§ŸæœŸå¯ä»¥ä¸ºæœˆã€å­£ã€å¹´ï¼Œå‡è½»äº†ç”¨æˆ·åˆæœŸå¯¹ç¡¬ä»¶è®¾å¤‡çš„æŠ•å…¥ï¼Œé€‚åˆå¤§ä¸­å‹ç½‘ç«™ã€‚æ‰˜ç®¡æ–¹å¼æ˜¯ç”¨æˆ·éœ€è¦è‡ªè¡Œè´­ç½®æœåŠ¡å™¨åäº¤ç»™IDCæœåŠ¡ä¾›åº”å•†çš„æœºæˆ¿è¿›è¡Œç®¡ç†(ç¼´çº³ç®¡ç†æœåŠ¡è´¹ç”¨)ï¼Œç”¨æˆ·å¯¹æœåŠ¡å™¨ç¡¬ä»¶é…ç½®æœ‰å®Œå…¨çš„æ§åˆ¶æƒï¼Œè‡ªä¸»æ€§å¼ºï¼Œä½†éœ€è¦è‡ªè¡Œç»´æŠ¤ã€ä¿®ç†æœåŠ¡å™¨ç¡¬ä»¶è®¾å¤‡ï¼Œé€‚åˆå¤§ä¸­å‹ç½‘ç«™ã€‚</p>
<p>å¦å¤–æœ‰å¿…è¦æé†’è¯»è€…ï¼Œé€‰æ‹©ä¸»æœºç©ºé—´ä¾›åº”å•†æ—¶è¯·ä¸€å®šè¦æ³¨æ„çœ‹å£ç¢‘ï¼Œç»¼åˆåˆ†æå†å†³å®šè´­ä¹°ï¼ŒæŸäº›ä¾›åº”å•†ä¼šæœ‰é™åˆ¶åŠŸèƒ½ã€å¼ºåˆ¶æ·»åŠ å¹¿å‘Šã€éšè—æ‰£è´¹æˆ–å¼ºåˆ¶æ‰£è´¹ç­‰æ¶åŠ£è¡Œä¸ºï¼Œä¸€å®šä¸€å®šä¸è¦ä¸Šå½“!</p>
<h2 id="è¯¾å¤–"><a href="#è¯¾å¤–" class="headerlink" title="è¯¾å¤–"></a>è¯¾å¤–</h2><h3 id="ä½¿ç”¨Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"><a href="#ä½¿ç”¨Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ" class="headerlink" title="ä½¿ç”¨Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"></a><a href="http://www.linuxprobe.com/chapter-21.html" target="_blank" rel="noopener">ä½¿ç”¨Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</a></h3><h4 id="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h4><p>æˆ‘æƒ³å¤§å®¶è¿˜è®°å¾—å‰é¢ç« èŠ‚ä¸­è°ˆåˆ°è¿‡Linus torvaldsåœ¨1991å¹´æ—¶å‘å¸ƒäº†Linuxæ“ä½œç³»ç»Ÿå§ï¼Œä»é‚£ä»¥åLinuxç³»ç»Ÿä¾¿ä¸æ–­å‘å±•å£®å¤§ï¼Œå› ä¸ºLinuxç³»ç»Ÿå¼€æºçš„ç‰¹æ€§ï¼Œæ‰€ä»¥ä¸€ç›´æ¥å—ç€æ¥è‡ªå…¨çƒLinuxæŠ€æœ¯çˆ±å¥½è€…çš„è´¡çŒ®ï¼Œå¿—æ„¿è€…ä»¬é€šè¿‡é‚®ä»¶å‘Linuså‘é€ç€è‡ªå·±ç¼–å†™çš„æºä»£ç æ–‡ä»¶ï¼Œç„¶åç”±Linusæœ¬äººé€šè¿‡æ‰‹å·¥çš„æ–¹å¼å°†ä»£ç åˆå¹¶ï¼Œä½†è¿™æ ·ä¸ä»…æ²¡æœ‰æ•ˆç‡ï¼Œè€Œä¸”çœŸçš„æ˜¯å¤ªç—›è‹¦äº†ã€‚<br>ä¸€ç›´åˆ°2002å¹´ï¼ŒLinuxç³»ç»Ÿç»è¿‡åä½™å¹´çš„ä¸æ–­å‘å±•ï¼Œä»£ç åº“å·²ç»åºå¤§åˆ°æ— æ³•å†é€šè¿‡æ‰‹å·¥çš„æ–¹å¼ç®¡ç†äº†ï¼Œä½†æ˜¯LinusçœŸçš„å¾ˆä¸å–œæ¬¢ç±»ä¼¼äºCVSæˆ–è€…Subversionçš„ä¸€äº›ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œäºæ˜¯å•†ä¸šå…¬å¸BitMoverå†³å®šå°†å…¶å…¬å¸çš„BitKeeperåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæˆæƒç»™Linuxå¼€å‘ç¤¾åŒºæ¥å…è´¹ä½¿ç”¨ï¼Œå½“æ—¶çš„BitKeeperå¯ä»¥æ¯”è¾ƒæ–‡ä»¶å†…å®¹çš„ä¸åŒï¼Œè¿˜èƒ½å¤Ÿå°†å‡ºé”™çš„æ–‡æ¡£è¿˜åŸåˆ°å†å²æŸä¸ªçŠ¶æ€ï¼ŒLinusç»ˆäºæ”¾ä¸‹äº†å¿ƒé‡Œçš„çŸ³å¤´ã€‚</p>
<p>CVSå’ŒSubversionå±äºä¼ ç»Ÿçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè€Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä¸éœ€è¦æ¯æ¬¡æäº¤éƒ½æŠŠæ–‡ä»¶æ¨é€åˆ°ç‰ˆæœ¬æ§åˆ¶æœåŠ¡å™¨ï¼Œè€Œæ˜¯é‡‡ç”¨åˆ†å¸ƒå¼ç‰ˆæœ¬åº“çš„æœºåˆ¶ï¼Œä½¿å¾—æ¯ä¸ªå¼€å‘äººå‘˜éƒ½å¤Ÿä»æœåŠ¡å™¨ä¸­å…‹éš†ä¸€ä»½å®Œæ•´çš„ç‰ˆæœ¬åº“åˆ°è‡ªå·±è®¡ç®—æœºæœ¬åœ°ï¼Œä¸å¿…å†å®Œå…¨ä¾èµ–äºç‰ˆæœ¬æ§åˆ¶æœåŠ¡å™¨ï¼Œä½¿å¾—æºä»£ç çš„å‘å¸ƒå’Œåˆå¹¶æ›´åŠ æ–¹ä¾¿ï¼Œå¹¶ä¸”å› ä¸ºæ•°æ®éƒ½åœ¨è‡ªå·±æœ¬åœ°ï¼Œä¸ä»…æ•ˆç‡æé«˜äº†ï¼Œè€Œä¸”å³ä¾¿æˆ‘ä»¬ç¦»å¼€äº†ç½‘ç»œä¾ç„¶å¯ä»¥æ‰§è¡Œæäº¤æ–‡ä»¶ã€æŸ¥çœ‹å†å²ç‰ˆæœ¬è®°å½•ã€åˆ›å»ºåˆ†æ”¯ç­‰ç­‰æ“ä½œï¼ŒçœŸçš„æ˜¯å¼€å‘è€…çš„ç¦éŸ³å•Šã€‚</p>
<p>å°±è¿™æ ·å¹³é™çš„åº¦è¿‡äº†ä¸‰å¹´æ—¶é—´ï¼Œä½†æ˜¯Linuxç¤¾åŒºèšé›†ç€å¤ªå¤šçš„é»‘å®¢äººç‰©ï¼Œ2005å¹´æ—¶ï¼Œé‚£ä½æ›¾ç»å¼€å‘SambaæœåŠ¡ç¨‹åºçš„Andrewå› ä¸ºè¯•å›¾ç ´è§£BitKeeperè½¯ä»¶åè®®è€Œæ¿€æ€’äº†BitMoverå…¬å¸ï¼Œå½“å³å†³å®šä¸å†å‘Linuxç¤¾åŒºæä¾›å…è´¹çš„è½¯ä»¶æˆæƒäº†ï¼Œæ­¤æ—¶çš„Linuså…¶å®ä¹Ÿæ—©å·²æœ‰è‡ªå·±ç¼–å†™åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ‰“ç®—äº†ï¼Œäºæ˜¯ä¾¿ç”¨Cè¯­è¨€åˆ›å»ºäº†Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¹¶ä¸Šä¼ äº†Linuxç³»ç»Ÿçš„æºä»£ç ã€‚</p>
<p>Gitä¸ä»…æ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè€Œä¸”æœ‰å…¶ç‹¬ç‰¹çš„åŠŸèƒ½ç‰¹æ€§ï¼Œä¾‹å¦‚å¤§å¤šæ•°çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿåªä¼šè®°å½•æ¯æ¬¡æ–‡ä»¶çš„å˜åŒ–ï¼Œè¯´ç™½äº†å°±æ˜¯åªä¼šå…³å¿ƒæ–‡ä»¶çš„å†…å®¹å˜åŒ–å·®å¼‚ï¼Œè€ŒGitåˆ™æ˜¯å…³æ³¨äºæ–‡ä»¶æ•°æ®æ•´ä½“çš„å˜åŒ–ï¼Œç›´æ¥ä¼šå°†æ–‡ä»¶æäº¤æ—¶çš„æ•°æ®ä¿å­˜æˆå¿«ç…§ï¼Œè€Œéä»…è®°å½•å·®å¼‚å†…å®¹ï¼Œå¹¶ä¸”ä½¿ç”¨SHA-1åŠ å¯†ç®—æ³•ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚</p>
<blockquote>
<p>Gitä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¯¹äºæ²¡æœ‰è¢«ä¿®æ”¹çš„æ–‡ä»¶ï¼Œåˆ™ä¸ä¼šé‡å¤å­˜å‚¨ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªé“¾æ¥æŒ‡å‘ä¹‹å‰å­˜å‚¨è¿‡çš„æ–‡ä»¶ã€‚</p>
</blockquote>
<h3 id="ä½¿ç”¨openstackéƒ¨ç½²äº‘è®¡ç®—æœåŠ¡ç¯å¢ƒ"><a href="#ä½¿ç”¨openstackéƒ¨ç½²äº‘è®¡ç®—æœåŠ¡ç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨openstackéƒ¨ç½²äº‘è®¡ç®—æœåŠ¡ç¯å¢ƒ"></a><a href="http://www.linuxprobe.com/chapter-22.html" target="_blank" rel="noopener">ä½¿ç”¨openstackéƒ¨ç½²äº‘è®¡ç®—æœåŠ¡ç¯å¢ƒ</a></h3><h4 id="äº†è§£äº‘è®¡ç®—"><a href="#äº†è§£äº‘è®¡ç®—" class="headerlink" title="äº†è§£äº‘è®¡ç®—"></a>äº†è§£äº‘è®¡ç®—</h4><p>äººç±»åŸºäºåƒå¹´çš„ç‰©ç§è¡å˜åŸºç¡€ï¼Œåœ¨è¿™ä¸ªä¸–çºªç»ˆäºæœ‰äº†çˆ†å‘å¼çš„ç§‘æŠ€æˆæœï¼Œå°¤å…¶è¿™äºŒåå¹´å†…äº’è”ç½‘çš„å‘å±•ï¼Œæ›´åƒæ˜¯ä¸€ç§å‚¬åŒ–å‰‚ï¼Œè®©åŸæœ¬å·²ç»çƒ­é—¹çš„åœ°çƒæ›´åŠ çš„æ²¸è…¾ï¼Œäº’è”ç½‘ç»æµæ³¡æ²«ç ´ç­åçš„ç§‘æŠ€ç ”å‘å´å˜å¾—æ›´åŠ å–åŠ›ï¼Œä¸€æ¬¡æ¬¡çš„çªç ´ç€ä¼ ç»Ÿç ”ç©¶ä¸­å¯¹äººç±»è„‘åŠ›ã€ç§‘æŠ€æœ€ç»ˆå¼çš„å®šä¹‰ï¼ŒæŠŠâ€œæ¥è‡ªæœªæ¥â€çš„äº§å“å¸¦åˆ°ç”¨æˆ·é¢å‰ï¼Œé‚£ä¹ˆåˆ°åº•äº’è”ç½‘æœªæ¥ä¼šå˜æˆä»€ä¹ˆæ ·å­ï¼Œäººç±»æœ€ç»ˆçš„å½’å®¿ä¼šæ˜¯æ€ä¹ˆæ ·ï¼Œæˆ‘ä»¬ä¸å¾—è€ŒçŸ¥ï¼Œä½†å¯ä»¥è‚¯å®šçš„æ˜¯ç§‘æŠ€ç ”å‘ä¸€ç›´æ˜¯ç”±äººç±»éœ€æ±‚æ¥é©±åŠ¨çš„ã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥Googleè°·æ­Œæ˜¯ä¸€å®¶è‡´åŠ›äºäº’è”ç½‘æœç´¢ã€äº‘è®¡ç®—ã€å¹¿å‘ŠæŠ€æœ¯ç­‰é¢†åŸŸçš„ç§‘æŠ€ä¼ä¸šï¼Œä¸€ç›´åœ¨åŠªåŠ›ä¸ºå…¨çƒæ— æ•°çš„ç”¨æˆ·æä¾›ç€å¤§é‡åŸºäºäº’è”ç½‘çš„äº§å“ä¸æœåŠ¡ï¼Œè€ŒAmazonäºšé©¬é€Šåˆ™æ˜¯å…¨ç¾å›½æœ€å¤§çš„ç½‘ç»œç”µå­å•†åŠ¡å…¬å¸ï¼Œé”€å”®å†…å®¹æ¶‰åŠæ–¹æ–¹é¢é¢ï¼Œä¸šåŠ¡èŒƒå›´æ›´æ˜¯éå¸ƒå…¨çƒï¼Œå¯¹äºè¿™ç§äº’è”ç½‘å·¨å¤´ä¼ä¸šè‡ªç„¶å°‘ä¸äº†åºå¤§çš„åŸºç¡€è®¾æ–½çš„æ”¯æ’‘ï¼Œä½†æ˜¯ä¼ ç»Ÿçš„ç¡¬ä»¶è®¾æ–½ä¸€æ—¦æŠ•å…¥å°±è¦ä¸€å¤§ç¬”é’±ï¼Œå¹¶ä¸”åœ¨ä¸šåŠ¡çš„æ·¡å­£ä¹Ÿè¦ä¸€ç›´çš„ç©ºé—²ï¼Œè¿™æ ·æ— ç–‘äº§ç”Ÿäº†èµ„æºå’Œèµ„é‡‘çš„å·¨å¤§æµªè´¹ï¼Œæ‰€ä»¥æœ€åˆçš„äº‘è®¡ç®—ä¾¿æ˜¯ç”±Googleä¸Amazonåˆ†åˆ«æå‡ºçš„ï¼Œæ ¸å¿ƒç†å¿µä¹‹ä¸€å°±æ˜¯é€šè¿‡äº‘è®¡ç®—æœåŠ¡é™ä½ç”¨æˆ·å¯¹èµ„æºæ‹¥æœ‰çš„æˆæœ¬ã€‚</p>
<p>å½“ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡äº’è”ç½‘æ–¹ä¾¿çš„è·å–åˆ°è®¡ç®—ã€å­˜å‚¨ç­‰æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬æ¯”å–»è‡ªå·±ä½¿ç”¨åˆ°äº†â€œäº‘è®¡ç®—â€ï¼Œäº‘è®¡ç®—å¹¶ä¸èƒ½è¢«ç§°ä¸ºæ˜¯ä¸€ç§è®¡ç®—æŠ€æœ¯ï¼Œè€Œæ›´åƒæ˜¯ä¸€ç§æœåŠ¡æ¨¡å¼ï¼Œäº‘è®¡ç®—æœåŠ¡å¥½åƒæ‹¥æœ‰æ— ç©·çš„åŠ›é‡ï¼Œèƒ½å¤Ÿé¢„æµ‹æ°”å€™å˜åŒ–ã€è¿˜èƒ½å¤Ÿæ¨¡æ‹Ÿæ ¸å¼¹çˆ†ç‚¸ï¼Œå¥½åƒåªè¦ä½ éœ€è¦ï¼Œâ€œäº‘â€å°±å¯ä»¥ä¸ºä½ æä¾›æ¯ç§’ä¸‡äº¿æ¬¡çš„è®¡ç®—æœåŠ¡ï¼Œæ»¡è¶³ä½ çš„ä¸€åˆ‡éœ€æ±‚ï¼Œæ¯ä¸ªè¿ç»´äººå‘˜å¿ƒé‡Œéƒ½æœ‰ä¸€ä¸ªå¯¹äº‘è®¡ç®—çš„ç†è§£ï¼Œè€Œæœ€æ™®éæ¥å—çš„æ˜¯NIST(ç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢)çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>äº‘è®¡ç®—æ˜¯ä¸€ç§æŒ‰ä½¿ç”¨é‡ä»˜è´¹çš„æœåŠ¡æ¨¡å¼ï¼Œè¿™æ˜¯ä¸€ç§èƒ½å¤Ÿæä¾›å¯ç”¨çš„ã€ä¾¿æ·çš„ã€æŒ‰éœ€æ±‚çš„ç½‘ç»œè®¿é—®æ¨¡å¼ï¼Œè®¡ç®—å…±äº«æ± èƒ½å¤Ÿå¿«é€Ÿçš„ä¸ºç”¨æˆ·æä¾›ç½‘ç»œã€æœåŠ¡å™¨ã€å­˜å‚¨ã€åº”ç”¨è½¯ä»¶åŠå…¶ä»–æœåŠ¡ï¼Œå¹¶ä¸”åªéœ€è¦èŠ±è´¹å¾ˆå°‘çš„ç®¡ç†æ—¶é—´ã€‚</p>
</blockquote>
<p>NISTè¿˜é’ˆå¯¹äºäº‘è®¡ç®—çš„æœåŠ¡æ¨¡å¼æå‡ºäº†3ä¸ªæœåŠ¡å±‚æ¬¡ï¼š</p>
<blockquote>
<p>Iaasï¼šæä¾›ç»™ç”¨æˆ·çš„æ˜¯äº‘è®¡ç®—åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€å­˜å‚¨ã€ç½‘ç»œç­‰å…¶ä»–çš„èµ„æºæœåŠ¡ï¼Œç”¨æˆ·ä¸éœ€è¦æ§åˆ¶å­˜å‚¨ä¸ç½‘ç»œç­‰åŸºç¡€è®¾æ–½ã€‚<br>Paasï¼šæä¾›ç»™ç”¨æˆ·çš„æ˜¯äº‘è®¡ç®—ä¸­çš„å¼€å‘å’Œåˆ†å‘åº”ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨æˆ·èƒ½å¤Ÿéƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ§åˆ¶ç›¸å…³çš„æ‰˜ç®¡ç¯å¢ƒï¼Œæ¯”å¦‚äº‘æœåŠ¡å™¨åŠæ“ä½œç³»ç»Ÿï¼Œä½†ç”¨æˆ·ä¸éœ€è¦æ¥è§¦åˆ°äº‘è®¡ç®—ä¸­çš„åŸºç¡€è®¾æ–½ã€‚<br>Saasï¼šæä¾›ç»™ç”¨æˆ·çš„æ˜¯äº‘è®¡ç®—åŸºç¡€è®¾æ–½ä¸Šçš„åº”ç”¨ç¨‹åºï¼Œç”¨æˆ·åªéœ€è¦åœ¨å®¢æˆ·ç«¯ç•Œé¢è®¿é—®å³å¯ä½¿ç”¨åˆ°æ‰€éœ€èµ„æºï¼Œè€Œæ¥è§¦ä¸åˆ°äº‘è®¡ç®—çš„åŸºç¡€è®¾æ–½ã€‚</p>
</blockquote>
<h4 id="Openstacké¡¹ç›®"><a href="#Openstacké¡¹ç›®" class="headerlink" title="Openstacké¡¹ç›®"></a>Openstacké¡¹ç›®</h4><p>Openstackæœ€åˆæ˜¯ç”±NASAå’ŒRackspaceå…±åŒå‘èµ·çš„äº‘ç«¯è®¡ç®—æœåŠ¡é¡¹ç›®ï¼Œè¯¥é¡¹ç›®ä»¥Apacheè®¸å¯è¯æˆæƒçš„æ–¹å¼æˆä¸ºäº†ä¸€æ¬¾å¼€æºäº§å“ï¼Œç›®çš„æ˜¯å°†å¤šä¸ªç»„ä»¶æ•´åˆåä»è€Œå®ç°ä¸€ä¸ªå¼€æºçš„äº‘è®¡ç®—å¹³å°ï¼Œç›®å‰Openstacké¡¹ç›®æ­£åœ¨è¢«çº¢å¸½ã€IBMã€AMDã€Intelã€æˆ´å°”ã€æ€ç§‘ã€å¾®è½¯ç­‰è¶…è¿‡ä¸€ç™¾å®¶å‚å•†å…±åŒç ”å‘ï¼Œå¹¶å·²ç»æ”¯æŒäº†å‡ ä¹æ‰€æœ‰çš„å¸¸è§äº‘è®¡ç®—ç¯å¢ƒï¼Œæ‹¥æœ‰äº†è‰¯å¥½çš„å¯æ‰©å±•æ€§ï¼Œè€Œä¸”éƒ¨ç½²æ­å»ºOpenstackæœåŠ¡ä¹Ÿå˜å¾—ååˆ†ç®€å•ï¼Œç›®å‰å›½å†…å¯¹äºäº‘è®¡ç®—çš„éœ€æ±‚ä¹Ÿé€æ¸å¢åŠ ï¼Œåèƒœå¤©æˆã€é«˜å¾·åœ°å›¾ã€äº¬ä¸œã€é˜¿é‡Œå·´å·´ã€ç™¾åº¦ã€ä¸­å…´ã€åä¸ºç­‰ä¸­å›½ä¼ä¸šä¹ŸåŠ å…¥åˆ°äº†Openstacké¡¹ç›®ç ”å‘å½“ä¸­ï¼ŒOpenstacké¡¹ç›®ä¹Ÿæ­£åœ¨éšç€å…¨çƒå†…å¾—åˆ°äº†ä¼—å¤šå‚å•†çš„å‚ä¸æ”¯æŒè€Œå¿«é€Ÿæˆç†Ÿã€‚</p>
<p>Openæ˜¯å¼€æ”¾ï¼ŒStackåˆ™æ˜¯å †ç Œä¹‹æ„ï¼Œåˆèµ·æ¥å°±æ˜¯å°†ä¼—å¤šçš„åŠŸèƒ½æœåŠ¡å †ç§¯èµ·æ¥çš„é›†åˆï¼Œè®©äººä»¬é€šè¿‡Openstackäº‘è®¡ç®—é¡¹ç›®ï¼Œèƒ½å¤Ÿå°†è¯¸å¦‚è®¡ç®—èƒ½åŠ›ã€å­˜å‚¨ã€ç½‘ç»œå’Œè½¯ä»¶ç­‰èµ„æºæŠ½è±¡æˆæœåŠ¡ï¼Œä»¥ä¾¿è®©ç”¨æˆ·å¯ä»¥é€šè¿‡äº’è”ç½‘è¿œç¨‹æ¥äº«ç”¨ï¼Œä»˜è´¹çš„å½¢å¼ä¹Ÿå˜å¾—å› éœ€è€Œå®šï¼Œè°ƒæ•´æ–¹ä¾¿ï¼Œæ‹¥æœ‰æå¼ºçš„è™šæ‹Ÿå¯æ‰©å±•æ€§ï¼Œæ˜¯å…¬å…±å’Œç§æœ‰äº‘çš„å»ºè®¾ä¸ç®¡ç†è½¯ä»¶ä¸­çš„ä¼˜ç§€å¼€æºé¡¹ç›®ã€‚</p>
<p>Openstackä½œä¸ºä¸€ä¸ªäº‘å¹³å°çš„ç®¡ç†é¡¹ç›®ï¼Œå…¶åŠŸèƒ½ç»„ä»¶è¦†ç›–äº†ç½‘ç»œã€è™šæ‹ŸåŒ–ã€æ“ä½œç³»ç»Ÿã€æœåŠ¡å™¨ç­‰å¤šä¸ªæ–¹é¢ï¼Œæ¯ä¸ªåŠŸèƒ½ç»„ä»¶äº¤ç”±ä¸åŒçš„é¡¹ç›®å§”å‘˜ä¼šæ¥ç ”å‘å’Œç®¡ç†ï¼Œç›®å‰æ ¸å¿ƒçš„é¡¹ç›®åŒ…æ‹¬æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>åŠŸèƒ½    é¡¹ç›®åç§°    æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>è®¡ç®—æœåŠ¡</td>
<td>Nova</td>
<td>è´Ÿè´£è™šæ‹Ÿæœºçš„åˆ›å»ºã€å¼€å…³æœºã€æŒ‚èµ·ã€è¿ç§»ã€è°ƒæ•´CPUã€å†…å­˜ç­‰è§„åˆ™ã€‚</td>
</tr>
<tr>
<td>å¯¹è±¡å­˜å‚¨</td>
<td>Swift</td>
<td>ç”¨äºåœ¨å¤§è§„æ¨¡å¯æ‰©å±•ç³»ç»Ÿä¸­é€šè¿‡å†…ç½®çš„å†—ä½™åŠé«˜å®¹å·®æœºåˆ¶å®ç°å¯¹è±¡å­˜å‚¨çš„ç³»ç»Ÿã€‚</td>
</tr>
<tr>
<td>é•œåƒæœåŠ¡</td>
<td>Glance</td>
<td>ç”¨äºåˆ›å»ºã€ä¸Šä¼ ã€åˆ é™¤ã€ç¼–è¾‘é•œåƒä¿¡æ¯çš„è™šæ‹Ÿæœºé•œåƒæŸ¥æ‰¾åŠç´¢å¼•ç³»ç»Ÿã€‚</td>
</tr>
<tr>
<td>èº«ä»½æœåŠ¡</td>
<td>Keystone</td>
<td>ä¸ºå…¶ä»–çš„åŠŸèƒ½æœåŠ¡æä¾›èº«ä»½éªŒè¯ã€æœåŠ¡è§„åˆ™åŠæœåŠ¡ä»¤ç‰Œçš„åŠŸèƒ½ã€‚</td>
</tr>
<tr>
<td>ç½‘ç»œç®¡ç†</td>
<td>Neutron</td>
<td>ç”¨äºä¸ºå…¶ä»–æœåŠ¡æä¾›äº‘è®¡ç®—çš„ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¯è‡ªå®šä¹‰å„ç§ç½‘ç»œè§„åˆ™ï¼Œæ”¯æŒä¸»æµçš„ç½‘ç»œå‚å•†æŠ€æœ¯ã€‚</td>
</tr>
<tr>
<td>å—å­˜å‚¨</td>
<td>Cinder</td>
<td>ä¸ºè™šæ‹Ÿæœºå®ä¾‹æä¾›ç¨³å®šçš„æ•°æ®å—å­˜å‚¨çš„åˆ›å»ºã€åˆ é™¤ã€æŒ‚è½½ã€å¸è½½ã€ç®¡ç†ç­‰æœåŠ¡ã€‚</td>
</tr>
<tr>
<td>å›¾å½¢ç•Œé¢</td>
<td>Horizon</td>
<td>ä¸ºç”¨æˆ·æä¾›ç®€å•æ˜“ç”¨çš„Webç®¡ç†ç•Œé¢ï¼Œé™ä½ç”¨æˆ·å¯¹åŠŸèƒ½æœåŠ¡çš„æ“ä½œéš¾åº¦ã€‚</td>
</tr>
<tr>
<td>æµ‹é‡æœåŠ¡</td>
<td>Ceilometer</td>
<td>æ”¶é›†é¡¹ç›®å†…æ‰€æœ‰çš„äº‹ä»¶ï¼Œç”¨äºç›‘æ§ã€è®¡è´¹æˆ–ä¸ºå…¶ä»–æœåŠ¡æä¾›æ•°æ®æ”¯æ’‘ã€‚</td>
</tr>
<tr>
<td>éƒ¨ç½²ç¼–æ’</td>
<td>Heat</td>
<td>å®ç°é€šè¿‡æ¨¡æ¿æ–¹å¼è¿›è¡Œè‡ªåŠ¨åŒ–çš„èµ„æºç¯å¢ƒéƒ¨ç½²æœåŠ¡ã€‚</td>
</tr>
<tr>
<td>æ•°æ®åº“æœåŠ¡</td>
<td>Trove</td>
<td>ä¸ºç”¨æˆ·æä¾›å¯æ‰©å±•çš„å…³ç³»æˆ–éå…³ç³»æ€§æ•°æ®åº“æœåŠ¡ã€‚</td>
</tr>
</tbody>
</table>
<p>Openstacké¡¹ç›®çš„ç‰ˆæœ¬æŒ‰ç…§ABCDEFGâ€¦â€¦çš„é¡ºåºå‘å¸ƒï¼Œæ¯6ä¸ªæœˆæ›´æ–°ä¸€æ¬¡ï¼ŒOpenstackç‰ˆæœ¬å‘å¸ƒå†å²ï¼š</p>
<table>
<thead>
<tr>
<th>ç‰ˆæœ¬åç§°</th>
<th>å‘å¸ƒæ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>Liberty</td>
<td>2015å¹´10æœˆ15æ—¥</td>
</tr>
<tr>
<td>Kilo</td>
<td>2015å¹´4æœˆ30æ—¥</td>
</tr>
<tr>
<td>Juno</td>
<td>2014å¹´10æœˆ16æ—¥</td>
</tr>
<tr>
<td>Icehouse</td>
<td>2014å¹´4æœˆ17æ—¥</td>
</tr>
<tr>
<td>Havana</td>
<td>2013å¹´10æœˆ17æ—¥</td>
</tr>
<tr>
<td>Grizzly</td>
<td>2014å¹´4æœˆ4æ—¥</td>
</tr>
<tr>
<td>Folsom</td>
<td>2012å¹´9æœˆ27æ—¥</td>
</tr>
<tr>
<td>Essex</td>
<td>2012å¹´4æœˆ5æ—¥</td>
</tr>
<tr>
<td>Diablo</td>
<td>2011å¹´9æœˆ22æ—¥</td>
</tr>
<tr>
<td>Cactus</td>
<td>2011å¹´4æœˆ15æ—¥</td>
</tr>
<tr>
<td>Bexar</td>
<td>2011å¹´2æœˆ3æ—¥</td>
</tr>
<tr>
<td>Austin</td>
<td>2010å¹´10æœˆ21æ—¥</td>
</tr>
</tbody>
</table>
<p>å¼€æºç¤¾åŒºæˆå‘˜å’ŒLinuxæŠ€æœ¯çˆ±å¥½è€…å¯ä»¥é€‰æ‹©ä½¿ç”¨Openstack RDOç‰ˆæœ¬ï¼ŒRDOç‰ˆæœ¬å…è®¸ç”¨æˆ·ä»¥å…è´¹æˆæƒçš„æ–¹å¼æ¥è·å–openstackè½¯ä»¶çš„ä½¿ç”¨èµ„æ ¼ï¼Œä½†æ˜¯ä»å®‰è£…å¼€å§‹ä¾¿è¾ƒä¸ºå¤æ‚ï¼ˆéœ€è¦è‡ªè¡Œè§£å†³è¯¸å¤šçš„è½¯ä»¶ä¾èµ–å…³ç³»ï¼‰ï¼Œè€Œä¸”æ²¡æœ‰å®˜æ–¹ç»™äºˆçš„ä¿éšœåŠå”®åæœåŠ¡ï¼Œè¯·è¯»è€…ä»¬ä»”ç»†çš„æŒ‰å®éªŒæ­¥éª¤å®‰è£…ï¼Œå°±ä¸€å®šæ²¡æœ‰é—®é¢˜çš„~</p>
<h4 id="æœåŠ¡æ¨¡å—ç»„ä»¶è¯¦è§£"><a href="#æœåŠ¡æ¨¡å—ç»„ä»¶è¯¦è§£" class="headerlink" title="æœåŠ¡æ¨¡å—ç»„ä»¶è¯¦è§£"></a>æœåŠ¡æ¨¡å—ç»„ä»¶è¯¦è§£</h4><p>Openstackæ˜¯ä¸€ä¸ªäº‘è®¡ç®—çš„å¹³å°ï¼Œä¹Ÿåƒæ˜¯éƒ¨ç½²äº‘æ“ä½œç³»ç»Ÿçš„å·¥å…·é›†ï¼Œå¯ä»¥é€šè¿‡è°ƒå–ä¸åŒçš„ç»„ä»¶æ¥æ„å»ºè™šæ‹Ÿè®¡ç®—åŠäº‘è®¡ç®—æœåŠ¡ï¼Œæ¯”è¾ƒé‡è¦çš„åŒ…æ‹¬æœ‰è®¡ç®—ï¼ˆcomputeï¼‰ã€å¯¹è±¡å­˜å‚¨ï¼ˆObjectstorageï¼‰ã€è®¤è¯ï¼ˆIdentityï¼‰ã€ä»ªè¡¨æ¿ï¼ˆDashboardï¼‰ã€å—å­˜å‚¨ï¼ˆBlock Storageï¼‰ã€ç½‘ç»œï¼ˆNetworkï¼‰å’Œé•œåƒæœåŠ¡ï¼ˆimage serviceï¼‰ã€‚</p>
<p>Novaæä¾›è®¡ç®—æœåŠ¡</p>
<p>Novaå¯ä»¥ç§°ä½œæ˜¯Openstackäº‘è®¡ç®—å¹³å°ä¸­æœ€æ ¸å¿ƒçš„æœåŠ¡ç»„ä»¶äº†ï¼Œå®ƒä½œä¸ºè®¡ç®—çš„å¼¹æ€§æ§åˆ¶å™¨æ¥ç®¡ç†è™šæ‹ŸåŒ–ã€ç½‘ç»œåŠå­˜å‚¨ç­‰èµ„æºï¼Œä¸ºOpenstackçš„äº‘ä¸»æœºå®ä¾‹æä¾›å¯é çš„æ”¯æ’‘ï¼Œå…¶åŠŸèƒ½ç”±ä¸åŒçš„APIæ¥æä¾›ã€‚</p>
<p>Nova-api(APIæœåŠ¡å™¨):</p>
<blockquote>
<p>APIæœåŠ¡å™¨ç”¨äºæä¾›äº‘è®¡ç®—è®¾æ–½ä¸å¤–ç•Œäº¤äº’çš„æ¥å£ï¼Œä¹Ÿæ˜¯ç”¨æˆ·å¯¹äº‘è®¡ç®—è®¾æ–½è¿›è¡Œç®¡ç†çš„å”¯ä¸€é€šé“ï¼Œç”¨æˆ·é€šè¿‡ç½‘é¡µæ¥è°ƒç”¨å„ç§APIæ¥å£ï¼Œå†ç”±APIæœåŠ¡å™¨é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æŠŠè¯·æ±‚ä¼ é€’è‡³ç›®æ ‡è®¾ç½®è¿›è¡Œå¤„ç†ã€‚</p>
</blockquote>
<p>Rabbit MQ Server(æ¶ˆæ¯é˜Ÿåˆ—):</p>
<blockquote>
<p>Openstackåœ¨éµå¾ªAMQPé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®çš„åŸºç¡€ä¹‹ä¸Šé‡‡ç”¨äº†æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œé€šä¿¡ï¼Œå¼‚æ­¥é€šä¿¡çš„æ–¹å¼æ›´æ˜¯èƒ½å¤Ÿå‡å°‘äº†ç”¨æˆ·çš„ç­‰å¾…æ—¶é—´ï¼Œè®©æ•´ä¸ªå¹³å°éƒ½å˜å¾—æ›´æœ‰æ•ˆç‡ã€‚</p>
</blockquote>
<p>Nova-compute(è¿ç®—å·¥ä½œç«™):</p>
<blockquote>
<p>è¿ç®—å·¥ä½œç«™é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚å¹¶æ‰§è¡Œï¼Œä»è€Œè´Ÿè´£å¯¹ä¸»æœºå®ä¾‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­çš„å„ç§æ“ä½œè¿›è¡Œå¤„ç†ï¼Œä¸€èˆ¬ä¼šæ¶è®¾å¤šå°è®¡ç®—å·¥ä½œç«™ï¼Œæ ¹æ®è°ƒåº¦ç®—æ³•æ¥æŒ‰ç…§å®ä¾‹åœ¨ä»»æ„ä¸€ä¸ªè®¡ç®—å·¥ä½œç«™ä¸Šéƒ¨ç½²ã€‚</p>
</blockquote>
<p>Nova-network(ç½‘ç»œæ§åˆ¶å™¨):</p>
<blockquote>
<p>ç”¨äºå¤„ç†ä¸»æœºçš„ç½‘ç»œé…ç½®ï¼Œä¾‹å¦‚åˆ†é…IPåœ°å€ï¼Œé…ç½®é¡¹ç›®VLANï¼Œè®¾å®šå®‰å…¨ç¾¤ç»„åŠä¸ºè®¡ç®—èŠ‚ç‚¹é…ç½®ç½‘ç»œã€‚</p>
</blockquote>
<p>Nova-Volume(å·å·¥ä½œç«™):</p>
<blockquote>
<p>åŸºäºLVMçš„å®ä¾‹å·èƒ½å¤Ÿä¸ºä¸€ä¸ªä¸»æœºå®ä¾‹åˆ›å»ºã€åˆ é™¤ã€é™„åŠ å·æˆ–ä»ä¸»æœºä¸­åˆ†ç¦»å·ã€‚</p>
</blockquote>
<p>Nova-scheduler(è°ƒåº¦å™¨)</p>
<blockquote>
<p>è°ƒåº¦å™¨ä»¥åä¸ºâ€nova-scheduleâ€çš„å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿›è¡Œè¿è¡Œï¼Œæ ¹æ®å¯¹æ¯”CPUæ¶æ„åŠè´Ÿè½½ã€å†…å­˜å ç”¨ç‡ã€å­èŠ‚ç‚¹çš„è¿œè¿‘ç­‰å› ç´ ï¼Œä½¿ç”¨è°ƒåº¦ç®—æ³•ä»å¯ç”¨çš„èµ„æºæ± ä¸­é€‰æ‹©è¿ç®—æœåŠ¡å™¨ã€‚</p>
</blockquote>
<p>Glanceæä¾›é•œåƒæœåŠ¡</p>
<blockquote>
<p>Openstacké•œåƒæœåŠ¡æ˜¯ä¸€å¥—ç”¨äºä¸»æœºå®ä¾‹æ¥å‘ç°ã€æ³¨å†Œã€ç´¢å¼•çš„ç³»ç»Ÿï¼ŒåŠŸèƒ½ç›¸æ¯”è¾ƒä¹Ÿå¾ˆç®€å•ï¼Œå…·æœ‰åŸºäºç»„ä»¶çš„æ¶æ„ã€é«˜å¯ç”¨ã€å®¹é”™æ€§ã€å¼€å‘æ ‡å‡†ç­‰ä¼˜è‰¯ç‰¹æ€§ï¼Œè™šæ‹Ÿæœºçš„é•œåƒå¯ä»¥è¢«æ”¾ç½®åˆ°å¤šç§å­˜å‚¨ä¸Šã€‚</p>
</blockquote>
<p>Swiftæä¾›å­˜å‚¨æœåŠ¡</p>
<blockquote>
<p>Swiftæ¨¡å—æ˜¯ä¸€ç§åˆ†å¸ƒå¼ã€æŒç»­è™šæ‹Ÿå¯¹è±¡å­˜å‚¨ï¼Œå…·æœ‰è·¨èŠ‚ç‚¹ç™¾çº§å¯¹è±¡çš„å­˜å‚¨èƒ½åŠ›ï¼Œå¹¶ä¸”æ”¯æŒå†…å»ºå†—ä½™å’Œå¤±æ•ˆå¤‡æ´çš„åŠŸèƒ½ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿå¤„ç†æ•°æ®å½’æ¡£å’Œåª’ä½“æµï¼Œå¯¹äºè¶…å¤§æ•°æ®å’Œå¤šå¯¹è±¡æ•°é‡éå¸¸é«˜æ•ˆã€‚</p>
</blockquote>
<p>Swfitä»£ç†æœåŠ¡å™¨ï¼š</p>
<blockquote>
<p>ç”¨äºé€šè¿‡Swift-APIä¸ä»£ç†æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œä»£ç†æœåŠ¡å™¨èƒ½å¤Ÿæ£€æŸ¥å®ä¾‹ä½ç½®å¹¶è·¯ç”±ç›¸å…³çš„è¯·æ±‚ï¼Œå½“å®ä¾‹å¤±æ•ˆæˆ–è¢«è½¬ç§»ååˆ™è‡ªåŠ¨æ•…éšœåˆ‡æ¢ï¼Œå‡å°‘é‡å¤è·¯ç”±è¯·æ±‚ã€‚</p>
</blockquote>
<p>Swiftå¯¹è±¡æœåŠ¡å™¨ï¼š</p>
<blockquote>
<p>ç”¨äºå¤„ç†å¤„ç†æœ¬åœ°å­˜å‚¨ä¸­å¯¹è±¡æ•°æ®çš„å­˜å‚¨ã€ç´¢å¼•å’Œåˆ é™¤æ“ä½œã€‚</p>
</blockquote>
<p>Swiftå®¹å™¨æœåŠ¡å™¨ï¼š</p>
<blockquote>
<p>ç”¨äºç»Ÿè®¡å®¹å™¨å†…åŒ…å«çš„å¯¹è±¡æ•°é‡åŠå®¹é‡å­˜å‚¨ç©ºé—´ä½¿ç”¨ç‡ï¼Œé»˜è®¤å¯¹è±¡åˆ—è¡¨å°†å­˜å‚¨ä¸ºSQLiteæˆ–è€…MYSQLæ–‡ä»¶ã€‚</p>
</blockquote>
<p>Swiftå¸æˆ·æœåŠ¡å™¨ï¼š</p>
<blockquote>
<p>ä¸å®¹å™¨æœåŠ¡å™¨ç±»ä¼¼ï¼Œåˆ—å‡ºå®¹å™¨ä¸­çš„å¯¹è±¡ã€‚</p>
</blockquote>
<p>Ringç´¢å¼•ç¯ï¼š</p>
<blockquote>
<p>ç”¨æˆ·è®°å½•ç€Swiftä¸­ç‰©ç†å­˜å‚¨å¯¹è±¡ä½ç½®çš„ä¿¡æ¯ï¼Œä½œä¸ºçœŸå®ç‰©ç†å­˜å‚¨ä½ç½®çš„è™šæ‹Ÿæ˜ å°„ï¼Œèƒ½å¤ŸæŸ¥æ‰¾åŠå®šä½ä¸åŒé›†ç¾¤çš„å®ä½“çœŸå®ç‰©ç†ä½ç½®çš„ç´¢å¼•æœåŠ¡ï¼Œä¸Šè¿°çš„ä»£ç†ã€å¯¹è±¡ã€å®¹å™¨ã€å¸æˆ·éƒ½æ‹¥æœ‰è‡ªå·±çš„Ringç´¢å¼•ç¯ã€‚</p>
</blockquote>
<p>Keystoneæä¾›è®¤è¯æœåŠ¡</p>
<blockquote>
<p>Keystoneæ¨¡å—ä¾èµ–äºè‡ªèº«çš„Identity APIç³»ç»ŸåŸºäºåˆ¤æ–­åŠ¨ä½œæ¶ˆæ¯æ¥æºè€…è¯·æ±‚çš„åˆæ³•æ€§æ¥ä¸ºOpenstackä¸­Swiftã€Glanceã€Noveç­‰å„ä¸ªç»„ä»¶æä¾›è®¤è¯å’Œè®¿é—®ç­–ç•¥æœåŠ¡ï¼Œ</p>
</blockquote>
<p>Horizonæä¾›ç®¡ç†æœåŠ¡</p>
<blockquote>
<p>Horizonæ˜¯ä¸€ä¸ªç”¨äºç®¡ç†ã€æ§åˆ¶Openstackäº‘è®¡ç®—å¹³å°æœåŠ¡å™¨çš„Webæ§åˆ¶é¢æ¿ï¼Œç”¨æˆ·èƒ½å¤Ÿåœ¨ç½‘é¡µä¸­ç®¡ç†ä¸»æœºå®ä¾‹ã€é•œåƒã€åˆ›å»ºå¯†é’¥å¯¹ã€ç®¡ç†å®ä¾‹å·ã€æ“ä½œSwiftå®¹å™¨ç­‰æ“ä½œã€‚</p>
</blockquote>
<p>Quantumæä¾›ç½‘ç»œæœåŠ¡</p>
<blockquote>
<p>é‡è¦çš„ç½‘ç»œç®¡ç†ç»„ä»¶ã€‚</p>
</blockquote>
<p>Cinderæä¾›å­˜å‚¨ç®¡ç†æœåŠ¡</p>
<blockquote>
<p>ç”¨äºç®¡ç†ä¸»æœºå®ä¾‹ä¸­çš„å­˜å‚¨èµ„æºã€‚</p>
</blockquote>
<p>Heatæä¾›è½¯ä»¶éƒ¨ç½²æœåŠ¡</p>
<blockquote>
<p>ç”¨äºåœ¨ä¸»æœºå®ä¾‹åˆ›å»ºåç®€åŒ–é…ç½®æ“ä½œã€‚</p>
</blockquote>
<h4 id="å®‰è£…Openstackè½¯ä»¶"><a href="#å®‰è£…Openstackè½¯ä»¶" class="headerlink" title="å®‰è£…Openstackè½¯ä»¶"></a>å®‰è£…Openstackè½¯ä»¶</h4><p>æ­¤åˆ»æˆ‘å†™è¿™æ®µè¯çš„æ—¶å€™ï¼ŒOpenstack Libertyç‰ˆæœ¬åˆšåˆšå‘å¸ƒå‡ å‘¨ï¼Œä¼ä¸šä¸­çš„ç”Ÿäº§ç¯å¢ƒä¼šä»¥ç¨³å®šæ€§ä¸ºæ ¸å¿ƒæ ‡å‡†ï¼Œæ‰€ä»¥è¿˜éœ€è¦è¾ƒé•¿ä¸€æ®µæ—¶é—´æ‰èƒ½æ¥å—å¹¶æ­£å¼ä½¿ç”¨è¿™ä¸ªæ–°ç‰ˆæœ¬çš„äº§å“ï¼Œä¸ºäº†èƒ½å¤Ÿè®©è¯»è€…å­¦å®Œå³ç”¨ï¼Œæœ¬ç‰‡å†…å®¹åˆ™ä¼šä»¥Junoç‰ˆæœ¬æ¥åšå®éªŒï¼Œä¸ºäº†èƒ½å¤Ÿè®©äº‘è®¡ç®—å¹³å°å‘æŒ¥åˆ°æœ€å¥½çš„æ€§èƒ½ï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯è™šæ‹Ÿæœºçš„è™šæ‹ŸåŒ–åŠŸèƒ½ï¼Œå†…å­˜è‡³å°‘ä¸º4GBï¼ˆæ¨è8GBä»¥ä¸Šï¼‰ï¼Œå¹¶æ·»åŠ é¢å¤–çš„ä¸€å—ç¡¬ç›˜(20Gä»¥ä¸Š)ã€‚</p>
<p>Openstack Junoâ€”â€”äº‘è®¡ç®—å¹³å°è½¯ä»¶</p>
<blockquote>
<p>Openstackäº‘è®¡ç®—è½¯ä»¶èƒ½å¤Ÿå°†è¯¸å¦‚è®¡ç®—èƒ½åŠ›ã€å­˜å‚¨ã€ç½‘ç»œå’Œè½¯ä»¶ç­‰èµ„æºæŠ½è±¡æˆæœåŠ¡ï¼Œä»¥ä¾¿è®©ç”¨æˆ·å¯ä»¥é€šè¿‡äº’è”ç½‘è¿œç¨‹æ¥äº«ç”¨ï¼Œä»˜è´¹çš„å½¢å¼ä¹Ÿå˜å¾—å› éœ€è€Œå®šï¼Œæ‹¥æœ‰æå¼ºçš„è™šæ‹Ÿå¯æ‰©å±•æ€§ã€‚</p>
</blockquote>
<p>EPELâ€”â€”ç³»ç»Ÿçš„è½¯ä»¶æºä»“åº“</p>
<blockquote>
<p>EPELæ˜¯ä¼ä¸šç‰ˆé¢å¤–çš„èµ„æºåŒ…ï¼Œæä¾›äº†é»˜è®¤ä¸æä¾›çš„è½¯ä»¶å®‰è£…åŒ…</p>
</blockquote>
<p>Cirrosâ€”â€”ç²¾ç®€çš„æ“ä½œç³»ç»Ÿ</p>
<blockquote>
<p>Cirrosæ˜¯ä¸€æ¬¾æä¸ºç²¾ç®€çš„æ“ä½œç³»ç»Ÿï¼Œä¸€èˆ¬ç”¨äºçŒè£…åˆ°OpenstackæœåŠ¡å¹³å°ä¸­ã€‚</p>
</blockquote>
<p>è®¾ç½®æœåŠ¡å™¨çš„ä¸»æœºåç§°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hostname</span><br><span class="line">openstack.linuxprobe.com</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨vimç¼–è¾‘å™¨å†™å…¥ä¸»æœºåï¼ˆåŸŸåï¼‰ä¸IPåœ°å€çš„æ˜ å°„æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line">192.168.10.10  openstack.linuxprobe.com openstack</span><br></pre></td></tr></table></figure>
<p>ä¸‹è½½ epel.tar.bz2 openstack-juno.tar.bz2 æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http://down.linuxprobe.com/Tools/openstack-juno-linuxprobe.com.tar.bz2</span><br><span class="line">wget http://down.linuxprobe.com/Tools/EPEL-linuxprobe.com.tar.bz2</span><br><span class="line"></span><br><span class="line">cd /media</span><br><span class="line">tar xjf epel.tar.bz2</span><br><span class="line">tar xjf openstack-juno.tar.bz2</span><br></pre></td></tr></table></figure>
<p>yumä»“åº“é…ç½®<br>åˆ†åˆ«å†™å…¥EPELä¸openstackçš„yumä»“åº“æºä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.repos.d/openstack.repo</span><br><span class="line">[openstack]</span><br><span class="line">name=openstack</span><br><span class="line">baseurl=file:///media/openstack-juno</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">vim /etc/yum.repos.d/epel.repo</span><br><span class="line">[epel]</span><br><span class="line">name=epel</span><br><span class="line">baseurl=file:///media/EPEL</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>
<p>å°†/dev/sdbåˆ›å»ºæˆé€»è¾‘å·ï¼Œå·ç»„åç§°ä¸ºcinder-volumes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pvcreate /dev/sdb</span><br><span class="line">vgcreate cinder-volumes /dev/sdb</span><br></pre></td></tr></table></figure>
<p>é‡å¯ç³»ç»Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<p>å®‰è£…Openstackçš„åº”ç­”æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openstack-packstack</span><br></pre></td></tr></table></figure>
<p> å®‰è£…openstackæœåŠ¡ç¨‹åº</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">packstack --allinone --provision-demo=n --nagios-install=n</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºäº‘å¹³å°çš„ç½‘å¡é…ç½®æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-br-ex</span><br><span class="line">DEVICE=br-ex</span><br><span class="line">IPADDR=192.168.10.10</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DNS1=192.168.10.1</span><br><span class="line">GATEWAY=192.168.10.1</span><br><span class="line">BROADCAST=192.168.10.254</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=yes</span><br><span class="line">IPV6INIT=no</span><br><span class="line">ONBOOT=yes</span><br><span class="line">DEVICETYPE=ovs</span><br><span class="line">TYPE=&quot;OVSIntPort&quot;</span><br><span class="line">OVS_BRIDGE=br-ex</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ç½‘å¡å‚æ•°ä¿¡æ¯ä¸º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eno16777728 </span><br><span class="line">DEVICE=&quot;eno16777728&quot;</span><br><span class="line">ONBOOT=yes</span><br><span class="line">TYPE=OVSPort</span><br><span class="line">DEVICETYPE=ovs</span><br><span class="line">OVS_BRIDGE=br-ex</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">IPV6INIT=no</span><br></pre></td></tr></table></figure>
<p>å°†ç½‘å¡è®¾å¤‡æ·»åŠ åˆ°OVSç½‘ç»œä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ovs-vsctl add-port br-ex eno16777728 </span><br><span class="line">ovs-vsctl show</span><br></pre></td></tr></table></figure>
<p>é‡å¯ç³»ç»Ÿè®©ç½‘ç»œè®¾å¤‡åŒæ­¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œèº«ä»½è®¤è¯è„šæœ¬ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source keystonerc_admin</span><br><span class="line">openstack-status</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€æµè§ˆå™¨è¿›å…¥<a href="http://192.168.10.10/dashboard" target="_blank" rel="noopener">http://192.168.10.10/dashboard</a></p>
<p>æŸ¥çœ‹ç™»å½•çš„å¸å·å¯†ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat keystonerc_admin</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨OpenstackæœåŠ¡"><a href="#ä½¿ç”¨OpenstackæœåŠ¡" class="headerlink" title="ä½¿ç”¨OpenstackæœåŠ¡"></a>ä½¿ç”¨OpenstackæœåŠ¡</h4><p><a href="http://www.linuxprobe.com/chapter-22.html#225_Openstack" target="_blank" rel="noopener">ä½¿ç”¨OpenstackæœåŠ¡</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><a class="article-category-link" href="/categories/æŠ€æœ¯/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Bind/">Bind</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DHCP/">DHCP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MariaDB/">MariaDB</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NFS/">NFS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenLDAP/">OpenLDAP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenStack/">OpenStack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PXE/">PXE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RHEL7/">RHEL7</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Samba/">Samba</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Squid/">Squid</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dovecot/">dovecot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/httpd/">httpd</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iSCSI/">iSCSI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kickstart/">kickstart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/postfix/">postfix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sshd/">sshd</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vsftpd/">vsftpd</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Jenkins+Ansible+Gitlabè‡ªåŠ¨åŒ–éƒ¨ç½²" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/15/Jenkins+Ansible+Gitlabè‡ªåŠ¨åŒ–éƒ¨ç½²/" class="article-date">
      <time datetime="2016-03-15T07:21:20.000Z" itemprop="datePublished">2016-03-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/15/Jenkins+Ansible+Gitlabè‡ªåŠ¨åŒ–éƒ¨ç½²/">Jenkins+Ansible+Gitlabè‡ªåŠ¨åŒ–éƒ¨ç½²</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.showerlee.com/archives/1880" target="_blank" rel="noopener">Jenkins+Ansible+Gitlabè‡ªåŠ¨åŒ–éƒ¨ç½²</a></p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><ul>
<li><p>Ansible é¦–å…ˆç»™å¤§å®¶ä»‹ç»çš„æ˜¯Ansible, æ©, é‡è¦çš„é—®é¢˜è¯´ä¸‰é, ä¸æ˜¯Saltstack, Ansibleä½œä¸ºä¸€ä¸ªpythonå†™çš„è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·, ç¡®å®è¾ƒä¹‹å‰æˆ‘æ‰€æ¥è§¦çš„Chef, saltstack, puppetæ›´æœ‰è‡ªå·±çš„ä¸€äº›ä¼˜åŠ¿, é¦–å…ˆå°±æ˜¯agentless, æ— éœ€åœ¨Linux clientå®‰è£…ä»»ä½•æœåŠ¡å³å¯æ— ç¼è¿æ¥Linux default sshç«¯å£è¿›è¡Œéƒ¨ç½²(windowséœ€è¦å®‰è£…winrm å¼€å¯sshæœåŠ¡), è¿™ç‚¹å…¶å®æˆ‘è§‰å¾—éå¸¸é‡è¦, å¯ä»¥æƒ³è±¡å¾ˆå¤šå…¬å¸æœ¬èº«æ˜¯å¯¹networkç®¡ç†éå¸¸ä¸¥æ ¼çš„, åœ¨éƒ¨ç½²ä¸€ä¸ªäº§å“çš„åŒæ—¶ä½ éœ€è¦è€ƒè™‘å¾ˆå¤šæ—¶é—´æˆæœ¬, ä½¿ç”¨å…¶ä»–éƒ¨ç½²å·¥å…·æœ¬èº«éå¸¸æ£˜æ‰‹çš„é—®é¢˜å°±æ˜¯å»ç”³è¯·å¼€ç«¯å£, clienté‡å°‘çš„è¯, æˆ‘ä»¬å¯ä»¥å»ç­‰, å¤šçš„è¯æœ¬èº«ä½ å»request, waiting, unblock portç­‰ç­‰long long processâ€¦. æœ€åä¼šè€—è´¹å¾ˆé•¿æ—¶é—´. è¿™ä¸ªå¯¹å¾ˆå¤šäº§å“æœ¬èº«å°±æ˜¯å¾ˆè‡´å‘½çš„. ä¸æ¨èSaltstackçš„åŸå› ä¹Ÿæ˜¯å› ä¸ºå…¶éœ€è¦åœ¨æ¯å°agenté€ä¸€å»å®‰è£…client serviceå¹¶æµ‹è¯•, è¿™æœ¬èº«å°±ä¼šè€—è´¹ä¸€äº›æ—¶é—´æˆæœ¬ã€‚<br>å…¶ä»–å‘¢? å…¶å®æˆ‘è§‰å¾—å°±æ˜¯å®¹æ˜“ä¸Šæ‰‹, è¯­æ³•ç®€å•, æœ‰ç°æˆæ¨¡æ¿è®©ä½ å»å­¦ä¹ , åŠ ä¹‹æ˜¯æˆ‘ä»¬éå¸¸å–œçˆ±çš„pythonè¯­æ³•, why not?</p>
</li>
<li><p>Jenkinsä¸ç”¨æˆ‘å¤šè¯´, ä¼°è®¡æ‡‚è¡Œçš„äººéƒ½åœ¨ç”¨å®ƒ, å¼€æº, è½»é‡çº§, å…¼å®¹æ€§å’Œæ‰©å±•æ€§å¼º, ç›´è§‚çš„GUIç®¡ç†è¿™éƒ½æ˜¯å®ƒçš„ä¼˜åŠ¿, é…åˆAnsibleæˆ‘è§‰å¾—ç”¨èµ·æ¥ä¼šéå¸¸easy going.</p>
</li>
<li><p>Gitlab æœ€åæä¸€ä¸‹Gitlab, ä¸ºä»€ä¹ˆè¦ç”¨Gitlab? ä»–ä½œä¸ºä¸€ä¸ªä»£ç ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå’Œéƒ¨ç½²æœ‰ä»€ä¹ˆå…³ç³»å‘¢? å…¶å®è¿™é‡Œå°±æ¶‰åŠä¸€ä¸ªæˆ‘ä»¬Ansible playbookç®¡ç†é—®é¢˜, è¯•æƒ³æˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸€ä¸ªå…¬å¸åºå¤§çš„serveré›†ç¾¤, æˆ‘ä»¬æ‰€æœ‰éœ€è¦éƒ¨ç½²çš„æœºå™¨æˆ–è€…äº§å“ä¼šå¯¹åº”æˆ‘ä»¬ç›¸å¯¹çš„éƒ¨ç½²è„šæœ¬, æˆ‘ä»¬ä½¿ç”¨çš„Ansible playbookå¦‚æœåªæ˜¯ä¿å­˜åœ¨Ansible Serverçš„å…·ä½“æŸä¸ªç›®å½•, è¿™æœ¬èº«å°±ä¸ä¾¿äºæˆ‘ä»¬è¿›è¡Œç¼–å†™ç»´æŠ¤æ›´æ–°(æƒ³æƒ³æ¯æ¬¡éƒ½è·‘åˆ°è¿œç¨‹å»ç¼–å†™playbookæˆ–è€…æ¯æ¬¡åœ¨æœ¬åœ°ç¼–å†™å¥½åå†uploadåˆ°è¿œç¨‹æˆ‘éƒ½ä¼šè„‘è¡¥æ•°ä»¥ä¸‡è®¡çš„è‰æ³¥é©¬ä»æˆ‘çœ¼å‰å‘¼å•¸è€Œæ¥).<br>è¿™é‡ŒGitlabå°±ç»™æˆ‘ä»¬æä¾›ä¸€ä¸ªéå¸¸æ–¹ä¾¿ä»¥åŠç›´è§‚çš„Playbook management. æˆ‘ä»¬éœ€è¦åšçš„å…¶å®å°±æ˜¯åœ¨Gitlabå»å»ºç«‹ä¸€ä¸ªå¯¹åº”äº§å“æˆ–è€…serverçš„playbookä»“åº“, ç„¶åæˆ‘ä»¬åœ¨æœ¬åœ°å†™å¥½åç›´æ¥commitåˆ°è¿™ä¸ªä»“åº“, æœ€ååœ¨éƒ¨ç½²çš„æ—¶å€™, å»è®©Jenkins pullè¿™ä¸ªplaybookåˆ°å…¶workspace, å¹¶ä½œä¸ºä¸€ä¸ªJobå»runè¿™ä¸ªplaybook, è¿™æ ·æ˜¯ä¸æ˜¯å¾ˆè§„èŒƒ, è€Œä¸”ä¾¿äºç®¡ç†?<br>å½“ç„¶Ansibleæœ¬èº«ä¼ä¸šç‰ˆTowerä¹Ÿä¼šæä¾›ä¸€ä¸ªç±»ä¼¼ç®¡ç†å¹¶ç»´æŠ¤playbookä»¥åŠç›‘æ§ansibleæœ¬èº«running processçš„GUIç®¡ç†ç³»ç»Ÿ, ç”¨èµ·æ¥ä¹Ÿå¾ˆä¸é”™, ä½†ä½œä¸ºæ”¶è´¹ç‰ˆæœ¬, æˆ‘ä»¬åœ¨è¿™é‡Œå°±ä¸åšè¿‡å¤šé˜è¿°äº†.</p>
</li>
</ul>
<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><p>è¿™é‡Œæˆ‘æ¨èJenkinså’ŒAnsibleå¯ä»¥å®‰è£…åˆ°åŒä¸€ä¸ªç¯å¢ƒä½œä¸ºéƒ¨ç½²server,<br>Gitlabä½œä¸ºç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¯å•ç‹¬éƒ¨ç½²åœ¨å¦ä¸€å°server.</p>
<p>æ€»ç»“:<br>Jenkinsé¦–å…ˆä»Gitlabå»æŠ“å–æˆ‘ä»¬å†™å¥½çš„å…·ä½“äº§å“çš„playbook, å¹¶ä½¿ç”¨virtualenvä¸‹çš„Ansibleç›¸å…³å‘½ä»¤, ä¿è¯æˆ‘ä»¬åœ¨ä¸€ä¸ªcleançš„ç¯å¢ƒä¸‹ä½¿ç”¨stable versionå»æ‰¹é‡éƒ¨ç½²æˆ‘ä»¬çš„äº§å“åˆ°è¿œç¨‹clientã€‚</p>
<h1 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h1><p>System: CentOS 6.7 x64 (deploy.example.com)<br>Jenkins: Jenkins ver. 1.650<br>Ansible: Ansible 2.1.0<br>Gitlab: GitLab 7.14.3</p>
<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="Jenkinsé…ç½®"><a href="#Jenkinsé…ç½®" class="headerlink" title="Jenkinsé…ç½®"></a>Jenkinsé…ç½®</h2><p>æˆ‘ä»¬åˆ›å»ºdeployç”¨æˆ·ä½œä¸ºjenkins_user, workspaceä¸ºdeployå®¶ç›®å½•ä¸‹çš„jenkinsç›®å½•.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># adduser deploy</span><br><span class="line"># vi /et</span><br><span class="line">c/sysconfig/jenkins</span><br><span class="line"> ...</span><br><span class="line">JENKINS_HOME=&quot;/home/deploy/jenkins&quot;</span><br><span class="line">JENKINS_USER=&quot;deploy&quot;</span><br></pre></td></tr></table></figure>
<p>æµè§ˆå™¨è®¿é—®Jenkinsé¡µé¢<br><a href="http://deploy.example.com:8080" target="_blank" rel="noopener">http://deploy.example.com:8080</a><br>å®‰è£…å®Œæˆã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå›½å†…PHPç½‘ç«™æ¨¡æ¿phpcmsä½œä¸ºæˆ‘ä»¬éœ€è¦éƒ¨ç½²çš„äº§å“è¿›è¡Œæœ¬æ¬¡èŒƒä¾‹æ¼”ç¤º, åœ¨è¿›è¡Œæœ€ç»ˆçš„Buildå‰æˆ‘ä»¬éœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œ, ç¨åæˆ‘ä»¬ä¼šå›åˆ°è¿™ä¸ªç•Œé¢ã€‚</p>
<h2 id="Ansibleé…ç½®"><a href="#Ansibleé…ç½®" class="headerlink" title="Ansibleé…ç½®"></a>Ansibleé…ç½®</h2><p>é…ç½®<a href="http://www.showerlee.com/archives/1862" target="_blank" rel="noopener">virtualenv</a><br><a href="http://www.showerlee.com/archives/1649" target="_blank" rel="noopener">Ansible-playbookèŒƒä¾‹</a></p>
<h2 id="Gitlabé…ç½®"><a href="#Gitlabé…ç½®" class="headerlink" title="Gitlabé…ç½®"></a>Gitlabé…ç½®</h2><p>æˆ‘ä»¬æœ€ç»ˆä¼šåˆ›å»ºä¸€ä¸ªansible playbookä»“åº“<a href="mailto:git@git.example.cn" target="_blank" rel="noopener">git@git.example.cn</a>:showerlee/Ansible-showerlee.git, å¹¶åœ¨æœ¬åœ°ç¼–å†™å¥½æˆ‘ä»¬çš„è§„åˆ™, æœ€ç»ˆcommitåˆ°è¿™ä¸ªä»“åº“, ä»¥ä¾¿Jenkinså»è°ƒç”¨æˆ‘ä»¬çš„éƒ¨ç½²è§„åˆ™ã€‚</p>
<p><a href="https://git.showerlee.com/showerlee/leon-playbook-phpcms1.1" target="_blank" rel="noopener">éƒ¨ç½²phpcmsçš„playbookä»“åº“å®ä¾‹</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><a class="article-category-link" href="/categories/æŠ€æœ¯/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ansible/">Ansible</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Gitlab/">Gitlab</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jenkins/">Jenkins</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-GitLabå®‰è£…éƒ¨ç½²" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/15/GitLabå®‰è£…éƒ¨ç½²/" class="article-date">
      <time datetime="2016-03-15T00:28:29.000Z" itemprop="datePublished">2016-03-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/15/GitLabå®‰è£…éƒ¨ç½²/">GitLabå®‰è£…éƒ¨ç½²</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.showerlee.com/archives/1285" target="_blank" rel="noopener">GitLabå®‰è£…éƒ¨ç½²</a></p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Gitlabæ˜¯ä¸€ä¸ªç”¨Ruby on Railså¼€å‘çš„å¼€æºé¡¹ç›®ç®¡ç†ç¨‹åº.å¯ä»¥é€šè¿‡WEBç•Œé¢è¿›è¡Œè®¿é—®å…¬å¼€çš„æˆ–è€…ç§äººé¡¹ç›®. å®ƒå’ŒGithubæœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿæµè§ˆæºä»£ç ï¼Œç®¡ç†ç¼ºé™·å’Œæ³¨é‡Š.</p>
<p>æœ¬æ–‡é€‰æ‹©NGINXä¸MYSQLæ¥é…åˆGitLabå®ç°webç®¡ç†,æ•°æ®å­˜å‚¨ç­‰åŠŸèƒ½,é…ç½®è¿‡ç¨‹ä¸­éš¾ç‚¹åŸºæœ¬åœ¨GitLabçš„è„šæœ¬ä¿®æ”¹,SSHç§˜é’¥è¿æ¥,Nginx SSLè¯ä¹¦ç­‰è¿™äº›æ–¹é¢,ä½œè€…ä¹Ÿæ˜¯è€—è´¹éå¸¸å¤§çš„åŠ›æ°”,ç»“åˆå¾ˆå¤šæ–‡æ¡£çš„clueä»¥åŠå¾ˆå¤šè€å¤–çš„debug comment,ç»ˆäºæœ€ç»ˆå®Œæˆ,å¸Œæœ›åœ¨æ­¤ç»™å¤§å®¶ä¸€ä¸ªæŠ›ç –å¼•ç‰çš„æœºä¼š,äº†è§£åˆ°SCM(è½¯ä»¶é…ç½®ç®¡ç†)å…¶å®ä¹Ÿä¸æ˜¯æƒ³è±¡ä¸­é‚£ä¹ˆå°å„¿ç§‘,å¾ˆå¤šé€»è¾‘ä¹Ÿç€å®éœ€è¦ä¸‹åŠŸå¤«investigation.</p>
<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><p>ç¯å¢ƒéƒ¨ç½²<br>æ“ä½œç³»ç»Ÿ               centos6.3 x64<br>GitLab                   GitLab 6-3-stable<br>GitLab Shell           1.8.0<br>Ruby                     2.0.0p353<br>NGINX                  nginx-1.4.0<br>MYSQL                 mysql-5.6.10</p>
<p>Git server(centos6.3 x64): git.example.com<br>Git client(centos6.3 x64): client.example.com</p>
<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="serverç«¯é…ç½®"><a href="#serverç«¯é…ç½®" class="headerlink" title="serverç«¯é…ç½®:"></a>serverç«¯é…ç½®:</h2><h3 id="å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ"><a href="#å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ" class="headerlink" title="å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ"></a>å®‰è£…å‰çš„å‡†å¤‡å·¥ä½œ</h3><ol>
<li>å…³é—­iptableså’ŒSELINUX</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># service iptables stop</span><br><span class="line"># setenforce 0</span><br><span class="line"># vi /etc/sysconfig/selinux</span><br><span class="line">---------------</span><br><span class="line">SELINUX=disabled</span><br><span class="line">---------------</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åŒæ­¥æ—¶é—´</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ntpdate cn.pool.ntp.org</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p><a href="http://www.showerlee.com/archives/73" target="_blank" rel="noopener">å®‰è£…LNMP</a></p>
</li>
<li><p>å®‰è£…GitLabçš„æ‰€éœ€ä¾èµ–åŒ…å’Œå·¥å…·</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># su -</span><br><span class="line"># rpm -Uvh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-5-4.noarch.rpm</span><br><span class="line"># yum -y groupinstall &apos;Development Tools&apos;</span><br><span class="line"># yum -y install vim-enhanced readline readline-devel ncurses-devel gdbm-devel glibc-devel tcl-devel openssl-devel curl-devel expat-devel db4-devel byacc sqlite-devel gcc-c++ libyaml libyaml-devel libffi libffi-devel libxml2 libxml2-devel libxslt libxslt-devel libicu libicu-devel system-config-firewall-tui python-devel redis sudo wget crontabs logwatch logrotate perl-Time-HiRes git</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>é…ç½®redis<br>é…ç½®rediså¼€æœºå¯åŠ¨ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># chkconfig redis on</span><br><span class="line"># service redis start</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>æ›´æ”¹gemæº(è‹¥é»˜è®¤æ— æ³•è¿æ¥)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a.æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„sources</span><br><span class="line"># gem sources</span><br><span class="line">b.åˆ é™¤ç¼ºçœsource</span><br><span class="line"># gem sources -r http://rubygems.org/</span><br><span class="line">c.æ·»åŠ ä¸€ä¸ªsource</span><br><span class="line"># gem sources -a https://ruby.taobao.org</span><br><span class="line">d.æ›´æ–°source cache</span><br><span class="line"># gem sources -u</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>å®‰è£…Ruby<br>a.<a href="http://www.showerlee.com/archives/1123" target="_blank" rel="noopener">æºç å®‰è£…Ruby</a><br>b.å®‰è£…bundleç»„ä»¶ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># gem install bundler --no-ri --no-rdoc</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…GITLab-shell"><a href="#å®‰è£…GITLab-shell" class="headerlink" title="å®‰è£…GITLab shell"></a>å®‰è£…GITLab shell</h3><ol>
<li>åˆ›å»ºç”¨æˆ·git</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># su -</span><br><span class="line"># adduser --system --shell /bin/bash --comment &apos;GitLab&apos; --create-home --home-dir /home/git/ git</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>é…ç½®GitLab shell<br>GitLab shellæ˜¯ä¸“é—¨ä¸ºGitLabå¼€å‘çš„æä¾›sshè®¿é—®å’Œç‰ˆæœ¬ç®¡ç†çš„è½¯ä»¶ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a.ä½¿ç”¨gitè´¦æˆ·ç™»é™†</span><br><span class="line"># su - git</span><br><span class="line">b.å…‹éš†gitlab shell</span><br><span class="line"># git clone https://github.com/gitlabhq/gitlab-shell.git</span><br><span class="line">c.åˆ‡æ¢æˆ1.8.0ç‰ˆæœ¬ï¼Œå¹¶ç¼–è¾‘é…ç½®</span><br><span class="line"># cd gitlab-shell</span><br><span class="line"># git checkout v1.8.0</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">d.æ‹·è´é…ç½®æ–‡ä»¶</span><br><span class="line"># cp config.yml.example config.yml</span><br><span class="line"># vi config.yml</span><br><span class="line"># å°†gitlab_urlä¿®æ”¹æˆgitlabçš„è®¿é—®åŸŸåã€‚ä¾‹å¦‚æœ¬æ–‡æ¡£ï¼šhttps://git.example.com/</span><br><span class="line">gitlab_url: &quot;https://git.example.com&quot;</span><br><span class="line"># å°†self_signed_certä¿®æ”¹æˆ true</span><br><span class="line">self_signed_cert: true</span><br><span class="line"># æ·»åŠ ç½‘ç«™SSLè¯ä¹¦ </span><br><span class="line">ca_file: &quot;/usr/local/nginx/ssl/gitlab.crt&quot;</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šå¦‚æœgitlabæ˜¯ä½¿ç”¨httpè®¿é—®ï¼Œåˆ™éœ€å°†httpsæ›¿æ¢æˆhttpï¼Œé…ç½®æ–‡ä»¶ä¸­çš„self_signed_certè¦ä¿®æ”¹æˆfalseï¼Œå¦åˆ™gitlab shellåœ¨é€šè¿‡apiå’Œgitlabè¿›è¡Œé€šä¿¡çš„æ—¶å€™å°±ä¼šå‡ºç°é”™è¯¯ï¼Œå¯¼è‡´é¡¹ç›®pushå‡ºé”™ã€‚å› ä¸ºåé¢é…ç½®webæœåŠ¡å™¨çš„æ—¶å€™æ˜¯ä½¿ç”¨sslï¼Œæ‰€ä»¥è¿™é‡Œè¦æŒ‰ç…§sslçš„æ–¹å¼é…ç½®ã€‚<br>å¦å¤–æœ¬æ–‡æ¡£çš„åŸŸåä¸ºæµ‹è¯•åŸŸåï¼Œä¸è¦å¿˜è®°åœ¨C/Sä¸¤ç«¯å‡åšå¥½åŸŸåæ˜ å°„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e.å®‰è£…ä¸€äº›éœ€è¦çš„ç›®å½•å’Œæ–‡ä»¶</span><br><span class="line"># ./bin/install</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>é…ç½®MySQLæ•°æ®åº“</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a.ç™»å½•æ•°æ®åº“</span><br><span class="line"># mysql -u root -p</span><br><span class="line">b. ä¸ºgitlabåˆ›å»ºä½¿ç”¨ç”¨æˆ·</span><br><span class="line">&gt; create user gitlab@&apos;localhost&apos; identified by &apos;123456&apos;;</span><br><span class="line">c.åˆ›å»ºgitlabaä½¿ç”¨çš„æ•°æ®åº“</span><br><span class="line">&gt; CREATE DATABASE IF NOT EXISTS `gitlabhq_production` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`;</span><br><span class="line">d.ç»™äºˆgitlabç”¨æˆ·æƒé™</span><br><span class="line">&gt; GRANT SELECT, LOCK TABLES, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER ON `gitlabhq_production`.* TO &apos;gitlab&apos;@&apos;localhost&apos;;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…GitLab"><a href="#å®‰è£…GitLab" class="headerlink" title="å®‰è£…GitLab"></a>å®‰è£…GitLab</h3><ol>
<li>å°†GitLabå®‰è£…åœ¨gitçš„å®¶ç›®å½•ä¸‹ï¼š</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># su - git</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å…‹éš†GitLabå¹¶åˆ‡æ¢åˆ†æ”¯åˆ°6-3-stable</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">a.å…‹éš†GitLab</span><br><span class="line"># git clone https://github.com/gitlabhq/gitlabhq.git gitlab</span><br><span class="line">b. åˆ‡æ¢åˆ°6-3-stableåˆ†æ”¯</span><br><span class="line"># cd /home/git/gitlab</span><br><span class="line"># git checkout 6-3-stable</span><br><span class="line">cã€é…ç½®é¡¹ç›®</span><br><span class="line">a.å¤åˆ¶é…ç½®æ–‡ä»¶</span><br><span class="line"># cp config/gitlab.yml.example config/gitlab.yml</span><br><span class="line">b.ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„è®¿é—®åŸŸå</span><br><span class="line"># sed -i &apos;s|localhost|git.example.com|g&apos; config/gitlab.yml</span><br><span class="line">d.è®¾å®šlogå’Œtmpç›®å½•æ‰€æœ‰è€…å’Œæƒé™</span><br><span class="line"># chown -R git log/</span><br><span class="line"># chown -R git tmp/</span><br><span class="line"># chmod -R u+rwX log/</span><br><span class="line"># chmod -R u+rwX tmp/</span><br><span class="line">e.åˆ›å»ºgitlab-satellitesç›®å½•</span><br><span class="line"># mkdir /home/git/gitlab-satellites</span><br><span class="line">f.åˆ›å»ºtmp/pids/å’Œtmp/sockets/ç›®å½•ï¼Œç¡®ä¿gitlabæœ‰ç›¸åº”çš„æƒé™</span><br><span class="line"># mkdir tmp/pids/</span><br><span class="line"># mkdir tmp/sockets/</span><br><span class="line"># chmod -R u+rwX tmp/pids/</span><br><span class="line"># chmod -R u+rwX tmp/sockets/</span><br><span class="line">g.åˆ›å»ºpublic/uploadsç›®å½•</span><br><span class="line"># mkdir public/uploads</span><br><span class="line"># chmod -R u+rwX public/uploads</span><br><span class="line">h.å¤åˆ¶unicorné…ç½®</span><br><span class="line"># cp config/unicorn.rb.example config/unicorn.rb</span><br><span class="line">i.ä¿æŒunicorné…ç½®æ–‡ä»¶é»˜è®¤é…ç½®</span><br><span class="line">g.é…ç½®gitçš„ç”¨æˆ·å’Œé‚®ä»¶</span><br><span class="line"># git config --global user.name &quot;GitLab&quot;</span><br><span class="line"># git config --global user.email &quot;gitlab@git.example.comâ€</span><br><span class="line"># git config --global core.autocrlf input</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">k.é…ç½®æ•°æ®åº“è®¿é—®æ–‡ä»¶</span><br><span class="line"># cp config/database.yml.mysql config/database.yml</span><br><span class="line">ç¼–è¾‘config/database.ymlï¼Œè®¾ç½®å…¶ä¸­è¿æ¥æ•°æ®åº“çš„è´¦å·å¯†ç </span><br><span class="line"># vi config/database.yml</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">#</span><br><span class="line"># PRODUCTION</span><br><span class="line">#</span><br><span class="line">production:</span><br><span class="line">  adapter: mysql2</span><br><span class="line">  encoding: utf8</span><br><span class="line">  reconnect: false</span><br><span class="line">  database: gitlabhq_production</span><br><span class="line">  pool: 10</span><br><span class="line">  username: gitlab</span><br><span class="line">  password: â€œ123456â€</span><br><span class="line">  # host: localhost</span><br><span class="line">  # socket: /tmp/mysql.sock</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">ä¿®æ”¹å…¶ä¸­usernameå’Œpasswordå°±å¯ä»¥äº†ï¼Œå…¶ä¸­å¯†ç å°±æ˜¯ä¸Šé¢æ•°æ®åº“æ­¥éª¤ä¸­åˆ›å»ºgitlabç”¨æˆ·çš„å¯†ç ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">l.ç¡®ä¿è¯¥æ–‡ä»¶åªæœ‰gitè´¦å·æœ‰æƒé™è¯»å–ã€‚</span><br><span class="line"># chmod o-rwx config/database.yml</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…Gems"><a href="#å®‰è£…Gems" class="headerlink" title="å®‰è£…Gems"></a>å®‰è£…Gems</h3><ol>
<li>å®‰è£…charlock_holmes</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># su -</span><br><span class="line"># gem install charlock_holmes --version &apos;0.6.9.4&apos;</span><br><span class="line"># exit</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å®‰è£…mysqlåŒ…</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># cd /home/git/gitlab/</span><br><span class="line"># vi Gemfile </span><br><span class="line">ä¿®æ”¹ https://rubygems.org ä¸º https://ruby.taobao.org</span><br><span class="line"># bundle install --deployment --without development test postgres puma aws</span><br><span class="line">è‹¥æŠ¥Could not find modernizr-2.6.2 in any of the sourcesé”™è¯¯,æ²¡æœ‰åˆ™æ— è§†:</span><br><span class="line">ä¿®å¤æ–¹æ¡ˆ:</span><br><span class="line"># vi Gemfile</span><br><span class="line">æœç´¢è¯¥è¡Œ   gem &quot;modernizr&quot;,        &quot;2.6.2&quot;</span><br><span class="line">æ›´æ”¹ä¸ºï¼š   gem &quot;modernizr-rails&quot;,  &quot;2.7.1&quot;</span><br><span class="line"># vi Gemfile.lock</span><br><span class="line">æœç´¢è¯¥è¡Œ   modernizr (2.6.2)</span><br><span class="line">æ›´æ”¹ä¸ºï¼š   modernizr-rails (2.7.1)</span><br><span class="line">æœç´¢è¯¥è¡Œ   modernizr (= 2.6.2)ï¼š</span><br><span class="line">æ›´æ”¹ä¸ºï¼š   modernizr-rails (= 2.7.1)</span><br><span class="line">é‡æ–°æ‰§è¡Œ</span><br><span class="line"># bundle install --deployment --without development test postgres puma aws</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>åˆå§‹åŒ–æ•°æ®å’Œæ¿€æ´»é«˜çº§åŠŸèƒ½</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cd /home/git/gitlab</span><br><span class="line"># bundle exec rake gitlab:setup RAILS_ENV=production</span><br><span class="line">è¿™æ­¥å®Œæˆåï¼Œä¼šç”Ÿä¸€ä¸ªé»˜è®¤çš„ç®¡ç†å‘˜è´¦å·/å¯†ç ï¼š</span><br><span class="line">admin@local.host/5iveL!fe</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>å®‰è£…å¯åŠ¨è„šæœ¬</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># su -</span><br><span class="line"># wget -O /etc/init.d/gitlab https://raw.github.com/gitlabhq/gitlab-recipes/5-0-stable/init.d/gitlab</span><br><span class="line"># chmod +x /etc/init.d/gitlab</span><br></pre></td></tr></table></figure>
<p>5.å¼€æœºæ—¶å¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># chkconfig --add gitlab</span><br><span class="line"># chkconfig gitlab on</span><br></pre></td></tr></table></figure>
<p>6.æ£€æµ‹åº”ç”¨ç¨‹åºçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># su - git</span><br><span class="line"># cd gitlab/</span><br><span class="line"># bundle exec rake gitlab:env:info RAILS_ENV=production</span><br><span class="line"># exit</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æŸ¥çœ‹åˆ°ç³»ç»Ÿã€Rubyã€GitLabå’ŒGitLab Shellçš„ç‰ˆæœ¬å’Œå…¶ä»–ä¿¡æ¯ã€‚</p>
<ol start="7">
<li>å¯åŠ¨GitLabå®ä¾‹</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># service gitlab start</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>æŸ¥çœ‹åº”ç”¨æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># su - git</span><br><span class="line"># cd gitlab/</span><br><span class="line"># bundle exec rake gitlab:check RAILS_ENV=production</span><br><span class="line">è¿™é‡Œä¼šæç¤ºä¸€ä¸ªInit script up-to-dateçš„é”™è¯¯ï¼Œå¦‚ä¸‹ï¼š</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">Init script up-to-date? ... no</span><br><span class="line">Try fixing it:</span><br><span class="line">Redownload the init script</span><br><span class="line">For more information see:</span><br><span class="line">doc/install/installation.md in section &quot;Install Init Script&quot;</span><br><span class="line">Please fix the error above and rerun the checks.</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">æŸ¥é˜…å®˜æ–¹è‡ªå¸¦æ–‡æ¡£,è¯´æ˜æ­¤é—®é¢˜å¯å¿½ç•¥.</span><br></pre></td></tr></table></figure>
<h3 id="Nginxé…ç½®"><a href="#Nginxé…ç½®" class="headerlink" title="Nginxé…ç½®"></a>Nginxé…ç½®</h3><ol>
<li>é…ç½®Gitlabè™šæ‹Ÿä¸»æœºåŠSSLè¿æ¥:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cd /usr/local/nginx/conf/vhosts/</span><br><span class="line"># vi gitlab-ssl.conf</span><br><span class="line">æ³¨: è¿™é‡Œå…ˆæ„Ÿè°¢æä¾›æ­¤è„šæœ¬çš„æå®¢,è¯¥è„šæœ¬åœ¨åŸåŸºç¡€ä¸Šç¨ä½œæ”¹åŠ¨.</span><br><span class="line">å†…å®¹ç”¨çº¢å­—æ ‡æ³¨çš„åœ°æ–¹ä¸ºéœ€è¦è‡ªå®šä¹‰çš„åœ°æ–¹.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">## GitLab</span><br><span class="line">## Contributors: randx, yin8086, sashkab, orkoden, axilleas</span><br><span class="line">## App Version: 5.4 - 6.0</span><br><span class="line">##</span><br><span class="line">## Modified from nginx http version</span><br><span class="line">## Modified from http://blog.phusion.nl/2012/04/21/tutorial-setting-up-gitlab-on-debian-6/</span><br><span class="line">##</span><br><span class="line">## Lines starting with two hashes (##) are comments containing information</span><br><span class="line">## for configuration. One hash (#) comments are actual configuration parameters</span><br><span class="line">## which you can comment/uncomment to your liking.</span><br><span class="line">##</span><br><span class="line">###################################</span><br><span class="line">##        SSL configuration      ##</span><br><span class="line">###################################</span><br><span class="line">##</span><br><span class="line">## Optimal configuration is taken from:</span><br><span class="line">## https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</span><br><span class="line">## Make sure to read it and understand what each option does.</span><br><span class="line">##</span><br><span class="line">## [Optional] Generate a self-signed ssl certificate:</span><br><span class="line">##    mkdir /etc/nginx/ssl/</span><br><span class="line">##    cd /etc/nginx/ssl/</span><br><span class="line">##    sudo openssl req -newkey rsa:2048 -x509 -nodes -days 3560 -out gitlab.crt -keyout gitlab.key</span><br><span class="line">##    sudo chmod o-r gitlab.key</span><br><span class="line">##</span><br><span class="line">## Edit `gitlab-shell/config.yml`:</span><br><span class="line">##  1) Set &quot;gitlab_url&quot; param in `gitlab-shell/config.yml` to `https://git.example.com`</span><br><span class="line">##  2) Set &quot;ca_file&quot; to `/etc/nginx/ssl/gitlab.crt`</span><br><span class="line">##  3) Set &quot;self_signed_cert&quot; to `true`</span><br><span class="line">## Edit `gitlab/config/gitlab.yml`:</span><br><span class="line">##  1) Define port for http &quot;port: 443&quot;</span><br><span class="line">##  2) Enable https &quot;https: true&quot;</span><br><span class="line">##  3) Update ssl for gravatar &quot;ssl_url: https://secure.gravatar.com/avatar/%&#123;hash&#125;?s=%&#123;size&#125;&amp;d=mm&quot;</span><br><span class="line">##</span><br><span class="line">##################################</span><br><span class="line">##        CHUNKED TRANSFER      ##</span><br><span class="line">##################################</span><br><span class="line">##</span><br><span class="line">## It is a known issue that Git-over-HTTP requires chunked transfer encoding [0]</span><br><span class="line">## which is not supported by Nginx &lt; 1.3.9 [1]. As a result, pushing a large object</span><br><span class="line">## with Git (i.e. a single large file) can lead to a 411 error. In theory you can get</span><br><span class="line">## around this by tweaking this configuration file and either:</span><br><span class="line">## - installing an old version of Nginx with the chunkin module [2] compiled in, or</span><br><span class="line">## - using a newer version of Nginx.</span><br><span class="line">##</span><br><span class="line">## At the time of writing we do not know if either of these theoretical solutions works. As a workaround</span><br><span class="line">## users can use Git over SSH to push large files.</span><br><span class="line">##</span><br><span class="line">## [0] https://git.kernel.org/cgit/git/git.git/tree/Documentation/technical/http-protocol.txt#n99</span><br><span class="line">## [1] https://github.com/agentzh/chunkin-nginx-module#status</span><br><span class="line">## [2] https://github.com/agentzh/chunkin-nginx-module</span><br><span class="line">upstream gitlab &#123;</span><br><span class="line">  ## Uncomment if you have set up puma/unicorn to listen on a unix socket (recommended).</span><br><span class="line">  server unix:/home/git/gitlab/tmp/sockets/gitlab.socket;</span><br><span class="line">  ## Uncomment if puma/unicorn are configured to listen on a tcp port.</span><br><span class="line">  ## Check the port number in /home/git/gitlab/config/&#123;puma.rb/unicorn.rb&#125;</span><br><span class="line">  # server 127.0.0.1:8080;</span><br><span class="line">&#125;</span><br><span class="line">## This is a normal HTTP host which redirects all traffic to the HTTPS host.</span><br><span class="line">server &#123;</span><br><span class="line">  listen *:80;</span><br><span class="line">  ## Replace git.example.com with your FQDN.</span><br><span class="line">  server_name git.example.com;</span><br><span class="line">  server_tokens off;</span><br><span class="line">  ## This doesn&apos;t have to be a valid path since we are redirecting,</span><br><span class="line">  ## you don&apos;t have to change it.</span><br><span class="line">  root /nowhere;</span><br><span class="line">  rewrite ^ https://$server_name$request_uri permanent;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">  listen 443 ssl;</span><br><span class="line">  ## Replace git.example.com with your FQDN.</span><br><span class="line">  server_name git.example.com;</span><br><span class="line">  server_tokens off;</span><br><span class="line">  root /home/git/gitlab/public;</span><br><span class="line">  ## Increase this if you want to upload large attachments</span><br><span class="line">  ## Or if you want to accept large git objects over http</span><br><span class="line">  client_max_body_size 20m;</span><br><span class="line">  ## Strong SSL Security</span><br><span class="line">  ## https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</span><br><span class="line">  ssl on;</span><br><span class="line">  ssl_certificate /usr/local/nginx/ssl/gitlab.crt;</span><br><span class="line">  ssl_certificate_key /usr/local/nginx/ssl/gitlab.key;</span><br><span class="line">  ssl_protocols  TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">  ssl_session_cache  builtin:1000  shared:SSL:10m;</span><br><span class="line"></span><br><span class="line">  #add_header Strict-Transport-Security max-age=63072000;</span><br><span class="line">  #add_header X-Frame-Options DENY;</span><br><span class="line">  #add_header X-Content-Type-Options nosniff;</span><br><span class="line">  ## Individual nginx logs for this GitLab vhost</span><br><span class="line">  access_log  /usr/local/nginx/logs/gitlab_access.log;</span><br><span class="line">  error_log   /usr/local/nginx/logs/gitlab_error.log;</span><br><span class="line">  location / &#123;</span><br><span class="line">    ## Serve static files from defined root folder.</span><br><span class="line">    ## @gitlab is a named location for the upstream fallback, see below.</span><br><span class="line">    try_files $uri $uri/index.html $uri.html @gitlab;</span><br><span class="line">  &#125;</span><br><span class="line">  ## If a file, which is not found in the root folder is requested,</span><br><span class="line">  ## then the proxy pass the request to the upsteam (gitlab unicorn).</span><br><span class="line">  location @gitlab &#123;</span><br><span class="line">    ## If you use https make sure you disable gzip compression</span><br><span class="line">    ## to be safe against BREACH attack.</span><br><span class="line">    gzip off;</span><br><span class="line">    ## https://github.com/gitlabhq/gitlabhq/issues/694</span><br><span class="line">    ## Some requests take more than 30 seconds.</span><br><span class="line">    proxy_read_timeout      300;</span><br><span class="line">    proxy_connect_timeout   300;</span><br><span class="line">    proxy_redirect          off;</span><br><span class="line">    proxy_set_header   Host              $http_host;</span><br><span class="line">    proxy_set_header   X-Real-IP         $remote_addr;</span><br><span class="line">    proxy_set_header   X-Forwarded-Ssl   on;</span><br><span class="line">    proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header   X-Forwarded-Proto $scheme;</span><br><span class="line">    proxy_pass http://127.0.0.1:8080;</span><br><span class="line">  &#125;</span><br><span class="line">  ## Enable gzip compression as per rails guide:</span><br><span class="line">  ## http://guides.rubyonrails.org/asset_pipeline.html#gzip-compression</span><br><span class="line">  location ~ ^/(assets)/ &#123;</span><br><span class="line">    root /home/git/gitlab/public;</span><br><span class="line">    gzip_static on; # to serve pre-gzipped version</span><br><span class="line">    expires max;</span><br><span class="line">    add_header Cache-Control public;</span><br><span class="line">  &#125;</span><br><span class="line">  error_page 502 /502.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å°†nginxåŠ å…¥gitç”¨æˆ·ç»„(é‡è¦)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># usermod -a -G git nginx</span><br><span class="line"># chmod g+rx /home/git/</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ç”Ÿæˆsslè¯ä¹¦</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># mkdir /usr/local/nginx/ssl</span><br><span class="line"># cd /usr/local/nginx/ssl</span><br><span class="line"># openssl req -new -x509 -nodes -days 3560 -out gitlab.crt -keyout gitlab.key</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>å¼€å¯Git over SSL</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># vi /home/git/gitlab/config/gitlab.yml</span><br><span class="line">  ## GitLab settings</span><br><span class="line">  gitlab:</span><br><span class="line">    ## Web server settings</span><br><span class="line">    host: git.example.com</span><br><span class="line">    port: 443</span><br><span class="line">    https: true</span><br><span class="line"># vi /home/git/gitlab-shell/config.yml</span><br><span class="line">gitlab_url: &quot;https://git.example.com&quot;</span><br><span class="line">http_settings:</span><br><span class="line">#  user: someone</span><br><span class="line">#  password: somepass</span><br><span class="line">#  ca_file: /etc/ssl/cert.pem</span><br><span class="line">#  ca_path: /etc/ssl/</span><br><span class="line">  self_signed_cert: true</span><br><span class="line"></span><br><span class="line">ca_file: &quot;/usr/local/nginx/ssl/gitlab.crt&quot;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>å¯åŠ¨nginx</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># service nginx start</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>æ‰“å¼€webé¡µé¢ git.example.com<br>nginxç›´æ¥è·³è½¬URLä¸º<a href="https://git.example.com" target="_blank" rel="noopener">https://git.example.com</a></li>
</ol>
<p>GitLabé»˜è®¤çš„è´¦å·å¯†ç å¦‚ä¸‹:<br><a href="mailto:admin@local.host" target="_blank" rel="noopener">admin@local.host</a>/5iveL!fe</p>
<h2 id="Clientç«¯é…ç½®"><a href="#Clientç«¯é…ç½®" class="headerlink" title="Clientç«¯é…ç½®:"></a>Clientç«¯é…ç½®:</h2><h3 id="ä¸Šä¼ gitä»“åº“"><a href="#ä¸Šä¼ gitä»“åº“" class="headerlink" title="ä¸Šä¼ gitä»“åº“"></a>ä¸Šä¼ gitä»“åº“</h3><ol>
<li>å®¢æˆ·ç«¯ç”Ÿæˆç§˜é’¥</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cd ~</span><br><span class="line"># ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>
<p>ä¸€è·¯å›è½¦åç”Ÿæˆå…¬é’¥å’Œç§˜é’¥å¯¹<br>$ cat ~/.ssh/id_rsa.pub </p>
<p>å°†è¿™é‡Œç”Ÿæˆçš„å…¬é’¥å…¨éƒ¨å¤åˆ¶å¹¶ç²˜è´´åˆ°gitlab web SSH Keysåå°ä¿å­˜å³å¯ã€‚</p>
<ol start="2">
<li>æµ‹è¯•SSHè¿æ¥</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ssh -p22 git@git.example.com</span><br></pre></td></tr></table></figure>
<p>è‹¥æŠ¥å¦‚ä¸‹é”™è¯¯:<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>PTY allocation request failed on channel 1<br>/usr/bin/env: ruby: No such file or directory<br>Connection to git.example.com closed.<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>è¯´æ˜æœåŠ¡ç«¯rubyç¯å¢ƒå˜é‡æœªåœ¨æ­¤ç›®å½•/usr/bin/ruby<br>åœ¨æœåŠ¡å™¨ç«¯åŠ æ­¤è½¯é“¾å³å¯:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ln -s /usr/local/ruby/bin/ruby /usr/bin/ruby</span><br></pre></td></tr></table></figure>
<p>æ³¨:è‹¥æœåŠ¡å™¨ç«¯SSHè‡ªå®šä¹‰ç«¯å£,åˆ™éœ€è¦åœ¨å®¢æˆ·ç«¯~/.ssh/configä¸‹æ·»åŠ ç«¯å£é…ç½®<br>å‡å®šè‡ªå®šä¹‰SSHç«¯å£ä¸º2222</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># echo â€œPort 2222â€ &gt;&gt; ~/.ssh/config</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>å‘½ä»¤è¡Œä¸Šä¼ gitä»“åº“</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># su - </span><br><span class="line"># mkdir testprojiect</span><br><span class="line"># cd testprojiect/</span><br><span class="line"># git init</span><br><span class="line"># echo &quot;What a fucking Hello World&quot; &gt; readme.txt</span><br><span class="line"># git add .</span><br><span class="line"># git commit -m &apos;first commit&apos;</span><br><span class="line"># git remote add origin git@git.example.com:root/testproject.git</span><br><span class="line"># git push -u origin master</span><br></pre></td></tr></table></figure>
<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">æ³¨: è‹¥ä¸»é¡µCSSå‡ºç°é”™è¯¯æœªåŠ è½½, å¯ä»æ–°ç¼–è¯‘assets, å¯ä»æ–°è·å–CSSæ–‡ä»¶.</span><br><span class="line"># cd /home/git/gitlab</span><br><span class="line"># bundle exec rake assets:precompile RAILS_ENV=production</span><br><span class="line"></span><br><span class="line">æ³¨: è§£å†³Gravatarçš„å¤´åƒåŠ è½½timeouté—®é¢˜</span><br><span class="line">æœç´¢plain_urléƒ¨åˆ†, å°†åŸæœ‰éƒ¨åˆ†æ”¹æˆ:</span><br><span class="line">plain_url: &quot;http://gravatar.duoshuo.com/avatar/%&#123;hash&#125;?s=%&#123;size&#125;&amp;d=identicon&quot;</span><br><span class="line">#cd /home/git/gitlab</span><br><span class="line">æ¸…é™¤ç¼“å­˜</span><br><span class="line"># RAILS_ENV=production bundle exec rake cache:clear</span><br><span class="line"># service gitlab restart</span><br><span class="line"></span><br><span class="line">æ³¨: è§£å†³å†…å­˜è€—å°½é—®é¢˜</span><br><span class="line">å¦‚æœä½ çš„VPS ä¸º1Gå†…å­˜+1æ ¸å¤„ç†å™¨</span><br><span class="line">å»ºè®®å°†é»˜è®¤çš„unicorn worker_processè®¾ç½®ä¸º2, timeoutè®¾å®šä¸º60s, è¿™æ ·å°±ä¸ä¼šå› ä¸ºé•¿æ—¶é—´åŠ è½½webé¡µé¢è€Œå‡ºç°timeoutç­‰é—®é¢˜.</span><br><span class="line"># vi /home/git/gitlab/config/unicorn.rb</span><br></pre></td></tr></table></figure>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><a class="article-category-link" href="/categories/æŠ€æœ¯/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Gitlab/">Gitlab</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx/">Nginx</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Ansibleå®‰è£…é…ç½®" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/15/Ansibleå®‰è£…é…ç½®/" class="article-date">
      <time datetime="2016-03-15T00:24:13.000Z" itemprop="datePublished">2016-03-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/15/Ansibleå®‰è£…é…ç½®/">Ansibleå®‰è£…é…ç½®</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.showerlee.com/archives/1649" target="_blank" rel="noopener">Ansibleå®‰è£…éƒ¨ç½²</a></p>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Ansibleæ˜¯ä¸€ç§é›†æˆITç³»ç»Ÿçš„é…ç½®ç®¡ç†, åº”ç”¨éƒ¨ç½², æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„å¼€æºå¹³å°. å®ƒåŸºäºPythonè¯­è¨€å®ç°, éƒ¨ç½²åªéœ€åœ¨ä¸»æ§ç«¯éƒ¨ç½²Ansibleç¯å¢ƒ, è¢«æ§ç«¯æ— éœ€å®‰è£…ä»£ç†å·¥å…·, åªéœ€æ‰“å¼€SSH, è®©ä¸»æ§ç«¯é€šè¿‡SSHç§˜é’¥è®¤è¯å¯¹å…¶è¿›è¡Œæ‰€æœ‰çš„ç®¡ç†ç›‘æ§æ“ä½œ. ç›¸å¯¹äºSaltStack, å®ƒé™¤äº†åˆ©ç”¨SSHå®‰å…¨ä¼ è¾“, æ— éœ€åœ¨å®¢æˆ·ç«¯è¿›è¡Œä»»ä½•é…ç½®, è€Œä¸”å®ƒæœ‰ä¸€ä¸ªå¾ˆåºå¤§çš„ç”¨æˆ·ç¾¤ä½“ä»¥åŠä¸°å¯Œçš„API, ç›¸å¯¹é€‚åˆéƒ¨ç½²åˆ°æ•°é‡æ¯”è¾ƒå¤§ä¸”å¯¹ç³»ç»Ÿè½¯ä»¶å®‰è£…è¦æ±‚æ¯”è¾ƒä¸¥æ ¼çš„é›†ç¾¤ä¸­.<br>æ›´å¤šé…ç½®å‚è€ƒ: <a href="https://github.com/ansible" target="_blank" rel="noopener">https://github.com/ansible</a><br>å®˜æ–¹æ–‡æ¡£: <a href="http://docs.ansible.com/ansible" target="_blank" rel="noopener">http://docs.ansible.com/ansible</a></p>
<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><p>å®‰è£…ç¯å¢ƒ:<br>System: Centos 6.7 x64<br>Master: master.example.com<br>Minion: client01.example.com<br>Minion: client02.example.com</p>
<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h2 id="ç¯å¢ƒéƒ¨ç½²"><a href="#ç¯å¢ƒéƒ¨ç½²" class="headerlink" title="ç¯å¢ƒéƒ¨ç½²"></a>ç¯å¢ƒéƒ¨ç½²</h2><ol>
<li>å…³é—­iptableså’ŒSELINUX</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># service iptables stop</span><br><span class="line"># setenforce 0</span><br><span class="line"># vi /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Masterç«¯å®‰è£…EPELç¬¬ä¸‰æ–¹yumæº</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># rpm -Uvh http://ftp.linux.ncsu.edu/pub/epel/6/i386/epel-release-6-8.noarch.rpm</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>å®‰è£…Ansible<br>a. yum</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install ansible -y</span><br></pre></td></tr></table></figure>
<p>b.pip<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install ansible</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li>æ·»åŠ ç¯å¢ƒå˜é‡ä»¥ä¾¿vièƒ½æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ³¨é‡Š.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/profile</span><br><span class="line">æ·»åŠ :</span><br><span class="line">export LC_ALL=en_US.UTF-8</span><br><span class="line">export LANG=en_US.UTF-8</span><br><span class="line">export LANGUAGE=en_US.UTF-8</span><br><span class="line"># source /etc/profile</span><br></pre></td></tr></table></figure>
<h2 id="åˆå§‹é…ç½®"><a href="#åˆå§‹é…ç½®" class="headerlink" title="åˆå§‹é…ç½®"></a>åˆå§‹é…ç½®</h2><ol>
<li>ä¿®æ”¹ä¸»æœºåŠç»„é…ç½®</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># cd /etc/ansible</span><br><span class="line"># cp hosts hosts.bak</span><br><span class="line"># cat /dev/null &gt; hosts</span><br><span class="line"># vi /etc/ansible/hosts</span><br><span class="line">[webservers]</span><br><span class="line">client01.example.com</span><br><span class="line">client02.example.com</span><br><span class="line">[nginx01]</span><br><span class="line">client01.example.com</span><br><span class="line">[nginx02]</span><br><span class="line">client02.example.com</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>é…ç½®SSHç§˜é’¥è®¤è¯</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># yum install ssh* -y</span><br><span class="line"># ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>
<p>åŒæ­¥å…¬é’¥æ–‡ä»¶id_rsa.pubåˆ°ç›®æ ‡ä¸»æœº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ssh-copy-id -i /root/.ssh/id_rsa.pub root@client01.example.com</span><br><span class="line"># ssh-copy-id -i /root/.ssh/id_rsa.pub root@client02.example.com</span><br></pre></td></tr></table></figure>
<p>æ ¡éªŒSSHå…å¯†ç é…ç½®æ˜¯å¦æˆåŠŸ.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ssh root@client02.example.com</span><br></pre></td></tr></table></figure>
<p>å¦‚ç›´æ¥è¿›å…¥åˆ™é…ç½®å®Œæˆ.</p>
<ol start="3">
<li>å®šä¹‰ä¸»æœºä¸ç»„<br>æ‰€æœ‰å®šä¹‰çš„ä¸»æœºä¸ç»„è§„åˆ™éƒ½åœ¨/etc/Ansible/hostsä¸‹.<br>å¸¸è§çš„å†™æ³•:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.21:2135 å®šä¹‰ä¸€ä¸ªIPä¸º192.168.1.21, SSHç«¯å£ä¸º2135çš„ä¸»æœº.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jumper ansible_ssh_port=22 ansible_ssh_host=192.168.1.50 å®šä¹‰ä¸€ä¸ªåˆ«åä¸ºjumper, SSHç«¯å£ä¸º22, IPä¸º192.168.1.50çš„ä¸»æœº. </span><br><span class="line">ç»„æˆå‘˜ä¸»æœºåç§°èŒƒä¾‹:</span><br><span class="line">[webservers]</span><br><span class="line">www[001:006].example.com</span><br><span class="line">[dbservers]</span><br><span class="line">db-[a:f].example.com</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>å®šä¹‰ä¸»æœºå˜é‡<br>ä¸»æœºå¯ä»¥æŒ‡å®šå˜é‡, åé¢å¯ä»¥ä¾›Playbooksè°ƒç”¨</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[atlanta]</span><br><span class="line">host1 http_port=80 maxRequestsPerChild=808</span><br><span class="line">host2 http_port=8080 maxRequestsPerChild=909</span><br><span class="line">5.å®šä¹‰ç»„å˜é‡</span><br><span class="line">[atlanta]</span><br><span class="line">host1</span><br><span class="line">host2</span><br><span class="line"></span><br><span class="line">[atlanta:vars]</span><br><span class="line">ntp_server=ntp.atlanta.example.com</span><br><span class="line">proxy=proxy.atlanta.example.com</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>åŒ¹é…ç›®æ ‡<br>é‡å¯webserversç»„æ‰€æœ‰SSHæœåŠ¡.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ansible webservers -m service -a &quot;name=sshd state=restarted&quot;</span><br></pre></td></tr></table></figure>
<h2 id="Ansibleå¸¸ç”¨æ¨¡å—åŠAPI"><a href="#Ansibleå¸¸ç”¨æ¨¡å—åŠAPI" class="headerlink" title="Ansibleå¸¸ç”¨æ¨¡å—åŠAPI"></a>Ansibleå¸¸ç”¨æ¨¡å—åŠAPI</h2><ol>
<li>è¿œç¨‹å‘½ä»¤æ¨¡å—<br>command: æ‰§è¡Œè¿œç¨‹ä¸»æœºSHELLå‘½ä»¤:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ansible webservers -m command -a &quot;free -m&quot;</span><br></pre></td></tr></table></figure>
<p>script: è¿œç¨‹æ‰§è¡ŒMASTERæœ¬åœ°SHELLè„šæœ¬.(ç±»ä¼¼scp+shell)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line"># echo &quot;df -h&quot; &gt; ~/test.sh</span><br><span class="line"># ansible webservers -m script -a &quot;~/test.sh&quot;</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">2. copyæ¨¡å—</span><br><span class="line">å®ç°ä¸»æ§ç«¯å‘ç›®æ ‡ä¸»æœºæ‹·è´æ–‡ä»¶, ç±»ä¼¼scpåŠŸèƒ½.</span><br><span class="line">è¯¥å®ä¾‹å®ç°~/test.shæ–‡ä»¶è‡³webserversç»„ç›®æ ‡ä¸»æœº/tmpä¸‹, å¹¶æ›´æ–°æ–‡ä»¶ownerå’Œgroup</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># ansible webservers -m copy -a &quot;src=~/test.sh dest=/tmp/ owner=root group=root mode=0755&quot;</span><br><span class="line"># ansible webservers -m copy -a &quot;src=~/test.sh dest=/tmp/ owner=root group=root mode=0755&quot;</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">3. statæ¨¡å—</span><br><span class="line">è·å–è¿œç¨‹æ–‡ä»¶çŠ¶æ€ä¿¡æ¯, åŒ…æ‹¬atime, ctime, mtime, md5, uid, gidç­‰ä¿¡æ¯.</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># ansible webservers -m stat -a &quot;path=/etc/sysctl.conf&quot;</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">4. get_urlæ¨¡å—</span><br><span class="line">å®ç°åœ¨è¿œç¨‹ä¸»æœºä¸‹è½½æŒ‡å®šURLåˆ°æœ¬åœ°.</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># ansible webservers -m get_url -a &quot;url=http://www.showerlee.com dest=/tmp/index.html mode=0400 force=yes&quot;</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">5. yumæ¨¡å—</span><br><span class="line">LinuxåŒ…ç®¡ç†å¹³å°æ“ä½œ,  å¸¸è§éƒ½ä¼šæœ‰yumå’Œapt, æ­¤å¤„ä¼šè°ƒç”¨yumç®¡ç†æ¨¡å¼</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># ansible servers -m yum -a &quot;name=curl state=latest&quot;</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">6. cronæ¨¡å—</span><br><span class="line">è¿œç¨‹ä¸»æœºcrontabé…ç½®</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># ansible webservers -m cron -a &quot;name=&apos;check dir&apos; hour=&apos;5,2&apos; job=&apos;ls -alh &gt; /dev/null&apos;&quot;</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">7. serviceæ¨¡å—</span><br><span class="line">è¿œç¨‹ä¸»æœºç³»ç»ŸæœåŠ¡ç®¡ç†</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># ansible webservers -m service -a &quot;name=crond state=stopped&quot;</span><br><span class="line"># ansible webservers -m service -a &quot;name=crond state=restarted&quot;</span><br><span class="line"># ansible webservers -m service -a &quot;name=crond state=reloaded&quot;</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">8. useræœåŠ¡æ¨¡å—</span><br><span class="line">è¿œç¨‹ä¸»æœºç³»ç»Ÿç”¨æˆ·ç®¡ç†</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line">æ·»åŠ ç”¨æˆ·:</span><br><span class="line"># ansible webservers -m user -a &quot;name=johnd comment=&apos;John Doe&apos;&quot;</span><br><span class="line">åˆ é™¤ç”¨æˆ·:</span><br><span class="line"># ansible webservers -m user -a &quot;name=johnd state=absent remove=yes&quot;</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">## playbookä»‹ç»</span><br><span class="line">playbookæ˜¯ä¸€ä¸ªä¸åŒäºä½¿ç”¨Ansibleå‘½ä»¤è¡Œæ‰§è¡Œæ–¹å¼çš„æ¨¡å¼, å…¶åŠŸèƒ½æ˜¯å°†å¤§é‡å‘½ä»¤è¡Œé…ç½®é›†æˆåˆ°ä¸€èµ·å½¢æˆä¸€ä¸ªå¯å®šåˆ¶çš„å¤šä¸»æœºé…ç½®ç®¡ç†éƒ¨ç½²å·¥å…·.</span><br><span class="line">å®ƒé€šè¿‡YAMLæ ¼å¼å®šä¹‰, å¯ä»¥å®ç°å‘å¤šå°ä¸»æœºçš„åˆ†å‘åº”ç”¨éƒ¨ç½².</span><br><span class="line">ä»¥ä¸‹ç»™å¤§å®¶è¯¦ç»†ä»‹ç»ä¸€ä¸ªé’ˆå¯¹nginxåµŒå¥—å¤ç”¨ç»“æ„çš„</span><br><span class="line">playbookéƒ¨ç½²å®ä¾‹:</span><br><span class="line"></span><br><span class="line">1. æ„å»ºç›®å½•ç»“æ„</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># cd /etc/ansible/</span><br><span class="line"># mkdir group_vars</span><br><span class="line"># mkdir roles</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">2. å®šä¹‰host</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># vi /etc/ansible/hosts</span><br><span class="line">[webservers]</span><br><span class="line">client01.example.com</span><br><span class="line">client02.example.com</span><br><span class="line">[nginx01]</span><br><span class="line">client01.example.com</span><br><span class="line">[nginx02]</span><br><span class="line">client02.example.com</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">3. å®šä¹‰å˜é‡</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># vi /etc/ansible/group_vars/nginx01</span><br><span class="line">worker_processes: 4</span><br><span class="line">num_cpus: 4</span><br><span class="line">max_open_file: 65506</span><br><span class="line">root: /data</span><br><span class="line">remote_user: root</span><br><span class="line"># vi /etc/ansible/group_vars/nginx02</span><br><span class="line">worker_processes: 2</span><br><span class="line">num_cpus: 2</span><br><span class="line">max_open_file: 35506</span><br><span class="line">root: /www</span><br><span class="line">remote_user: root</span><br><span class="line">â€‹```</span><br><span class="line">Tips:è¿™é‡Œåœ¨group_varsä¸‹å®šä¹‰çš„æ–‡ä»¶åå¿…é¡»å¯¹åº”hostsæ–‡ä»¶ä¸‹çš„groupæ ‡ç­¾, é€šè¿‡è¿™é‡Œå®šä¹‰çš„ä¸åŒå‚æ•°ä»è€Œéƒ¨ç½²ä¸åŒç±»å‹çš„ä¸»æœºé…ç½®.</span><br><span class="line"></span><br><span class="line">4. åˆ›å»ºroleså…¥å£æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># vi /etc/ansible/site.yml</span><br><span class="line">- hosts: webservers</span><br><span class="line">  roles:</span><br><span class="line">  - base_env</span><br><span class="line">- hosts: nginx01</span><br><span class="line">  roles:</span><br><span class="line">  - nginx01</span><br><span class="line">- hosts: nginx02</span><br><span class="line">  roles:</span><br><span class="line">  - nginx02</span><br><span class="line">â€‹```</span><br><span class="line">Tips: è¿™é‡Œçš„roles:ä¸‹çš„å­—ç¬¦ä¸²éœ€å¯¹åº”rolesç›®å½•ä¸‹çš„ç›®å½•å.</span><br><span class="line"></span><br><span class="line">5. å®šä¹‰å…¨å±€role base_env</span><br><span class="line">åˆ›å»ºç›®å½•ç»“æ„</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># mkdir -p /etc/ansible/roles/base_env/tasks </span><br><span class="line"># vi /etc/ansible/roles/base_env/tasks/main.yml</span><br><span class="line"># å°†EPELçš„yumæºé…ç½®æ–‡ä»¶ä¼ é€åˆ°å®¢æˆ·ç«¯</span><br><span class="line">- name: Create the contains common plays that will run on all nodes </span><br><span class="line">  copy: src=epel.repo dest=/etc/yum.repos.d/epel.repo</span><br><span class="line">- name: Create the GPG key for EPEL</span><br><span class="line">  copy: src=RPM-GPG-KEY-EPEL-6 dest=/etc/pki/rpm-gpg</span><br><span class="line">  </span><br><span class="line"># å…³é—­SELINUX</span><br><span class="line">- name: test to see if selling is running</span><br><span class="line">  command: getenforce</span><br><span class="line">  register: sestatus</span><br><span class="line">  changed_when: false</span><br><span class="line"></span><br><span class="line"># åˆ é™¤iptablesé»˜è®¤è§„åˆ™å¹¶ä¿å­˜</span><br><span class="line">- name: remove the default iptables rules</span><br><span class="line">  command: iptables -F</span><br><span class="line">- name: save iptables rules</span><br><span class="line">  command: service iptables save</span><br><span class="line">å°†å¯¹åº”éœ€è¦æ‹·è´åˆ°è¿œç¨‹çš„æ–‡ä»¶å¤åˆ¶åˆ°base_env/filesç›®å½•ä¸‹</span><br><span class="line"># mkdir -p  /etc/ansible/roles/base_env/files</span><br><span class="line"># cp /etc/yum.repos.d/epel.repo /etc/ansible/roles/base_env/files</span><br><span class="line"># cp /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6 /etc/ansible/roles/base_env/files</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">6. å®šä¹‰nginx01å’Œngnix02 role</span><br><span class="line">åˆ›å»ºç›®å½•ç»“æ„</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># mkdir -p /etc/ansible/roles/nginx&#123;01,02&#125;</span><br><span class="line"># mkdir -p /etc/ansible/roles/nginx01/tasks</span><br><span class="line"># mkdir -p /etc/ansible/roles/nginx02/tasks</span><br><span class="line"># vi /etc/ansible/roles/nginx01/tasks/main.yml</span><br><span class="line"> # å®‰è£…nginxæœ€æ–°ç‰ˆæœ¬</span><br><span class="line">- name: ensure nginx is at the latest version</span><br><span class="line">  yum: pkg=nginx state=latest</span><br><span class="line"></span><br><span class="line"># å°†nginxé…ç½®æ–‡ä»¶ä¼ é€åˆ°è¿œç¨‹ç›®å½•</span><br><span class="line">- name: write the nginx config file</span><br><span class="line">  template: src=nginx.conf dest=/etc/nginx/nginx.conf</span><br><span class="line">  notify: restart nginx # é‡å¯nginx</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºnginxæ ¹ç›®å½•</span><br><span class="line">- name: Create Web Root</span><br><span class="line">  file: dest=&#123;&#123; root &#125;&#125; mode=775 state=directory owner=nginx group=nginx</span><br><span class="line">  notify: reload nginx</span><br><span class="line">- name: ensure nginx is running</span><br><span class="line">  service: name=nginx state=restarted</span><br><span class="line"># cp /home/ansible/roles/nginx01/tasks/main.yml /home/ansible/roles/nginx02/tasks/main.yml</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">7. å®šä¹‰files</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># mkdir -p /etc/ansible/roles/nginx01/templates</span><br><span class="line"># mkdir -p /etc/ansible/roles/nginx02/templates</span><br><span class="line"># vi /etc/ansible/roles/nginx01/templates/nginx.conf</span><br><span class="line"># For more information on configuration, see: </span><br><span class="line"></span><br><span class="line">user              nginx;  </span><br><span class="line">worker_processes  &#123;&#123; worker_processes &#125;&#125;;  </span><br><span class="line">&#123;% if num_cpus == 2 %&#125;  </span><br><span class="line">worker_cpu_affinity 01 10;  </span><br><span class="line">&#123;% elif num_cpus == 4 %&#125;  </span><br><span class="line">worker_cpu_affinity 1000 0100 0010 0001;  </span><br><span class="line">&#123;% elif num_cpus &gt;= 8 %&#125;  </span><br><span class="line">worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000;  </span><br><span class="line">&#123;% else %&#125;  </span><br><span class="line">worker_cpu_affinity 1000 0100 0010 0001;  </span><br><span class="line">&#123;% endif %&#125;  </span><br><span class="line">worker_rlimit_nofile &#123;&#123; max_open_file &#125;&#125;;  </span><br><span class="line">  </span><br><span class="line">error_log  /var/log/nginx/error.log;  </span><br><span class="line">#error_log  /var/log/nginx/error.log  notice;  </span><br><span class="line">#error_log  /var/log/nginx/error.log  info;  </span><br><span class="line">  </span><br><span class="line">pid        /var/run/nginx.pid;  </span><br><span class="line">  </span><br><span class="line">events &#123;  </span><br><span class="line">    worker_connections  &#123;&#123; max_open_file &#125;&#125;;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">http &#123;  </span><br><span class="line">    include       /etc/nginx/mime.types;  </span><br><span class="line">    default_type  application/octet-stream;  </span><br><span class="line">  </span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;  </span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;  </span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;  </span><br><span class="line">  </span><br><span class="line">    access_log  /var/log/nginx/access.log  main;  </span><br><span class="line">  </span><br><span class="line">    sendfile        on;  </span><br><span class="line">    #tcp_nopush     on;  </span><br><span class="line">  </span><br><span class="line">    #keepalive_timeout  0;  </span><br><span class="line">    keepalive_timeout  65;  </span><br><span class="line">  </span><br><span class="line">    #gzip  on;  </span><br><span class="line">      </span><br><span class="line">    # Load config files from the /etc/nginx/conf.d directory  </span><br><span class="line">    # The default server is in conf.d/default.conf  </span><br><span class="line">    #include /etc/nginx/conf.d/*.conf;  </span><br><span class="line">    server &#123;  </span><br><span class="line">        listen       80 default_server;  </span><br><span class="line">        server_name  _;  </span><br><span class="line">  </span><br><span class="line">        #charset koi8-r;  </span><br><span class="line">  </span><br><span class="line">        #access_log  logs/host.access.log  main;  </span><br><span class="line">  </span><br><span class="line">        location / &#123;  </span><br><span class="line">            root   &#123;&#123; root &#125;&#125;;  </span><br><span class="line">            index  index.html index.htm;  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        error_page  404              /404.html;  </span><br><span class="line">        location = /404.html &#123;  </span><br><span class="line">            root   /usr/share/nginx/html;  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        # redirect server error pages to the static page /50x.html  </span><br><span class="line">        #  </span><br><span class="line">        error_page   500 502 503 504  /50x.html;  </span><br><span class="line">        location = /50x.html &#123;  </span><br><span class="line">            root   /usr/share/nginx/html;  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125; </span><br><span class="line">â€‹```</span><br><span class="line">Tip: worker_processes, num_cpus, max_open_file, rootç­‰å‚æ•°ä¼šè°ƒç”¨group_varsç›®å½•ä¸‹é…ç½®æ–‡ä»¶ä¸­ç›¸åº”çš„å˜é‡å€¼</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># cp /etc/ansible/roles/nginx01/templates/nginx.conf  /etc/ansible/roles/nginx02/templates/nginx.conf</span><br><span class="line">â€‹```</span><br><span class="line"></span><br><span class="line">8. æ‰§è¡Œplaybook</span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line"># ansible-playbook -i /etc/ansible/hosts /etc/ansible/site.yml -f 10</span><br><span class="line">â€‹```</span><br><span class="line">Tips: -f ä¸ºå¯åŠ¨10ä¸ªå¹¶è¡Œè¿›ç¨‹æ‰§è¡Œplaybook, -i å®šä¹‰inventory hostæ–‡ä»¶, site.yml ä¸ºå…¥å£æ–‡ä»¶ </span><br><span class="line"></span><br><span class="line">æœ€ç»ˆéƒ¨ç½²ç›®å½•ç»“æ„å¦‚ä¸‹</span><br><span class="line">â€‹```</span><br><span class="line"># tree /etc/ansible/</span><br><span class="line">/etc/ansible/</span><br><span class="line">â”œâ”€â”€ ansible.cfg</span><br><span class="line">â”œâ”€â”€ group_vars</span><br><span class="line">â”‚   â”œâ”€â”€ nginx01</span><br><span class="line">â”‚   â””â”€â”€ nginx02</span><br><span class="line">â”œâ”€â”€ hosts</span><br><span class="line">â”œâ”€â”€ hosts.bak</span><br><span class="line">â”œâ”€â”€ roles</span><br><span class="line">â”‚   â”œâ”€â”€ base_env</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ files</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ epel.repo</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ RPM-GPG-KEY-EPEL-6</span><br><span class="line">â”‚   â”‚   â””â”€â”€ tasks</span><br><span class="line">â”‚   â”‚       â””â”€â”€ main.yml</span><br><span class="line">â”‚   â”œâ”€â”€ nginx01</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ tasks</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ main.yml</span><br><span class="line">â”‚   â”‚   â””â”€â”€ templates</span><br><span class="line">â”‚   â”‚       â””â”€â”€ nginx.conf</span><br><span class="line">â”‚   â””â”€â”€ nginx02</span><br><span class="line">â”‚       â”œâ”€â”€ tasks</span><br><span class="line">â”‚       â”‚   â””â”€â”€ main.yml</span><br><span class="line">â”‚       â””â”€â”€ templates</span><br><span class="line">â”‚           â””â”€â”€ nginx.conf</span><br><span class="line">â””â”€â”€ site.yml</span><br><span class="line"></span><br><span class="line">11 directories, 13 files</span><br><span class="line">â€‹```</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install -y epel-release</span><br><span class="line">yum install -y python-pip sshpass</span><br><span class="line"></span><br><span class="line">pip install --upgrade pip</span><br><span class="line">pip install ansible</span><br></pre></td></tr></table></figure>
<p>ansible â€“version</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible 2.4.2.0</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼špipæ–¹å¼å®‰è£…ä¸ä¼šåœ¨/etc/ansibleç›®å½•ä¸‹ç”Ÿæˆé»˜è®¤çš„ç›¸å…³é…ç½®æ–‡ä»¶</p>
<p>ansibleæ§åˆ¶çš„ä¸»æœº<br>vim /etc/ansible/hosts </p>
<p>ansibleé…ç½®<br>vim /etc/ansible/ansible.cfg</p>
<h2 id="playbook"><a href="#playbook" class="headerlink" title="playbook"></a>playbook</h2><p>ansible playbook</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim ssh-addkey.yml </span><br><span class="line"></span><br><span class="line"># ssh-addkey.yml </span><br><span class="line">---</span><br><span class="line">- hosts: s1</span><br><span class="line">  gather_facts: no</span><br><span class="line"></span><br><span class="line">  tasks:</span><br><span class="line"></span><br><span class="line">  - name: install ssh key</span><br><span class="line">    authorized_key: user=root </span><br><span class="line">                    key=&quot;&#123;&#123; lookup(&apos;file&apos;, &apos;/root/.ssh/id_rsa.pub&apos;) &#125;&#125;&quot; </span><br><span class="line">                    state=present</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œplaybook</p>
<p>ansible-playbook -i hosts ssh-addkey.yml</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><a class="article-category-link" href="/categories/æŠ€æœ¯/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ansible/">Ansible</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Jenkins-éƒ¨ç½²" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/15/Jenkins-éƒ¨ç½²/" class="article-date">
      <time datetime="2016-03-14T23:43:04.000Z" itemprop="datePublished">2016-03-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/15/Jenkins-éƒ¨ç½²/">Jenkinså®‰è£…éƒ¨ç½²</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Jenkinså®‰è£…éƒ¨ç½²"><a href="#Jenkinså®‰è£…éƒ¨ç½²" class="headerlink" title="Jenkinså®‰è£…éƒ¨ç½²"></a>Jenkinså®‰è£…éƒ¨ç½²</h2><p>ä¸‹è½½ jenkins waråŒ…<br>ä¸‹è½½tomcat<br>ä¸‹è½½jdk</p>
<p>###é…ç½®jenkinså®‰è£…ç¯å¢ƒ<br>å»ºç«‹/usr/local/ä¸‹çš„jdkè½¯è¿æ¥æ–¹ä¾¿ä»¥åç‰ˆæœ¬å‡çº§ ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/jdk1.8.0_151 /usr/local/jdk</span><br><span class="line">ln -s /usr/local/apache-tomcat-8.5.23 /usr/local/tomcat</span><br></pre></td></tr></table></figure>
<p>mkdir /data/webapps -p</p>
<p>/usr/local/tomcat/conf</p>
<h3 id="å¯åŠ¨tomcat"><a href="#å¯åŠ¨tomcat" class="headerlink" title="å¯åŠ¨tomcat"></a>å¯åŠ¨tomcat</h3><p><code>./startup.sh</code><br>server.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Connector port=&quot;80&quot; </span><br><span class="line"></span><br><span class="line">&lt;Host name=&quot;jenkins.ovwane.com&quot;  appBase=&quot;/data/webapps&quot;</span><br><span class="line">149             unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Docker-Jenkins"><a href="#Docker-Jenkins" class="headerlink" title="Docker Jenkins"></a><a href="https://hub.docker.com/r/jenkins/jenkins/" target="_blank" rel="noopener">Docker Jenkins</a></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull jenkins/jenkins:2.138.2</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">jenkinså¯åŠ¨ç”¨æˆ·id 1000</span></span><br><span class="line">chown -R 1000:1000 /data/jenkins</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --network=sonar_sonarnet -p 8810:8080 -p 50000:50000 --env JAVA_OPTS=-Duser.timezone=Asia/Shanghai -v ~/docker/jenkins:/var/jenkins_home -d --name jenkins-2.138.2 jenkins/jenkins:2.138.2</span><br></pre></td></tr></table></figure>
<h3 id="nginxåå‘ä»£ç†"><a href="#nginxåå‘ä»£ç†" class="headerlink" title="nginxåå‘ä»£ç†"></a>nginxåå‘ä»£ç†</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">listen</span>               <span class="number">443</span> ssl;</span><br><span class="line"></span><br><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto https;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_redirect</span> http:// https://;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">add_header</span> Pragma <span class="string">"no-cache"</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8080;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h3><p>Git</p>
<p>Email Extension</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.jianshu.com/p/3671eb8de971" target="_blank" rel="noopener">dockerè¿è¡Œjenkins</a></p>
<p><a href="https://gist.github.com/rdegges/913102" target="_blank" rel="noopener">Create a HTTP proxy for jenkins using NGINX.</a></p>
<p><a href="https://www.jianshu.com/p/9299e2685976" target="_blank" rel="noopener">dockerå®¹å™¨çš„æ—¶åŒºé—®é¢˜å’Œä¸­æ–‡é—®é¢˜</a></p>
<p><a href="https://jenkins.io/download/" target="_blank" rel="noopener">Jenkins</a></p>
<p><a href="https://wiki.jenkins.io/display/JENKINS/Installing+Jenkins+with+Docker" target="_blank" rel="noopener">Installing Jenkins with Docker</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><a class="article-category-link" href="/categories/æŠ€æœ¯/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jenkins/">Jenkins</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/42/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/">41</a><a class="page-number" href="/page/42/">42</a><span class="page-number current">43</span><a class="page-number" href="/page/44/">44</a><a class="page-number" href="/page/45/">45</a><a class="page-number" href="/page/46/">46</a><a class="extend next" rel="next" href="/page/44/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2020 å¹»èˆæ¢¦å¢ƒ
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >æµ·è´¼åˆ°è®¿æ•°: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">æœ¬é¡µé˜…è¯»é‡: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-39498261-3', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?1bb44bf25fea8f000a1397f9b5438de7";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>