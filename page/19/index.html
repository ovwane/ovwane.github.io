<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>幻舞梦境</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="幻舞梦境">
<meta property="og:url" content="http://ovwane.me/page/19/index.html">
<meta property="og:site_name" content="幻舞梦境">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="幻舞梦境">
  
    <link rel="alternative" href="/atom.xml" title="幻舞梦境" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
     
      <meta name="baidu-site-verification" content="3rC08I0Cp6" />
    
     
      <meta name="google-site-verification" content="rn8f25RzFQoiByt8ezg9E17KZIElbIlwJ4y-EKSlWbA" />
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">幻舞梦境</a></h1>
        </hgroup>

        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">首页</a></li>
                        
                            <li><a href="/WebGuide">导航</a></li>
                        
                            <li><a href="/ovwane_love">Love</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/ovwane" title="github">github</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Ansible/" style="font-size: 11.43px;">Ansible</a> <a href="/tags/Bind/" style="font-size: 10px;">Bind</a> <a href="/tags/Cacti/" style="font-size: 10px;">Cacti</a> <a href="/tags/CentOS/" style="font-size: 20px;">CentOS</a> <a href="/tags/Cobbler/" style="font-size: 10px;">Cobbler</a> <a href="/tags/DHCP/" style="font-size: 10px;">DHCP</a> <a href="/tags/Django/" style="font-size: 12.86px;">Django</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Elasticsearch/" style="font-size: 10px;">Elasticsearch</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Gitlab/" style="font-size: 11.43px;">Gitlab</a> <a href="/tags/HAProxy/" style="font-size: 10px;">HAProxy</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Homebrew/" style="font-size: 10px;">Homebrew</a> <a href="/tags/JDK/" style="font-size: 10px;">JDK</a> <a href="/tags/Jenkins/" style="font-size: 12.86px;">Jenkins</a> <a href="/tags/KVM/" style="font-size: 10px;">KVM</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 12.86px;">Linux</a> <a href="/tags/MariaDB/" style="font-size: 10px;">MariaDB</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NFS/" style="font-size: 10px;">NFS</a> <a href="/tags/Nagios/" style="font-size: 10px;">Nagios</a> <a href="/tags/Nginx/" style="font-size: 17.14px;">Nginx</a> <a href="/tags/Oh-My-Zsh/" style="font-size: 10px;">Oh My Zsh</a> <a href="/tags/OpenLDAP/" style="font-size: 10px;">OpenLDAP</a> <a href="/tags/OpenStack/" style="font-size: 10px;">OpenStack</a> <a href="/tags/PHP/" style="font-size: 11.43px;">PHP</a> <a href="/tags/PXE/" style="font-size: 10px;">PXE</a> <a href="/tags/Python/" style="font-size: 15.71px;">Python</a> <a href="/tags/RHEL7/" style="font-size: 10px;">RHEL7</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Requests/" style="font-size: 10px;">Requests</a> <a href="/tags/Resin/" style="font-size: 10px;">Resin</a> <a href="/tags/Samba/" style="font-size: 10px;">Samba</a> <a href="/tags/Scrapy/" style="font-size: 11.43px;">Scrapy</a> <a href="/tags/Scrapyd/" style="font-size: 10px;">Scrapyd</a> <a href="/tags/SpiderKeeper/" style="font-size: 10px;">SpiderKeeper</a> <a href="/tags/Squid/" style="font-size: 10px;">Squid</a> <a href="/tags/Supervisor/" style="font-size: 10px;">Supervisor</a> <a href="/tags/Tomcat/" style="font-size: 14.29px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Xadmin/" style="font-size: 10px;">Xadmin</a> <a href="/tags/Zabbix/" style="font-size: 10px;">Zabbix</a> <a href="/tags/cacti/" style="font-size: 10px;">cacti</a> <a href="/tags/dovecot/" style="font-size: 10px;">dovecot</a> <a href="/tags/httpd/" style="font-size: 11.43px;">httpd</a> <a href="/tags/iSCSI/" style="font-size: 10px;">iSCSI</a> <a href="/tags/k8s/" style="font-size: 10px;">k8s</a> <a href="/tags/kickstart/" style="font-size: 10px;">kickstart</a> <a href="/tags/macOS/" style="font-size: 14.29px;">macOS</a> <a href="/tags/nagios/" style="font-size: 10px;">nagios</a> <a href="/tags/postfix/" style="font-size: 10px;">postfix</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/sshd/" style="font-size: 10px;">sshd</a> <a href="/tags/uWSGI/" style="font-size: 10px;">uWSGI</a> <a href="/tags/vsftpd/" style="font-size: 10px;">vsftpd</a> <a href="/tags/zabbix/" style="font-size: 10px;">zabbix</a> <a href="/tags/历史/" style="font-size: 18.57px;">历史</a> <a href="/tags/情感/" style="font-size: 10px;">情感</a> <a href="/tags/监控/" style="font-size: 12.86px;">监控</a> <a href="/tags/自己/" style="font-size: 10px;">自己</a> <a href="/tags/运维/" style="font-size: 10px;">运维</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/">name</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">纯海迷、爱运动、爱交友、爱旅行、喜欢接触新鲜事物、迎接新的挑战，更爱游离于错综复杂的编码与逻辑中</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">幻舞梦境</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">幻舞梦境</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">首页</a></li>
                
                    <li><a href="/WebGuide">导航</a></li>
                
                    <li><a href="/ovwane_love">Love</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/ovwane" title="github">github</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Jenkins安装部署" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/15/Jenkins安装部署/" class="article-date">
      <time datetime="2016-03-15T07:43:04.000Z" itemprop="datePublished">2016-03-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/15/Jenkins安装部署/">Jenkins安装部署</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Jenkins安装部署</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jenkins/">Jenkins</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Tomcat安装配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/07/Tomcat安装配置/" class="article-date">
      <time datetime="2016-03-07T20:15:00.000Z" itemprop="datePublished">2016-03-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/07/Tomcat安装配置/">Tomcat安装配置</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.zyops.com/java-tomcat" target="_blank" rel="noopener">Tomcat安装配置</a></p>
<h1 id="Tomcat简介"><a href="#Tomcat简介" class="headerlink" title="Tomcat简介"></a>Tomcat简介</h1><p>Tomcat是Apache软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，由Apache、Sun和其他一些公司及个人共同开发而成。</p>
<p>Tomcat服务器是一个免费的开放源代码的Web应用服务器，属于轻量级应用服务器，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP程序的首选。</p>
<p>Tomcat和Nginx、Apache(httpd)、lighttpd等Web服务器一样，具有处理HTML页面的功能，另外它还是一个Servlet和JSP容器，独立的Servlet容器是Tomcat的默认模式。不过，Tomcat处理静态HTML的能力不如Nginx/Apache服务器。</p>
<p>目前Tomcat最新版本为9.0。Java容器还有resin、weblogic等。</p>
<h1 id="Tomcat安装"><a href="#Tomcat安装" class="headerlink" title="Tomcat安装"></a>Tomcat安装</h1><h2 id="软件准备"><a href="#软件准备" class="headerlink" title="软件准备"></a>软件准备</h2><p>JDK下载：<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a><br>Tomcat下载：<a href="http://tomcat.apache.org/" target="_blank" rel="noopener">http://tomcat.apache.org/</a></p>
<h2 id="部署java环境"><a href="#部署java环境" class="headerlink" title="部署java环境"></a>部署java环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat ~]# cd /application/tools/</span><br><span class="line">[root@tomcat tools]# rz</span><br><span class="line">rz waiting to receive.</span><br><span class="line">Starting zmodem transfer.  Press Ctrl+C to cancel.</span><br><span class="line">Transferring apache-tomcat-8.0.27.tar.gz...</span><br><span class="line">  100%    8914 KB    8914 KB/sec    00:00:01       0 Errors  </span><br><span class="line">Transferring jdk-8u60-linux-x64.tar.gz...</span><br><span class="line">  100%  176990 KB    14749 KB/sec    00:00:12       0 Errors  </span><br><span class="line">tar xf jdk-8u60-linux-x64.tar.gz -C /application/</span><br><span class="line">ln -s /application/jdk1.8.0_60 /application/jdk</span><br><span class="line">sed -i.ori &apos;$a export JAVA_HOME=/application/jdk\nexport PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH\nexport CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar&apos; /etc/profile</span><br><span class="line">source /etc/profile</span><br><span class="line">#→出现下面结果证明部署成功</span><br><span class="line">[root@tomcat ~]# java -version</span><br><span class="line">java version &quot;1.8.0_60&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_60-b27)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.60-b23, mixed mode)</span><br></pre></td></tr></table></figure>
<h2 id="安装Tomcat"><a href="#安装Tomcat" class="headerlink" title="安装Tomcat"></a>安装Tomcat</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tar xf apache-tomcat-8.0.27.tar.gz -C /application/</span><br><span class="line">ln -s /application/apache-tomcat-8.0.27 /application/tomcat</span><br><span class="line">echo &apos;export TOMCAT_HOME=/application/tomcat&apos;&gt;&gt;/etc/profile</span><br><span class="line">source /etc/profile</span><br><span class="line">chown -R root.root /application/jdk/ /application/tomcat/</span><br><span class="line">[root@tomcat ~]# tail -4 /etc/profile</span><br><span class="line">export JAVA_HOME=/application/jdk</span><br><span class="line">export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH</span><br><span class="line">export CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar</span><br><span class="line">export TOMCAT_HOME=/application/tomcat</span><br></pre></td></tr></table></figure>
<h2 id="Tomcat目录介绍"><a href="#Tomcat目录介绍" class="headerlink" title="Tomcat目录介绍"></a>Tomcat目录介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat ~]# cd /application/tomcat/</span><br><span class="line">[root@tomcat tomcat]# tree -L 1</span><br><span class="line">.</span><br><span class="line">├── bin         #→用以启动、关闭Tomcat或者其它功能的脚本（.bat文件和.sh文件）</span><br><span class="line">├── conf        #→用以配置Tomcat的XML及DTD文件</span><br><span class="line">├── lib         #→存放web应用能访问的JAR包</span><br><span class="line">├── LICENSE</span><br><span class="line">├── logs        #→Catalina和其它Web应用程序的日志文件</span><br><span class="line">├── NOTICE</span><br><span class="line">├── RELEASE-NOTES</span><br><span class="line">├── RUNNING.txt</span><br><span class="line">├── temp        #→临时文件</span><br><span class="line">├── webapps     #→Web应用程序根目录</span><br><span class="line">└── work        #→用以产生有JSP编译出的Servlet的.java和.class文件</span><br><span class="line">7 directories, 4 files</span><br><span class="line">[root@tomcat tomcat]# cd webapps/</span><br><span class="line">[root@tomcat webapps]# ll</span><br><span class="line">total 20</span><br><span class="line">drwxr-xr-x 14 root root 4096 Oct  5 12:09 docs     #→tomcat帮助文档</span><br><span class="line">drwxr-xr-x  6 root root 4096 Oct  5 12:09 examples #→web应用实例</span><br><span class="line">drwxr-xr-x  5 root root 4096 Oct  5 12:09 host-manager #→管理</span><br><span class="line">drwxr-xr-x  5 root root 4096 Oct  5 12:09 manager  #→管理</span><br><span class="line">drwxr-xr-x  3 root root 4096 Oct  5 12:09 ROOT     #→默认网站根目录</span><br></pre></td></tr></table></figure>
<h2 id="启动Tomcat"><a href="#启动Tomcat" class="headerlink" title="启动Tomcat"></a>启动Tomcat</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#→启动程序/application/tomcat/bin/startup.sh</span><br><span class="line">#→关闭程序/application/tomcat/bin/shutdown.sh</span><br><span class="line">[root@tomcat ~]# /application/tomcat/bin/startup.sh</span><br><span class="line"></span><br><span class="line">[root@tomcat ~]# netstat -tunlp|grep java</span><br><span class="line">          </span><br><span class="line">[root@tomcat ~]# ps -ef|grep [j]ava</span><br></pre></td></tr></table></figure>
<h2 id="访问网站"><a href="#访问网站" class="headerlink" title="访问网站"></a>访问网站</h2><p>网址：<a href="http://10.0.0.3:8080/" target="_blank" rel="noopener">http://10.0.0.3:8080/</a></p>
<h2 id="Tomcat日志"><a href="#Tomcat日志" class="headerlink" title="Tomcat日志"></a>Tomcat日志</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat ~]# cd /application/tomcat/logs/</span><br><span class="line">[root@tomcat logs]# ls</span><br><span class="line">catalina.2016-01-26.log      localhost.2016-01-26.log</span><br><span class="line">catalina.out                 localhost_access_log.2016-01-26.txt</span><br><span class="line">host-manager.2016-01-26.log  manager.2016-01-26.log</span><br><span class="line">#→tomcat实时日志</span><br><span class="line">[root@tomcat logs]# tailf catalina.out</span><br></pre></td></tr></table></figure>
<h1 id="Tomcat配置文件"><a href="#Tomcat配置文件" class="headerlink" title="Tomcat配置文件"></a>Tomcat配置文件</h1><h2 id="Tomcat配置文件-1"><a href="#Tomcat配置文件-1" class="headerlink" title="Tomcat配置文件"></a>Tomcat配置文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat conf]# pwd</span><br><span class="line">/application/tomcat/conf</span><br><span class="line">[root@tomcat conf]# ll -h</span><br><span class="line">total 216K</span><br><span class="line">drwxr-xr-x 3 root root 4.0K Jan 26 06:10 Catalina</span><br><span class="line">-rw------- 1 root root  13K Sep 28 16:19 catalina.policy</span><br><span class="line">-rw------- 1 root root 7.0K Sep 28 16:19 catalina.properties</span><br><span class="line">-rw------- 1 root root 1.6K Sep 28 16:19 context.xml</span><br><span class="line">-rw------- 1 root root 3.4K Sep 28 16:19 logging.properties</span><br><span class="line">-rw------- 1 root root 6.4K Sep 28 16:19 server.xml #→主配置文件</span><br><span class="line">-rw------- 1 root root 1.8K Sep 28 16:19 tomcat-users.xml #→Tomcat管理用户配置文件</span><br><span class="line">-rw------- 1 root root 1.9K Sep 28 16:19 tomcat-users.xsd</span><br><span class="line">-rw------- 1 root root 164K Sep 28 16:19 web.xml</span><br></pre></td></tr></table></figure>
<h2 id="Tomcat管理"><a href="#Tomcat管理" class="headerlink" title="Tomcat管理"></a>Tomcat管理</h2><p>测试功能，生产环境不要用。</p>
<p>Tomcat管理功能用于对Tomcat自身以及部署在Tomcat上的应用进行管理的web应用。在默认情况下是处于禁用状态的。如果需要开启这个功能，就需要配置管理用户，即配置前面说过的tomcat-users.xml。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat ~]# vim /application/tomcat/conf/tomcat-users.xml</span><br><span class="line">…………</span><br><span class="line">&lt;role rolename=&quot;manager-gui&quot;/&gt;</span><br><span class="line">&lt;role rolename=&quot;admin-gui&quot;/&gt;</span><br><span class="line">&lt;user username=&quot;tomcat&quot; password=&quot;tomcat&quot; roles=&quot;manager-gui,admin-gui&quot;/&gt;</span><br><span class="line">&lt;/tomcat-users&gt;  #→在此行前加入上面三行</span><br><span class="line">[root@tomcat ~]# /application/tomcat/bin/shutdown.sh</span><br><span class="line">[root@tomcat ~]# /application/tomcat/bin/startup.sh</span><br></pre></td></tr></table></figure>
<h2 id="Tomcat主配置文件Server-xml详解"><a href="#Tomcat主配置文件Server-xml详解" class="headerlink" title="Tomcat主配置文件Server.xml详解"></a>Tomcat主配置文件Server.xml详解</h2><ul>
<li>顶级组件：位于整个配置的顶层，如server。</li>
<li>容器类组件：可以包含其它组件的组件，如service、engine、host、context。</li>
<li>连接器组件：连接用户请求至tomcat，如connector。</li>
<li>被嵌套类组件：位于一个容器当中，不能包含其他组件，如Valve、logger。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;server&gt;</span><br><span class="line">     &lt;service&gt;</span><br><span class="line">     &lt;connector /&gt;</span><br><span class="line">     &lt;engine&gt;</span><br><span class="line">     &lt;host&gt;</span><br><span class="line">     &lt;context&gt;&lt;/context&gt;</span><br><span class="line">     &lt;/host&gt;</span><br><span class="line">     &lt;host&gt;</span><br><span class="line">     &lt;context&gt;&lt;/context&gt;</span><br><span class="line">     &lt;/host&gt;</span><br><span class="line">     &lt;/engine&gt;</span><br><span class="line">     &lt;/service&gt;</span><br><span class="line">&lt;/server&gt;</span><br></pre></td></tr></table></figure>
<h2 id="组件详解"><a href="#组件详解" class="headerlink" title="组件详解"></a>组件详解</h2><hr>
<p>engine：核心容器组件，catalina引擎，负责通过connector接收用户请求，并处理请求，将请求转至对应的虚拟主机host。<br>host：类似于httpd中的虚拟主机，一般而言支持基于FQDN的虚拟主机。<br>context：定义一个应用程序，是一个最内层的容器类组件（不能再嵌套）。配置context的主要目的指定对应对的webapp的根目录，类似于httpd的alias，其还能为webapp指定额外的属性，如部署方式等。<br>connector：接收用户请求，类似于httpd的listen配置监听端口的。<br>service（服务）：将connector关联至engine，因此一个service内部可以有多个connector，但只能有一个引擎engine。service内部有两个connector，一个engine。因此，一般情况下一个server内部只有一个service，一个service内部只有一个engine，但一个service内部可以有多个connector。<br>server：表示一个运行于JVM中的tomcat实例。<br>Valve：阀门，拦截请求并在将其转至对应的webapp前进行某种处理操作，可以用于任何容器中，比如记录日志(access log valve)、基于IP做访问控制(remote address filter valve)。<br>logger：日志记录器，用于记录组件内部的状态信息，可以用于除context外的任何容器中。<br>realm：可以用于任意容器类的组件中，关联一个用户认证库，实现认证和授权。可以关联的认证库有两种：UserDatabaseRealm、MemoryRealm和JDBCRealm。<br>UserDatabaseRealm：使用JNDI自定义的用户认证库。<br>MemoryRealm：认证信息定义在tomcat-users.xml中。<br>JDBCRealm：认证信息定义在数据库中，并通过JDBC连接至数据库中查找认证用户。</p>
<hr>
<h2 id="配置文件注释"><a href="#配置文件注释" class="headerlink" title="配置文件注释"></a>配置文件注释</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&apos;1.0&apos; encoding=&apos;utf-8&apos;?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">&lt;Server&gt;元素代表整个容器,是Tomcat实例的顶层元素.由org.apache.catalina.Server接口来定义.它包含一个&lt;Service&gt;元素.并且它不能做为任何元素的子元素.</span><br><span class="line">    port指定Tomcat监听shutdown命令端口.终止服务器运行时,必须在Tomcat服务器所在的机器上发出shutdown命令.该属性是必须的.</span><br><span class="line">    shutdown指定终止Tomcat服务器运行时,发给Tomcat服务器的shutdown监听端口的字符串.该属性必须设置</span><br><span class="line">--&gt;</span><br><span class="line">&lt;Server port=&quot;8005&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</span><br><span class="line">  &lt;Listener className=&quot;org.apache.catalina.startup.VersionLoggerListener&quot; /&gt;</span><br><span class="line">  &lt;Listener className=&quot;org.apache.catalina.core.AprLifecycleListener&quot; SSLEngine=&quot;on&quot; /&gt;</span><br><span class="line">  &lt;Listener className=&quot;org.apache.catalina.core.JreMemoryLeakPreventionListener&quot; /&gt;</span><br><span class="line">  &lt;Listener className=&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot; /&gt;</span><br><span class="line">  &lt;Listener className=&quot;org.apache.catalina.core.ThreadLocalLeakPreventionListener&quot; /&gt;</span><br><span class="line">  &lt;GlobalNamingResources&gt;</span><br><span class="line">    &lt;Resource name=&quot;UserDatabase&quot; auth=&quot;Container&quot;</span><br><span class="line">              type=&quot;org.apache.catalina.UserDatabase&quot;</span><br><span class="line">              description=&quot;User database that can be updated and saved&quot;</span><br><span class="line">              factory=&quot;org.apache.catalina.users.MemoryUserDatabaseFactory&quot;</span><br><span class="line">              pathname=&quot;conf/tomcat-users.xml&quot; /&gt;</span><br><span class="line">  &lt;/GlobalNamingResources&gt;</span><br><span class="line">  &lt;!--service服务组件--&gt;</span><br><span class="line">  &lt;Service name=&quot;Catalina&quot;&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    connector：接收用户请求，类似于httpd的listen配置监听端口.</span><br><span class="line">        port指定服务器端要创建的端口号，并在这个端口监听来自客户端的请求。</span><br><span class="line">        address：指定连接器监听的地址，默认为所有地址（即0.0.0.0）</span><br><span class="line">        protocol连接器使用的协议，支持HTTP和AJP。AJP（Apache Jserv Protocol）专用于tomcat与apache建立通信的， 在httpd反向代理用户请求至tomcat时使用（可见Nginx反向代理时不可用AJP协议）。</span><br><span class="line">        minProcessors服务器启动时创建的处理请求的线程数</span><br><span class="line">        maxProcessors最大可以创建的处理请求的线程数</span><br><span class="line">        enableLookups如果为true，则可以通过调用request.getRemoteHost()进行DNS查询来得到远程客户端的实际主机名，若为false则不进行DNS查询，而是返回其ip地址</span><br><span class="line">        redirectPort指定服务器正在处理http请求时收到了一个SSL传输请求后重定向的端口号</span><br><span class="line">        acceptCount指定当所有可以使用的处理请求的线程数都被使用时，可以放到处理队列中的请求数，超过这个数的请求将不予处理</span><br><span class="line">        connectionTimeout指定超时的时间数(以毫秒为单位)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">               connectionTimeout=&quot;20000&quot;</span><br><span class="line">               redirectPort=&quot;8443&quot; /&gt;</span><br><span class="line">    &lt;Connector port=&quot;8009&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt;</span><br><span class="line">    &lt;!--engine,核心容器组件,catalina引擎,负责通过connector接收用户请求,并处理请求,将请求转至对应的虚拟主机host</span><br><span class="line">        defaultHost指定缺省的处理请求的主机名，它至少与其中的一个host元素的name属性值是一样的</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;</span><br><span class="line">      &lt;!--Realm表示存放用户名，密码及role的数据库--&gt;</span><br><span class="line">      &lt;Realm className=&quot;org.apache.catalina.realm.LockOutRealm&quot;&gt;</span><br><span class="line">        &lt;Realm className=&quot;org.apache.catalina.realm.UserDatabaseRealm&quot;</span><br><span class="line">               resourceName=&quot;UserDatabase&quot;/&gt;</span><br><span class="line">      &lt;/Realm&gt;</span><br><span class="line">      &lt;!--</span><br><span class="line">      host表示一个虚拟主机</span><br><span class="line">        name指定主机名</span><br><span class="line">        appBase应用程序基本目录，即存放应用程序的目录.一般为appBase=&quot;webapps&quot; ，相对于CATALINA_HOME而言的，也可以写绝对路径。</span><br><span class="line">        unpackWARs如果为true，则tomcat会自动将WAR文件解压，否则不解压，直接从WAR文件中运行应用程序</span><br><span class="line">        autoDeploy：在tomcat启动时，是否自动部署。</span><br><span class="line">        xmlValidation：是否启动xml的校验功能，一般xmlValidation=&quot;false&quot;。</span><br><span class="line">        xmlNamespaceAware：检测名称空间，一般xmlNamespaceAware=&quot;false&quot;。</span><br><span class="line">      --&gt;</span><br><span class="line">      &lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot;</span><br><span class="line">            unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">        Context表示一个web应用程序，通常为WAR文件</span><br><span class="line">            docBase应用程序的路径或者是WAR文件存放的路径,也可以使用相对路径，起始路径为此Context所属Host中appBase定义的路径。</span><br><span class="line">            path表示此web应用程序的url的前缀，这样请求的url为http://localhost:8080/path/****</span><br><span class="line">            reloadable这个属性非常重要，如果为true，则tomcat会自动检测应用程序的/WEB-INF/lib 和/WEB-INF/classes目录的变化，自动装载新的应用程序，可以在不重启tomcat的情况下改变应用程序</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;Context path=&quot;&quot; docBase=&quot;&quot; debug=&quot;&quot;/&gt;</span><br><span class="line">        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;</span><br><span class="line">               prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot;</span><br><span class="line">               pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;</span><br><span class="line">      &lt;/Host&gt;</span><br><span class="line">    &lt;/Engine&gt;</span><br><span class="line">  &lt;/Service&gt;</span><br><span class="line">&lt;/Server&gt;</span><br></pre></td></tr></table></figure>
<h1 id="WEB站点部署"><a href="#WEB站点部署" class="headerlink" title="WEB站点部署"></a>WEB站点部署</h1><p>上线的代码有两种方式，第一种方式是直接将程序目录放在webapps目录下面，这种方式大家已经明白了，就不多说了。第二种方式是使用开发工具将程序打包成war包，然后上传到webapps目录下面。下面让我们见识一下这种方式。</p>
<h2 id="使用war包部署web站点"><a href="#使用war包部署web站点" class="headerlink" title="使用war包部署web站点"></a>使用war包部署web站点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat webapps]# pwd</span><br><span class="line">/application/tomcat/webapps</span><br><span class="line">[root@tomcat webapps]# rz  #→上传memtest.war，此文件也在上面的百度网盘里</span><br><span class="line">[root@tomcat webapps]# ls</span><br><span class="line">docs  examples  host-manager  manager  memtest  memtest.war  ROOT</span><br></pre></td></tr></table></figure>
<p>浏览器访问：<a href="http://10.0.0.3:8080/memtest/meminfo.jsp" target="_blank" rel="noopener">http://10.0.0.3:8080/memtest/meminfo.jsp</a></p>
<h2 id="自定义默认网站目录"><a href="#自定义默认网站目录" class="headerlink" title="自定义默认网站目录"></a>自定义默认网站目录</h2><p>上面访问的网址为<a href="http://10.0.0.3:8080/memtest/meminfo.jsp" target="_blank" rel="noopener">http://10.0.0.3:8080/memtest/meminfo.jsp</a><br>现在我想访问格式为<a href="http://10.0.0.3:8080/meminfo.jsp" target="_blank" rel="noopener">http://10.0.0.3:8080/meminfo.jsp</a><br>怎么破？</p>
<p>方法一</p>
<p>将meminfo.jsp或其他程序放在tomcat/webapps/ROOT目录下即可。因为默认网站根目录为tomcat/webapps/ROOT</p>
<p>方法二</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat ~]# vim /application/tomcat/conf/server.xml</span><br><span class="line">      &lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot;</span><br><span class="line">            unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;</span><br><span class="line">         &lt;Context path=&quot;&quot; docBase=&quot;/application/tomcat/webapps/memtest&quot; debug=&quot;0&quot; reloadable=&quot;false&quot; crossContext=&quot;true&quot;/&gt;</span><br><span class="line">[root@tomcat ~]# /application/tomcat/bin/shutdown.sh</span><br><span class="line">[root@tomcat ~]# /application/tomcat/bin/startup.sh</span><br></pre></td></tr></table></figure>
<h1 id="Tomcat多实例及集群架构"><a href="#Tomcat多实例及集群架构" class="headerlink" title="Tomcat多实例及集群架构"></a>Tomcat多实例及集群架构</h1><h2 id="Tomcat多实例"><a href="#Tomcat多实例" class="headerlink" title="Tomcat多实例"></a>Tomcat多实例</h2><h3 id="复制Tomcat目录"><a href="#复制Tomcat目录" class="headerlink" title="复制Tomcat目录"></a>复制Tomcat目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat ~]# cd /application/</span><br><span class="line">[root@tomcat application]# cp -a apache-tomcat-8.0.27 tomcat8_1</span><br><span class="line">[root@tomcat application]# cp -a apache-tomcat-8.0.27 tomcat8_2</span><br></pre></td></tr></table></figure>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat application]# mkdir -p /data/www/www/ROOT</span><br><span class="line">[root@tomcat application]# cp /application/tomcat/webapps/memtest/meminfo.jsp /data/www/www/ROOT/</span><br><span class="line">[root@tomcat ~]# sed -i &apos;22s#8005#8011#;69s#8080#8081#;123s#appBase=&quot;.*&quot;# appBase=&quot;/data/www/www&quot;#&apos; /application/tomcat8_1/conf/server.xml</span><br><span class="line">[root@tomcat ~]# sed -i &apos;22s#8005#8012#;69s#8080#8082#;123s#appBase=&quot;.*&quot;# appBase=&quot;/data/www/www&quot;#&apos; /application/tomcat8_2/conf/server.xml</span><br><span class="line">[root@tomcat ~]# diff /application/tomcat/conf/server.xml  /application/tomcat8_1/conf/server.xml   </span><br><span class="line">22c22</span><br><span class="line">&lt; &lt;Server port=&quot;8005&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</span><br><span class="line">---</span><br><span class="line">&gt; &lt;Server port=&quot;8011&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</span><br><span class="line">69c69</span><br><span class="line">&lt;     &lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">---</span><br><span class="line">&gt;     &lt;Connector port=&quot;8081&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">123c123</span><br><span class="line">&lt;       &lt;Host name=&quot;localhost&quot;  appBase=&quot;/application/tomcat/webapps/memtest&quot;</span><br><span class="line">---</span><br><span class="line">&gt;       &lt;Host name=&quot;localhost&quot;   appBase=&quot;/data/www/www&quot;</span><br><span class="line">[root@tomcat ~]# diff /application/tomcat/conf/server.xml  /application/tomcat8_2/conf/server.xml</span><br><span class="line">22c22</span><br><span class="line">&lt; &lt;Server port=&quot;8005&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</span><br><span class="line">---</span><br><span class="line">&gt; &lt;Server port=&quot;8012&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</span><br><span class="line">69c69</span><br><span class="line">&lt;     &lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">---</span><br><span class="line">&gt;     &lt;Connector port=&quot;8082&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">123c123</span><br><span class="line">&lt;       &lt;Host name=&quot;localhost&quot;  appBase=&quot;/application/tomcat/webapps/memtest&quot;</span><br><span class="line">---</span><br><span class="line">&gt;       &lt;Host name=&quot;localhost&quot;    appBase=&quot;/data/www/www&quot;</span><br></pre></td></tr></table></figure>
<h3 id="启动多实例"><a href="#启动多实例" class="headerlink" title="启动多实例"></a>启动多实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for i in &#123;1..2&#125;;do /application/tomcat8_$i/bin/startup.sh;done</span><br><span class="line">netstat -tunlp|grep java</span><br></pre></td></tr></table></figure>
<p>浏览器可以分别访问<a href="http://10.0.0.3:8081/meminfo.jsp" target="_blank" rel="noopener">http://10.0.0.3:8081/meminfo.jsp</a> 和 <a href="http://10.0.0.3:8082/meminfo.jsp" target="_blank" rel="noopener">http://10.0.0.3:8082/meminfo.jsp</a></p>
<h2 id="Tomcat集群"><a href="#Tomcat集群" class="headerlink" title="Tomcat集群"></a>Tomcat集群</h2><h3 id="使用nginx-Tomcat反向代理集群"><a href="#使用nginx-Tomcat反向代理集群" class="headerlink" title="使用nginx+Tomcat反向代理集群"></a>使用nginx+Tomcat反向代理集群</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@tomcat ~]# vim /application/nginx/conf/nginx.conf</span><br><span class="line">    upstream web_pools &#123;</span><br><span class="line">        server 127.0.0.1:8081;</span><br><span class="line">        server 127.0.0.1:8082;</span><br><span class="line">        &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.jsp index.html index.htm;</span><br><span class="line">            proxy_pass http://web_pools;</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">[root@tomcat ~]# /application/nginx/sbin/nginx -t</span><br><span class="line">[root@tomcat ~]# /application/nginx/sbin/nginx</span><br></pre></td></tr></table></figure>
<p>浏览器可以访问<a href="http://10.0.0.3/meminfo.jsp" target="_blank" rel="noopener">http://10.0.0.3/meminfo.jsp</a></p>
<h1 id="Tomcat监控"><a href="#Tomcat监控" class="headerlink" title="Tomcat监控"></a>Tomcat监控</h1><h1 id="Tomcat安全优化和性能优化"><a href="#Tomcat安全优化和性能优化" class="headerlink" title="Tomcat安全优化和性能优化"></a>Tomcat安全优化和性能优化</h1><h2 id="安全优化"><a href="#安全优化" class="headerlink" title="安全优化"></a>安全优化</h2><p>降权启动<br>telnet管理端口保护<br>ajp连接端口保护<br>禁用管理端</p>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><h3 id="屏蔽dns查询enableLookups-”false”"><a href="#屏蔽dns查询enableLookups-”false”" class="headerlink" title="屏蔽dns查询enableLookups=”false”"></a>屏蔽dns查询enableLookups=”false”</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    &lt;Connector  port=&quot;8081&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">               connectionTimeout=&quot;6000&quot; enableLookups=&quot;false&quot; acceptCount=&quot;800&quot;</span><br><span class="line">               redirectPort=&quot;8443&quot; /&gt;</span><br><span class="line">```          </span><br><span class="line"></span><br><span class="line">## jvm调优</span><br><span class="line">Tomcat最吃内存，只要内存足够，这只猫就跑的很快。</span><br><span class="line">如果系统资源有限，那就需要进行调优，提高资源使用率。</span><br></pre></td></tr></table></figure>
<p>优化catalina.sh配置文件。在catalina.sh配置文件中添加以下代码：<br>JAVA_OPTS=”-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1024m -Xmx1024m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:PermSize=512m -XX:MaxPermSize=512m”<br>server:一定要作为第一个参数，在多个CPU时性能佳<br>-Xms：初始堆内存Heap大小，使用的最小内存,cpu性能高时此值应设的大一些<br>-Xmx：初始堆内存heap最大值，使用的最大内存<br>上面两个值是分配JVM的最小和最大内存，取决于硬件物理内存的大小，建议均设为物理内存的一半。<br>-XX:PermSize:设定内存的永久保存区域<br>-XX:MaxPermSize:设定最大内存的永久保存区域<br>-XX:MaxNewSize:<br>-Xss 15120 这使得JBoss每增加一个线程（thread)就会立即消耗15M内存，而最佳值应该是128K,默认值好像是512k.<br>+XX:AggressiveHeap 会使得 Xms没有意义。这个参数让jvm忽略Xmx参数,疯狂地吃完一个G物理内存,再吃尽一个G的swap。<br>-Xss：每个线程的Stack大小<br>-verbose:gc 现实垃圾收集信息<br>-Xloggc:gc.log 指定垃圾收集日志文件<br>-Xmn：young generation的heap大小，一般设置为Xmx的3、4分之一<br>-XX:+UseParNewGC ：缩短minor收集的时间<br>-XX:+UseConcMarkSweepGC ：缩短major收集的时间<br>```</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tomcat/">Tomcat</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/">Web</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2015年终总结之败家" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/31/2015年终总结之败家/" class="article-date">
      <time datetime="2015-12-31T08:20:13.000Z" itemprop="datePublished">2015-12-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/31/2015年终总结之败家/">2015年终总结之败家</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a><a class="article-category-link" href="/categories/生活/感想/">感想</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/历史/">历史</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2015年终总结之思考" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/31/2015年终总结之思考/" class="article-date">
      <time datetime="2015-12-31T08:20:00.000Z" itemprop="datePublished">2015-12-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/31/2015年终总结之思考/">2015年终总结之思考</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a><a class="article-category-link" href="/categories/生活/感想/">感想</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/历史/">历史</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-COBBLER无人值守安装" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/26/COBBLER无人值守安装/" class="article-date">
      <time datetime="2015-12-26T11:22:15.000Z" itemprop="datePublished">2015-12-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/26/COBBLER无人值守安装/">COBBLER无人值守安装</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.zyops.com/autoinstall-cobbler" target="_blank" rel="noopener">COBBLER无人值守安装</a></p>
<h2 id="Cobbler介绍"><a href="#Cobbler介绍" class="headerlink" title="Cobbler介绍"></a>Cobbler介绍</h2><p>Cobbler是一个Linux服务器安装的服务，可以通过网络启动(PXE)的方式来快速安装、重装物理服务器和虚拟机，同时还可以管理DHCP，DNS等。</p>
<p>Cobbler可以使用命令行方式管理，也提供了基于Web的界面管理工具(cobbler-web)，还提供了API接口，可以方便二次开发使用。</p>
<p>Cobbler是较早前的kickstart的升级版，优点是比较容易配置，还自带web界面比较易于管理。</p>
<p>Cobbler内置了一个轻量级配置管理系统，但它也支持和其它配置管理系统集成，如Puppet，暂时不支持SaltStack。</p>
<h3 id="Cobbler集成的服务"><a href="#Cobbler集成的服务" class="headerlink" title="Cobbler集成的服务"></a>Cobbler集成的服务</h3><ul>
<li>PXE服务支持</li>
<li>DHCP服务管理</li>
<li>DNS服务管理(可选bind,dnsmasq)</li>
<li>电源管理</li>
<li>Kickstart服务支持</li>
<li>YUM仓库管理</li>
<li>TFTP(PXE启动时需要)</li>
<li>Apache(提供kickstart的安装源，并提供定制化的kickstart配置)</li>
</ul>
<h2 id="Cobbler安装配置"><a href="#Cobbler安装配置" class="headerlink" title="Cobbler安装配置"></a>Cobbler安装配置</h2><h3 id="系统环境准备"><a href="#系统环境准备" class="headerlink" title="系统环境准备"></a>系统环境准备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node1 ~]# cat /etc/redhat-release</span><br><span class="line">CentOS release 6.7 (Final)</span><br><span class="line">[root@linux-node1 ~]# uname -r</span><br><span class="line">2.6.32-573.el6.x86_64</span><br><span class="line">[root@linux-node1 ~]# getenforce</span><br><span class="line">Disabled</span><br><span class="line">[root@linux-node1 ~]# /etc/init.d/iptables status</span><br><span class="line">iptables: Firewall is not running.</span><br><span class="line">[root@linux-node1 ~]# ifconfig eth0|awk -F &quot;[ :]+&quot; &apos;NR==2 &#123;print $4&#125;&apos;</span><br><span class="line">10.0.0.7</span><br><span class="line">[root@linux-node1 ~]# hostname</span><br><span class="line">linux-node1.example.com</span><br><span class="line"># 配置阿里云的epel源</span><br><span class="line">[root@linux-node1 ~]# wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.rep</span><br></pre></td></tr></table></figure>
<h3 id="安装Cobbler"><a href="#安装Cobbler" class="headerlink" title="安装Cobbler"></a>安装Cobbler</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node1 ~]# yum -y install cobbler cobbler-web dhcp tftp-server pykickstart httpd</span><br><span class="line">[root@linux-node1 ~]# rpm -ql cobbler  # 查看安装的文件，下面列出部分。</span><br><span class="line">/etc/cobbler                  # 配置文件目录</span><br><span class="line">/etc/cobbler/settings         # cobbler主配置文件，这个文件是YAML格式，Cobbler是python写的程序。</span><br><span class="line">/etc/cobbler/dhcp.template    # DHCP服务的配置模板</span><br><span class="line">/etc/cobbler/tftpd.template   # tftp服务的配置模板</span><br><span class="line">/etc/cobbler/rsync.template   # rsync服务的配置模板</span><br><span class="line">/etc/cobbler/iso              # iso模板配置文件目录</span><br><span class="line">/etc/cobbler/pxe              # pxe模板文件目录</span><br><span class="line">/etc/cobbler/power            # 电源的配置文件目录</span><br><span class="line">/etc/cobbler/users.conf       # Web服务授权配置文件</span><br><span class="line">/etc/cobbler/users.digest     # 用于web访问的用户名密码配置文件</span><br><span class="line">/etc/cobbler/dnsmasq.template # DNS服务的配置模板</span><br><span class="line">/etc/cobbler/modules.conf     # Cobbler模块配置文件</span><br><span class="line">/var/lib/cobbler              # Cobbler数据目录</span><br><span class="line">/var/lib/cobbler/config       # 配置文件</span><br><span class="line">/var/lib/cobbler/kickstarts   # 默认存放kickstart文件</span><br><span class="line">/var/lib/cobbler/loaders      # 存放的各种引导程序</span><br><span class="line">/var/www/cobbler              # 系统安装镜像目录</span><br><span class="line">/var/www/cobbler/ks_mirror    # 导入的系统镜像列表</span><br><span class="line">/var/www/cobbler/images       # 导入的系统镜像启动文件</span><br><span class="line">/var/www/cobbler/repo_mirror  # yum源存储目录</span><br><span class="line">/var/log/cobbler              # 日志目录</span><br><span class="line">/var/log/cobbler/install.log  # 客户端系统安装日志</span><br><span class="line">/var/log/cobbler/cobbler.log  # cobbler日志</span><br></pre></td></tr></table></figure>
<h3 id="配置Cobbler"><a href="#配置Cobbler" class="headerlink" title="配置Cobbler"></a>配置Cobbler</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node1 ~]# /etc/init.d/httpd restart</span><br><span class="line">停止 httpd：                                               [失败]</span><br><span class="line">正在启动 httpd：                                           [确定]</span><br><span class="line">[root@linux-node1 ~]# /etc/init.d/cobblerd start</span><br><span class="line">Starting cobbler daemon:                                   [确定]</span><br><span class="line">[root@linux-node1 ~]# cobbler check  # 检查Cobbler的配置，如果看不到下面的结果，再次执行/etc/init.d/cobblerd restart</span><br><span class="line">The following are potential configuration items that you may want to fix:</span><br><span class="line">1 : The &apos;server&apos; field in /etc/cobbler/settings must be set to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP for the boot server as reachable by all machines that will use it.</span><br><span class="line">2 : For PXE to be functional, the &apos;next_server&apos; field in /etc/cobbler/settings must be set to something other than 127.0.0.1, and should match the IP of the boot server on the PXE network.</span><br><span class="line">3 : some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run &apos;cobbler get-loaders&apos; to download them, or, if you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The &apos;cobbler get-loaders&apos; command is the easiest way to resolve these requirements.</span><br><span class="line">4 : change &apos;disable&apos; to &apos;no&apos; in /etc/xinetd.d/rsync</span><br><span class="line">5 : debmirror package is not installed, it will be required to manage debian deployments and repositories</span><br><span class="line">6 : The default password used by the sample templates for newly installed machines (default_password_crypted in /etc/cobbler/settings) is still set to &apos;cobbler&apos; and should be changed, try: &quot;openssl passwd -1 -salt &apos;random-phrase-here&apos; &apos;your-password-here&apos;&quot; to generate new one</span><br><span class="line">7 : fencing tools were not found, and are required to use the (optional) power management features. install cman or fence-agents to use them</span><br><span class="line">Restart cobblerd and then run &apos;cobbler sync&apos; to apply changes.</span><br><span class="line"># 看着上面的结果，一个一个解决。</span><br><span class="line"># 第1、2、6个问题，顺便修改其他功能</span><br><span class="line">[root@linux-node1 ~]# cp /etc/cobbler/settings&#123;,.ori&#125;  # 备份</span><br><span class="line"># server，Cobbler服务器的IP。</span><br><span class="line">sed -i &apos;s/server: 127.0.0.1/server: 10.0.0.7/&apos; /etc/cobbler/settings</span><br><span class="line"># next_server，如果用Cobbler管理DHCP，修改本项，作用不解释，看kickstart。</span><br><span class="line">sed -i &apos;s/next_server: 127.0.0.1/next_server: 10.0.0.7/&apos; /etc/cobbler/settings</span><br><span class="line"># 用Cobbler管理DHCP</span><br><span class="line">sed -i &apos;s/manage_dhcp: 0/manage_dhcp: 1/&apos; /etc/cobbler/settings</span><br><span class="line"># 防止循环装系统，适用于服务器第一启动项是PXE启动。</span><br><span class="line">sed -i &apos;s/pxe_just_once: 0/pxe_just_once: 1/&apos; /etc/cobbler/settings</span><br><span class="line"># 设置新装系统的默认root密码123456。下面的命令来源于提示6。random-phrase-here为干扰码，可以自行设定。</span><br><span class="line">[root@linux-node1 ~]# openssl passwd -1 -salt &apos;oldboy&apos; &apos;123456&apos;</span><br><span class="line">$1$oldboy$Npg9Pt9k98Mlg0ZeqHAuN1</span><br><span class="line">[root@linux-node1 ~]# vim /etc/cobbler/settings </span><br><span class="line">default_password_crypted: &quot;$1$oldboy$Npg9Pt9k98Mlg0ZeqHAuN1&quot; </span><br><span class="line"># 第3个问题</span><br><span class="line">[root@linux-node1 ~]# cobbler get-loaders  # 会自动从官网下载</span><br><span class="line">[root@linux-node1 ~]# cd /var/lib/cobbler/loaders/  # 下载的内容</span><br><span class="line">[root@linux-node1 loaders]# ls</span><br><span class="line">COPYING.elilo     COPYING.yaboot  grub-x86_64.efi  menu.c32    README</span><br><span class="line">COPYING.syslinux  elilo-ia64.efi  grub-x86.efi     pxelinux.0  yaboot</span><br><span class="line"># 第4个问题</span><br><span class="line">[root@linux-node1 ~]# vim /etc/xinetd.d/rsync</span><br><span class="line">disable = no</span><br><span class="line">[root@linux-node1 ~]# /etc/init.d/xinetd restart</span><br><span class="line">停止 xinetd：                                              [确定]</span><br><span class="line">正在启动 xinetd：                                          [确定]</span><br><span class="line">[root@linux-node1 ~]# /etc/init.d/cobblerd restart</span><br><span class="line">Stopping cobbler daemon:                                   [确定]</span><br><span class="line">Starting cobbler daemon:                                   [确定]</span><br><span class="line">[root@linux-node1 ~]# cobbler check</span><br><span class="line">The following are potential configuration items that you may want to fix:</span><br><span class="line">1 : debmirror package is not installed, it will be required to manage debian deployments and repositories  # 和debian系统相关，不需要</span><br><span class="line">2 : fencing tools were not found, and are required to use the (optional) power management features. install cman or fence-agents to use them # fence设备相关，不需要</span><br><span class="line">Restart cobblerd and then run &apos;cobbler sync&apos; to apply changes.</span><br></pre></td></tr></table></figure>
<h3 id="配置DHCP"><a href="#配置DHCP" class="headerlink" title="配置DHCP"></a>配置DHCP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 修改cobbler的dhcp模版，不要直接修改dhcp本身的配置文件，因为cobbler会覆盖。</span><br><span class="line">[root@linux-node1 ~]# vim /etc/cobbler/dhcp.template </span><br><span class="line"># 仅列出修改过的字段</span><br><span class="line">……</span><br><span class="line">subnet 10.0.0.0 netmask 255.255.255.0 &#123;</span><br><span class="line">     option routers             10.0.0.2;</span><br><span class="line">     option domain-name-servers 10.0.0.2;</span><br><span class="line">     option subnet-mask         255.255.255.0;</span><br><span class="line">     range dynamic-bootp        10.0.0.100 10.0.0.200;</span><br><span class="line">……</span><br></pre></td></tr></table></figure>
<h3 id="同步cobbler配置"><a href="#同步cobbler配置" class="headerlink" title="同步cobbler配置"></a>同步cobbler配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 同步最新cobbler配置，它会根据配置自动修改dhcp等服务。</span><br><span class="line">[root@linux-node1 ~]# cobbler sync   # 同步所有配置，可以仔细看一下sync做了什么。</span><br><span class="line">task started: 2015-12-03_204822_sync</span><br><span class="line">task started (id=Sync, time=Thu Dec  3 20:48:22 2015)</span><br><span class="line">running pre-sync triggers</span><br><span class="line">cleaning trees</span><br><span class="line">removing: /var/lib/tftpboot/pxelinux.cfg/default</span><br><span class="line">removing: /var/lib/tftpboot/grub/images</span><br><span class="line">copying bootloaders</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/pxelinux.0 -&gt; /var/lib/tftpboot/pxelinux.0</span><br><span class="line">copying: /var/lib/cobbler/loaders/pxelinux.0 -&gt; /var/lib/tftpboot/pxelinux.0</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/menu.c32 -&gt; /var/lib/tftpboot/menu.c32</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/yaboot -&gt; /var/lib/tftpboot/yaboot</span><br><span class="line">trying hardlink /usr/share/syslinux/memdisk -&gt; /var/lib/tftpboot/memdisk</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/grub-x86.efi -&gt; /var/lib/tftpboot/grub/grub-x86.efi</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/grub-x86_64.efi -&gt; /var/lib/tftpboot/grub/grub-x86_64.efi</span><br><span class="line">copying distros to tftpboot</span><br><span class="line">copying images</span><br><span class="line">generating PXE configuration files</span><br><span class="line">generating PXE menu structure</span><br><span class="line">rendering DHCP files</span><br><span class="line">generating /etc/dhcp/dhcpd.conf</span><br><span class="line">rendering TFTPD files</span><br><span class="line">generating /etc/xinetd.d/tftp</span><br><span class="line">cleaning link caches</span><br><span class="line">running post-sync triggers</span><br><span class="line">running python triggers from /var/lib/cobbler/triggers/sync/post/*</span><br><span class="line">running python trigger cobbler.modules.sync_post_restart_services</span><br><span class="line">running: dhcpd -t -q</span><br><span class="line">received on stdout: </span><br><span class="line">received on stderr: </span><br><span class="line">running: service dhcpd restart</span><br><span class="line">received on stdout: 关闭 dhcpd：[确定]</span><br><span class="line">正在启动 dhcpd：[确定]</span><br><span class="line">received on stderr: </span><br><span class="line">running shell triggers from /var/lib/cobbler/triggers/sync/post/*</span><br><span class="line">running python triggers from /var/lib/cobbler/triggers/change/*</span><br><span class="line">running python trigger cobbler.modules.scm_track</span><br><span class="line">running shell triggers from /var/lib/cobbler/triggers/change/*</span><br><span class="line">*** TASK COMPLETE ***</span><br><span class="line"># 再看一下dhcp的配置文件。</span><br><span class="line">[root@linux-node1 ~]# less /etc/dhcp/dhcpd.conf</span><br><span class="line"># ******************************************************************</span><br><span class="line"># Cobbler managed dhcpd.conf file</span><br><span class="line"># generated from cobbler dhcp.conf template (Thu Dec  3 12:48:23 2015)</span><br><span class="line"># Do NOT make changes to /etc/dhcpd.conf. Instead, make your changes</span><br><span class="line"># in /etc/cobbler/dhcp.template, as /etc/dhcpd.conf will be</span><br><span class="line"># overwritten.</span><br><span class="line"># ******************************************************************</span><br><span class="line">ddns-update-style interim;</span><br><span class="line">…………</span><br></pre></td></tr></table></figure>
<h3 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># 启动相关服务并设置开机启动(可选) 与第二种方法二选一</span><br><span class="line">chkconfig httpd on</span><br><span class="line">chkconfig xinetd on</span><br><span class="line">chkconfig cobblerd on</span><br><span class="line">chkconfig dhcpd on</span><br><span class="line">/etc/init.d/httpd restart</span><br><span class="line">/etc/init.d/xinetd restart</span><br><span class="line">/etc/init.d/cobblerd restart</span><br><span class="line">/etc/init.d/dhcpd restart</span><br><span class="line"># 编写Cobbler相关服务启动脚本(可选)</span><br><span class="line">cat &gt;&gt;/etc/init.d/cobbler&lt;&lt;EOF</span><br><span class="line">#!/bin/bash</span><br><span class="line"># chkconfig: 345 80 90</span><br><span class="line"># description:cobbler</span><br><span class="line">case \$1 in</span><br><span class="line">  start)</span><br><span class="line">    /etc/init.d/httpd start</span><br><span class="line">    /etc/init.d/xinetd start</span><br><span class="line">    /etc/init.d/dhcpd start</span><br><span class="line">    /etc/init.d/cobblerd start</span><br><span class="line">    ;;</span><br><span class="line">  stop)</span><br><span class="line">    /etc/init.d/httpd stop</span><br><span class="line">    /etc/init.d/xinetd stop</span><br><span class="line">    /etc/init.d/dhcpd stop</span><br><span class="line">    /etc/init.d/cobblerd stop</span><br><span class="line">    ;;</span><br><span class="line">  restart)</span><br><span class="line">    /etc/init.d/httpd restart</span><br><span class="line">    /etc/init.d/xinetd restart</span><br><span class="line">    /etc/init.d/dhcpd restart</span><br><span class="line">    /etc/init.d/cobblerd restart</span><br><span class="line">    ;;</span><br><span class="line">  status)</span><br><span class="line">    /etc/init.d/httpd status</span><br><span class="line">    /etc/init.d/xinetd status</span><br><span class="line">    /etc/init.d/dhcpd status</span><br><span class="line">    /etc/init.d/cobblerd status</span><br><span class="line">    ;;</span><br><span class="line">  sync)</span><br><span class="line">    cobbler sync</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    echo &quot;Input error,please in put &apos;start|stop|restart|status|sync&apos;!&quot;</span><br><span class="line">    exit 2</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line">EOF</span><br><span class="line"># chmod +x /etc/init.d/cobbler</span><br><span class="line"># chkconfig cobbler on</span><br></pre></td></tr></table></figure>
<h2 id="Cobbler的命令行管理"><a href="#Cobbler的命令行管理" class="headerlink" title="Cobbler的命令行管理"></a>Cobbler的命令行管理</h2><h3 id="查看命令帮助"><a href="#查看命令帮助" class="headerlink" title="查看命令帮助"></a>查看命令帮助</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node1 ~]# cobbler</span><br><span class="line">usage</span><br><span class="line">=====</span><br><span class="line">cobbler &lt;distro|profile|system|repo|image|mgmtclass|package|file&gt; ... </span><br><span class="line">        [add|edit|copy|getks*|list|remove|rename|report] [options|--help]</span><br><span class="line">cobbler &lt;aclsetup|buildiso|import|list|replicate|report|reposync|sync|validateks|version|signature|get-loaders|hardlink&gt; [options|--help]</span><br><span class="line">[root@linux-node1 ~]# cobbler import --help  # 导入镜像</span><br><span class="line">Usage: cobbler [options]</span><br><span class="line">Options:</span><br><span class="line">  -h, --help            show this help message and exit</span><br><span class="line">  --arch=ARCH           OS architecture being imported</span><br><span class="line">  --breed=BREED         the breed being imported</span><br><span class="line">  --os-version=OS_VERSION</span><br><span class="line">                        the version being imported</span><br><span class="line">  --path=PATH           local path or rsync location</span><br><span class="line">  --name=NAME           name, ex &apos;RHEL-5&apos;</span><br><span class="line">  --available-as=AVAILABLE_AS</span><br><span class="line">                        tree is here, don&apos;t mirror</span><br><span class="line">  --kickstart=KICKSTART_FILE</span><br><span class="line">                        assign this kickstart file</span><br><span class="line">  --rsync-flags=RSYNC_FLAGS</span><br><span class="line">                        pass additional flags to rsync</span><br><span class="line">cobbler check    核对当前设置是否有问题</span><br><span class="line">cobbler list     列出所有的cobbler元素</span><br><span class="line">cobbler report   列出元素的详细信息</span><br><span class="line">cobbler sync     同步配置到数据目录,更改配置最好都要执行下</span><br><span class="line">cobbler reposync 同步yum仓库</span><br><span class="line">cobbler distro   查看导入的发行版系统信息</span><br><span class="line">cobbler system   查看添加的系统信息</span><br><span class="line">cobbler profile  查看配置信息</span><br></pre></td></tr></table></figure>
<h3 id="导入镜像"><a href="#导入镜像" class="headerlink" title="导入镜像"></a>导入镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-node1 ~]# mount /dev/cdrom /mnt/  # 挂载CentOS7的系统镜像。</span><br><span class="line"># 导入系统镜像</span><br><span class="line">[root@linux-node1 ~]# cobbler import --path=/mnt/ --name=CentOS-7.1-x86_64 --arch=x86_64</span><br><span class="line"># --path 镜像路径</span><br><span class="line"># --name 为安装源定义一个名字</span><br><span class="line"># --arch 指定安装源是32位、64位、ia64, 目前支持的选项有: x86│x86_64│ia64</span><br><span class="line"># 安装源的唯一标示就是根据name参数来定义，本例导入成功后，安装源的唯一标示就是：CentOS-7.1-x86_64，如果重复，系统会提示导入失败。</span><br><span class="line">[root@linux-node1 ~]# cobbler distro list  # 查看镜像列表</span><br><span class="line">   CentOS-7.1-x86_64</span><br><span class="line"># 镜像存放目录，cobbler会将镜像中的所有安装文件拷贝到本地一份，放在/var/www/cobbler/ks_mirror下的CentOS-7.1-x86_64目录下。因此/var/www/cobbler目录必须具有足够容纳安装文件的空间。</span><br><span class="line">[root@linux-node1 ~]# cd /var/www/cobbler/ks_mirror/</span><br><span class="line">[root@linux-node1 ks_mirror]# ls</span><br><span class="line">CentOS-7.1-x86_64  config</span><br><span class="line">[root@linux-node1 ks_mirror]# ls CentOS-7.1-x86_64/</span><br><span class="line">CentOS_BuildTag  GPL       LiveOS    RPM-GPG-KEY-CentOS-7</span><br><span class="line">EFI              images    Packages  RPM-GPG-KEY-CentOS-Testing-7</span><br><span class="line">EULA             isolinux  repodata  TRANS.TBL</span><br></pre></td></tr></table></figure>
<h3 id="指定ks-cfg文件及调整内核参数"><a href="#指定ks-cfg文件及调整内核参数" class="headerlink" title="指定ks.cfg文件及调整内核参数"></a>指定ks.cfg文件及调整内核参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"># Cobbler的ks.cfg文件存放位置</span><br><span class="line">[root@linux-node1 ks_mirror]# cd /var/lib/cobbler/kickstarts/</span><br><span class="line">[root@linux-node1 kickstarts]# ls  # 自带很多</span><br><span class="line">default.ks    install_profiles  sample_autoyast.xml  sample_esxi4.ks  sample_old.seed</span><br><span class="line">esxi4-ks.cfg  legacy.ks         sample_end.ks（默认使用的ks文件）        sample_esxi5.ks  sample.seed</span><br><span class="line">esxi5-ks.cfg  pxerescue.ks      sample_esx4.ks       sample.ks</span><br><span class="line">[root@linux-node1 kickstarts]# rz  # 上传准备好的ks文件</span><br><span class="line">rz waiting to receive.</span><br><span class="line">Starting zmodem transfer.  Press Ctrl+C to cancel.</span><br><span class="line">Transferring Cobbler-CentOS-7.1-x86_64.cfg...</span><br><span class="line">  100%       1 KB       1 KB/sec    00:00:01       0 Errors</span><br><span class="line">[root@linux-node1 kickstarts]# mv Cobbler-CentOS-7.1-x86_64.cfg CentOS-7.1-x86_64.cfg</span><br><span class="line"># 在第一次导入系统镜像后，Cobbler会给镜像指定一个默认的kickstart自动安装文件在/var/lib/cobbler/kickstarts下的sample_end.ks。</span><br><span class="line">[root@linux-node1 ~]# cobbler list</span><br><span class="line">distros:</span><br><span class="line">   CentOS-7.1-x86_64</span><br><span class="line">profiles:</span><br><span class="line">   CentOS-7.1-x86_64</span><br><span class="line">systems:</span><br><span class="line">repos:</span><br><span class="line">images:</span><br><span class="line">mgmtclasses:</span><br><span class="line">packages:</span><br><span class="line">files:</span><br><span class="line"># 查看安装镜像文件信息</span><br><span class="line">[root@linux-node1 ~]# cobbler distro report --name=CentOS-7.1-x86_64</span><br><span class="line">Name                           : CentOS-7.1-x86_64</span><br><span class="line">Architecture                   : x86_64</span><br><span class="line">TFTP Boot Files                : &#123;&#125;</span><br><span class="line">Breed                          : redhat</span><br><span class="line">Comment                        : </span><br><span class="line">Fetchable Files                : &#123;&#125;</span><br><span class="line">Initrd                         : /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64/images/pxeboot/initrd.img</span><br><span class="line">Kernel                         : /var/www/cobbler/ks_mirror/CentOS-7.1-x86_64/images/pxeboot/vmlinuz</span><br><span class="line">Kernel Options                 : &#123;&#125;</span><br><span class="line">Kernel Options (Post Install)  : &#123;&#125;</span><br><span class="line">Kickstart Metadata             : &#123;&apos;tree&apos;: &apos;http://@@http_server@@/cblr/links/CentOS-7.1-x86_64&apos;&#125;</span><br><span class="line">Management Classes             : []</span><br><span class="line">OS Version                     : rhel7</span><br><span class="line">Owners                         : [&apos;admin&apos;]</span><br><span class="line">Red Hat Management Key         : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Red Hat Management Server      : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Template Files                 : &#123;&#125;</span><br><span class="line"># 查看所有的profile设置</span><br><span class="line">[root@linux-node1 ~]# cobbler profile report</span><br><span class="line"># 查看指定的profile设置</span><br><span class="line">[root@linux-node1 ~]# cobbler profile report --name=CentOS-7.1-x86_64</span><br><span class="line">Name                           : CentOS-7.1-x86_64</span><br><span class="line">TFTP Boot Files                : &#123;&#125;</span><br><span class="line">Comment                        : </span><br><span class="line">DHCP Tag                       : default</span><br><span class="line">Distribution                   : CentOS-7.1-x86_64</span><br><span class="line">Enable gPXE?                   : 0</span><br><span class="line">Enable PXE Menu?               : 1</span><br><span class="line">Fetchable Files                : &#123;&#125;</span><br><span class="line">Kernel Options                 : &#123;&#125;</span><br><span class="line">Kernel Options (Post Install)  : &#123;&#125;</span><br><span class="line">Kickstart                      : /var/lib/cobbler/kickstarts/sample_end.ks  --&gt;默认ks文件</span><br><span class="line">Kickstart Metadata             : &#123;&#125;</span><br><span class="line">Management Classes             : []</span><br><span class="line">Management Parameters          : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Name Servers                   : []</span><br><span class="line">Name Servers Search Path       : []</span><br><span class="line">Owners                         : [&apos;admin&apos;]</span><br><span class="line">Parent Profile                 : </span><br><span class="line">Internal proxy                 : </span><br><span class="line">Red Hat Management Key         : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Red Hat Management Server      : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Repos                          : []</span><br><span class="line">Server Override                : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Template Files                 : &#123;&#125;</span><br><span class="line">Virt Auto Boot                 : 1</span><br><span class="line">Virt Bridge                    : xenbr0</span><br><span class="line">Virt CPUs                      : 1</span><br><span class="line">Virt Disk Driver Type          : raw</span><br><span class="line">Virt File Size(GB)             : 5</span><br><span class="line">Virt Path                      : </span><br><span class="line">Virt RAM (MB)                  : 512</span><br><span class="line">Virt Type                      : kvm</span><br><span class="line"># 编辑profile，修改关联的ks文件</span><br><span class="line">[root@linux-node1 ~]# cobbler profile edit --name=CentOS-7.1-x86_64 --kickstart=/var/lib/cobbler/kickstarts/CentOS-7.1-x86_64.cfg</span><br><span class="line"># 修改安装系统的内核参数，在CentOS7系统有一个地方变了，就是网卡名变成eno16777736这种形式，但是为了运维标准化，我们需要将它变成我们常用的eth0，因此使用下面的参数。但要注意是CentOS7才需要下面的步骤，CentOS6不需要。</span><br><span class="line">[root@linux-node1 ~]# cobbler profile edit --name=CentOS-7.1-x86_64 --kopts=&apos;net.ifnames=0 biosdevname=0&apos;</span><br><span class="line">[root@linux-node1 ~]# cobbler profile report CentOS-7.1-x86_64</span><br><span class="line">Name                           : CentOS-7.1-x86_64</span><br><span class="line">TFTP Boot Files                : &#123;&#125;</span><br><span class="line">Comment                        : </span><br><span class="line">DHCP Tag                       : default</span><br><span class="line">Distribution                   : CentOS-7.1-x86_64</span><br><span class="line">Enable gPXE?                   : 0</span><br><span class="line">Enable PXE Menu?               : 1</span><br><span class="line">Fetchable Files                : &#123;&#125;</span><br><span class="line">Kernel Options                 : &#123;&apos;biosdevname&apos;: &apos;0&apos;, &apos;net.ifnames&apos;: &apos;0&apos;&#125;</span><br><span class="line">Kernel Options (Post Install)  : &#123;&#125;</span><br><span class="line">Kickstart                      : /var/lib/cobbler/kickstarts/CentOS-7.1-x86_64.cfg</span><br><span class="line">Kickstart Metadata             : &#123;&#125;</span><br><span class="line">Management Classes             : []</span><br><span class="line">Management Parameters          : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Name Servers                   : []</span><br><span class="line">Name Servers Search Path       : []</span><br><span class="line">Owners                         : [&apos;admin&apos;]</span><br><span class="line">Parent Profile                 : </span><br><span class="line">Internal proxy                 : </span><br><span class="line">Red Hat Management Key         : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Red Hat Management Server      : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Repos                          : []</span><br><span class="line">Server Override                : &lt;&lt;inherit&gt;&gt;</span><br><span class="line">Template Files                 : &#123;&#125;</span><br><span class="line">Virt Auto Boot                 : 1</span><br><span class="line">Virt Bridge                    : xenbr0</span><br><span class="line">Virt CPUs                      : 1</span><br><span class="line">Virt Disk Driver Type          : raw</span><br><span class="line">Virt File Size(GB)             : 5</span><br><span class="line">Virt Path                      : </span><br><span class="line">Virt RAM (MB)                  : 512</span><br><span class="line">Virt Type                      : kvm</span><br><span class="line"># 每次修改完都要同步一次</span><br><span class="line">[root@linux-node1 ~]# cobbler sync</span><br></pre></td></tr></table></figure>
<h3 id="安装系统"><a href="#安装系统" class="headerlink" title="安装系统"></a>安装系统</h3><p>可以很愉快的告诉你到这里就可以安装系统了！<br>有没有发现不美观的地方？<br>网址不是我的！改！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#修改Cobbler提示</span><br><span class="line">[root@linux-node1 ~]# vim /etc/cobbler/pxe/pxedefault.template</span><br><span class="line">MENU TITLE Cobbler | http://www.zyops.com</span><br><span class="line">[root@linux-node1 ~]# cobbler sync # 修改配置都要同步</span><br></pre></td></tr></table></figure>
<h2 id="ks-cfg文件简析"><a href="#ks-cfg文件简析" class="headerlink" title="ks.cfg文件简析"></a>ks.cfg文件简析</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">文件大部分参数含义见kickstart文章，此处只讲一些不同的地方。同时可以参考模板文件。</span><br><span class="line">[root@linux-node1 kickstarts]# cat CentOS-7.1-x86_64.cfg</span><br><span class="line"># Cobbler for Kickstart Configurator for CentOS 7.1 by yao zhang</span><br><span class="line">install</span><br><span class="line">url --url=$tree  # 这些$开头的变量都是调用配置文件里的值。</span><br><span class="line">text</span><br><span class="line">lang en_US.UTF-8</span><br><span class="line">keyboard us</span><br><span class="line">zerombr</span><br><span class="line">bootloader --location=mbr --driveorder=sda --append=&quot;crashkernel=auto rhgb quiet&quot;</span><br><span class="line"># Network information</span><br><span class="line">$SNIPPET(&apos;network_config&apos;)</span><br><span class="line">timezone --utc Asia/Shanghai</span><br><span class="line">authconfig --enableshadow --passalgo=sha512</span><br><span class="line">rootpw  --iscrypted $default_password_crypted</span><br><span class="line">clearpart --all --initlabel</span><br><span class="line">part /boot --fstype xfs --size 1024  # CentOS7系统磁盘默认格式xfs</span><br><span class="line">part swap --size 1024</span><br><span class="line">part / --fstype xfs --size 1 --grow</span><br><span class="line">firstboot --disable</span><br><span class="line">selinux --disabled</span><br><span class="line">firewall --disabled</span><br><span class="line">logging --level=info</span><br><span class="line">reboot</span><br><span class="line">%pre</span><br><span class="line">$SNIPPET(&apos;log_ks_pre&apos;)</span><br><span class="line">$SNIPPET(&apos;kickstart_start&apos;)</span><br><span class="line">$SNIPPET(&apos;pre_install_network_config&apos;)</span><br><span class="line"># Enable installation monitoring</span><br><span class="line">$SNIPPET(&apos;pre_anamon&apos;)</span><br><span class="line">%end</span><br><span class="line">%packages</span><br><span class="line">@base</span><br><span class="line">@compat-libraries</span><br><span class="line">@debugging</span><br><span class="line">@development</span><br><span class="line">tree</span><br><span class="line">nmap</span><br><span class="line">sysstat</span><br><span class="line">lrzsz</span><br><span class="line">dos2unix</span><br><span class="line">telnet</span><br><span class="line">iptraf</span><br><span class="line">ncurses-devel</span><br><span class="line">openssl-devel</span><br><span class="line">zlib-devel</span><br><span class="line">OpenIPMI-tools</span><br><span class="line">screen</span><br><span class="line">%end</span><br><span class="line">%post</span><br><span class="line">systemctl disable postfix.service</span><br><span class="line">%end</span><br></pre></td></tr></table></figure>
<h2 id="定制化安装"><a href="#定制化安装" class="headerlink" title="定制化安装"></a>定制化安装</h2><p>可能从学习kickstart开始就有人想怎样能够指定某台服务器使用指定ks文件，kickstart实现这功能可能比较复杂，但是Cobbler就很简单了。</p>
<p>区分一台服务器的最简单的方法就是物理MAC地址。<br>物理服务器的MAC地址在服务器上的标签上写了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cobbler system add --name=oldboy --mac=00：0C：29：7F：2F：A1 --profile=CentOS-7.1-x86_64 --ip-address=10.0.0.111 --subnet=255.255.255.0 --gateway=10.0.0.2 --interface=eth0 --static=1 --hostname=oldboy.example.com --name-servers=&quot;114.114.114.114 8.8.8.8&quot;</span><br><span class="line"># --name 自定义，但不能重复</span><br><span class="line"># 查看定义的列表</span><br><span class="line">[root@linux-node1 ~]# cobbler system list</span><br><span class="line">   oldboy</span><br><span class="line">[root@linux-node1 ~]# cobbler sync</span><br></pre></td></tr></table></figure>
<p>再次开机安装就不再询问选择了，直接安装。</p>
<h2 id="Cobbler的Web管理界面的安装与配置"><a href="#Cobbler的Web管理界面的安装与配置" class="headerlink" title="Cobbler的Web管理界面的安装与配置"></a>Cobbler的Web管理界面的安装与配置</h2><p>已经安装cobbler-web软件。</p>
<p>访问网址：<a href="http://10.0.0.7/cobbler_web和https://10.0.0.7/cobbler_web" target="_blank" rel="noopener">http://10.0.0.7/cobbler_web和https://10.0.0.7/cobbler_web</a></p>
<p>默认用户名：cobbler<br>默认密码 ：cobbler</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/etc/cobbler/users.conf       # Web服务授权配置文件</span><br><span class="line">/etc/cobbler/users.digest     # 用于web访问的用户名密码配置文件</span><br><span class="line">[root@linux-node1 ~]# cat /etc/cobbler/users.digest</span><br><span class="line">cobbler:Cobbler:a2d6bae81669d707b72c0bd9806e01f3</span><br><span class="line"># 设置Cobbler web用户登陆密码</span><br><span class="line"># 在Cobbler组添加cobbler用户，提示输入2遍密码确认</span><br><span class="line">[root@linux-node1 ~]# htdigest /etc/cobbler/users.digest &quot;Cobbler&quot; cobbler</span><br><span class="line">Changing password for user cobbler in realm Cobbler</span><br><span class="line">New password: 123456</span><br><span class="line">Re-type new password:123456</span><br><span class="line">[root@linux-node1 ~]# cobbler sync</span><br><span class="line">[root@linux-node1 ~]# /etc/init.d/httpd restart</span><br><span class="line">停止 httpd：                                               [确定]</span><br><span class="line">正在启动 httpd：                                           [确定]</span><br><span class="line">[root@linux-node1 ~]# /etc/init.d/cobblerd restart</span><br><span class="line">Stopping cobbler daemon:                                   [确定]</span><br><span class="line">Starting cobbler daemon:                                   [确定]</span><br></pre></td></tr></table></figure>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cobbler/">Cobbler</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-老男孩Linux培训第28期笔记001-100" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/24/老男孩Linux培训第28期笔记001-100/" class="article-date">
      <time datetime="2015-12-24T00:00:00.000Z" itemprop="datePublished">2015-12-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/24/老男孩Linux培训第28期笔记001-100/">老男孩Linux培训第28期笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="0001"><a href="#0001" class="headerlink" title="0001"></a>0001</h1><p>第一个任务分享<br>成功最有效的方法就是向有经验的人学习！</p>
<h1 id="0002"><a href="#0002" class="headerlink" title="0002"></a>0002</h1><h2 id="侯鹏飞"><a href="#侯鹏飞" class="headerlink" title="侯鹏飞"></a>侯鹏飞</h2><p>侯鹏飞 awk哥<br>25 26期学员<br>拍卖平台<br>20多台机器<br>薪资 13*14<br>实习期 10k</p>
<p>怎么学习<br>讲故事</p>
<p>学习<br>工作</p>
<p>跟老男孩学三剑客</p>
<p>来学习心态摆好</p>
<p>心态<br>方法<br>行为<br>方式</p>
<p>心态：<br>目标<br>是什么促使你来学习<br>动力是什么</p>
<p>给你20万从头到尾搭建一个网站？</p>
<p>谨慎操作</p>
<p>无删除</p>
<p>大胆心细</p>
<p>画图</p>
<p>文档</p>
<p>领导让你整理文档<br>领导让你整理一下公司服务器的架构图</p>
<p>软实力。</p>
<p>看Linux工程师的态度</p>
<p>细节</p>
<p>上机操作完了，椅子归位。</p>
<p>分享、给大家分享配置、原理性知识。</p>
<p>搭建服务熟练、达到不看文档基本就弄好了。</p>
<p>跟着老师一步一步走。学会之后再去换搭建环境。理解原理。先学会走，然后再跑。</p>
<p>一切看业务。</p>
<p>培养学习能力</p>
<p>侯鹏飞QQ：1746594568</p>
<p>不要挑肥拣瘦。</p>
<p>空杯心态，从零开始学。</p>
<p>不能够学到心里，学习就会打折扣。</p>
<h1 id="0003"><a href="#0003" class="headerlink" title="0003"></a>0003</h1><h2 id="曹亚楠"><a href="#曹亚楠" class="headerlink" title="曹亚楠"></a>曹亚楠</h2><p>曹亚楠 文档哥</p>
<p>个人总结：<br>学习经历：</p>
<p>写自己期望的薪资</p>
<p>找工作，如何突出自己。</p>
<p>期中架构分享</p>
<p>做笔记、认真的做。</p>
<p>自己值那么多薪资吗？</p>
<p>要别人的笔记是没用的。<br>学会，自己总结后才是自己的。</p>
<p>CTO面试、技术总监面试、HR面试</p>
<p>薪资不要要太低。运维的风险性。要太低，人家也不敢要你。</p>
<p>自己的感触：<br>自省、自律、自我升华</p>
<p>知道自己哪里不足，然后努力去学习。</p>
<p>多一度热爱</p>
<p>学习方法：<br>命令必须手敲。<br>上课认真听讲。</p>
<p>时间不等人，心态估计也很难有空杯心态。</p>
<p>把基础，命令掌握好。<br>预习的时候尽量做好笔记。为后期腾出时间。</p>
<p>浮躁、彷徨的时间，要清楚自己要什么、要清楚自己的目标。</p>
<p>总结，找一个适合自己的学习方法，虽然成功不可复制，但成功是可以借鉴的。多向有经验的人学习。</p>
<p>蚂蚁的故事</p>
<h1 id="冯学"><a href="#冯学" class="headerlink" title="冯学"></a>冯学</h1><p>冯学 26期 画图哥<br>12k</p>
<p>心的<br>最大感受：<br>时间不够<br>抓紧时间<br> 预习还要做好笔记<br>工作中不可能全部记住。还可以看笔记。把公司的任务快速完成。</p>
<p>复习</p>
<p>做好了、就是工作中的亮点、加薪的依据。</p>
<p>坚持</p>
<p>锻炼身体</p>
<p>锻炼人的意志</p>
<p>对人的整体状态有好的帮助。</p>
<h1 id="0004"><a href="#0004" class="headerlink" title="0004"></a>0004</h1><p>学员的分享 大家都是比较自信、</p>
<h2 id="万永振"><a href="#万永振" class="headerlink" title="万永振"></a>万永振</h2><p>万永振 26期</p>
<p>跟着老师的思路走。听话，出活。<br>四项基本原则：<br>目标<br>方法<br>坚持<br>换框架</p>
<p>学习能力的提升</p>
<p>做人的原则<br>懂得感恩<br>结交人脉</p>
<p>多跟有经验的人交流、学习。</p>
<p>万永振QQ：2934145242<br>14k*13+年终奖+绩效+500每月的补助</p>
<p>学会展示自己、低调的展示自己。</p>
<h1 id="0005"><a href="#0005" class="headerlink" title="0005"></a>0005</h1><h2 id="徐亮伟"><a href="#徐亮伟" class="headerlink" title="徐亮伟"></a>徐亮伟</h2><p>徐亮伟 26期班长 思想哥 1997年<br><a href="http://xuliangwei.com" target="_blank" rel="noopener">徐亮伟</a>QQ:572891887<br>看到他博客的git分布式版本控制系统的发布日期2016/02/01</p>
<p>如何学Linux：<br>先入门，在精通。<br>大家一般学一遍是学不会的。所以要多练习。<br>实践出真知<br>善于思考，学会自我处理问题。<br>学会总结。不总结，过一段时间就忘记了。就等于没有学。<br>大家一定要让自己优秀一点。</p>
<p>目标要定高一点。<br>知其然也要知其所以然。<br>创造属于自己的一片天。<br>不做井底之蛙。</p>
<p>关注大牛</p>
<p>技术分享<br>    架构师大会<br>    小型沙龙<br>    线下分享</p>
<p>性格<br>搞不定就不搞了。<br>现在是 肯定有方法。再想想。</p>
<p>18岁</p>
<h1 id="0006"><a href="#0006" class="headerlink" title="0006"></a>0006</h1><h2 id="孙文俊"><a href="#孙文俊" class="headerlink" title="孙文俊"></a>孙文俊</h2><p>兴趣使然<br>愿意做</p>
<p>兴趣的成就感：<br> 及时的分享<br> 赞美别人</p>
<p> 养成习惯：</p>
<h1 id="0007"><a href="#0007" class="headerlink" title="0007"></a>0007</h1><h2 id="蒋理想"><a href="#蒋理想" class="headerlink" title="蒋理想"></a>蒋理想</h2><p>蒋理想 23期</p>
<p>明确目标<br>好的工作<br>好的薪资<br>然后找个女朋友</p>
<p>打起十二分的精神<br>不努力就很难、努力学习。</p>
<p>培养自己的兴趣<br>乐于分享<br>乐于助人<br>学会赞美别人</p>
<p>要善于整理笔记，笔记整理的好坏，影响自己以后的发展。<br>学会整理笔记</p>
<p>要学会自己搜索<br>善于搜索。自学</p>
<p>老师布置的扩展要做。动手做。</p>
<p>自己的信心</p>
<p>潜意识，给自己信心。</p>
<p>给自己灌输正能量。</p>
<p>说话谦虚</p>
<p>相信你行。</p>
<h1 id="0008"><a href="#0008" class="headerlink" title="0008"></a>0008</h1><h2 id="谢迪"><a href="#谢迪" class="headerlink" title="谢迪"></a>谢迪</h2><p>23期</p>
<p>我很珍惜在台上的每一分钟</p>
<p>没有什么的问题可以难倒他。</p>
<p>结交厉害的人。也是很厉害的。</p>
<p>学习方法提上去</p>
<p>抵住诱惑、北京滚滚红尘、出来玩啊。</p>
<p> 发展方向</p>
<p> 多上台讲</p>
<p> 录视频10次。</p>
<p> 四个月</p>
<p> 尊严、要面子。<br> 不是挣来的。</p>
<p> 时间不够用。</p>
<p> 跟着老师走、</p>
<h1 id="0009"><a href="#0009" class="headerlink" title="0009"></a>0009</h1><h2 id="马亮"><a href="#马亮" class="headerlink" title="马亮"></a>马亮</h2><p>23期<br>manager和cto面试</p>
<p>相信可能、才有无限可能。</p>
<p>用最少的时间，学最多的知识。</p>
<p>只要你努力的，没有学不好的。</p>
<p>期中架构、基础学好。</p>
<p>备份的重要性。</p>
<p>分享技术</p>
<p>学会的三种境界：<br>自己学会<br>给别人讲<br>给别人讲别人会了</p>
<h1 id="0010"><a href="#0010" class="headerlink" title="0010"></a>0010</h1><p>老男孩教育运维班 运维脱产班28期</p>
<p>就业班<br>架构班<br>Python自动化<br>大数据</p>
<p>讯达云</p>
<p>对待销售的态度、<br>帮助别人</p>
<p>做任何事情不要想着无利不起早。</p>
<p>要学会吃亏。</p>
<p>先付出，在赚钱。</p>
<p>加班、加班10000小时定律</p>
<h1 id="0011"><a href="#0011" class="headerlink" title="0011"></a>0011</h1><p>技术、知识为介质<br>技术知识本身 只占50%</p>
<p>核心信念、价值观、能力和方法</p>
<p>老男孩教育带给大家的：<br>a.运维技术相关知识。<br>b.学习思想（如何思考）、学习方法（工作方法）、学习能力。<br>c.企业里的真正实际工作经验及故障案例，不亲身经历也可以变为自己的经验。<br>d.优秀学习习惯与思考的思维习惯。<br>f.职场做人礼仪与做事专业、规范的思想。<br>g.重在提升学员做人素质、做事态度，技术能力。</p>
<p>一出手，就专业、规范。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">思想</span><br><span class="line">学习能力</span><br><span class="line">经验（人，事）</span><br><span class="line">沟通，表达</span><br><span class="line">习惯</span><br></pre></td></tr></table></figure>
<p>文档，逻辑图。这是软实力。</p>
<p>去老男孩学习、换圈子</p>
<h1 id="0012"><a href="#0012" class="headerlink" title="0012"></a>0012</h1><p>素质：<br>面对一个有困难的事情的态度。</p>
<p>入职前三个月第一个来，最后一个走。<br>10年来第一个来，最后一个走。</p>
<p>事做好了。也要表现。</p>
<p>做一个事，就沾到你手上了。</p>
<p>故障后，故障处理后，写事故报告。<br>半夜处理问题后，半夜写报告。</p>
<h1 id="0013"><a href="#0013" class="headerlink" title="0013"></a>0013</h1><h2 id="同学们可以学到的内容细节"><a href="#同学们可以学到的内容细节" class="headerlink" title="同学们可以学到的内容细节"></a>同学们可以学到的内容细节</h2><p>学习工作中的优秀操作习惯：<br>a.操作前备份。<br>b.操作后对比检查。<br>c.服务重新启动前测试语法。<br>d.服务重新加载，加载后及时检查。<br>f.使用find替代rm。</p>
<h1 id="0014"><a href="#0014" class="headerlink" title="0014"></a>0014</h1><p>学习思想：<br>a.多在学习中记忆，不要死记硬背，理解知识背后的原理。7-8次以上。<br>b.通过案例去记忆、对联、相声。<br>c.靠多练习去记忆。<br>d.重复练习，多思考什么是掌握技术的关键。<br>李小龙说：<br>他不怕1000招练一遍的人，他怕一招练1000遍的人。<br>简单的做熟练了，就是高手！<br>熟练的重复做，就是专家！</p>
<p>大量心理学、沟通、表达能力<br>你会不会不是最关键的，最关键的是你是否能让面试官或你的领导相信你会！</p>
<h1 id="0015"><a href="#0015" class="headerlink" title="0015"></a>0015</h1><p>让面试官相信你会，就可以顺利下offer。<br>如何轻松转正？靠的是态度、素质、技术！最重要的还是态度。把活搞定了。就行。</p>
<h1 id="0016"><a href="#0016" class="headerlink" title="0016"></a>0016</h1><p>好的学习、听课、思维习惯</p>
<p>上课保持最大的输入，下课保持最大化的输出。<br>a.务必带一个笔记本和笔，用于记录及老师画图讲解的内容。<br>b.上课总结时，大家要记录关键的信息，抓重点总结，课后在详细总结。<br>c.听课习惯：调动所有感官学习，眼睛看，耳朵听，勤动手（记录和操作），勤思考。<br>d.听课要跟上进度，目标全员学会（前提是提前预习，完成课后作业的前提下）。<br>e.保持好充沛精力。<br>f.课上实践内容和老师保持高度一致，（软件版本，系统版本，配置路径，IP地址，主机名，用户名）。<br>g.课上学习一定不要随意更改，课下可以根据自己的想法去尝试，先跟着老师把技术跑通，然后课下在去变通。<br>h.课后第一时间总结课堂内容，赠送的视频是辅助材料。<br>i.上课必须跟上课堂老师讲解，课后不能太依赖视频（可以提前预习看视频）。<br>j.完整一次课的学习过程：<br>1.课前预习-&gt;课上听课实践-&gt;课上讨论-&gt;课后作业-&gt;课后讨论<br>k.参考老师的思维，培养适合自己的学习习惯和思维方法。<br>i.空杯心态，从0开始，不管你多牛，都要放空自己。</p>
<blockquote>
<p>记不住是正常的，记住了才不正常。<br>高度不同，思想不同。多学习，莫争辩。<br>女生找有责任心，勤奋努力，潜力股。</p>
</blockquote>
<h1 id="0017"><a href="#0017" class="headerlink" title="0017"></a>0017</h1><p>如何能记牢老师讲课的内容？</p>
<ul>
<li>被动学习：听老师讲，看视频，看书。学习知识在大脑的留存率低于30%</li>
<li>主动学习：课上课下积极讨论，把你会的教授给他人，帮助了别人，自己又提高了80%。</li>
</ul>
<p>被动学习：<br>听课 5%<br>阅读 %10<br>视听 20%<br>演示 30%<br>主动学习：<br>讨论 50%<br>实践 75%<br>教授给他人 90%</p>
<p>画图<br>老男孩博客中的博客<br>架构之美</p>
<p>李永义</p>
<h1 id="0018"><a href="#0018" class="headerlink" title="0018"></a>0018</h1><p>思想转变：学习心态改为工作心态<br><a href="http://oldboy.blog.51cto.com/2561410/1228397" target="_blank" rel="noopener">已就业学生分享就业经验</a><br>平时当作高考，高考当作平时，功夫要在平时下到位，重视每一天的学习。把在老男孩教育的学习当作工作。<br>1、一定要跟着老师的进度和思路走！<br>2、来老男孩培训，就是去企业里学习一样。<br>3、老师留的课后作业当作企业里领导分配的任务，无条件按要求完成。<br>4、先按照老师讲的去做，不要做任何变动，等熟练后，在自行变通。<br>5、多讨论多问<br>6、课堂的操作当作生产环境，遇到的问题就是生产问题，这样对学习有利。</p>
<h1 id="0019"><a href="#0019" class="headerlink" title="0019"></a>0019</h1><p>注意事项：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">集体休息时，不要大声喧哗。</span><br><span class="line">注意保持个人卫生。</span><br><span class="line">注意节约能源。</span><br><span class="line">全封闭的杯子。</span><br></pre></td></tr></table></figure>
<p>保持细节。</p>
<p>执着、专注<br>追女朋友，今天追，明天就不追了。那能追到才怪了。</p>
<h1 id="0020"><a href="#0020" class="headerlink" title="0020"></a>0020</h1><h2 id="如何学好Linux运维？"><a href="#如何学好Linux运维？" class="headerlink" title="如何学好Linux运维？"></a>如何学好Linux运维？</h2><p>四项基本原则：<br>目标：黑板上写薪水就是目标！ <em>信念</em><br>    HR面试：未来5-10年是如何规划的？优秀的运维工程师和架构师</p>
<p>方法：成功最有效的方法就是和有经验的人学习！ <em>价值观</em><br>    第一个老男孩老师、班级里学习好且努力的学习。<br>    第二个向比你年龄大的人学习，你认可的人。</p>
<p>行动的过程：如何确保结果接近你的目标。<br>努力：每天学习10小时以上，完成老师的作业要求。<br>坚持：4-5个月，每天学习10小时以上，完成老师的作业要求。</p>
<blockquote>
<p>信念决定价值观，价值观确定行动。</p>
</blockquote>
<p>你的态度足够好，能力很好。</p>
<p>别人说的到，我们做到了。</p>
<h2 id="学习计划书"><a href="#学习计划书" class="headerlink" title="学习计划书"></a>学习计划书</h2><p>我叫全金龙，经过老男孩教育运维班5个月学习后，我一定要达到的薪水目标是10k+，为了达到此目标我将采取如下10大行动或方案：<br>达到目标奖励：<br>达不到目标惩罚：<br>51CTO 发博客。<br>把链接发给你的朋友，最好包括看不起你的。</p>
<h2 id="学好Linux运维归结起来就一条：呱呱叫的学习态度"><a href="#学好Linux运维归结起来就一条：呱呱叫的学习态度" class="headerlink" title="学好Linux运维归结起来就一条：呱呱叫的学习态度"></a>学好Linux运维归结起来就一条：呱呱叫的学习态度</h2><p>1、按时上自习。<br>2、上课认真听讲，认真练习，认真预习，积极交流讨论。<br>3、完成老师布置的课后作业，并达到老师教学的基本要求，要提前预习。</p>
<h1 id="0021"><a href="#0021" class="headerlink" title="0021"></a>0021</h1><p>相信可能你就会无限接近可能</p>
<p>相信可能你就会无限可能，相信不可能你就是自费武功！</p>
<p>适当的吃点亏不算什么，多加点班不算什么。</p>
<p>重要心理学的两个小故事分享给大家。<br>算命的故事</p>
<p>心理学是干嘛的，认识人。</p>
<p>相爱容易相处难。</p>
<ol>
<li><p>算命的恋情2次婚姻。<br>第一次办公室恋情，离婚了。<br>第二次办公室恋情，没有离婚了。<br>你相信什么，什么就发行的机率就大。<br>办公室恋情</p>
</li>
<li><p><em>坚持</em><br>男孩给女孩写信，99次之前都是空的，第100次，写做你的新娘。</p>
</li>
</ol>
<p>然而男孩每次写信，收到的都是空的。到99次就崩溃了。到100次的时候他就没有看信的内容。就错过了。</p>
<p>方向看准了，就要勇往直前。</p>
<p>不相信，没行动。</p>
<h1 id="0022"><a href="#0022" class="headerlink" title="0022"></a>0022</h1><p>老男孩教育运维信息学基础模型2:</p>
<p>心理学模型：<br>信念：相信互联网linux运维岗位很牛，很有发展，一定要学好！<br>价值观：相信通过老男孩教育可以学到最牛的linux运维技术。<br>行动：付诸行动，结果学好了linux运维，找到了高薪的岗位，13K+。</p>
<p>老男孩教育运维心理学基础模型2:</p>
<p>信念：遇到自己心仪的女孩子，相信自己一定可以追到她。<br>价值观：通过看电影，咖啡厅，旅游等手段方法去追。<br>行动：付诸行动，追求到了心仪的女孩子。</p>
<blockquote>
<p>信念和价值观，决定行动，行动才可能有好结果。</p>
<p>爱情电影，看恐怖片她一害怕，你就假装害怕就跑她怀里了。</p>
</blockquote>
<p>不敢做就没有结果。</p>
<h1 id="0023"><a href="#0023" class="headerlink" title="0023"></a>0023</h1><p>销售的信念灌输。</p>
<p>不要觉得IT很牛逼，有很多行业比IT赚钱。</p>
<p>脱产班学生上课时间：<br>周末：六、日休息<br>上午：8:30到<br>        8:30-9:00 做老师预留的课前考试题<br>        9:30-12:30 上课（70分钟左右一节课）<br>午休：12:30-14:30,建议大家务必午睡30-40分钟<br>下午：14:30-未知 上课，一般晚上7-8点下课。</p>
<p>上课时间：每周1-5，讲课时间周2，周5，其他时间不定期讲课。<br>不接受同学们无故缺课，包括自习课，缺课三次，取消推荐就业资格。</p>
<p>自习课：每周1，3，4自习课会不定期讲课，因此不要缺席，每周3下午16点以后活动时间<br>自习期间有事可以向组长及班长请假，不要超过2个小时。</p>
<p>其他自习课时间安排：<br>    9:30-12:00<br>    14:00-19:00</p>
<p>自习课 周一、周四下午17点左右，去楼下跑步，1000米雷打不动，下大雨就算了。</p>
<p>课后作业：<br>1.总结<br>2.课外作业</p>
<p>学习的时候不要着急、学会一个知识点，再去学习下一个。不然就是没学会，时间长了就忘记了。</p>
<h1 id="0024"><a href="#0024" class="headerlink" title="0024"></a>0024</h1><p>老男孩的blog<br><a href="oldboy.blog.51cto.com">老男孩的51cto blog</a><br><a href="blog.oldboyedu.com">老男孩博客</a></p>
<p>学习思想：</p>
<ol>
<li>学习心态：<br>心态一定要放平，学好linux运维是需要过程的，如果是网友自学，这个过程可能要2-3年甚至更长。</li>
</ol>
<p>跟着老男孩教育学至少也需要4-5个月。</p>
<p>我们靠的就是老师的经验和努力，以及同学们的持续不懈努力。<br>成功就是每天多学一点点，多做一点点。</p>
<h1 id="0025"><a href="#0025" class="headerlink" title="0025"></a>0025</h1><ol>
<li>运维班讲课作战要领</li>
</ol>
<p>课程内容前期课程进度较慢：<br>第一个月：慢讲，目的是所有同学务必跟上，基础打牢，基础不牢地动山摇。<br>我们大都分同学都相当于0基础，学习稍微好的也要重复看基础部分，不要学龟兔赛跑的兔子。</p>
<p>第二个月：稍微加快，锻炼肺活量。<br>第三个月：逐步加快。<br>第四个月：逐步加快。模拟企业里工作的压力标准。<br>             冲刺阶段。接近企业里工作的压力标准。</p>
<p>要求全体学生日学习时长：<br>第一个月 平均每天至少学习10小时<br>第二个月 平均每天至少12个小时<br>第三个月 平均每天至少8个小时<br>第四个月 平均每天至少12个小时</p>
<p>跑马拉松，有快有慢。</p>
<h1 id="0026"><a href="#0026" class="headerlink" title="0026"></a>0026</h1><p>回顾上节：<br>信念：</p>
<ol>
<li><p>我们一定要相信自己能行。</p>
</li>
<li><p>成功的最有效的方法就是向有经验的人学习。</p>
</li>
<li><p>一节课的完整学习流程。<br>课前预习-课堂听课-课堂讨论-课下复习-课下作业-课下讨论</p>
</li>
<li><p>多选择主动学习的策略<br>讨论、交给别人、互相考考</p>
<ol>
<li>调节自己<br>学习很累，找到学习的兴趣、成就。</li>
</ol>
<p>人一定要自我。<br>人一定要自信，不然别人凭什么相信你。<br>人一定要自信，不要瞎自信。是靠实力自信的。</p>
</li>
</ol>
<p>给别人教会了，就有兴趣和成就干了。</p>
<h1 id="0027"><a href="#0027" class="headerlink" title="0027"></a>0027</h1><h2 id="硬件基础"><a href="#硬件基础" class="headerlink" title="硬件基础"></a>硬件基础</h2><p>IBM ThinkPad<br>网站PC服务器 x86服务器<br>1u 1unit 4.45cm<br>2u<br>4u</p>
<p>服务器品牌<br>DELL IBM HP</p>
<h3 id="1u"><a href="#1u" class="headerlink" title="1u"></a>1u</h3><p>R410<br>R610</p>
<h3 id="2u"><a href="#2u" class="headerlink" title="2u"></a>2u</h3><p>R720<br>R730</p>
<p>培训方向 互联网、移动互联网<br>用的最多的是dell的服务器</p>
<h4 id="电脑主机组成"><a href="#电脑主机组成" class="headerlink" title="电脑主机组成"></a>电脑主机组成</h4><p>主板、CPU、内存、硬盘、显卡、声卡、电源等。</p>
<p>7X24小时不间断服务。</p>
<h5 id="电源"><a href="#电源" class="headerlink" title="电源"></a>电源</h5><p>双电源。</p>
<h5 id="主板"><a href="#主板" class="headerlink" title="主板"></a>主板</h5><h5 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h5><p>决定计算机的工作速度和效率<br>Intel AMD品牌</p>
<blockquote>
<p>这个事情你会做还不行，还要有思想</p>
</blockquote>
<h5 id="CPU散热风扇"><a href="#CPU散热风扇" class="headerlink" title="CPU散热风扇"></a>CPU散热风扇</h5><p>选一个好的风扇是十分重要的。</p>
<h5 id="BIOS芯片"><a href="#BIOS芯片" class="headerlink" title="BIOS芯片"></a>BIOS芯片</h5><p>常见的三种BIOS:Award、AMI、Phoenix</p>
<h5 id="总线扩展槽"><a href="#总线扩展槽" class="headerlink" title="总线扩展槽"></a>总线扩展槽</h5><p>PCI/PCIE</p>
<h1 id="0028"><a href="#0028" class="headerlink" title="0028"></a>0028</h1><h5 id="硬盘"><a href="#硬盘" class="headerlink" title="硬盘"></a>硬盘</h5><p>西部数据<br>希捷<br>日立</p>
<p>硬盘的性能决定网站的性能</p>
<p>硬盘接口<br>IDE<br>SATA<br>SAS</p>
<p>机械硬盘 速度慢<br>SSD固态硬盘 速度快</p>
<blockquote>
<p>环境塑造人<br>不要总想着免费的、容易上当受骗。<br>价值观：天上没有掉馅饼的事。靠自己。努力学。</p>
</blockquote>
<h5 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h5><p>内存是临时存放数据的，断电就消失了。</p>
<h1 id="0029"><a href="#0029" class="headerlink" title="0029"></a>0029</h1><h5 id="IO各层次性能汇总"><a href="#IO各层次性能汇总" class="headerlink" title="IO各层次性能汇总"></a>IO各层次性能汇总</h5><p>CPU缓存<br>内存<br>硬盘 硬盘缓存<br>网卡</p>
<blockquote>
<p>运维职责：</p>
<ol>
<li>网站7X24都能访问。</li>
<li>数据不能丢。</li>
<li>用户体验尽量好。</li>
</ol>
</blockquote>
<h5 id="显卡"><a href="#显卡" class="headerlink" title="显卡"></a>显卡</h5><p>图像处理需要、一般服务器不需要</p>
<h5 id="光驱"><a href="#光驱" class="headerlink" title="光驱"></a>光驱</h5><p>装系统</p>
<p>网络<br>U盘</p>
<p>职业操守：</p>
<blockquote>
<p>为企业省钱</p>
</blockquote>
<p>计算机工作原理</p>
<p>计算机硬件组成部分</p>
<p>杂乱要抓重点</p>
<p>计算机硬件结构<br>冯诺以曼结构<br>输入设备<br>输出设备</p>
<p>运算器<br>储存器<br>控制器</p>
<h1 id="0030"><a href="#0030" class="headerlink" title="0030"></a>0030</h1><h2 id="企业里PC服务器品牌及型号"><a href="#企业里PC服务器品牌及型号" class="headerlink" title="企业里PC服务器品牌及型号"></a>企业里PC服务器品牌及型号</h2><p>互联网公司服务器品牌：<br>DELL（大多数公司），HP，IBM（百度），浪潮，联想，航天联志。</p>
<p>DELL服务器品牌：<br>1U=4.45CM</p>
<p>2010年以前 1u 1850 1950，2u 2850 2950<br>2010-2013年：1u R410 R610，2u R710<br>2014-2016年：1u R420/430 R620/R630，2u R720/R730</p>
<p>IBM品牌：<br>1u 3350/m3 3350/m5<br>2u 3650<br>4u 3850<br>8u 3950</p>
<p>HP品牌：<br>2u DL380g7/g8</p>
<h2 id="服务器主要零部件："><a href="#服务器主要零部件：" class="headerlink" title="服务器主要零部件："></a>服务器主要零部件：</h2><ol>
<li>电源<br>生产中核心业务用双电源，双路（AB），如果是集群的情况可以不用双电源。</li>
</ol>
<p>热插拔式。</p>
<ol>
<li>CPU处理器<br>常见品牌 Intel，AMD</li>
</ol>
<p>一般企业离得服务器，CPU物理数量2-4棵，单个CPU4核，内存16-256GB（32，64居多），做虚拟化的宿主机，CPU颗数4-8个，内存总量一般是48-128GB，6-10个虚拟机。</p>
<h1 id="0032"><a href="#0032" class="headerlink" title="0032"></a>0032</h1><ol>
<li>内存<br>CPU和磁盘之间的缓冲设备，是临时储存器（存放数据的）。<br>程序：c/php/java，代码文件，静态的，放在磁盘里的数据。<br>进程：正在运行的程序，进程运行就是发程序放在内存中运行。<br>守护进程：持续保持运行着的程序。</li>
</ol>
<p>计算机重启，内存的数据会释放掉。</p>
<p>企业案例：<br>1）门户极端案例：<br>大并发写入案例。（抢红包，微博）。<br>高并发、大数据量写数据。会把数据先写入内存。然后定时定量写入到磁盘（减少磁盘IO）。最终还是会加载到内存对外提供访问。</p>
<p>a. 优点，写数据到内存，性能高速度快（微博，微信，SNS，秒杀）。<br>b. 缺点：可能会丢失一部分在内存中还没来得及存入磁盘的数据。<br>解决办法：<br>服务器主板安装蓄电池，在断电瞬间把内存数据写会到磁盘<br>UPS<br>选双路电的机房。接不通的电路，服务器放到不同的机柜、地区。</p>
<p>2）大中小企业案例：<br>对于并发不是很大、数据也不是特别大、读多写少的业务，会先把数据写入磁盘，然后通过程序把数据读入内存。在对外度过读内存提供访问服务。</p>
<blockquote>
<p>有一句话：缓存无处不在！</p>
<p>企业面试题：<br>buffer和cache什么区别？</p>
</blockquote>
<p>简单解答：<br>写入数据到内存里，这个数据的内存空间称为缓冲区（buffer）。<br>从内存读取数据，这个存数据的内存空间称为缓存区（cache）。</p>
<p>由于99%的网站都是读取为主，写入为辅，读写比例至少10:1，所以并发写入不是问题。<br><em>提醒：这里提到的内存和磁盘，是由多台机器组成的集群架构环境 memcached（纯内存）/redis（内存加磁盘）。</em></p>
<h1 id="0033"><a href="#0033" class="headerlink" title="0033"></a>0033</h1><ol>
<li>硬盘<br>永久存放数据的储存器，磁盘上也是有缓存的（芯片）<br>常用的硬盘都是3.5英寸的（ide，sata，sas），常规的机械硬盘，读取（性能不高）性能比内存差很多，所以，在企业工作中，我们才会把大量数据缓存到内存，写入到缓冲区。当今互联网网站比笨的解决方案。</li>
</ol>
<p>企业应用：</p>
<ol>
<li>常规正式工作场景选SAS（结合SATA和SCSI的优点）硬盘（转速是15000转/分，机械硬盘转数高的性能好）</li>
<li>不对外提供访问的服务器，例如线下的数据备份，可选SATA（7200-10000转/分）。SATA特点，容量大，价格便宜，但是速度比较慢。</li>
<li>高并发访问，小数据量，可以选择SSD。<blockquote>
<p>SSD最好，都选SSD吧？<br>淘宝网企业案例：<br>服务器会把SATA和SSD结合起来用，热点储存，程序动态调度。</p>
</blockquote>
</li>
</ol>
<p>企业级硬盘是适合7*24小时使用的。</p>
<p>企业网站来讲，都会尽量让用户从内存中读取数据，而不是硬盘<br>几乎企业运维和架构师的网站优化、服务器、软件的优化核心，都是磁盘和内存的使用比例优化。</p>
<h1 id="0034"><a href="#0034" class="headerlink" title="0034"></a>0034</h1><ol>
<li>DELL阵列卡（RAID卡）<br>基本作用：网站数据量很大的时候，单块盘装不下了，购买多块盘，又不想单个盘存放数据，就需要工具把所有硬盘整合成一个大硬盘。再在这个大磁盘上分区（虚拟磁盘）放数据。</li>
</ol>
<p>1byte=8bit<br>1k=1024byte<br>1m=1024k<br>1g=1024m<br>1t=1024g<br>1p=1024t</p>
<p>RAID有多种整合方式 RAID 0 1 5 10</p>
<p>有RAID卡后，一般磁盘就会查到RAID卡上，而不是直接插到主板上了。</p>
<p>RAID卡上也有缓存的。</p>
<p>RAID 0 可以 1块和多块盘，组合后容量是最大的，速度快。<br>RAID 1 只能2块盘，组合后容量只有一半的，速度不快。<br>RAID 5 最少是三块盘，组合后容量有三分之二，速度容量适中。<br>RAID10，最少4块盘，容量2分之一，速度快。先做raid1，然后做raid0。</p>
<p>冗余从好到坏：raid1 raid10 raid5 raid0<br>性能从好到坏：raid0 raid10 raid5 raid1<br>价格从低到高：raid0 raid5 raid1 raid10 </p>
<h1 id="0035"><a href="#0035" class="headerlink" title="0035"></a>0035</h1><p>不同RAID级别的企业应用举例：根据数据的储存和访问需求，去匹配对应的RAID级别</p>
<p>互联网公司：<br>单台服务器，很重要，盘不多，系统盘raid1<br>数据库服务器/储存服务器，主库raid10，从库raid5/raid0（为了维护成本，raid10）<br>web服务器，如果没有太多数据的话，raid5，raid0（单盘）<br>由多台，监控/应用服务器，raid0，raid5。</p>
<ol>
<li>光驱<br>当下主要作用装系统。</li>
</ol>
<p>企业应用：<br>建议淘汰光驱，为老板省钱。<br>U盘安装系统，网络安装（ftp，http），无人值守批量安装系统（pxe+kickstart）。</p>
<ol>
<li>主板<br>北桥芯片负责CPU控制内存<br>南桥芯片负责I/O总线之间的通信</li>
</ol>
<h1 id="0036"><a href="#0036" class="headerlink" title="0036"></a>0036</h1><ol>
<li><p>机房机柜里的服务器摆放</p>
</li>
<li><p>远程管理卡：<br>开关服务器，并可以查看服务器开关的过程等信息。<br>服务器自带的远程管理卡，可以关机、开机，但是看不到开关的现实过程。<br>所以，选择独立的远程管理卡，稍微贵200块钱。<br>快速恢复服务。</p>
</li>
</ol>
<p>大客户有KVM远程管理，特大客户会有自己的人员驻扎在机房。</p>
<h1 id="0037"><a href="#0037" class="headerlink" title="0037"></a>0037</h1><ol>
<li><p>DELL服务器真实服务器拆解讲解<br>1u Dell 1950 2个硬盘 Dell R410 4个硬盘<br>2u Dell 2710 6个硬盘  Dell 2720</p>
</li>
<li><p>企业级物理服务器RAID制作实战<br>先做RAID，然后分区，然后装系统</p>
</li>
</ol>
<h1 id="0038"><a href="#0038" class="headerlink" title="0038"></a>0038</h1><p>操作系统(Operating System)，管理硬件资源。</p>
<p>用户-&gt;操作系统-&gt;硬件</p>
<p>外围程序-Shell-硬件</p>
<p>POSIX(Portable Operating Interface)，可移植操作系统接口。</p>
<p>Linux特点：<br>开放源代码。<br>Unix兼容，具备几乎所有Unix的优秀特性。<br>可自由传播。<br>适合x86 CPU架构的计算机。</p>
<blockquote>
<p>有机会可以学习C语言。</p>
</blockquote>
<h1 id="0039"><a href="#0039" class="headerlink" title="0039"></a>0039</h1><p>Unix简介<br>1969年在AT&amp;T的贝尔实验室诞生，20世纪70年代。1977年BSD，SUN的Solaris，IBM的AIX，HP的HP UNIX。</p>
<p>FreeBSD。</p>
<p>1991年 Linus Torvalds，Linux内核</p>
<h1 id="0040"><a href="#0040" class="headerlink" title="0040"></a>0040</h1><p>技术成熟，可靠性高<br>极强的可伸缩性<br>强大的网络功能<br>强大的数据库支持能力<br>强大的开发能力</p>
<h1 id="0041"><a href="#0041" class="headerlink" title="0041"></a>0041</h1><p>1984年，Richard Stallman发起了开发自动软件的运动，并成立了FSF（Free Software Foundation） GNU项目。</p>
<p>1984年的Andrew Tanenbaum， Minix。教育使用的。</p>
<p>GUN/Linux。</p>
<h1 id="0042"><a href="#0042" class="headerlink" title="0042"></a>0042</h1><p>Linux诞生</p>
<p>Linux内核开始于芬兰的赫尔辛基大学的Linus Torvalds，从Minix学到了很多系统核心程序设计和设计思想。</p>
<p>Linux吉祥物Tux企鹅。</p>
<h1 id="0043"><a href="#0043" class="headerlink" title="0043"></a>0043</h1><h2 id="Linux的发展历程简介"><a href="#Linux的发展历程简介" class="headerlink" title="Linux的发展历程简介"></a>Linux的发展历程简介</h2><p>1）1984年，Andrew S. Tanenbaum开发了用于教学的Minix。<br>2）1989年，Andrew S. Tanenbaum将Minix系统运行于x86的计算机平台。<br>3）1990年，芬兰赫尔辛基大学学生Linus Torvarlds首次接触Minix系统<br>4）1991年，Linus Torvalds开始在Minix上编写各种驱动程序等操作系统内核组件。<br>5）1991年底，Linus Toravlds 公开了Linux内核源码0.02版。<br>注意，Linux内核源码并不是我们现在使用的Linux系统的全部。而仅是Linux内核kernel部分的代码。<br>6）1993年，Linux 1.0版本发行，Linux转向GPL版权协议。<br>7）1994年，Linux的第一个商业发行版Slackware问世。<br>8）1996年，美国国家标准技术局的计算机系统实验室确认Linux版本1.2.13（由Open Linux公司打包）附恶化POSIX标准。<br>9）1999年，Linux的简体中文发行版问世。<br>10）2000年后，Linux系统日趋成熟，涌现大量基于Linux服务器平台的应用，并广泛应用于基于ARM技术的嵌入式系统中。</p>
<h1 id="0044"><a href="#0044" class="headerlink" title="0044"></a>0044</h1><p>重要的人物</p>
<p>Richard Stallman 自由软件与GNU项目发起人<br>Andrew S. Anenbaum Minix开发者<br>Linus Torvalds Linux之父</p>
<ol>
<li><p>自由软件<br>自由意味着freedom，not free。</p>
</li>
<li><p>自由软件基金会FSF<br>emacs、gcc、bash、gawk</p>
</li>
</ol>
<h1 id="0045"><a href="#0045" class="headerlink" title="0045"></a>0045</h1><p>GNU（GNU’s not unix)<br>GNU/Linux<br>GUN工具链/Linux内核</p>
<p>GNU 内核 Hurd没成功</p>
<p>GPL（General Public License）</p>
<p>GPL许可的核心，是保证任何人有共享和修改自由软件的自由，任何人有权取得、修改和重新发布自由软件的源代码权利，但都必须同时给出具体更改的源代码。</p>
<p>虽然整个Linux内核是基于GNU通用公共许可的，但是Linux内核并不是GNU计划的一部分。</p>
<h1 id="0046"><a href="#0046" class="headerlink" title="0046"></a>0046</h1><h2 id="Linux操作系统组成"><a href="#Linux操作系统组成" class="headerlink" title="Linux操作系统组成"></a>Linux操作系统组成</h2><p>Linux内核之上的组件<br>一部分是GNU组件，bash gawk</p>
<p>硬件-系统核心-命令解释器-外围应用程序</p>
<h1 id="0047"><a href="#0047" class="headerlink" title="0047"></a>0047</h1><p>Linux为什么这么受欢迎？</p>
<ul>
<li>自由软件</li>
<li>具有Unix的全部优秀特性</li>
<li>安全</li>
<li>网络服务的支持</li>
</ul>
<h1 id="0048"><a href="#0048" class="headerlink" title="0048"></a>0048</h1><p>Linux应用领域</p>
<ul>
<li>服务器</li>
<li>嵌入式Linux系统</li>
<li>个人桌面</li>
</ul>
<blockquote>
<p>自己学的东西，说它不好。那能学好吗？</p>
</blockquote>
<p>本<br>服务区领域的linux<br>基于x86 CPU架构的计算机硬件的liux系统。</p>
<h1 id="0049"><a href="#0049" class="headerlink" title="0049"></a>0049</h1><p>发行版</p>
<p>Linux 内核 2.2 2.4 2.6 3.x<br>1）Red Hat RHEL 6.x RHEL 7.x<br>2）Fedora ，RHEL的新功能一般都发布在fedora。<br>3）CentOS，RHEL源码重构版。去除Red Hat图标，去除收费软件。</p>
<blockquote>
<p>一个漂亮女孩找你做朋友，你凭什么？</p>
</blockquote>
<h1 id="0050"><a href="#0050" class="headerlink" title="0050"></a>0050</h1><p>自动自发的学习。</p>
<p>桌面：Ubuntu<br>服务器：RHEL、CentOS<br>安全要求多的：Debian、FreeBSD、OpenSUSE<br>追求新技术的：Fedora</p>
<blockquote>
<p>有人帮助你了，你真棒！<br>携程故障10个小时1000万出去了。</p>
</blockquote>
<h1 id="0051"><a href="#0051" class="headerlink" title="0051"></a>0051</h1><p>选择CentOS版本</p>
<p>CentOS 5.11 慢慢被替换。<br>CentOS 6.7 主流。<br>CentOS 7 大企业的局部环境。</p>
<p>最新版一般潜在的问题隐患会较多，且不可预知，多数企业没用。你选择使用，遇到问题不好解决，可能面临无人可问，也可能无处查资料，这个就是所谓的挖坑埋自己了。一些刚入行的运维新人经常会这么做，不要犯这样的问题。不过最新版的性能和功能等往往还是不错的，真正的选择使用，还是看企业的实际需求，以及内部运维人员对特定版本的熟练程度，先试水然后逐步过渡，是大公司的选择思路。</p>
<blockquote>
<p>面试技巧：大家被面试官问及使用的是什么操作系统时，一定要一次性说出来（系统版本、内核版本、32位还是64位。）例如：我的工作中使用的是CentOS 6.6 x86_64位Linux系统，内核版本为 2.6.32-504，这才是一个合格的Linux运维人员的表现。</p>
</blockquote>
<h1 id="0052"><a href="#0052" class="headerlink" title="0052"></a>0052</h1><p>搭建学习环境</p>
<p>虚拟机软件 VMware Workstation</p>
<blockquote>
<p>装双系统，路走偏了。</p>
<p>免费活动少去。</p>
</blockquote>
<h1 id="0053"><a href="#0053" class="headerlink" title="0053"></a>0053</h1><p>VMware Workstation 12<br>Windows 7 </p>
<h1 id="0054"><a href="#0054" class="headerlink" title="0054"></a>0054</h1><p>老男孩运维28期<br>老男孩运维28期模版机 </p>
<h2 id="新建虚拟机"><a href="#新建虚拟机" class="headerlink" title="新建虚拟机"></a>新建虚拟机</h2><p>虚拟机配置<br>1CPU<br>1GB内存<br>10GB硬盘 lsi logic(L) scsi 拆分成多个文件<br>NAT网络<br>CD/DVD:CentOS-6.7-x86_64-bin-DVD1.iso</p>
<h1 id="0055"><a href="#0055" class="headerlink" title="0055"></a>0055</h1><p>BIOS开启虚拟化</p>
<h1 id="0056"><a href="#0056" class="headerlink" title="0056"></a>0056</h1><p>日期：2016-03-04 19:19<br>CentOS 6.7 x86_64</p>
<p>Install or upgrade an existing system<br>Disc Found：Skip<br>语言：English<br>键盘：U.S. English<br>Basic Storage Devices<br>Yes,discard any data<br>主机名：oldboy<br>时区：Asia/Shanghai<br>root密码：123456<br>Create Custom Layout:<br>硬盘分区<br>/boot ext4 200MB 设为主分区。force to be a primary partition<br>swap 768MB 一般设置为内存的1.5倍，内存大于8GB，就给8-16GB就可以。设为主分区。force to be a primary partition<br>/ ext4 剩余所有。fill to maximum allowable size 设为主分区。force to be a primary partition</p>
<p>Format</p>
<p>Write changes to disk</p>
<p>选择软件包<br><a href="http://oldboy.blog.51cto.com/2561410/1564620" target="_blank" rel="noopener">运维老鸟教你安装centos6.5如何选择安装包</a><br>选择 minimal 软件包<br>Customize now</p>
<p>Base System-&gt;Base,Compatibility Libraries,Debugging Tools<br>Development-&gt;Development tools</p>
<p>Packages 总共511个软件包。</p>
<p>Linux 系统对分区的基本要求：<br>1）最少要有一个根（/）分区，用来存放文件系统及程序，其大小至少5GB以上。<br>2）要有一个swap（交换）分区，它的作用相当于Windows里的虚拟内存，swap分区的大小一般为物理内存容量的1.5倍（内存&lt;8GB)。但当物理内存大于8GB时，则swap分区配置8-16GB即可，太大无用，浪费磁盘空间。swap分区不是必须的，但是大多数情况还是设置比较好，个别企业的数据库应用场景不分swap。<br>3）/boot分区，这是Linux系统的引导分区，用于存放系统引导文件，如Linux内核。所有文件的总大小一般只有几十MB，并且以后也不会增大太多。因此，该分区可以设置为100-200MB，这个分区也不是必须的。</p>
<p>登录系统<br>CentOS 6.7 2.6.32-573 x86_64<br>用户名：root<br>密码：123456</p>
<h1 id="0057"><a href="#0057" class="headerlink" title="0057"></a>0057</h1><h2 id="配置IP"><a href="#配置IP" class="headerlink" title="配置IP"></a>配置IP</h2><p>192.168.33.0<br>192.168.33.128<br>使用setup命令修改IP，实质就是更改/etc/sysconfig/network-scripts/ifcfg-eth0这个文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setup</span><br><span class="line"></span><br><span class="line">Network configuration-&gt;Device configuration-&gt;eth0(eth0)-&gt;Save&amp;Quit</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#启动网卡0</span><br><span class="line">ifup eth0</span><br><span class="line">#查看获取的IP</span><br><span class="line">ifconfig</span><br><span class="line">#查看网络通不通 </span><br><span class="line">ping IP</span><br></pre></td></tr></table></figure>
<h1 id="0058"><a href="#0058" class="headerlink" title="0058"></a>0058</h1><h2 id="利用ssh登录"><a href="#利用ssh登录" class="headerlink" title="利用ssh登录"></a>利用ssh登录</h2><p>SecureCRT</p>
<h2 id="修改网卡配置"><a href="#修改网卡配置" class="headerlink" title="修改网卡配置"></a>修改网卡配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#查看网卡的配置文件</span><br><span class="line">cat /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"></span><br><span class="line">#设置网卡开机启动</span><br><span class="line">sed -i &apos;s/ONBOOT=no/ONBOOT=yes/g&apos; /etc/sysconfig/network-scripts/ifcfg-eth0</span><br></pre></td></tr></table></figure>
<h1 id="0059"><a href="#0059" class="headerlink" title="0059"></a>0059</h1><h2 id="如何结交it高手打通你的任督二脉"><a href="#如何结交it高手打通你的任督二脉" class="headerlink" title="如何结交it高手打通你的任督二脉"></a>如何结交it高手打通你的任督二脉</h2><p>如何才能结交到高手为自己打通任督二脉？</p>
<p>前奏音乐：<br>    相信自己（时长3分钟）</p>
<p>排版整理<br>    曹亚楠（老男孩圈内文档哥）</p>
<p>开始<br>    各位亲爱的爱学习的小伙伴们：<br>    大家现在好！<br>    在开始分享之前，我想问一下大家，IT圈内的高手多么？答案：多……<br>    高手这么多，那么大家有没有结交到自己心仪的高手呢？<br>    能否有机会经常和高手一起吃吃饭、问问题，交流无障碍呢？<br>    估计一般的朋友做不到吧？<br>    原因何在？<br>    答：因为我们根本就不想结交高手。<br>    什么？不对？</p>
<pre><code>我不否认，大家的意识里都是想结交高手的。但是，大家的潜意识里其实并不想结交高手。因为如果是潜意识里想结交高手，那么你就会自己主动的找方法找途径去结交高手了。
因为，大家总是停留在意识和想的层面，却没有实际行动，结果就是没有结交到高手，所以我说大家根本就不想结交高手。
无论老男孩老师讲多少知识，你悟道了才是你自己的！
</code></pre><p>正题开始<br>    下面开始我今天的分享演讲<br>    由于时间关系，今天我只给大家讲解一下结交高手的几个简单要素：<br>    一些背后的心理学原理比较复杂，我尽量在有限时间内阐述清楚！</p>
<pre><code>1）有一颗强烈的一定要结交高手的心！
请问大家都追过女孩子么？
谁的经验更丰富，能否简单说说方法和策略？
先来个比喻，结交IT高手和追求一个你心仪的女孩几乎时一样的！
如果这样说，大家都应该会结交高手了吧？

你追求一个心仪的女孩，一般无须和她说，你要追求她，因为这样会让她有所警觉，对你的一举一动都会联想到你是不是别有动机。因此，追求的成本会加大。
</code></pre><blockquote>
<p>情商高的人，在这个社会比较吃得开。<br>心理学讲，你的动机。</p>
</blockquote>
<pre><code>其实，在做普通朋友的时候，只要在内心把她就当作你的女朋友一样去对她，结果就是你不用追求，她自然而然的就成了你的女朋友，而且很可能她都不知道是怎么爱上你的，销售的最高境界可能不是销售自己了，而是销售无痕。
结交IT高手也是同样的道理，结交无痕，嘿嘿！

结交高手除了在信念上要改变外（真心想和他交往，一定要和他交往），最关键的就是要学会投资（态度、素质、金钱、精力），并且你这个投资不要时刻想着快速的得到回报。

因为高手和你在你需要的层面上是极其不对等的，你对高手有需求，高手对你一开始无任何需求，仔细想想，追女朋友何尝不是如此呢？
你一投资就想着快速得到回报，往往会适得其反、南辕北辙！

对于员工：到月底了，老板不给你发工资，你心态就不行了。
对于老板：今年可以不赚钱，只要明年赚钱就行。
互联网行业也是如此，先烧钱后赚钱。
结交高手就需要有像前面老板和互联网行业企业一样的心态，今年可以花钱、不赚钱，明年再赚也行，这样才能真心结交到你想要结交的高手朋友，急功近利往往会适得其反。
非常遗憾，我们身为互联网的一份子，在这种先投资再赚钱思维并且能做到的朋友不到10%。
个别朋友，当有需求时，也知道请客吃饭，但是动机太明显了，效果往往不理想，功夫要多用在平时，未曾来水先憋坝。
</code></pre><blockquote>
<p>先付出、再收获的思想。<br>先播种、再结果。</p>
</blockquote>
<pre><code>2）具备一个优秀的结交高手的态度及素质（千里马的素质和态度）
就拿参加老男孩教育培训学习来说吧，有些人很想培训学习，但是总说没时间：
平时要上班、周末家里事多、离老男孩教育位置远。
其实这些都是借口，不是没时间、不是事多、不是距离远，而是在你心里这个学习的事认为不够重要，仅此而已。怕花钱也是认为不够重要，殊不知，时间没了，就真没了。钱没了，却还可以赚的更多。
我们必须要认识到，高手和新手的你是极其不对等的，你对高手有需求，高手对你无任何需求。所以你想要结交到高手，其中一个最简单有效的方法就是让你自己变成“千里马”。
</code></pre><blockquote>
<p>做事积极、主动<br>人都是比较喜欢听赞美的话。只要赞美合理、真实。</p>
</blockquote>
<pre><code>变成千里马就是你的态度、素质表现的要很好，并且你要表现出来对高手的认可，甚至是崇拜，这不是说几分钟几句话就能做到的，要用行动去做出来，例如：长时间的关注他、追随他，真的做出来力挺他的行动。这样他就会把你当做小弟甚至是朋友、哥们。
以下有几个策略让大家可以很快的结交高手
策略1:满足高手的爱与被爱的需求
当你第一次向高手请教问题的时候（写好一个带上下文，不要有歧义，并且排好版的文档，并尽量让高手做选择或者判断题）。
当时他可能没有理你，你要坚定的认为他可能在忙，所以没有回复你。你一定不要催他，当你解决问题后，你爸问题总结好、画好逻辑图，排好文档，发送给高手，并且可说，大哥，当时我问你问题的时候你没回我，我猜你肯定在忙，现在问题解决了，我把问题总结好了，发给您一份，您留着也许以后用得上。
一定不要管他是否帮助到你，要先做好自己，让自己的素质、态度硬起来，前面已经说过了，结交高手和追女朋友几乎是一样的，但是女人更感性，而且有男女的天生生理需求，而高手更理性，并且你们之间没有性，没有天生的生理需求，所以，结交高手比追女朋友要略难一些。今天大家听了老师的分享，以后搞定女朋友估计就轻松加愉快了，大家想下要怎么感谢我啊，家庭问题都解决了，哈哈。

策略2:满足高手的重要性的需求
大家一定看过江苏卫视的非诚勿扰吧，看看男嘉宾如何关注女嘉宾的微博，然后上台献婚纱、玫瑰，然后轻松领走女嘉宾的吧，对女嘉宾的一举一动都关切的很，而且一般都是3-6个月以上。
我们要结交高手也是一样，要花费精力，跟踪追随高手的脚步。高手的博客、微博、朋友圈内容、视频课程等，点赞并评论。不用多，持续点赞超过十次，分享他发的文章超过十次，高质量的评论他的文章超过10次，以后你跟他交流肯定很容易。虽然高手和你不是对等的，但是每个高手都有关照小弟的欲望，如果你做的到位，你值得提携，他就会带你，指导你。
朋友圈经常有让大家转发文章的，面对你心仪的高手你有做到这些么？
还是不见红包不转发，甚至抢了红包也不转发，这个素质和态度如何能结交高手呢？
“我是老男孩，我只转发你的文章，不抢你的红包”，对一个高手连续行动10次以上，一定可以让他认识到你，起码问问题会给你解答。
这种简单的方法，被老男孩内部的学员（今天的话题就是运维班的一节课前思想）使用了无数次了，非常有效，你和对你没有任何需求的人交流，你只能让你自己变得更专业，更感恩，更值得别人培养。
我们去企业，其实企业要人非常简单，特别是15k月薪以下，他对你的技术要求真不高，只要把运维基础、基础网络服务学会了即可，关键就是态度、素质，这些很牛逼就好了，无非是学会感恩，学会忠诚，学会做人。
其实呀，这些都是心理学里极其简单，但却是最有效的部分，按照马斯诺来说，我们人都有五大需求，你只要满足他的需求了，他机会为你做事。那么老男孩给大家讲八大需求。高手没有理你的欲望，但是他有几大需求，他有爱人的需求，他有被爱的需求，有重要性的需求哦，性的需求等等，你要想别人解决你的需求，你就要先满足高手的需求。
老男孩运维思想之人性的8大需求：
</code></pre><ul>
<li>物质需求（金钱、物品）</li>
<li>爱与被爱（性）需求（家庭、上下级、师徒）</li>
<li>重要性的需求（花钱买被重视，发红包）</li>
<li>安全的需求</li>
<li>赞美与鼓励</li>
<li>成长的需求</li>
<li>自由需求</li>
<li>美的需求</li>
</ul>
<blockquote>
<p>苍蝇不叮无缝的蛋。是人都有需求。</p>
</blockquote>
<pre><code>为什么你问问题，他没有回复你，你还要发送专业的总结文档给他呢？其实呢，这就是解决他的被爱以及重要性的需求，当你无限的去爱她、重视他，他的需求被满足了，他就会回答你的问题，就这么简单。

其次，你转载他的博客文章，分享他的朋友圈，为他点赞，为他狠狠的高质量评价，这都是满足高手被爱和重要性的需求，他的这些需求很大程度的被满足了，他就会帮你，把你认作朋友，觉得你值得培养，因为这就是你的素质和态度的体现。
老男孩在做培训的时候，每一个小伙伴都会互换角色讨论问题，说完了必须互相夸奖，举起大拇指，并发自内心的说，“你真棒！你真的太棒了！”，之所以让小伙伴们做这些，都是解决被爱和重要性的需求，特别好的学员给差的学员讲完问题后，必须要高度真心赞扬他，已获得让他下一次更好的帮助你，而不是卸磨杀驴。我们让高手帮助我们，就是要做到让高手感觉到被爱、被重视的感觉，这样高手就会为你做事。
其实人的八大需求，你只要满足他的一点，他就会为你做事，我们列出了八大需求，我们在他的每种需求都去满足他，那么你和他结交就非常容易了。金钱的需求，被爱的需求。例如物质需求：请客吃饭，本来你花100元就很多了，可因为请他你花了300元，对他来讲就是满足他的重要性需求，他认为在你心中，他是最重要的，此方法需要坚持，变成习惯，一次性可能用处不大，此时急于求回报，可能会徒劳无功，记住，你做的次数少，就找回报，高手会认为你太利益了，和高手交往就是朋友式的交往，不要想利益，自然利益就会得到，就像老男孩老师讲课一样，第一目标不是钱，而是让学生一个个风光的高薪毕业，到时钱自来就来了，不要赤裸裸的为了利益去交往，目前老男孩教育基础班平均12k就业，所以2015年学员量比2014年翻了好几倍。。
</code></pre><blockquote>
<p>拍马屁也是本事。</p>
</blockquote>
<pre><code>策略3:满足高手的性的需求（生理需求）
注意，别想歪了，不是带他去那个地方。如果你是个男生，技术水平中等，问问题，高手可能也不会理你，因为觉得你菜，特别是你问的问题太菜。如果你是女生，就算刚开始学，往往和高手沟通起来就会方便些，特别是头像、空间放几张照片（比高手的需求高一点就行，别高太多），因为你是女生稍微会一点，高手觉得这个女孩子不赖，因此沟通就要顺利的多。
</code></pre><p>由于时间关系，今天就分享这么多，更多内容欢迎大家关注我的博客，空间！关注老男孩教育！<br>    3、总结：怎么才能知道更多上面的优秀思想<br>    成功必有方法，成功必有捷径，只是一个人走，很难发现捷径，但是无论怎么样的捷径，都离不开勤奋和努力。<br>    老男孩老师总说，成功最有效的方法就是和有经验的人学习，和越有经验的人学习，你的成功就越快。老师经常说，如果你和月薪1w元工资的老师学习，你毕业也就2-3k工资。如果你和月薪3w元工资的老师学习，你可能毕业月薪5-8k。如果你和月薪收入5-10w的老师结果就不同。<br>    为何有这样的区别呢？</p>
<blockquote>
<p>问一个高手问题，他不理你是正常的。<br>把自己变成千里马、态度和素质在企业很重要的。<br>请客吃饭， 结交高手。他真实请我吃饭。在沙河吃饭花了300元。老师没什么吃吧，开心就好。2个人吃饭就吃了600多。在他的发展阶段。不在乎钱。</p>
</blockquote>
<h1 id="0060"><a href="#0060" class="headerlink" title="0060"></a>0060</h1><h2 id="ssh远程连接"><a href="#ssh远程连接" class="headerlink" title="ssh远程连接"></a>ssh远程连接</h2><p>日期：2016-03-08 10:29</p>
<h1 id="0061"><a href="#0061" class="headerlink" title="0061"></a>0061</h1><h2 id="讲解入学考题"><a href="#讲解入学考题" class="headerlink" title="讲解入学考题"></a>讲解入学考题</h2><ol>
<li>创建一个目录/data</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data</span><br></pre></td></tr></table></figure>
<ol>
<li>在/data下面简历一个文件 oldboy.txt</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch oldboy.txt</span><br></pre></td></tr></table></figure>
<ol>
<li>为oldboy.txt 增加内容为“I am studying linux.“。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;I am studying linux.&quot;&gt;oldboy.txt</span><br><span class="line"></span><br><span class="line">#vi编辑器</span><br><span class="line">vi oldboy.txt</span><br><span class="line">&quot;I am studying linux.&quot;</span><br><span class="line"></span><br><span class="line">:wq</span><br></pre></td></tr></table></figure>
<ol>
<li>把 oldboy.txt 文件拷贝到/tmp下</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp oldboy.txt /tmp/</span><br></pre></td></tr></table></figure>
<ol>
<li>把/data目录移动到/root下</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /data /root/</span><br></pre></td></tr></table></figure>
<ol>
<li>进入root目录下的data目录，删除oldboy.txt</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd root/data/</span><br><span class="line">rm oldboy.txt</span><br></pre></td></tr></table></figure>
<ol>
<li>退到上一级目录，删除data目录。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br><span class="line">rm -r data</span><br><span class="line"></span><br><span class="line">cd ../</span><br><span class="line">rmdir data</span><br></pre></td></tr></table></figure>
<ol>
<li>已知文件test.txt内容为：<br>test<br>liyao<br>oldboy<br>请给出打印test.txt内容时，不包含oldboy字符串的命令</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v &quot;oldboy&quot; test.txt</span><br></pre></td></tr></table></figure>
<ol>
<li>请用一条命令完成创建目录/oldboy/test，即创建/oldboy目录及/oldboy/test目录</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /oldboy/test</span><br></pre></td></tr></table></figure>
<ol>
<li>已知/tmp目录下已经存在了test.txt文件，如何执行命令才能把/mnt/test.txt拷贝包/tmp下覆盖掉/tmp/test.txt，而让linux系统不提示覆盖（root权限下）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/bin/cp /mnt/test.txt /tmp/test.txt</span><br><span class="line">\cp /mnt/test.txt /tmp/test.txt</span><br><span class="line"></span><br><span class="line">unalias cp</span><br><span class="line">cp /mnt/test.txt /tmp/test.txt</span><br><span class="line"></span><br><span class="line">简要解释：</span><br><span class="line">	此题的思路就是屏蔽掉系统默认对应命令别名，默认执行cp的操作是调用了别名的。所以会提示覆盖。</span><br><span class="line">详细说明：</span><br><span class="line">	cp命令默认是不会提示overwrite 的，但是cp的-i选项会提示，而一般Linux的用户环境文件~/.bashrc中会把cp命令成alias cp=&apos;cp -i&apos; 如：alias|grep cp可以查看别名</span><br><span class="line">	这样在linux下输入的cp的命令实际上运行的是cp -i，加上一个&quot;\&quot;符号或者些cp的绝对路径/bin/cp就是让此次的cp命令不使用别名（cp -i）运行。</span><br><span class="line">	</span><br><span class="line">unalias命令行处理别名仅在当时生效，重启系统后就失效了。</span><br></pre></td></tr></table></figure>
<ol>
<li>只查看ett.txt文件（100行）内第20行到第30行的内容（企业常见面试题）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">head -n 30 ett.txt|tail -n 11</span><br><span class="line">grep 20 -A 10 ett.txt</span><br><span class="line">grep 25 -C 5 ett.txt</span><br><span class="line">grep 30 -B 10 ett.txt</span><br><span class="line">sed -n &apos;20,30&apos;p ett.txt</span><br><span class="line">awk &apos;NR&gt;19&amp;&amp;NR&lt;31&apos; ett.txt</span><br><span class="line">awk &apos;&#123;if(NR&lt;31 &amp;&amp; NR&gt;19) printf$0&quot;\n&quot;&#125;&apos; ett.txt</span><br><span class="line">重要说明：</span><br><span class="line">	sed命令和awk命令在生产场景是非常重要的命令。</span><br></pre></td></tr></table></figure>
<ol>
<li>分析图片服务日志，把日志（每个图片访问次数*图片大小的总和）排行，取top10，也就是计算每个url的总访问大小</li>
</ol>
<p>说明：本题生产环境应用：这个功能可以用于IDC网站流量带宽很高，然后通过分析服务器日志那些元素占用流量过大，进而进行优化或剪裁该图片，压缩js等措施。</p>
<p>本题答案精讲：<br><a href="http://edu.51cto.com/course/4319.html" target="_blank" rel="noopener">轻松精通AWK数组企业问题案例深度实战视频课程</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk &apos;&#123;a[$6]++&#125;END&#123;for (j in a) print a[j],j&#125;&apos;|sort -n|tac|head -n 10 xxx.txt</span><br><span class="line"></span><br><span class="line">awk &apos;&#123;print $7* *$10&quot;&apos; xxx.txt|grep /|sort|uniq -c|awk &apos;&#123;print $1* *$1*$3* *$2&#125;&apos;</span><br></pre></td></tr></table></figure>
<ol>
<li>把/oldboy目录及其子目录下所有以扩展名.sh结尾的文件中包含oldboy的字符串全部替换为oldgirl</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /oldboy/test</span><br><span class="line">cd /oldboy</span><br><span class="line">echo &quot;oldboy&quot;&gt;test/del.sh</span><br><span class="line">echo &quot;oldboy&quot;&gt;test.sh</span><br><span class="line">echo &quot;oldboy&quot;&gt;.sh</span><br><span class="line">touch a b c</span><br><span class="line"></span><br><span class="line">find /oldboy -type f -name &quot;*.sh&quot; |xargs sed -i &apos;s/oldboy/oldgirl/g&apos; </span><br><span class="line">sed -i &apos;s/oldboy/oldgirl/g&apos; `find /oldboy -type f -name &quot;*.sh&quot;`</span><br></pre></td></tr></table></figure>
<hr>
<p>本文考试看似简单，实际上，考察了一个合格运维人员的命令基本功，绝大多数都会的人想答对或给出3种以上的答案都是不容易的。</p>
<hr>
<p>Linux 系统命令操作语法格式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">命令 参数选项 文件或路径</span><br><span class="line">rm -f /etc/hosts</span><br></pre></td></tr></table></figure>
<p>Linux命令总结</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mkdir make direcotrys 创建目录 例子：mkdir /data 在根/创建data目录</span><br><span class="line">	-p 递归创建目录。</span><br><span class="line">	</span><br><span class="line">ls list（列表） 列表目录文件 例子：ls / 列根/目录下的目录和文件</span><br><span class="line">	-l（long）长格式，-d（directorys）查看目录</span><br><span class="line">	</span><br><span class="line">cd change directory 改变目录路径 例子：cd /etc 切换到etc目录下</span><br><span class="line"></span><br><span class="line">相对路径和绝对路径</span><br><span class="line">相对路径 data/log </span><br><span class="line">绝对路径/data/log 根开始的绝对路径</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注重表达能力。</p>
</blockquote>
<h1 id="0062"><a href="#0062" class="headerlink" title="0062"></a>0062</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pwd print working directory 打印工作目录（显示当前所在路径）</span><br><span class="line">touch 创建文件或更新文件的时间戳，如果文件不存在，就建立新文件，如果存在，就改变文件的访问时间atime等时间戳信息。 例子touch /data/oldboy.txt</span><br><span class="line">vi  文本编辑器 例子：vi oldboy.txt</span><br><span class="line">vim 文本编辑器，vi的高级版，功能复杂，高亮，自动缩进</span><br><span class="line">echo 打印输出内容，配合“&gt;或&gt;&gt;“可以为文件覆盖及追加内容，还有一个较复杂不常用的类似命令printf。</span><br><span class="line"></span><br><span class="line">特殊符号：</span><br><span class="line">”&gt;“意思为重定向，会清除文件里所有以前的数据。</span><br><span class="line">”&gt;&gt;“为内容追加，只在文件尾部追加需要的内容。</span><br><span class="line"></span><br><span class="line">#多行文本追加</span><br><span class="line">cat &gt;&gt;/data/oldboy.txt&lt;&lt;EOF</span><br><span class="line">I am studying linux.</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<blockquote>
<p>把文字变成图。</p>
</blockquote>
<h1 id="0063"><a href="#0063" class="headerlink" title="0063"></a>0063</h1><p>特殊符号：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt;或1&gt; cat a&gt;1.txt 输出重定向：把前面输出的东西输入到后面的文件中，会清除文件原有内容。</span><br><span class="line">&gt;&gt;或1&gt;&gt; cat a&gt;&gt;1.txt 追加重定向：把前面输出的东西输入到后面的文件的尾部，不会清除文件原有内容。</span><br><span class="line">&lt;或0&lt; 输入重定向：输入重定向用于改变命令的输入，后面指定输入内容，前面跟文件名。</span><br><span class="line">&lt;&lt;或0&lt;&lt; 追加输入重定向：后跟字符串，用于表示“输入结束”，也可以用ctrl+d来结束输入</span><br><span class="line">2&gt; cat ls 2&gt;1.txt错 误重定向：把错误信息输入到后边的文件中，会删除文件原有内容。</span><br><span class="line">2&gt;&gt; 追加错误重定向:把错误信息输入到后边的文件的尾部，不会删除文件原有内容。</span><br><span class="line">说明：</span><br><span class="line">1. 箭头的指向就是数据的流向。</span><br><span class="line">2. 数字说明：</span><br><span class="line">1）标准输入（stdin）：代码为0，使用&lt;或&lt;&lt;。数据从右流向左边。</span><br><span class="line">2）标准正常输出（stdout）：代码为1，使用&gt;或&gt;&gt;。数据从左流行右边。</span><br><span class="line">3）标准错误输出（stderr）：代码为2，使用2&gt;或2&gt;&gt;。</span><br><span class="line"></span><br><span class="line">特殊重定向3中高级写法：</span><br><span class="line">1）标准输出重定向到b.txt，将错误输出重定向到a.txt</span><br><span class="line">echo oldboy 2&gt;a.txt 1&gt;b.txt</span><br><span class="line">2) 2&gt;&amp;1 写法是把标准错误重定向到标准输出，既让错误的输出和正确的一样，正确的定向到哪，错误的就到哪。</span><br><span class="line">echo oldboy &gt;a.txt 2&gt;&amp;1</span><br><span class="line">3）2&gt;&amp;1 的写法相当于 &amp;&gt; (常用的方法，推荐）</span><br><span class="line">echo oldboy &amp;&gt;a.txt</span><br></pre></td></tr></table></figure>
<h1 id="0064"><a href="#0064" class="headerlink" title="0064"></a>0064</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">cat 查看文件内容 例子：cat oldboy.txt</span><br><span class="line">xargs 从标准输入获取内容创建和执行命令行 例子：xargs -n 1&lt;a.txt</span><br><span class="line">cp 复制文件或目录， 默认不能拷贝目录。</span><br><span class="line">	-r 递归拷贝，用户复制目录。</span><br><span class="line">	-p 连同档案的属性一起复制过去，而非使用默认属性</span><br><span class="line">	-d 若源文件为连接文件（link file），则复制链接文件属性而非文档本身</span><br><span class="line">	-f 强制，若目标档案已经存在且无法开启，则移除后在尝试。</span><br><span class="line">	-i 若目标文件已经存在，在覆盖时会先询问。</span><br><span class="line">	-a 相当于 -pdr</span><br><span class="line">	-u 若文件目标存在，则目标文件比源文件旧时才复制。</span><br><span class="line">	提示：如果源文件是多个，那么目的文件在最后，且是目录。</span><br><span class="line">	</span><br><span class="line">mv move 移动目录或文件 例子：mv /data /root/</span><br><span class="line">rm remove 删除文件或目录 例子：rm oldboy.txt</span><br><span class="line">	-f （force）强制删除</span><br><span class="line">	-r（recursive）递归，用于删除目录</span><br><span class="line"></span><br><span class="line">#使用find删除文件</span><br><span class="line">find /data -type f -name &quot;oldboy.txt&quot; -exec rm &#123;&#125; \;</span><br><span class="line">find /data -type -f name &quot;*.txt&quot;|xargs rm -f</span><br><span class="line"></span><br><span class="line">rm可以设置别名提醒备份，然后使用绝对路径删除文档</span><br><span class="line"></span><br><span class="line">find 查找 </span><br><span class="line">	-type 按文件类型查找 f（file）d（directory）l（link），</span><br><span class="line">	-name 按名字查找</span><br><span class="line">	-mtime 按修改时间查找，+7七天以前，7第七天，-7最近七天</span><br><span class="line">	！取反</span><br><span class="line">	-a and 交集，并且。</span><br><span class="line">	-o or 并集，或者。</span><br><span class="line"></span><br><span class="line">特殊字符：</span><br><span class="line">管道符“|”把前一个命令的输出作为后一个命令的参数。</span><br></pre></td></tr></table></figure>
<p><a href="http://oldboy.blog.51cto.com/2561410/1650380" target="_blank" rel="noopener">linux面试题：删除一个目录下的所有文件，但保留一个指定文件</a></p>
<p>此题问题虽小，但是初学者还是很难给出合理的答案的！本文来自老男孩21期网络班学员</p>
<ol>
<li>方法一</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ! -name &quot;file&quot; 名字不是file的文件，感叹号是重点“！”取反。</span><br><span class="line">find /xx -type f ! -name &quot;file&quot;|xargs rm -f</span><br><span class="line"></span><br><span class="line">find /xx -type f ! -name &quot;file&quot; -exec rm -f &#123;&#125; \;</span><br><span class="line">#这两种一个通过xargs传参，一个通过find的-exec执行命令参数来完成，都算作find吧</span><br></pre></td></tr></table></figure>
<ol>
<li>方法二</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -az --delete --exclude &quot;file&quot; /null/ /xx/</span><br></pre></td></tr></table></figure>
<ol>
<li>方法三</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#开启bash的extglob功能(此功能的作用就是用rm !(*jpg)这样的方式来删除不包括号内文件的文件)</span><br><span class="line">shopt -s extglob</span><br><span class="line">rm -f !(file)</span><br></pre></td></tr></table></figure>
<ol>
<li>方法四</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./ -type f|grep -v &quot;\file\b&quot;|xargs rm -f</span><br></pre></td></tr></table></figure>
<ol>
<li>方法五</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -f `ls|grep -v &quot;\file\b&quot;`</span><br></pre></td></tr></table></figure>
<blockquote>
<p>从运维角度，任何删除性的操作都应该事先备份后在执行或者确认有备份存在。</p>
</blockquote>
<h1 id="0065"><a href="#0065" class="headerlink" title="0065"></a>0065</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#移动查找出来的文件</span><br><span class="line">mv `find /data -type f -name &quot;*.txt&quot;` /tmp</span><br><span class="line">find /data -type f -name &quot;*.txt&quot; -exec mv &#123;&#125; /tmp \;</span><br><span class="line"></span><br><span class="line">特殊符号：</span><br><span class="line">.. 上一级目录</span><br><span class="line">. 当前目录</span><br><span class="line"></span><br><span class="line">rmdir 删除目录，只有目录为空的时候才能删除。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个东西就是不太好掌握的，只有多练习才行。只要功夫深，铁柱磨成针。</p>
</blockquote>
<p>总结find命令</p>
<h1 id="0066"><a href="#0066" class="headerlink" title="0066"></a>0066</h1><blockquote>
<p>多在使用中记忆。<br>要让面试官相信你，工资才能高。</p>
</blockquote>
<p>1997年工资 14400元工资<br>1990年 08年带的学生，开奥迪A6</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">grep linux三剑客之一老三，过滤需要的内容 -v排除内容，例子： grep -v “oldboy” 查找不包含oldboy的内容。</span><br><span class="line">	-v 排除内容，匹配给出的字符串外的所有字符。</span><br><span class="line">	-B 除了显示匹配的一行之外，并显示该行之前的num行</span><br><span class="line">	-A 除了显示匹配的一行之外，并显示该行之后的num行</span><br><span class="line">	-C 除了显示匹配的一行之外，并显示该行之前后各num行</span><br><span class="line"></span><br><span class="line">head 查看文件开头的行，默认前10行。例子：head -10</span><br><span class="line">tail 查看文件从结尾开始的的行，默认后10行。例子：tail -10</span><br><span class="line"></span><br><span class="line">提示：三剑客是grep，awk，sed，它们都有过滤字符串的功能，grep最擅长，awk处理列擅长，sed擅长删除，修改，替换，添加。</span><br></pre></td></tr></table></figure>
<h1 id="0067"><a href="#0067" class="headerlink" title="0067"></a>0067</h1><h2 id="默认系统没有安装的常用命令"><a href="#默认系统没有安装的常用命令" class="headerlink" title="默认系统没有安装的常用命令"></a>默认系统没有安装的常用命令</h2><p>lrzsz、telnet、nmap、nc</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y lrzsz telnet tree nmap nc</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Linux严格区分大小写</p>
<p>cp mv rm 系统都是用的别名,都是加 -i 参数了。</p>
</blockquote>
<p><a href="http://oldboy.blog.51cto.com/2561410/699046" target="_blank" rel="noopener">centos linux 因别名问题引起的麻烦及解决技巧</a><br>已知/tmp下已经存在test.txt文件，如何执行命令才能把/mnt/test.txt覆盖掉/tmp/test.txt而让系统不提示是否覆盖（root权限下）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 方法一</span><br><span class="line">/bin/cp /mnt/test.txt /tmp/test.txt</span><br><span class="line">#方法二</span><br><span class="line">\cp /mnt/test.txt /tmp/test.txt</span><br><span class="line">#方法三</span><br><span class="line">unalias cp</span><br><span class="line">#方法四</span><br><span class="line">vi ~/.bashrc</span><br><span class="line">#alias cp=&apos;cp -i&apos;</span><br></pre></td></tr></table></figure>
<p>别名的作用：<br>1）通过给危险命令加一些保护参数，防止人为误操作。<br>2）把很多复杂的字符串或命令变成一个简单的字符串或命令。</p>
<p>别名对应的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alias 查看和设置别名，例子： 查看别名alias，设置别名alias cp=&apos;cp -i&apos;</span><br><span class="line">unalias 取消设置别名，例子：unalias cp</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias rm=&apos;echo &quot;this command does not allow to use.&quot;&apos;</span><br></pre></td></tr></table></figure>
<p>定义别名永久生效：<br>/etc/profile 全局生效，所有用户都可以使用。<br>~/.bashrc 当前用户生效</p>
<h2 id="中央财经大学系统安装总结"><a href="#中央财经大学系统安装总结" class="headerlink" title="中央财经大学系统安装总结"></a>中央财经大学系统安装总结</h2><p><a href="http://oldboy.blog.51cto.com/2561410/1402699" target="_blank" rel="noopener">中央财经大学系统安装总结</a></p>
<hr>
<p>今天老师安排我和刘XX同学到中央财经大学协助师兄为服务器安装CentOS6.4的系统，由于平时接触的都是虚拟机，这次是第一次接触真正的服务器，而且只有键盘，当师兄让我安装系统的时候，我显得有些手忙脚乱，有一些细节也忽略了，比如在选择时区时忘了取消System clock uses UTC这个选项。幸好师兄在一旁指点，让我对安装系统慢慢的熟悉起来。<br>我发觉给真正的服务器安装系统和用虚拟机安装系统虽然大致上是一样的，但还是会有些区别，比如在安装系统之前要进入BIOS调节SATA硬盘为RAID模式，而且由于这个Dell服务器是intel 2的芯片，还要按Ctrl+I创建RAID 5，由于我的知识有限，只能照着做，虽然不是很明白为什么要这么做。其他基本上和虚拟机的安装流程一致。安装完系统之后，接着就是对网卡进行配置，实现ping通外网，完成以上的步骤之后，接下来就是对4台服务器进行简单的优化，但在这里只需要优化其中几项，包括创建普通用户以及sudo提权、关闭SELINUX和防火墙、增大文件描述符、精简开机自启动的服务、同步系统时间并加入定时任务和更改ssh服务端的登录配置等，虽然我和建佐能完成这些操作，但是还没师兄一个人操作的快，让我深深感受到彼此的差距，自己还是练习的太少了。<br>通过这次的实战，让我明白到自己的不足之处还有很多，某些地方还有待提高，必须反复的练习、练习再练习，而且让我想起老师曾经引用过李小龙先生的一句话：“我不怕将一千个动作只练一遍的人，而是怕将一个动作练一千遍的人”，空有一身理论是没有用的，实践才是永恒的真理。</p>
<hr>
<h1 id="0068"><a href="#0068" class="headerlink" title="0068"></a>0068</h1><blockquote>
<p>有能力的人有三种以上方法。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#生成100个数字</span><br><span class="line">seq 100 </span><br><span class="line">sed stream editor linux三剑客之一老二，流编辑器,实现对文件的增删改替换查。</span><br><span class="line">	参数：</span><br><span class="line">	-n 取消默认输出 p打印</span><br><span class="line">	-e 允许多项编辑</span><br><span class="line">	-i 修改文件内容</span><br><span class="line">	</span><br><span class="line">	功能：</span><br><span class="line">	s 常说的查找并替换，用一个字符串替换成另一个</span><br><span class="line">	g 与s联合使用，表示对当前行全局匹配替换</span><br><span class="line">	例子： sed &apos;s/oldboy/oldgirl/g&apos; a.txt 用oldgirl替换oldboy。 </span><br><span class="line">	“/”是分隔符，“/”可以使用“#”或者“@”替换。</span><br><span class="line">	</span><br><span class="line">awk 过滤、输出内容，awk是一门语言。 </span><br><span class="line">	NR 行号</span><br></pre></td></tr></table></figure>
<p>老男孩培训交流群08 384467551</p>
<p>到现在学习的命令至少有24个，分别是<br>必须掌握的命令：<br>man，touch，ls，mkdir，cp，cd，rm，mv，echo，pwd，cat，alias，unalias，head，tail，tree，rmdir</p>
<p>目标月薪超过5000需要总结的命令：<br>find，xargs，awk，sed，grep，vi，vim，seq</p>
<h2 id="同学们回忆学习的命令："><a href="#同学们回忆学习的命令：" class="headerlink" title="同学们回忆学习的命令："></a>同学们回忆学习的命令：</h2><p>1.mkdir<br>2.touch<br>3.ls<br>4.cd<br>5.echo<br>6.cp<br>7.vi<br>8.head<br>9.tail<br>10.rm<br>11.rmdir<br>12.cat<br>13.grep -A -B -C -v<br>14.sed -i -n sg<br>15.awk -F 指定分隔符 {print $1} 打印<br>16.find<br>17.xargs<br>18.alias<br>19.unalias<br>20.vim<br>21.seq -s指定分割符<br>22.pwd<br>23.tree<br>24.tr<br>25.mv<br>26.man</p>
<p>第一梯队 20人</p>
<h2 id="帮助"><a href="#帮助" class="headerlink" title="帮助"></a>帮助</h2><p>man 命令名/配置文件，详细帮助，需要总结笔记，需要详细查看时候。<br>命令 –help 快速查一个命令。<br>搜索引擎<br>提示：文档及使用查百度，排错查谷歌。<br>help 命令名，特殊bash内置命令的获取帮助方法。<br><a href="http://video.tudou.com/v/XMjMzMTE3MDgyNA==.html" target="_blank" rel="noopener">01-老男孩linux技术分享-学会科学使用搜索引擎查找内容</a><br>bash 内置命令用 help</p>
<h1 id="0070"><a href="#0070" class="headerlink" title="0070"></a>0070</h1><p>bash特殊符号</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt; 0&lt;</td>
<td>输入重定向符。</td>
</tr>
<tr>
<td>&lt;&lt; 0&lt;&lt;</td>
<td>追加输入重定向符</td>
</tr>
<tr>
<td>&#124;</td>
<td>管道 就像一个真实管道一样，例如：水管左边进水，右边流出来。其他的功能，egrep “3306</td>
<td>1521” /etc/services</td>
</tr>
<tr>
<td>\</td>
<td>转义符，让有意义的字符，脱掉它代表的意义。例如：正则里$表示以…结尾，可以用\$表示$符号本身。</td>
</tr>
<tr>
<td>~</td>
<td>当前用户的家目录</td>
</tr>
<tr>
<td>-</td>
<td>用户上一次所在的目录，由OLDPWD变量控制。</td>
</tr>
<tr>
<td>.</td>
<td>当前目录</td>
</tr>
<tr>
<td>..</td>
<td>上一级目录</td>
</tr>
<tr>
<td>/</td>
<td>根目录，即linux里所有目录的顶点。也是路径分隔符。</td>
</tr>
<tr>
<td>;</td>
<td>命令分隔符</td>
</tr>
<tr>
<td>{}</td>
<td>生成字符或数字序列，类似seq，一般配合echo等命令使用，find里的{}意思是前面命令的结果。</td>
</tr>
<tr>
<td>!</td>
<td>1)!+字母 表示调出最近以此字母开头的命令。2）!!表示使用最近一次操作。3）!+数字 表示调出历史的第几条命令。4）!$ 表示这次命令使用上次命令以空格分开的最后一个字段。5）取反，find、shell里。</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>并且</td>
</tr>
</tbody>
</table>
<h1 id="0071"><a href="#0071" class="headerlink" title="0071"></a>0071</h1><p>bash快捷键<br><a href="http://oldboy.blog.51cto.com/blog/2561410/907098" target="_blank" rel="noopener">由SecureCRT命令行快捷键谈学习思想</a><br>由学习linux SecureCRT命令行常用快捷键开始谈起！</p>
<p>1）老男孩说，抓重点（重点非难点）<br>    任何一个领域、学科，任何一个职位、工作，都有学不完的知识，优秀的学生总能抓住重点去学习，如果泛泛的去学，虽然学完了，结果大脑里还是一片空白。<br>    例如：老男孩老师在第一堂课时给学生留的课外总结，一部分学生在总结时，就是百度下，然后复制出来到文档里，好点的排个版，差点的直接交作业了。<br>    未经过自己的思维思考过滤过的知识，几乎没什么价值可言，在我们的脑袋里也不会有太多的印记。<br>    因此，在学技术时，尽量先学重点，学会了重点之后，如果还有时间在学次重点的内容。例如：linux终端下的常用快捷键老男孩推荐大家先记牢以下几个即可。</p>
<p>常用：<br>tab=补全<br>ctrl+k= 删除(剪切)此处至末尾所有内容<br>ctrl+u= 删除（剪切）此处至开始所有内容<br>Ctrl+a 移动到当前行的开头<br>Ctrl+e 移动到当前行的结尾<br>Ctrl+l 清屏<br>Ctrl+c 删除整行或停止当前任务<br>复制=ctrl-shift-c<br>粘贴=为ctrl-shift-v</p>
<p>   总结文档就像网站的缓存一样，数据写进来后，要把热点数据拉进缓存，下次使用时才快。这里说的缓存就是抓重点先学。<br>2）老男孩说，在使用中记忆<br>    当我们到达成年人以后，记忆力开始快速减退，理解能力慢慢的增强。因此，面对多如牛毛的运维技术，我们不能在像初高中背课文那样去背了，不但效率低，而且临时记住了，因为用的少，很快就忘掉了。<br>    例如：上面的快捷键看起来很简单，实际上能长时间记牢也不容易的，但如果在使用LINUX时，随时随地多使用上面的快捷键，不但能提高工作效率，而且，以后想忘记都困难。这是老男孩老师的亲身体验，也常把此法建议给学生，记住了，“多在使用中记忆”！，快捷键只是一个例子呦，实际很多命令都可以的。<br>3）老男孩说，重视交流、讨论与实践、总结<br>    据老男孩个人运维工作体验及多年教学经验感悟，学生在学习知识期间或学习知识后，能够多进行交流和讨论的学生，比单纯的被动听老师讲或自己去看去学的，记忆的效率和深度要高出几倍。</p>
<p>从我们吸收知识效率上大概排序为：<br>a.被动学习&lt;主动学习<br>b.被动学习排序：听讲 &lt; 阅读 &lt; 视听 &lt; 演示<br>c.主动学习排序：交流讨论 &lt; 实践总结 &lt; 指导教授他人<br>d.整体排序 听讲 &lt; 阅读 &lt; 视听 &lt; 演示 &lt; 交流讨论 &lt; 实践总结 &lt; 指导教授他人。最高境界就是指导和教授他人了。<br>    上面的思想，也是老男孩在培训工作中一直去努力追求的目标，尽可能的让学生交流讨论，实践、总结，开口表达，指导帮助身边的同学，或者简单的内容分享也是好的。<br>老男孩说，一个人能走多远，完全取决于他的思维。<br>4）老男孩说，运维人员也困惑<br>    经常有朋友问老男孩，说工作中运维就是救火，感觉运维没什么前途。这个朋友的问题不是个例，而是很普遍的问题。<br>    老男孩还拿学习快捷键举例，平时时间忙，没时间掌握快捷键的使用，结果工作就很没效率。工作没效率，就要付出更多时间工作了，那么就更没时间学习快捷键了，如此恶性循环，不困惑才怪。<br>     一个有经验的运维负责人，会把工作分门别类，要适合的运维人员做适合的事，实际工作中，发现有的高级或者核心运维，还在做低级的运维工作（例如内网维护，装系统，配置熟的不能再熟的基础服务），从而整个运维团队看起来，新手闲的要死，核心骨干忙的要死，这样下来，天天救火、解决故障，响应开发和产品的需求就忙不完了，还哪有时间去思考，优化网站架构，运维自动化呢？<br>类似问题还很多：<br>    大学生毕业没什么经验，企业非要有经验的，没经验就没工作，没工作就更没经验，同样的怪圈！例子很多，不少朋友很久都想不明白，白白的浪费光阴和生命。<br>5）老男孩说，优秀的总结习惯很重要。<br>     还是拿总结快捷键举例，老男孩认为比较好的总结方法是，首先全部总结下（相当于放硬盘里，总结就是一次学习过程，放硬盘可以随时查询到），然后抽出重点（放缓存里，必须会的，提升效率的），网站优化的思路大家该不陌生的，当然了，老男孩这里的学生的运维重点就是老男孩指导把握了、带领大家练习把握了。<br>    在比如总结linux启动过程，老男孩认为比较好的总结方法可以分为四个阶段：<br>A.详细文字总结linux启动过程，便于随时查阅复习。<br>B.画详细图表总结，画图表脉络清晰，便于记忆，这不是老男孩讲课的专利，学生们总结也可以的。<br>C.精简文字总结，抓重点，易于理解的框架部分，便于记忆在脑袋里及口头表达。<br>D.画精简启动过程图，先不说画图过程是个最佳的学习方式，看一眼，可能半年都不会忘记，如果能搞个动画就更好了。<br>相关案例可参考老师提供的案例。<br>    记得网上有人把男人追女孩画了图，来描述TCP三次握手，还有人把饮水机上插桶来描述RAID的原理级别，等等都是最佳的学习总结的思路。只不过80%的人，看过了就当笑话了而已。（有看过的朋友可以提供下地址，我补到这里）。<br>6）老男孩说，“小事不爱做，大事做不了”<br>    现在的社会就是个浮躁的社会，前段时间受兼职公司邀请面试了10几个运维人员，发现了某些共同的特点：<br>a.很浮躁<br>浮躁的心态很可怕，还是踏踏实实的学习、工作吧，朋友们。<br>b.好高骛远<br>觉得自己很行，有的要薪水10几K。挑剔公司，不愿加班，傲气十足，结果浪费了面试机会。<br>c.眼高手低。<br>   有的朋友，一上来就说自己基本上运维那些东西都做过了，都很熟练，结果问一些最初级的问题还答不清楚。比如：给个网关地址，命令行添加默认网关都还不会，再说会什么高深的技术，还有什么用呢？<br>d.不了解自己<br>人最可怕的问题是不了解自身，这个值得我们大家注意（包括老男孩也在不断的自我警醒），扩大了说，对于一个企业也一样，和几个企业老板一起聊天，好多企业都走了弯路，什么好就做什么，结果做来做去，发现都不适合，才回过头定位，自己的企业到底适合做什么。认识自身，对于自己的未来发展非常关键。</p>
<p>bash 常用快捷键</p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>tab</td>
<td>命令或路径补全</td>
</tr>
<tr>
<td>ctrl+k</td>
<td>删除(剪切)此处至末尾所有内容</td>
</tr>
<tr>
<td>ctrl+u</td>
<td>删除（剪切）此处至开始所有内容</td>
</tr>
<tr>
<td>Ctrl+a</td>
<td>移动到当前行的开头</td>
</tr>
<tr>
<td>Ctrl+e移动到当前行的结尾</td>
</tr>
<tr>
<td>Ctrl+l</td>
<td>清屏，相当于clear命令</td>
</tr>
<tr>
<td>Ctrl+c</td>
<td>删除整行或停止当前任务</td>
</tr>
<tr>
<td>Ctrl+d</td>
<td>退出当前用户环境，相当于exit，logout</td>
</tr>
<tr>
<td>上下方向键</td>
<td>查看上一次执行的命令。并显示在bash终端里</td>
</tr>
</tbody>
</table>
<p>请大家根据自己的时间于本周内分别总结以上命令，作为作业提交，下周考试考上述命令及符号作用。</p>
<p><a href="http://man.linuxde.net/" target="_blank" rel="noopener">命令查询大全</a></p>
<h1 id="0072"><a href="#0072" class="headerlink" title="0072"></a>0072</h1><h2 id="区别32位系统和64位系统"><a href="#区别32位系统和64位系统" class="headerlink" title="区别32位系统和64位系统"></a>区别32位系统和64位系统</h2><p>当初设计时的定位不同<br>需要大量的系统内存和浮点性能</p>
<p>安装要求配置不同 </p>
<p>运算速度不同<br>64位CPU的GPRs（General-Purpose Registers，通用寄存器）的数据宽度为64位，64位指令集可以运行64位数据指令，也就是说处理器一次可提取64位数据（只要两个指令，一次提取8个字节的数据），比32位提高了一倍（32位需要四个指令，一次只能提取4个字节的数据），性能会相应提升。</p>
<p>内存支持不同</p>
<p>寻址能力不同。64位处理器的优势还体现在操作系统对内存的控制上。由于地址使用的是特殊整数，因此一个ALU（算术逻辑运算器）和寄存器可以处理更大的整数，32位理论最大只可支持4GB内存。当然32位系统可以通过扩展来支持大内存。扩展所采用的是PAE技术。</p>
<h1 id="0073"><a href="#0073" class="headerlink" title="0073"></a>0073</h1><p>查看是32位还是64位的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uname -m</span><br><span class="line"></span><br><span class="line">#如果有lib64就代表是64位系统，32位系统一般没有lib64</span><br><span class="line">ls -ld /lib64</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uname 查看系统信息，</span><br><span class="line">	-a 查看所有信息</span><br><span class="line">	-m 查看系统位数</span><br><span class="line">	-r 查看内核版本</span><br><span class="line"></span><br><span class="line">#查看系统发行版系信息</span><br><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure>
<h1 id="0074"><a href="#0074" class="headerlink" title="0074"></a>0074</h1><p>RAID和LVM</p>
<p>企业环境一般是使用硬件RAID<br>LVM和软件RAID性能差。</p>
<h1 id="0075"><a href="#0075" class="headerlink" title="0075"></a>0075</h1><p>网络模式</p>
<p>桥接 使用物理网卡的信息</p>
<p>NAT </p>
<p>Host-only  </p>
<h1 id="0076"><a href="#0076" class="headerlink" title="0076"></a>0076</h1><p>硬盘使用前，一般要分区，分区后要格式化（创建文件系统）</p>
<p>分区：<br>主分区、扩展分区、逻辑分区<br>主分区+扩展分区的数量&lt;=4,其中一个主分区可以用一个扩展分区替代，扩展分区最多只能有一个。扩展分区不能直接使用，还需要在上面创建逻辑分区，逻辑分区可有多个。</p>
<p>主分区+扩展分区 编号只能1-4，逻辑分区编号只能从5开始。</p>
<ol>
<li><p>常规分区：数据不是特别重要的业务（例如：集群的某个节点）<br>/boot 引导分区 200MB 主分区<br>swap 交换分区 内存的1.5倍，内存大于8GB，就给8-16GB<br>/ linux所有目录的顶点 主分区 剩余所有容量 主分区</p>
</li>
<li><p>数据重要（数据库、存储服务器）<br>/boot 引导分区 200MB 主分区<br>swap 交换分区 内存的1.5倍，内存大于8GB，就给8-16GB<br>/ linux所有目录的顶点 主分区 100-200GB 主分区<br>/data 所有，存放数据</p>
</li>
<li><p>特大网站，门户（产品线特别多，需求）<br>/boot 引导分区 200MB 主分区<br>swap 交换分区 内存的1.5倍，内存大于8GB，就给8-16GB<br>/ linux所有目录的顶点 主分区 100-200GB 主分区<br>剩余空间不分配，哪个部门领到了服务器，根据需求在进行分区。</p>
</li>
</ol>
<h1 id="0077"><a href="#0077" class="headerlink" title="0077"></a>0077</h1><p>ide hda hdb<br>scsi sda sdb</p>
<p>逻辑分区永远是从编号5开始的</p>
<h1 id="0078"><a href="#0078" class="headerlink" title="0078"></a>0078</h1><p>Mount point 挂载点<br>File System Type 文件系统类型<br>ext2/ext3/ext4</p>
<p>centos6使用ext4就行<br>centos7默认 xfs</p>
<h1 id="0079"><a href="#0079" class="headerlink" title="0079"></a>0079</h1><p>课后作业20160308<br>1.今天讲的总结（最快总结），涉及的命令总结。<br>2.预习视频<br>周四上午上课：<br>讲命令补基础。</p>
<h1 id="0080"><a href="#0080" class="headerlink" title="0080"></a>0080</h1><h2 id="学生讲解"><a href="#学生讲解" class="headerlink" title="学生讲解"></a>学生讲解</h2><ol>
<li>查看命令帮助的几种方法<br>pwd<br>不知道pwd命令的意思怎么办？<br>pwd –help 适用于一般命令，非内置命令<br>man pwd 适用于一般命令，非内置命令<br>help pwd 适用于内置命令<br>info pwd </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pwd -L 显示逻辑路径</span><br><span class="line">pwd -P 显示物理路径</span><br></pre></td></tr></table></figure>
<h1 id="0081"><a href="#0081" class="headerlink" title="0081"></a>0081</h1><ol>
<li>mkdir<br>多动手，勤动手，做笔记。<br>man查看帮助，做笔记。忘记了还可以找回来。<br>大家要习惯看英文。</li>
</ol>
<p>用结果反推命令作用。</p>
<p>命令太多，要有所取舍，抓重点。</p>
<p>{} 花括号的用法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo 1 2 3 4 5</span><br><span class="line">可以写成 </span><br><span class="line">echo &#123;1..10&#125;</span><br><span class="line"></span><br><span class="line">echo 14 15 16 24 25 26 34 35 46</span><br><span class="line">可以写成</span><br><span class="line">echo &#123;1..3&#125;&#123;4..6&#125;</span><br></pre></td></tr></table></figure>
<h1 id="0082"><a href="#0082" class="headerlink" title="0082"></a>0082</h1><p>cd<br>内置命令没有–help<br>需要用help cp</p>
<p>路径：<br>绝对路径：从根/开始 /test/a/b<br>相对路径：不从根/开始 test/a/b</p>
<p>..：上一级目录<br>-：上一次目录，-是从OLDPWD变量提取的路径。<br>~：代表用户的家目录</p>
<blockquote>
<p>多敲多练，做笔记。</p>
</blockquote>
<h1 id="0083"><a href="#0083" class="headerlink" title="0083"></a>0083</h1><p>tree</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#显示所有文件，包括隐藏文件</span><br><span class="line">tree -a</span><br><span class="line">#只显示目录</span><br><span class="line">tree -d</span><br><span class="line">#只显示2层目录</span><br><span class="line">tree -L 2 </span><br><span class="line">#为每一个文件显示完整的路径</span><br><span class="line">tree -f</span><br><span class="line">#不显示路径的树枝或 不打印缩进行</span><br><span class="line">tree -i</span><br><span class="line">#如果是目录后面会加上/</span><br><span class="line">tree -F</span><br></pre></td></tr></table></figure>
<h1 id="0084"><a href="#0084" class="headerlink" title="0084"></a>0084</h1><p>touch 创建新文件，更新旧文件的时间戳</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#显示文件的详细属性</span><br><span class="line">stat</span><br><span class="line"></span><br><span class="line">#更改文件的访问时间atime</span><br><span class="line">touch -a oldboy.txt</span><br><span class="line">会修改ctime</span><br><span class="line">#只改变修改时间</span><br><span class="line">touch -m oldboy.txt</span><br><span class="line">会修改ctime</span><br></pre></td></tr></table></figure>
<h1 id="0085"><a href="#0085" class="headerlink" title="0085"></a>0085</h1><p><a href="http://oldboy.blog.51cto.com/blog/2561410/1180894" target="_blank" rel="noopener">要学好linux运维请从排版画图开始</a></p>
<blockquote>
<p>只要一出手就必须是专业的、规范的！无论是技术、文档、画图，还是做人、做事，这是老男孩培训培养学生的重中之重，虽然不容易做到，但是只要我们努力，就可以无限接近目标，甩开竞争对手。。</p>
</blockquote>
<p>网站运维交流群：385168604<br>架构师QQ交流群：390642196</p>
<p>为什么要绘制逻辑图<br>linux一切皆文件 抽象<br>一图胜千言 没有图的文档<br>老大喜欢看图呀</p>
<h1 id="0086"><a href="#0086" class="headerlink" title="0086"></a>0086</h1><p>如何画好专业逻辑图</p>
<ul>
<li>每个知识点，必须上个图</li>
<li>模仿高手的图</li>
<li>不断逼自己去画图，百度 google 找知识点相关的图片，然后重新画一遍或者根据老师课上分享的图片，自己再画一次。</li>
<li>我也是从菜鸟过来的。</li>
</ul>
<h1 id="0087"><a href="#0087" class="headerlink" title="0087"></a>0087</h1><p>亿图入门与提高<br>李泳道<br>2016年3月27日</p>
<p>目录<br>基础设置<br>常用命令及参考建议<br>实例1 图形 阴影 边框线</p>
<h2 id="基础设置"><a href="#基础设置" class="headerlink" title="基础设置"></a>基础设置</h2><ol>
<li>设置自动保存及优化<br>选项-&gt;常规-&gt;撤销的次数 999，保存自动备份 2分钟，自动检查更新 取消</li>
<li>符号库快捷按键<br>新建空白绘图-&gt;视图-&gt;符号库</li>
</ol>
<p>符号库：<br>背景<br>标题<br>标注<br>高光图形<br>箭头形状</p>
<p>什么是专业的原理图，为何要画原理图？<br>如何绘制专业原理图？<br>亿图基本配置及绘制原理图。<br>亿图原理图绘制小结。</p>
<h1 id="0088"><a href="#0088" class="headerlink" title="0088"></a>0088</h1><blockquote>
<p>运维嘛，就要学会小结。</p>
</blockquote>
<p>基本操作方法<br>对齐排列大小<br>快捷方式小结<br>绘图转换为图片</p>
<h1 id="0089"><a href="#0089" class="headerlink" title="0089"></a>0089</h1><ol>
<li>排版问题</li>
<li>作业文档目录结构—看清楚是哪一天的作业</li>
<li>命令总结不行—大多数人只是“记录”了老师讲的—命令总结模版（填写就行）</li>
</ol>
<blockquote>
<p>给别人节约时间，别人才能帮你解决问题。</p>
</blockquote>
<p>上课总结<br>课后作业<br>命令总结</p>
<blockquote>
<p>现在写的文档，以后就是自己用的。</p>
</blockquote>
<h1 id="0090"><a href="#0090" class="headerlink" title="0090"></a>0090</h1><p><a href="http://oldboy.blog.51cto.com/256140/1726744" target="_blank" rel="noopener">最专业逻辑图和最专业项目文档制作实战讲解</a></p>
<p>word基本排版讲解<br><a href="http://oldboy.blog.51cto.com/256140/1180894" target="_blank" rel="noopener">office的模版</a></p>
<p>老男孩教育额-课上课后总结normal 用于总结课堂笔记，课后作业，通用模版<br>老男孩教育-考试题-normal 用于总结考试题<br>命令总结-normal 用于总结命令（分类总结）</p>
<p>拼写和语法-&gt;键入时检查拼写</p>
<h2 id="模版"><a href="#模版" class="headerlink" title="模版"></a>模版</h2><p>简单、易用、高效</p>
<h1 id="0091"><a href="#0091" class="headerlink" title="0091"></a>0091</h1><p>核心信念、</p>
<blockquote>
<p>创业成败—关于挑战、机遇和创新</p>
</blockquote>
<p>借鉴成功人的态度和习惯，你可以让你在任何想达到目标提高成功的概率！</p>
<p>学习不专心、上课期间少干别的。</p>
<p>上课保持最大化的输入，讨论让自己吧知识最大化的输出。</p>
<p>课下把知识最大化的输出</p>
<p>学一个点，共同讨论，互相讲解，靠一靠。</p>
<p>我看书，身边有笔和笔记本记下来。总结分享给别人。</p>
<p>没有行动学不会的，笔记录，讨论，和别人分享交流，讲解。</p>
<p>请教高手的习惯！</p>
<p>四个月之间交往圈子。</p>
<p>满足8大需求<br>赞美，重要性，爱与被爱。</p>
<p>你们知道了，而我做到了。</p>
<p>抓重点，记笔记，去把知识去实施行动（讨论，交流，讲解，分享）</p>
<h1 id="0092"><a href="#0092" class="headerlink" title="0092"></a>0092</h1><p>远程连接<br>通过IP地址访问。<br>端口的简单概念</p>
<p>一台主机上的不同服务，就是通过端口区分，让后让外部人员访问。</p>
<p>协议的概念<br>一台主机上的不同服务，就是通过端口区分，客户端和服务器之间通信，就可能使用不同的协议。</p>
<p>ip，port，protocol</p>
<p>排查故障：<br>物理网络，网线、网卡、IP<br>ping</p>
<h1 id="0093"><a href="#0093" class="headerlink" title="0093"></a>0093</h1><p>ping -t 检查网路通不通</p>
<p>sshd服务是否正常运行</p>
<p>telent IP 22</p>
<p>不同可能原因 服务器防火墙。服务器端没有监听链接的端口，服务器服务没有开启</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -lntup|grep 22</span><br><span class="line">netstat -lntup|grep sshd</span><br></pre></td></tr></table></figure>
<p>企业场景面试题：Linux系统如何优化？<br>企业场景面试题：SSH服务连不上，如何排查错误？<br>企业场景面试题：怎么区分32位还是64位系统？</p>
<p>思路</p>
<p>ssh服务端，ssh服务，sshd进程名，openssh，openssl加密<br>ssh客户端：xshell，secureCRT，putty，Zoc</p>
<p>批量管理操作</p>
<h2 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h2><p>root用户<br>普通用户<br>虚拟用户 进程及程序都必须属于用户。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useradd oldboy</span><br><span class="line">tail -1 /etc/passwd</span><br><span class="line">passwd oldboy</span><br><span class="line">echo &quot;123456&quot;|passwd --stdin oldboy &amp;&amp; history -c</span><br><span class="line">su - oldboy</span><br><span class="line">whoami</span><br></pre></td></tr></table></figure>
<p>linux 命令提示符由PS1环境变量控制，可以通过全局变量配置/etc/profile文件调整</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set|grep PS1</span><br></pre></td></tr></table></figure>
<p>linxu运维方法<br><a href="http://oldboy.51cto.com/2561410/1053606" target="_blank" rel="noopener">su与su -的区别</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">useradd 添加用户 例子：useradd oldboy</span><br><span class="line">passwd 为用户设置或修改密码 例子： passwd oldboy，直接passwd 是为当前用户设置密码</span><br><span class="line">	--stdin 标准输入，非交互式修改密码。例子： echo &quot;124&quot;|passwd --stdin oldboy</span><br><span class="line">	</span><br><span class="line">uname 打印系统信息</span><br><span class="line">	-r 显示内核信息</span><br><span class="line">	-m 显示系统位数</span><br><span class="line">	-n 显示主机名，相当于hostname命令。</span><br><span class="line">	-a 显示所有信息</span><br><span class="line">	</span><br><span class="line">hostname 显示和设置主机名，默认是显示主机名。设置主机名可以 hostname oldboy</span><br><span class="line"></span><br><span class="line">一般情况下，在企业生产环境中应尽量避免直接到root用户下操作，除非有超越普通用户权限的系统维护需求，使用完后立刻退回到普通用户</span><br></pre></td></tr></table></figure>
<h1 id="0094"><a href="#0094" class="headerlink" title="0094"></a>0094</h1><h2 id="linux系统的基础优化"><a href="#linux系统的基础优化" class="headerlink" title="linux系统的基础优化"></a>linux系统的基础优化</h2><p>关闭SELinux功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -i &apos;s/SELINUX=enforcing/SELINUX=disabled/g&apos; /etc/selinux/config</span><br><span class="line"></span><br><span class="line">getenforce</span><br><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>
<h1 id="0095"><a href="#0095" class="headerlink" title="0095"></a>0095</h1><p>运行级别</p>
<p>企业面试题：linux的7种运行级别<br>0 关机<br>1 单用户<br>2 没有nfs的多用户<br>3 多用户<br>4 没设置<br>5 x11<br>6 重启</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/inittab</span><br><span class="line"></span><br><span class="line">#查看运行级别</span><br><span class="line">runlevel</span><br><span class="line"></span><br><span class="line">#设置运行级别 加数字0-6</span><br><span class="line">init 6</span><br><span class="line">init 0</span><br><span class="line"></span><br><span class="line">shutdown 关机（halt init 0 关机）</span><br><span class="line">reboot 重启 shutdown -r init 6</span><br></pre></td></tr></table></figure>
<p>linux系统从开机到登录之前的流程<br>硬件开机键<br>BIOS POST<br>BIOS 转 到 硬盘 mbr<br>mbr将引导权交给grub<br>系统initram 加载到内存<br>init初始化</p>
<p>精简开机系统启动服务</p>
<p>重要的开机自启动服务<br>根据老男孩多年的经验，企业环境新装linux系统之后有必要保留的开机自启动服务有5个，具体是</p>
<ul>
<li>sshd<br>远程连接linux服务器时需要用到这个服务程序，所以必须开启。</li>
<li>rsyslog<br>日志相关软件，</li>
<li>network<br>系统启动时，若想激活/关闭各个网络接口。则应开启。</li>
<li>crond<br>定时任务</li>
<li>sysstat<br>sysstat 是一个软件包，包含检测系统性能及效率的一组工具，这些工具对于我们收集系统性能数据很有帮助。<br>sysstat软件包主要工具：<br>iostat工具提供cpu使用率及硬盘io的数据<br>mpstat工具提供与单个或多个处理器相关的数据<br>sar工具负责收集、报告并储存系统活跃的信息</li>
</ul>
<p>设置开机自启动服务的常见方法<br>1）ntsysv<br>2）setup-&gt;system service<br>3）chkconfig</p>
<p>关闭iptables防火墙</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables stop</span><br><span class="line">service iptables status</span><br><span class="line">chkconfig iptables off</span><br></pre></td></tr></table></figure>
<p>linux系统安全最小原则说明<br>多一事不如少一事。<br>安装linux系统最小化，yum安装软件包也要最少化。<br>开机自启动服务最小化，即无用服务不开启。<br>操作命令最小化，能用 “rm -f test.txt” 就不用 “rm -rf test.txt”<br>登录linux用户最小化，平时没有特殊需求不登录root，用普通用户登录即可。<br>普通用户授权权限最小化，即只给用户必须的管理命令，不能啥都可以干。<br>linux系统文件及目录的权限设置最小化，禁止随意创建、更改、删除文件。</p>
<p>更改ssh服务端远程登录的配置<br>修改默认22的ssh端口<br>禁止空密码登录<br>不允许root用户登录<br>不使用dns，因为会导致登录ssh的时候进行反向解析。就会变慢</p>
<p>linux中文显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#备份</span><br><span class="line">cp /etc/sysconfig/i18n /etc/sysconfig/i18n.ori</span><br><span class="line">cp /etc/sysconfig/i18n /etc/sysconfig/i18n.bak</span><br><span class="line">cat /etc/sysconfig/i18n</span><br><span class="line">LANG=&quot;zh-CN.UTF-8&quot;</span><br><span class="line">source /etc/sysconfig/i18n</span><br></pre></td></tr></table></figure>
<p>历史记录数及登录超时环境变量设置<br>设置闲置账号超时时间退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export TMOUT=300</span><br></pre></td></tr></table></figure>
<p>设置linxu命令历史记录数<br>永久生效的话添加到/etc/profile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#设置命令行只有5条历史记录</span><br><span class="line">export HISTSIZE=5</span><br><span class="line">#设置历史文件的记录数量</span><br><span class="line">export HISTFILESIZE=10</span><br></pre></td></tr></table></figure>
<p>history 历史记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">history 查看历史记录</span><br><span class="line">	-c 清楚当前历史的记录，只有终端重启才会清楚bash_history文件。</span><br><span class="line">	-d 删除指定的记录</span><br></pre></td></tr></table></figure>
<p>网络状态说明及优化命令和优化细节参考资料请看<br><a href="http://yangrong.blog.51cto.com/6945369/1321594/" target="_blank" rel="noopener">yangrong</a><br><a href="http://oldboy.blog.51cto.com/2561410/1336488" target="_blank" rel="noopener">oldboy</a></p>
<p>隐藏linux系统信息<br>清空版本信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/issue</span><br><span class="line">cat /etc/issue.net</span><br><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure>
<h1 id="0097"><a href="#0097" class="headerlink" title="0097"></a>0097</h1><p>虚拟机快照</p>
<p>快照：<br>    打标记、可以恢复到打标记的地方。<br>     20160311讲到linux系统优化完毕</p>
<p>克隆：<br>    复制一个一摸一样的虚拟机。<br>    一般使用链接克隆。省硬盘空间。<br>    克隆虚拟机网卡mac地址可能一样。更换mac就可以。</p>
<p><a href="http://oldboy.blog.51cto.com/2561410/1363853" target="_blank" rel="noopener">vmware克隆centos6.4虚拟机网卡无法启动问题</a></p>
<p>vi /etc/sysconfig/network-scripts/ifcfg-eth0<br>删除hwaddr和uuid</p>
<p>清空<br>/etc/udev/rules.d/70-persisten-net.rules</p>
<h1 id="0098"><a href="#0098" class="headerlink" title="0098"></a>0098</h1><p>day1 学习思想和方法，装了、虚拟机，装了系统。<br>day2 计算机硬件组成，操作系统历史发展，选择，VM安装，系统安装。<br>day3 crt连接，第一关考试题24个命令，若干特殊字符，快捷键<br>day4 SSH连接，简单优化。</p>
<h2 id="linux目录结构"><a href="#linux目录结构" class="headerlink" title="linux目录结构"></a>linux目录结构</h2><p>目录层次标准FHS</p>
<p>linux目录的特点：<br>1、/是所有目录的顶点<br>2、目录结构想一颗倒挂的树<br>3、目录和磁盘分区是没有关联的。<br>4、/下不同的目录可能会对应不同的分区或磁盘<br>5、所有的目录都是按照规律放置的。按照FHS标准。<br>linux里设备不挂载是访问不了的<br>挂载点。</p>
<p>mount /dev/cdrom /mnt<br>/dev/cdrom实际是 /dev/sr0。<br>df -h</p>
<h1 id="0099"><a href="#0099" class="headerlink" title="0099"></a>0099</h1><blockquote>
<p>运维不要删文件。<br>/<br>/usr<br>的 bin sbin tmp 目录都一样</p>
<h1 id="0100"><a href="#0100" class="headerlink" title="0100"></a>0100</h1><p>目录层次标准<a href="http://www.pathname.com/fhs/" target="_blank" rel="noopener">FHS</a>（Filesystem Hierarchy Standard)<br>/bin 二进制命令所在的目录<br>which ls<br>/boot linux内核和引导程序<br>/dev 硬件设备<br>/etc 二进制软件安装包 yum和rpm安装的软件包的配置文件默认路径</p>
</blockquote>
<p>分区挂载文件 /etc/fstab<br>登录前的提示信息 /etc/issue<br>登录后的提示信息 /etc/motd</p>
<p>/home 普通用户的家目录，除了root<br>用户外<br>/root root用户的家目录。<br>/proc 显示内核及进程信息的虚拟文件系统<br>/var 变化的目录，一般是日志文件，cache的目录<br>/usr 用户程序及数据、帮助文件、二进制命令等的目录<br>/sbin 和/usr/sbin 超级用户命令的目录</p>
<h2 id="TCP的十一种状态及变迁"><a href="#TCP的十一种状态及变迁" class="headerlink" title="TCP的十一种状态及变迁"></a>TCP的十一种状态及变迁</h2><p><a href="http://www.rfyy.net/archives/2624.html" target="_blank" rel="noopener">TCP的十一种状态及变迁</a><br><a href="http://www.xiaomastack.com/2014/07/11/networktcp/" target="_blank" rel="noopener">TCP连接的几种状态说明</a></p>
<p>Linux系统中用netstat查看网络连接时，State列的几种状态说明(参考网络上的一些文章然后结合实际生产所需，把需要的记下)：</p>
<p>LISTEN：侦听来自远方的TCP端口的连接请求；<br>SYN-SENT：在发送连接请求后等待匹配的连接请求；<br>SYN-RECEIVED：在收到和发送一个连接请求后等待对方对连接请求的确认；<br>ESTABLISHED：代表一个打开的连接，我们常用此作为并发连接数；<br>FIN-WAIT-1：等待远程TCP连接中断请求，或先前的连接中断请求的确认；<br>FIN-WAIT-2：从远程TCP等待连接中断请求；<br>CLOSE-WAIT：等待从本地用户发来的连接中断请求；<br>CLOSING：等待远程TCP对连接中断的确认；<br>LAST-ACK：等待原来发向远程TCP的连接中断的确认；<br>TIME-WAIT：等待足够的时间以确保远程TCP连接收到中断请求的确认；<br>CLOSED：没有任何连接状态；</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-去北京" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/15/去北京/" class="article-date">
      <time datetime="2015-06-15T10:13:00.000Z" itemprop="datePublished">2015-06-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/15/去北京/">去北京</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <pre><code>坐上广州开往北京的列车。
</code></pre>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a><a class="article-category-link" href="/categories/生活/感想/">感想</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/历史/">历史</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-LNAMP配置WordPress" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/17/LNAMP配置WordPress/" class="article-date">
      <time datetime="2015-05-17T15:21:20.000Z" itemprop="datePublished">2015-05-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/17/LNAMP配置WordPress/">LNAMP配置运行WordPress</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>LNAMP配置运行WordPress</p>
<h2 id="nginx-301重定向配置"><a href="#nginx-301重定向配置" class="headerlink" title="nginx 301重定向配置"></a><a href="http://www.ttlsa.com/nginx/nginx-301-redirect/" target="_blank" rel="noopener">nginx 301重定向配置</a></h2><p>301重定向不陌生, 有时候有需求把某目录整个重定向到一个二级域名,或者不带www的顶级域名请求全部重定向到带www的二级域名.如果是Apache，需要配置.htaccess，nginx不支持，需要在配置文件里面使用rewrite指令来实现。</p>
<p>顶级域名重定向到www</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line"> server_name ttlsa.com;</span><br><span class="line"> rewrite ^/(.*)$ http://www.ttlsa.com/$1 permanent;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>如上配置，所有ttlsa.com的请求都会重定向到www.ttlsa.com,301重定向对SEO很有帮助.这个配置大家用的最多。</p>
<p>www二级域名重定向到顶级域名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line"> server_name www.ttlsa.com;</span><br><span class="line"> rewrite ^/(.*)$ http://domain.com/$1 permanent;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>江湖盛传顶级域名的权重会比www二级域名的权重高，有些seoer会要求运维一定要把www的请求转到顶级域名，和上面的做法相反。</p>
<p>目录重定向</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if ( $request_filename ~ nginxjiaocheng/ ) &#123;</span><br><span class="line"> rewrite ^ http://www.ttlsa.com/nginx/? permanent;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>目录跳转新域名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if ( $request_filename ~ nginx/ ) &#123;</span><br><span class="line"> rewrite ^ http://nginx.ttlsa.com/? permanent;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/Linux/">Linux</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/httpd/">httpd</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-去广州" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/04/14/去广州/" class="article-date">
      <time datetime="2015-04-14T09:17:00.000Z" itemprop="datePublished">2015-04-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/14/去广州/">去广州</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <pre><code>上海发向广州的火车。没有买到有座位的票，一路站到广州。
</code></pre>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a><a class="article-category-link" href="/categories/生活/感想/">感想</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/历史/">历史</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2014年终总结之败家" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/12/31/2014年终总结之败家/" class="article-date">
      <time datetime="2014-12-31T08:01:09.000Z" itemprop="datePublished">2014-12-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/31/2014年终总结之败家/">2014年终总结之败家</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a><a class="article-category-link" href="/categories/生活/感想/">感想</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/历史/">历史</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/18/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/20/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2017 幻舞梦境
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-39498261-3', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?1bb44bf25fea8f000a1397f9b5438de7";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>