---
title: 老男孩教育高级架构师12期
date: 2017-11-18 08:30:20
---
老男孩教育高级架构师12期
日期：2015-10-23 19:53

# L007-老男孩高级架构师-云计算概述与KVM虚拟化企业级实战-7节
## 1.云计算概述.flv
为什么学云计算？

自动化运维平台

云计算概述与KVM虚拟化

### 传统数据中心面临的问题？
服务器利用率低
资源分配不合理
自动化能力差
>适合自己的才是最好的。

什么是云计算？
应用、平台、基础架构=云计算

按使用量付费的模式，可用的、便携的、按需的网络访问。
资源共享池（网络，服务器，储存，应用软件，服务）

IDC托管
IDC租用
虚拟主机
VPS
	OpenVZ
	Xen
云主机

计算
存储
网络
认证

## 2.云计算与虚拟化.flv
私有云、公有云、混合云

云计算是一种资源使用模式、

虚拟化、硬件虚拟化、

全虚拟化 Xen ESXI XenServer RHEV 3.0 KVM oVirt
半虚拟化  携程和京东的呼叫中心 XenApp

VMware vshpere
OpenStack

平台虚拟化
软件虚拟化
桌面虚拟化

## 3.KVM环境准备.flv
Kernel-based Virtual Machine

结构简单，包含两个部分：
设备驱动/dev/kvm
针对模拟PC硬件的用户空间控件

嵌入到linux正式kernel

## 4.KVM虚拟机创建.flv
查看是否支持虚拟化 intel的vmx amd的svm

```
grep -E '(vmx|svm)' /proc/cpuinfo
```

安装 KVM

```
yum -y install quem-kvm quem-kvm-tools virt-manager virt-install libvirt
```

## 5.KVM常用管理.flv

查看内核模块中有没有kvm

`lsmod|grep kvm`

启动服务

```
systemctl enable libvirtd.service
systemctl start libvirtd.service
systemctl status libvirtd.service
```

新建硬盘

```
qemu-img create -f raw /opt/CetnOS-7.4.1708-x86_64.raw 10G
```

```
virt-install --name CentOS-7.4.1708 --virt-type kvm --ram 1024 --cdrom=/opt/CentOS-7-x86_64-Minimal-1708.iso --disk path=/opt/CetnOS-7.4.1708-x86_64.raw --network network=default --graphics vnc,listen=0.0.0.0 --noautoconsole
```

TightVNC tigervnc-viewer

net.ifnames=0 biosdevname=0


virsh -c qemu:///system list

virsh virt-manager virt-viewer virt-install

kvm-img create -f raw test.img 10G
kvm -boot d -hda test.img-cdrom test.iso -m 512

热添加cpu只能添加不能减少cpu

硬盘：
全镜像模式 raw
稀疏模式 qcow2 	

网络：
网桥
创建网桥

```
brctl show
brctl addbr br0
brctl addif br0 eth0

ip addr del dev eth0 10.0.0.81/24
ip route add default gw 10.0.0.1
```

cd /etc/libvirt/qemu

## 6.KVM性能优化.flv
## 7.ovirt和总结.flv

镜像制作
1、分区的时候，只分一个/分区
2、删除虚拟机的UUID、MAC
3、安装基础软件包 net-tools lrzsz screen tree vim wget

OpenStack
CloudStack Ctrix受够了，加入apache基金会
OpenNebula
oVirt RHEV的开源版本：
	管理端oVirt Engine vCenter
	客户端oVirt 主机/节点 esxi
Zstack

[oVirt](http://www.ovirt.org)

yum indtall -y ovirt-engine
yum install -y ovirt-engine-setup-plugin-allinone

开源邮箱 Zimbra
现在用腾讯企业邮箱

OpenStack环境准备
	1、CentOS 7.1 2GB内存
	2、
	
```
vim /etc/hosts
10.0.0.81 linux_node1 linux_node1.oveane.com
```
	
3、硬盘50GB
	
什么是？
什么是RestAPI
什么是SOA
什么是消息队列
什么是对象储存

