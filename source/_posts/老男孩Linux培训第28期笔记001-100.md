title: 老男孩Linux培训第28期笔记
date: 2015-12-24
categories:
tags:
---
# 0001
第一个任务分享
成功最有效的方法就是向有经验的人学习！

# 0002
## 侯鹏飞
侯鹏飞 awk哥
25 26期学员
拍卖平台
20多台机器
薪资 13*14
实习期 10k

怎么学习
讲故事

学习
工作

跟老男孩学三剑客

来学习心态摆好

心态
方法
行为
方式

心态：
目标
是什么促使你来学习
动力是什么

给你20万从头到尾搭建一个网站？

谨慎操作

无删除

大胆心细

画图

文档

领导让你整理文档
领导让你整理一下公司服务器的架构图

软实力。

看Linux工程师的态度

细节

上机操作完了，椅子归位。

分享、给大家分享配置、原理性知识。

搭建服务熟练、达到不看文档基本就弄好了。

跟着老师一步一步走。学会之后再去换搭建环境。理解原理。先学会走，然后再跑。

一切看业务。

培养学习能力

侯鹏飞QQ：1746594568

不要挑肥拣瘦。

空杯心态，从零开始学。

不能够学到心里，学习就会打折扣。

# 0003
## 曹亚楠
曹亚楠 文档哥

个人总结：
学习经历：

写自己期望的薪资

找工作，如何突出自己。

期中架构分享

做笔记、认真的做。

自己值那么多薪资吗？

要别人的笔记是没用的。
学会，自己总结后才是自己的。

CTO面试、技术总监面试、HR面试

薪资不要要太低。运维的风险性。要太低，人家也不敢要你。

自己的感触：
自省、自律、自我升华

知道自己哪里不足，然后努力去学习。

多一度热爱

学习方法：
命令必须手敲。
上课认真听讲。

时间不等人，心态估计也很难有空杯心态。

把基础，命令掌握好。
预习的时候尽量做好笔记。为后期腾出时间。

浮躁、彷徨的时间，要清楚自己要什么、要清楚自己的目标。

总结，找一个适合自己的学习方法，虽然成功不可复制，但成功是可以借鉴的。多向有经验的人学习。

蚂蚁的故事

# 冯学
冯学 26期 画图哥
12k

心的
最大感受：
时间不够
抓紧时间
 预习还要做好笔记
工作中不可能全部记住。还可以看笔记。把公司的任务快速完成。

复习

做好了、就是工作中的亮点、加薪的依据。

坚持

锻炼身体

锻炼人的意志

对人的整体状态有好的帮助。

# 0004
学员的分享 大家都是比较自信、

## 万永振
万永振 26期

跟着老师的思路走。听话，出活。
四项基本原则：
目标
方法
坚持
换框架

学习能力的提升

做人的原则
懂得感恩
结交人脉

多跟有经验的人交流、学习。

万永振QQ：2934145242
14k*13+年终奖+绩效+500每月的补助

学会展示自己、低调的展示自己。

# 0005
## 徐亮伟
徐亮伟 26期班长 思想哥 1997年
[徐亮伟](http://xuliangwei.com)QQ:572891887
看到他博客的git分布式版本控制系统的发布日期2016/02/01

如何学Linux：
先入门，在精通。
大家一般学一遍是学不会的。所以要多练习。
实践出真知
善于思考，学会自我处理问题。
学会总结。不总结，过一段时间就忘记了。就等于没有学。
大家一定要让自己优秀一点。

目标要定高一点。
知其然也要知其所以然。
创造属于自己的一片天。
不做井底之蛙。

关注大牛

技术分享
	架构师大会
	小型沙龙
	线下分享

性格
搞不定就不搞了。
现在是 肯定有方法。再想想。

18岁

# 0006
## 孙文俊
兴趣使然
愿意做

兴趣的成就感：
 及时的分享
 赞美别人
 
 养成习惯：
 
# 0007
## 蒋理想
蒋理想 23期

明确目标
好的工作
好的薪资
然后找个女朋友
 
打起十二分的精神
不努力就很难、努力学习。

培养自己的兴趣
乐于分享
乐于助人
学会赞美别人

要善于整理笔记，笔记整理的好坏，影响自己以后的发展。
学会整理笔记
 
要学会自己搜索
善于搜索。自学

老师布置的扩展要做。动手做。

自己的信心

潜意识，给自己信心。

给自己灌输正能量。

说话谦虚

相信你行。

# 0008
## 谢迪
23期

我很珍惜在台上的每一分钟

没有什么的问题可以难倒他。

结交厉害的人。也是很厉害的。

学习方法提上去

抵住诱惑、北京滚滚红尘、出来玩啊。

 发展方向
 
 多上台讲
 
 录视频10次。
 
 四个月
 
 尊严、要面子。
 不是挣来的。
 
 时间不够用。
 
 跟着老师走、
 
# 0009
## 马亮
23期
manager和cto面试

相信可能、才有无限可能。

用最少的时间，学最多的知识。

只要你努力的，没有学不好的。

期中架构、基础学好。

备份的重要性。

分享技术

学会的三种境界：
自己学会
给别人讲
给别人讲别人会了

# 0010
老男孩教育运维班 运维脱产班28期

就业班
架构班
Python自动化
大数据

讯达云

对待销售的态度、
帮助别人

做任何事情不要想着无利不起早。

要学会吃亏。

先付出，在赚钱。

加班、加班10000小时定律

# 0011
技术、知识为介质
技术知识本身 只占50%

核心信念、价值观、能力和方法

老男孩教育带给大家的：
a.运维技术相关知识。
b.学习思想（如何思考）、学习方法（工作方法）、学习能力。
c.企业里的真正实际工作经验及故障案例，不亲身经历也可以变为自己的经验。
d.优秀学习习惯与思考的思维习惯。
f.职场做人礼仪与做事专业、规范的思想。
g.重在提升学员做人素质、做事态度，技术能力。

一出手，就专业、规范。

```
思想
学习能力
经验（人，事）
沟通，表达
习惯
```

文档，逻辑图。这是软实力。

去老男孩学习、换圈子

# 0012
素质：
面对一个有困难的事情的态度。

入职前三个月第一个来，最后一个走。
10年来第一个来，最后一个走。

事做好了。也要表现。

做一个事，就沾到你手上了。

故障后，故障处理后，写事故报告。
半夜处理问题后，半夜写报告。

# 0013
## 同学们可以学到的内容细节
学习工作中的优秀操作习惯：
a.操作前备份。
b.操作后对比检查。
c.服务重新启动前测试语法。
d.服务重新加载，加载后及时检查。
f.使用find替代rm。

# 0014
学习思想：
a.多在学习中记忆，不要死记硬背，理解知识背后的原理。7-8次以上。
b.通过案例去记忆、对联、相声。
c.靠多练习去记忆。
d.重复练习，多思考什么是掌握技术的关键。
李小龙说：
他不怕1000招练一遍的人，他怕一招练1000遍的人。
简单的做熟练了，就是高手！
熟练的重复做，就是专家！

大量心理学、沟通、表达能力
你会不会不是最关键的，最关键的是你是否能让面试官或你的领导相信你会！

# 0015
让面试官相信你会，就可以顺利下offer。
如何轻松转正？靠的是态度、素质、技术！最重要的还是态度。把活搞定了。就行。

# 0016
好的学习、听课、思维习惯

上课保持最大的输入，下课保持最大化的输出。
a.务必带一个笔记本和笔，用于记录及老师画图讲解的内容。
b.上课总结时，大家要记录关键的信息，抓重点总结，课后在详细总结。
c.听课习惯：调动所有感官学习，眼睛看，耳朵听，勤动手（记录和操作），勤思考。
d.听课要跟上进度，目标全员学会（前提是提前预习，完成课后作业的前提下）。
e.保持好充沛精力。
f.课上实践内容和老师保持高度一致，（软件版本，系统版本，配置路径，IP地址，主机名，用户名）。
g.课上学习一定不要随意更改，课下可以根据自己的想法去尝试，先跟着老师把技术跑通，然后课下在去变通。
h.课后第一时间总结课堂内容，赠送的视频是辅助材料。
i.上课必须跟上课堂老师讲解，课后不能太依赖视频（可以提前预习看视频）。
j.完整一次课的学习过程：
1.课前预习->课上听课实践->课上讨论->课后作业->课后讨论
k.参考老师的思维，培养适合自己的学习习惯和思维方法。
i.空杯心态，从0开始，不管你多牛，都要放空自己。

>记不住是正常的，记住了才不正常。
>高度不同，思想不同。多学习，莫争辩。
>女生找有责任心，勤奋努力，潜力股。

# 0017
如何能记牢老师讲课的内容？
- 被动学习：听老师讲，看视频，看书。学习知识在大脑的留存率低于30%
- 主动学习：课上课下积极讨论，把你会的教授给他人，帮助了别人，自己又提高了80%。

被动学习：
听课 5%
阅读 %10
视听 20%
演示 30%
主动学习：
讨论 50%
实践 75%
教授给他人 90%


画图
老男孩博客中的博客
架构之美

李永义

# 0018
思想转变：学习心态改为工作心态
[已就业学生分享就业经验](http://oldboy.blog.51cto.com/2561410/1228397)
平时当作高考，高考当作平时，功夫要在平时下到位，重视每一天的学习。把在老男孩教育的学习当作工作。
1、一定要跟着老师的进度和思路走！
2、来老男孩培训，就是去企业里学习一样。
3、老师留的课后作业当作企业里领导分配的任务，无条件按要求完成。
4、先按照老师讲的去做，不要做任何变动，等熟练后，在自行变通。
5、多讨论多问
6、课堂的操作当作生产环境，遇到的问题就是生产问题，这样对学习有利。

# 0019
注意事项：

```
集体休息时，不要大声喧哗。
注意保持个人卫生。
注意节约能源。
全封闭的杯子。
```
保持细节。

执着、专注
追女朋友，今天追，明天就不追了。那能追到才怪了。

# 0020
## 如何学好Linux运维？
四项基本原则：
目标：黑板上写薪水就是目标！ *信念*
	HR面试：未来5-10年是如何规划的？优秀的运维工程师和架构师

方法：成功最有效的方法就是和有经验的人学习！ *价值观*
	第一个老男孩老师、班级里学习好且努力的学习。
	第二个向比你年龄大的人学习，你认可的人。
	
行动的过程：如何确保结果接近你的目标。
努力：每天学习10小时以上，完成老师的作业要求。
坚持：4-5个月，每天学习10小时以上，完成老师的作业要求。

>信念决定价值观，价值观确定行动。

你的态度足够好，能力很好。

别人说的到，我们做到了。

## 学习计划书
我叫全金龙，经过老男孩教育运维班5个月学习后，我一定要达到的薪水目标是10k+，为了达到此目标我将采取如下10大行动或方案：
达到目标奖励：
达不到目标惩罚：
51CTO 发博客。
把链接发给你的朋友，最好包括看不起你的。

## 学好Linux运维归结起来就一条：呱呱叫的学习态度
1、按时上自习。
2、上课认真听讲，认真练习，认真预习，积极交流讨论。
3、完成老师布置的课后作业，并达到老师教学的基本要求，要提前预习。

# 0021
相信可能你就会无限接近可能

相信可能你就会无限可能，相信不可能你就是自费武功！

适当的吃点亏不算什么，多加点班不算什么。

重要心理学的两个小故事分享给大家。
算命的故事

心理学是干嘛的，认识人。

相爱容易相处难。

1. 算命的恋情2次婚姻。
第一次办公室恋情，离婚了。
第二次办公室恋情，没有离婚了。
你相信什么，什么就发行的机率就大。
办公室恋情

2. *坚持*
男孩给女孩写信，99次之前都是空的，第100次，写做你的新娘。

然而男孩每次写信，收到的都是空的。到99次就崩溃了。到100次的时候他就没有看信的内容。就错过了。

方向看准了，就要勇往直前。

不相信，没行动。

# 0022
老男孩教育运维信息学基础模型2:

心理学模型：
信念：相信互联网linux运维岗位很牛，很有发展，一定要学好！
价值观：相信通过老男孩教育可以学到最牛的linux运维技术。
行动：付诸行动，结果学好了linux运维，找到了高薪的岗位，13K+。

老男孩教育运维心理学基础模型2:

信念：遇到自己心仪的女孩子，相信自己一定可以追到她。
价值观：通过看电影，咖啡厅，旅游等手段方法去追。
行动：付诸行动，追求到了心仪的女孩子。

>信念和价值观，决定行动，行动才可能有好结果。

>爱情电影，看恐怖片她一害怕，你就假装害怕就跑她怀里了。

不敢做就没有结果。

# 0023
销售的信念灌输。

不要觉得IT很牛逼，有很多行业比IT赚钱。

脱产班学生上课时间：
周末：六、日休息
上午：8:30到
		8:30-9:00 做老师预留的课前考试题
		9:30-12:30 上课（70分钟左右一节课）
午休：12:30-14:30,建议大家务必午睡30-40分钟
下午：14:30-未知 上课，一般晚上7-8点下课。

上课时间：每周1-5，讲课时间周2，周5，其他时间不定期讲课。
不接受同学们无故缺课，包括自习课，缺课三次，取消推荐就业资格。

自习课：每周1，3，4自习课会不定期讲课，因此不要缺席，每周3下午16点以后活动时间
自习期间有事可以向组长及班长请假，不要超过2个小时。

其他自习课时间安排：
	9:30-12:00
	14:00-19:00

自习课 周一、周四下午17点左右，去楼下跑步，1000米雷打不动，下大雨就算了。

课后作业：
1.总结
2.课外作业

学习的时候不要着急、学会一个知识点，再去学习下一个。不然就是没学会，时间长了就忘记了。

# 0024
老男孩的blog
[老男孩的51cto blog](oldboy.blog.51cto.com)
[老男孩博客](blog.oldboyedu.com)

学习思想：
1. 学习心态：
心态一定要放平，学好linux运维是需要过程的，如果是网友自学，这个过程可能要2-3年甚至更长。

跟着老男孩教育学至少也需要4-5个月。

我们靠的就是老师的经验和努力，以及同学们的持续不懈努力。
成功就是每天多学一点点，多做一点点。

# 0025
2. 运维班讲课作战要领

课程内容前期课程进度较慢：
第一个月：慢讲，目的是所有同学务必跟上，基础打牢，基础不牢地动山摇。
我们大都分同学都相当于0基础，学习稍微好的也要重复看基础部分，不要学龟兔赛跑的兔子。

第二个月：稍微加快，锻炼肺活量。
第三个月：逐步加快。
第四个月：逐步加快。模拟企业里工作的压力标准。
			 冲刺阶段。接近企业里工作的压力标准。

要求全体学生日学习时长：
第一个月 平均每天至少学习10小时
第二个月 平均每天至少12个小时
第三个月 平均每天至少8个小时
第四个月 平均每天至少12个小时

跑马拉松，有快有慢。

# 0026
回顾上节：
信念：

1. 我们一定要相信自己能行。

2. 成功的最有效的方法就是向有经验的人学习。

3. 一节课的完整学习流程。
课前预习-课堂听课-课堂讨论-课下复习-课下作业-课下讨论

4. 多选择主动学习的策略
 讨论、交给别人、互相考考
 
 5. 调节自己
 学习很累，找到学习的兴趣、成就。
 
 人一定要自我。
 人一定要自信，不然别人凭什么相信你。
人一定要自信，不要瞎自信。是靠实力自信的。

给别人教会了，就有兴趣和成就干了。

# 0027
## 硬件基础
IBM ThinkPad
网站PC服务器 x86服务器
1u 1unit 4.45cm
2u
4u

服务器品牌
DELL IBM HP

### 1u
R410
R610

### 2u
R720
R730

培训方向 互联网、移动互联网
用的最多的是dell的服务器

#### 电脑主机组成
主板、CPU、内存、硬盘、显卡、声卡、电源等。

7X24小时不间断服务。

##### 电源
双电源。

##### 主板

##### CPU 
决定计算机的工作速度和效率
Intel AMD品牌

>这个事情你会做还不行，还要有思想

##### CPU散热风扇
选一个好的风扇是十分重要的。

##### BIOS芯片
常见的三种BIOS:Award、AMI、Phoenix

##### 总线扩展槽
PCI/PCIE

# 0028
##### 硬盘
西部数据
希捷
日立

硬盘的性能决定网站的性能

硬盘接口
IDE
SATA
SAS

机械硬盘 速度慢
SSD固态硬盘 速度快

>环境塑造人
>不要总想着免费的、容易上当受骗。
>价值观：天上没有掉馅饼的事。靠自己。努力学。

##### 内存
内存是临时存放数据的，断电就消失了。

# 0029
##### IO各层次性能汇总
CPU缓存
内存
硬盘 硬盘缓存
网卡

>运维职责：
>1. 网站7X24都能访问。
>2. 数据不能丢。
>3. 用户体验尽量好。

##### 显卡
图像处理需要、一般服务器不需要

##### 光驱
装系统

网络
U盘

职业操守：
>为企业省钱

计算机工作原理

计算机硬件组成部分

杂乱要抓重点

计算机硬件结构
冯诺以曼结构
输入设备
输出设备

运算器
储存器
控制器

# 0030
## 企业里PC服务器品牌及型号
互联网公司服务器品牌：
DELL（大多数公司），HP，IBM（百度），浪潮，联想，航天联志。

DELL服务器品牌：
1U=4.45CM

2010年以前 1u 1850 1950，2u 2850 2950
2010-2013年：1u R410 R610，2u R710
2014-2016年：1u R420/430 R620/R630，2u R720/R730

IBM品牌：
1u 3350/m3 3350/m5
2u 3650
4u 3850
8u 3950

HP品牌：
2u DL380g7/g8

## 服务器主要零部件：
1. 电源
生产中核心业务用双电源，双路（AB），如果是集群的情况可以不用双电源。

热插拔式。

2. CPU处理器
常见品牌 Intel，AMD

一般企业离得服务器，CPU物理数量2-4棵，单个CPU4核，内存16-256GB（32，64居多），做虚拟化的宿主机，CPU颗数4-8个，内存总量一般是48-128GB，6-10个虚拟机。

# 0032
3. 内存
CPU和磁盘之间的缓冲设备，是临时储存器（存放数据的）。
程序：c/php/java，代码文件，静态的，放在磁盘里的数据。
进程：正在运行的程序，进程运行就是发程序放在内存中运行。
守护进程：持续保持运行着的程序。

计算机重启，内存的数据会释放掉。

企业案例：
1）门户极端案例：
大并发写入案例。（抢红包，微博）。
高并发、大数据量写数据。会把数据先写入内存。然后定时定量写入到磁盘（减少磁盘IO）。最终还是会加载到内存对外提供访问。

a. 优点，写数据到内存，性能高速度快（微博，微信，SNS，秒杀）。
b. 缺点：可能会丢失一部分在内存中还没来得及存入磁盘的数据。
解决办法：
服务器主板安装蓄电池，在断电瞬间把内存数据写会到磁盘
UPS
选双路电的机房。接不通的电路，服务器放到不同的机柜、地区。

2）大中小企业案例：
对于并发不是很大、数据也不是特别大、读多写少的业务，会先把数据写入磁盘，然后通过程序把数据读入内存。在对外度过读内存提供访问服务。

>有一句话：缓存无处不在！



>企业面试题：
buffer和cache什么区别？

简单解答：
写入数据到内存里，这个数据的内存空间称为缓冲区（buffer）。
从内存读取数据，这个存数据的内存空间称为缓存区（cache）。

由于99%的网站都是读取为主，写入为辅，读写比例至少10:1，所以并发写入不是问题。
*提醒：这里提到的内存和磁盘，是由多台机器组成的集群架构环境 memcached（纯内存）/redis（内存加磁盘）。*

# 0033
4. 硬盘
永久存放数据的储存器，磁盘上也是有缓存的（芯片）
常用的硬盘都是3.5英寸的（ide，sata，sas），常规的机械硬盘，读取（性能不高）性能比内存差很多，所以，在企业工作中，我们才会把大量数据缓存到内存，写入到缓冲区。当今互联网网站比笨的解决方案。

企业应用：
1. 常规正式工作场景选SAS（结合SATA和SCSI的优点）硬盘（转速是15000转/分，机械硬盘转数高的性能好）
2. 不对外提供访问的服务器，例如线下的数据备份，可选SATA（7200-10000转/分）。SATA特点，容量大，价格便宜，但是速度比较慢。
3. 高并发访问，小数据量，可以选择SSD。
>SSD最好，都选SSD吧？
淘宝网企业案例：
服务器会把SATA和SSD结合起来用，热点储存，程序动态调度。

企业级硬盘是适合7*24小时使用的。

企业网站来讲，都会尽量让用户从内存中读取数据，而不是硬盘
几乎企业运维和架构师的网站优化、服务器、软件的优化核心，都是磁盘和内存的使用比例优化。

# 0034
5. DELL阵列卡（RAID卡）
基本作用：网站数据量很大的时候，单块盘装不下了，购买多块盘，又不想单个盘存放数据，就需要工具把所有硬盘整合成一个大硬盘。再在这个大磁盘上分区（虚拟磁盘）放数据。

1byte=8bit
1k=1024byte
1m=1024k
1g=1024m
1t=1024g
1p=1024t

RAID有多种整合方式 RAID 0 1 5 10

有RAID卡后，一般磁盘就会查到RAID卡上，而不是直接插到主板上了。

RAID卡上也有缓存的。

RAID 0 可以 1块和多块盘，组合后容量是最大的，速度快。
RAID 1 只能2块盘，组合后容量只有一半的，速度不快。
RAID 5 最少是三块盘，组合后容量有三分之二，速度容量适中。
RAID10，最少4块盘，容量2分之一，速度快。先做raid1，然后做raid0。

冗余从好到坏：raid1 raid10 raid5 raid0
性能从好到坏：raid0 raid10 raid5 raid1
价格从低到高：raid0 raid5 raid1 raid10 

# 0035
不同RAID级别的企业应用举例：根据数据的储存和访问需求，去匹配对应的RAID级别

互联网公司：
单台服务器，很重要，盘不多，系统盘raid1
数据库服务器/储存服务器，主库raid10，从库raid5/raid0（为了维护成本，raid10）
web服务器，如果没有太多数据的话，raid5，raid0（单盘）
由多台，监控/应用服务器，raid0，raid5。

6. 光驱
当下主要作用装系统。

企业应用：
建议淘汰光驱，为老板省钱。
U盘安装系统，网络安装（ftp，http），无人值守批量安装系统（pxe+kickstart）。

7. 主板
北桥芯片负责CPU控制内存
南桥芯片负责I/O总线之间的通信

# 0036
8. 机房机柜里的服务器摆放

9. 远程管理卡：
开关服务器，并可以查看服务器开关的过程等信息。
服务器自带的远程管理卡，可以关机、开机，但是看不到开关的现实过程。
所以，选择独立的远程管理卡，稍微贵200块钱。
快速恢复服务。

大客户有KVM远程管理，特大客户会有自己的人员驻扎在机房。

# 0037
10. DELL服务器真实服务器拆解讲解
1u Dell 1950 2个硬盘 Dell R410 4个硬盘
2u Dell 2710 6个硬盘  Dell 2720

11. 企业级物理服务器RAID制作实战
先做RAID，然后分区，然后装系统

# 0038
操作系统(Operating System)，管理硬件资源。

用户->操作系统->硬件

外围程序-Shell-硬件

POSIX(Portable Operating Interface)，可移植操作系统接口。

Linux特点：
开放源代码。
Unix兼容，具备几乎所有Unix的优秀特性。
可自由传播。
适合x86 CPU架构的计算机。

>有机会可以学习C语言。

# 0039
Unix简介
1969年在AT&T的贝尔实验室诞生，20世纪70年代。1977年BSD，SUN的Solaris，IBM的AIX，HP的HP UNIX。

FreeBSD。

1991年 Linus Torvalds，Linux内核

# 0040
技术成熟，可靠性高
极强的可伸缩性
强大的网络功能
强大的数据库支持能力
强大的开发能力

# 0041
1984年，Richard Stallman发起了开发自动软件的运动，并成立了FSF（Free Software Foundation） GNU项目。

1984年的Andrew Tanenbaum， Minix。教育使用的。

GUN/Linux。

# 0042
Linux诞生

Linux内核开始于芬兰的赫尔辛基大学的Linus Torvalds，从Minix学到了很多系统核心程序设计和设计思想。

Linux吉祥物Tux企鹅。

# 0043
## Linux的发展历程简介
1）1984年，Andrew S. Tanenbaum开发了用于教学的Minix。
2）1989年，Andrew S. Tanenbaum将Minix系统运行于x86的计算机平台。
3）1990年，芬兰赫尔辛基大学学生Linus Torvarlds首次接触Minix系统
4）1991年，Linus Torvalds开始在Minix上编写各种驱动程序等操作系统内核组件。
5）1991年底，Linus Toravlds 公开了Linux内核源码0.02版。
注意，Linux内核源码并不是我们现在使用的Linux系统的全部。而仅是Linux内核kernel部分的代码。
6）1993年，Linux 1.0版本发行，Linux转向GPL版权协议。
7）1994年，Linux的第一个商业发行版Slackware问世。
8）1996年，美国国家标准技术局的计算机系统实验室确认Linux版本1.2.13（由Open Linux公司打包）附恶化POSIX标准。
9）1999年，Linux的简体中文发行版问世。
10）2000年后，Linux系统日趋成熟，涌现大量基于Linux服务器平台的应用，并广泛应用于基于ARM技术的嵌入式系统中。

# 0044
重要的人物

Richard Stallman 自由软件与GNU项目发起人
Andrew S. Anenbaum Minix开发者
Linus Torvalds Linux之父

1. 自由软件
自由意味着freedom，not free。

2. 自由软件基金会FSF
emacs、gcc、bash、gawk

# 0045
GNU（GNU's not unix)
GNU/Linux
GUN工具链/Linux内核

GNU 内核 Hurd没成功

GPL（General Public License）

GPL许可的核心，是保证任何人有共享和修改自由软件的自由，任何人有权取得、修改和重新发布自由软件的源代码权利，但都必须同时给出具体更改的源代码。

虽然整个Linux内核是基于GNU通用公共许可的，但是Linux内核并不是GNU计划的一部分。

# 0046
## Linux操作系统组成
Linux内核之上的组件
一部分是GNU组件，bash gawk

硬件-系统核心-命令解释器-外围应用程序

# 0047
Linux为什么这么受欢迎？
- 自由软件
- 具有Unix的全部优秀特性
- 安全
- 网络服务的支持

# 0048
Linux应用领域
- 服务器
- 嵌入式Linux系统
- 个人桌面

>自己学的东西，说它不好。那能学好吗？

本
服务区领域的linux
基于x86 CPU架构的计算机硬件的liux系统。

# 0049

发行版

Linux 内核 2.2 2.4 2.6 3.x
1）Red Hat RHEL 6.x RHEL 7.x
2）Fedora ，RHEL的新功能一般都发布在fedora。
3）CentOS，RHEL源码重构版。去除Red Hat图标，去除收费软件。

>一个漂亮女孩找你做朋友，你凭什么？

# 0050
自动自发的学习。

桌面：Ubuntu
服务器：RHEL、CentOS
安全要求多的：Debian、FreeBSD、OpenSUSE
追求新技术的：Fedora

>有人帮助你了，你真棒！
>携程故障10个小时1000万出去了。

# 0051
选择CentOS版本

CentOS 5.11 慢慢被替换。
CentOS 6.7 主流。
CentOS 7 大企业的局部环境。

最新版一般潜在的问题隐患会较多，且不可预知，多数企业没用。你选择使用，遇到问题不好解决，可能面临无人可问，也可能无处查资料，这个就是所谓的挖坑埋自己了。一些刚入行的运维新人经常会这么做，不要犯这样的问题。不过最新版的性能和功能等往往还是不错的，真正的选择使用，还是看企业的实际需求，以及内部运维人员对特定版本的熟练程度，先试水然后逐步过渡，是大公司的选择思路。

>面试技巧：大家被面试官问及使用的是什么操作系统时，一定要一次性说出来（系统版本、内核版本、32位还是64位。）例如：我的工作中使用的是CentOS 6.6 x86_64位Linux系统，内核版本为 2.6.32-504，这才是一个合格的Linux运维人员的表现。

# 0052
搭建学习环境

虚拟机软件 VMware Workstation

>装双系统，路走偏了。

>免费活动少去。

# 0053
VMware Workstation 12
Windows 7 

# 0054
老男孩运维28期
老男孩运维28期模版机 

## 新建虚拟机
虚拟机配置
1CPU
1GB内存
10GB硬盘 lsi logic(L) scsi 拆分成多个文件
NAT网络
CD/DVD:CentOS-6.7-x86_64-bin-DVD1.iso

# 0055
BIOS开启虚拟化

# 0056 
日期：2016-03-04 19:19
CentOS 6.7 x86_64

Install or upgrade an existing system
Disc Found：Skip
语言：English
键盘：U.S. English
Basic Storage Devices
Yes,discard any data
主机名：oldboy
时区：Asia/Shanghai
root密码：123456
Create Custom Layout:
硬盘分区
/boot ext4 200MB 设为主分区。force to be a primary partition
swap 768MB 一般设置为内存的1.5倍，内存大于8GB，就给8-16GB就可以。设为主分区。force to be a primary partition
/ ext4 剩余所有。fill to maximum allowable size 设为主分区。force to be a primary partition

Format

Write changes to disk

选择软件包
[运维老鸟教你安装centos6.5如何选择安装包](http://oldboy.blog.51cto.com/2561410/1564620)
选择 minimal 软件包
Customize now

Base System->Base,Compatibility Libraries,Debugging Tools
Development->Development tools

Packages 总共511个软件包。

Linux 系统对分区的基本要求：
1）最少要有一个根（/）分区，用来存放文件系统及程序，其大小至少5GB以上。
2）要有一个swap（交换）分区，它的作用相当于Windows里的虚拟内存，swap分区的大小一般为物理内存容量的1.5倍（内存<8GB)。但当物理内存大于8GB时，则swap分区配置8-16GB即可，太大无用，浪费磁盘空间。swap分区不是必须的，但是大多数情况还是设置比较好，个别企业的数据库应用场景不分swap。
3）/boot分区，这是Linux系统的引导分区，用于存放系统引导文件，如Linux内核。所有文件的总大小一般只有几十MB，并且以后也不会增大太多。因此，该分区可以设置为100-200MB，这个分区也不是必须的。

登录系统
CentOS 6.7 2.6.32-573 x86_64
用户名：root
密码：123456

# 0057
## 配置IP
192.168.33.0
192.168.33.128
使用setup命令修改IP，实质就是更改/etc/sysconfig/network-scripts/ifcfg-eth0这个文件。

```
setup

Network configuration->Device configuration->eth0(eth0)->Save&Quit
```

```
#启动网卡0
ifup eth0
#查看获取的IP
ifconfig
#查看网络通不通 
ping IP
```

# 0058
## 利用ssh登录
SecureCRT

## 修改网卡配置
```
#查看网卡的配置文件
cat /etc/sysconfig/network-scripts/ifcfg-eth0

#设置网卡开机启动
sed -i 's/ONBOOT=no/ONBOOT=yes/g' /etc/sysconfig/network-scripts/ifcfg-eth0
```

# 0059
## 如何结交it高手打通你的任督二脉
如何才能结交到高手为自己打通任督二脉？

前奏音乐：
	相信自己（时长3分钟）

排版整理
	曹亚楠（老男孩圈内文档哥）
	
开始
	各位亲爱的爱学习的小伙伴们：
	大家现在好！
	在开始分享之前，我想问一下大家，IT圈内的高手多么？答案：多......
	高手这么多，那么大家有没有结交到自己心仪的高手呢？
	能否有机会经常和高手一起吃吃饭、问问题，交流无障碍呢？
	估计一般的朋友做不到吧？
	原因何在？
	答：因为我们根本就不想结交高手。
	什么？不对？
	
	我不否认，大家的意识里都是想结交高手的。但是，大家的潜意识里其实并不想结交高手。因为如果是潜意识里想结交高手，那么你就会自己主动的找方法找途径去结交高手了。
	因为，大家总是停留在意识和想的层面，却没有实际行动，结果就是没有结交到高手，所以我说大家根本就不想结交高手。
	无论老男孩老师讲多少知识，你悟道了才是你自己的！
	
正题开始
	下面开始我今天的分享演讲
	由于时间关系，今天我只给大家讲解一下结交高手的几个简单要素：
	一些背后的心理学原理比较复杂，我尽量在有限时间内阐述清楚！
	
	1）有一颗强烈的一定要结交高手的心！
	请问大家都追过女孩子么？
	谁的经验更丰富，能否简单说说方法和策略？
	先来个比喻，结交IT高手和追求一个你心仪的女孩几乎时一样的！
	如果这样说，大家都应该会结交高手了吧？
	
	你追求一个心仪的女孩，一般无须和她说，你要追求她，因为这样会让她有所警觉，对你的一举一动都会联想到你是不是别有动机。因此，追求的成本会加大。
	
>情商高的人，在这个社会比较吃得开。
>心理学讲，你的动机。

	其实，在做普通朋友的时候，只要在内心把她就当作你的女朋友一样去对她，结果就是你不用追求，她自然而然的就成了你的女朋友，而且很可能她都不知道是怎么爱上你的，销售的最高境界可能不是销售自己了，而是销售无痕。
	结交IT高手也是同样的道理，结交无痕，嘿嘿！
	
	结交高手除了在信念上要改变外（真心想和他交往，一定要和他交往），最关键的就是要学会投资（态度、素质、金钱、精力），并且你这个投资不要时刻想着快速的得到回报。
	
	因为高手和你在你需要的层面上是极其不对等的，你对高手有需求，高手对你一开始无任何需求，仔细想想，追女朋友何尝不是如此呢？
	你一投资就想着快速得到回报，往往会适得其反、南辕北辙！
	
	对于员工：到月底了，老板不给你发工资，你心态就不行了。
	对于老板：今年可以不赚钱，只要明年赚钱就行。
	互联网行业也是如此，先烧钱后赚钱。
	结交高手就需要有像前面老板和互联网行业企业一样的心态，今年可以花钱、不赚钱，明年再赚也行，这样才能真心结交到你想要结交的高手朋友，急功近利往往会适得其反。
	非常遗憾，我们身为互联网的一份子，在这种先投资再赚钱思维并且能做到的朋友不到10%。
	个别朋友，当有需求时，也知道请客吃饭，但是动机太明显了，效果往往不理想，功夫要多用在平时，未曾来水先憋坝。
	
>先付出、再收获的思想。
>先播种、再结果。

	2）具备一个优秀的结交高手的态度及素质（千里马的素质和态度）
	就拿参加老男孩教育培训学习来说吧，有些人很想培训学习，但是总说没时间：
	平时要上班、周末家里事多、离老男孩教育位置远。
	其实这些都是借口，不是没时间、不是事多、不是距离远，而是在你心里这个学习的事认为不够重要，仅此而已。怕花钱也是认为不够重要，殊不知，时间没了，就真没了。钱没了，却还可以赚的更多。
	我们必须要认识到，高手和新手的你是极其不对等的，你对高手有需求，高手对你无任何需求。所以你想要结交到高手，其中一个最简单有效的方法就是让你自己变成“千里马”。
	
>做事积极、主动
>人都是比较喜欢听赞美的话。只要赞美合理、真实。

	变成千里马就是你的态度、素质表现的要很好，并且你要表现出来对高手的认可，甚至是崇拜，这不是说几分钟几句话就能做到的，要用行动去做出来，例如：长时间的关注他、追随他，真的做出来力挺他的行动。这样他就会把你当做小弟甚至是朋友、哥们。
	以下有几个策略让大家可以很快的结交高手
	策略1:满足高手的爱与被爱的需求
	当你第一次向高手请教问题的时候（写好一个带上下文，不要有歧义，并且排好版的文档，并尽量让高手做选择或者判断题）。
	当时他可能没有理你，你要坚定的认为他可能在忙，所以没有回复你。你一定不要催他，当你解决问题后，你爸问题总结好、画好逻辑图，排好文档，发送给高手，并且可说，大哥，当时我问你问题的时候你没回我，我猜你肯定在忙，现在问题解决了，我把问题总结好了，发给您一份，您留着也许以后用得上。
	一定不要管他是否帮助到你，要先做好自己，让自己的素质、态度硬起来，前面已经说过了，结交高手和追女朋友几乎是一样的，但是女人更感性，而且有男女的天生生理需求，而高手更理性，并且你们之间没有性，没有天生的生理需求，所以，结交高手比追女朋友要略难一些。今天大家听了老师的分享，以后搞定女朋友估计就轻松加愉快了，大家想下要怎么感谢我啊，家庭问题都解决了，哈哈。
	
	策略2:满足高手的重要性的需求
	大家一定看过江苏卫视的非诚勿扰吧，看看男嘉宾如何关注女嘉宾的微博，然后上台献婚纱、玫瑰，然后轻松领走女嘉宾的吧，对女嘉宾的一举一动都关切的很，而且一般都是3-6个月以上。
	我们要结交高手也是一样，要花费精力，跟踪追随高手的脚步。高手的博客、微博、朋友圈内容、视频课程等，点赞并评论。不用多，持续点赞超过十次，分享他发的文章超过十次，高质量的评论他的文章超过10次，以后你跟他交流肯定很容易。虽然高手和你不是对等的，但是每个高手都有关照小弟的欲望，如果你做的到位，你值得提携，他就会带你，指导你。
	朋友圈经常有让大家转发文章的，面对你心仪的高手你有做到这些么？
	还是不见红包不转发，甚至抢了红包也不转发，这个素质和态度如何能结交高手呢？
	“我是老男孩，我只转发你的文章，不抢你的红包”，对一个高手连续行动10次以上，一定可以让他认识到你，起码问问题会给你解答。
	这种简单的方法，被老男孩内部的学员（今天的话题就是运维班的一节课前思想）使用了无数次了，非常有效，你和对你没有任何需求的人交流，你只能让你自己变得更专业，更感恩，更值得别人培养。
	我们去企业，其实企业要人非常简单，特别是15k月薪以下，他对你的技术要求真不高，只要把运维基础、基础网络服务学会了即可，关键就是态度、素质，这些很牛逼就好了，无非是学会感恩，学会忠诚，学会做人。
	其实呀，这些都是心理学里极其简单，但却是最有效的部分，按照马斯诺来说，我们人都有五大需求，你只要满足他的需求了，他机会为你做事。那么老男孩给大家讲八大需求。高手没有理你的欲望，但是他有几大需求，他有爱人的需求，他有被爱的需求，有重要性的需求哦，性的需求等等，你要想别人解决你的需求，你就要先满足高手的需求。
	老男孩运维思想之人性的8大需求：
- 物质需求（金钱、物品）
- 爱与被爱（性）需求（家庭、上下级、师徒）
- 重要性的需求（花钱买被重视，发红包）
- 安全的需求
- 赞美与鼓励
- 成长的需求
- 自由需求
- 美的需求

>苍蝇不叮无缝的蛋。是人都有需求。

	为什么你问问题，他没有回复你，你还要发送专业的总结文档给他呢？其实呢，这就是解决他的被爱以及重要性的需求，当你无限的去爱她、重视他，他的需求被满足了，他就会回答你的问题，就这么简单。
	
	其次，你转载他的博客文章，分享他的朋友圈，为他点赞，为他狠狠的高质量评价，这都是满足高手被爱和重要性的需求，他的这些需求很大程度的被满足了，他就会帮你，把你认作朋友，觉得你值得培养，因为这就是你的素质和态度的体现。
	老男孩在做培训的时候，每一个小伙伴都会互换角色讨论问题，说完了必须互相夸奖，举起大拇指，并发自内心的说，“你真棒！你真的太棒了！”，之所以让小伙伴们做这些，都是解决被爱和重要性的需求，特别好的学员给差的学员讲完问题后，必须要高度真心赞扬他，已获得让他下一次更好的帮助你，而不是卸磨杀驴。我们让高手帮助我们，就是要做到让高手感觉到被爱、被重视的感觉，这样高手就会为你做事。
	其实人的八大需求，你只要满足他的一点，他就会为你做事，我们列出了八大需求，我们在他的每种需求都去满足他，那么你和他结交就非常容易了。金钱的需求，被爱的需求。例如物质需求：请客吃饭，本来你花100元就很多了，可因为请他你花了300元，对他来讲就是满足他的重要性需求，他认为在你心中，他是最重要的，此方法需要坚持，变成习惯，一次性可能用处不大，此时急于求回报，可能会徒劳无功，记住，你做的次数少，就找回报，高手会认为你太利益了，和高手交往就是朋友式的交往，不要想利益，自然利益就会得到，就像老男孩老师讲课一样，第一目标不是钱，而是让学生一个个风光的高薪毕业，到时钱自来就来了，不要赤裸裸的为了利益去交往，目前老男孩教育基础班平均12k就业，所以2015年学员量比2014年翻了好几倍。。
	
>拍马屁也是本事。
	
	策略3:满足高手的性的需求（生理需求）
	注意，别想歪了，不是带他去那个地方。如果你是个男生，技术水平中等，问问题，高手可能也不会理你，因为觉得你菜，特别是你问的问题太菜。如果你是女生，就算刚开始学，往往和高手沟通起来就会方便些，特别是头像、空间放几张照片（比高手的需求高一点就行，别高太多），因为你是女生稍微会一点，高手觉得这个女孩子不赖，因此沟通就要顺利的多。
由于时间关系，今天就分享这么多，更多内容欢迎大家关注我的博客，空间！关注老男孩教育！
	3、总结：怎么才能知道更多上面的优秀思想
	成功必有方法，成功必有捷径，只是一个人走，很难发现捷径，但是无论怎么样的捷径，都离不开勤奋和努力。
	老男孩老师总说，成功最有效的方法就是和有经验的人学习，和越有经验的人学习，你的成功就越快。老师经常说，如果你和月薪1w元工资的老师学习，你毕业也就2-3k工资。如果你和月薪3w元工资的老师学习，你可能毕业月薪5-8k。如果你和月薪收入5-10w的老师结果就不同。
	为何有这样的区别呢？
	
>问一个高手问题，他不理你是正常的。
>把自己变成千里马、态度和素质在企业很重要的。
>请客吃饭， 结交高手。他真实请我吃饭。在沙河吃饭花了300元。老师没什么吃吧，开心就好。2个人吃饭就吃了600多。在他的发展阶段。不在乎钱。

# 0060
## ssh远程连接 
日期：2016-03-08 10:29

# 0061
## 讲解入学考题
1. 创建一个目录/data

```
mkdir /data
```

2. 在/data下面简历一个文件 oldboy.txt

```
touch oldboy.txt
```

3. 为oldboy.txt 增加内容为“I am studying linux.“。

```
echo "I am studying linux.">oldboy.txt

#vi编辑器
vi oldboy.txt
"I am studying linux."

:wq
```

4. 把 oldboy.txt 文件拷贝到/tmp下

```
cp oldboy.txt /tmp/
```

5. 把/data目录移动到/root下

```
mv /data /root/
```

6. 进入root目录下的data目录，删除oldboy.txt

```
cd root/data/
rm oldboy.txt
```

7. 退到上一级目录，删除data目录。

```
cd ..
rm -r data

cd ../
rmdir data
```

8. 已知文件test.txt内容为：
test
liyao
oldboy
请给出打印test.txt内容时，不包含oldboy字符串的命令

```
grep -v "oldboy" test.txt
```

9. 请用一条命令完成创建目录/oldboy/test，即创建/oldboy目录及/oldboy/test目录

```
mkdir -p /oldboy/test
```

10. 已知/tmp目录下已经存在了test.txt文件，如何执行命令才能把/mnt/test.txt拷贝包/tmp下覆盖掉/tmp/test.txt，而让linux系统不提示覆盖（root权限下）

```
/bin/cp /mnt/test.txt /tmp/test.txt
\cp /mnt/test.txt /tmp/test.txt

unalias cp
cp /mnt/test.txt /tmp/test.txt

简要解释：
	此题的思路就是屏蔽掉系统默认对应命令别名，默认执行cp的操作是调用了别名的。所以会提示覆盖。
详细说明：
	cp命令默认是不会提示overwrite 的，但是cp的-i选项会提示，而一般Linux的用户环境文件~/.bashrc中会把cp命令成alias cp='cp -i' 如：alias|grep cp可以查看别名
	这样在linux下输入的cp的命令实际上运行的是cp -i，加上一个"\"符号或者些cp的绝对路径/bin/cp就是让此次的cp命令不使用别名（cp -i）运行。
	
unalias命令行处理别名仅在当时生效，重启系统后就失效了。
```

11. 只查看ett.txt文件（100行）内第20行到第30行的内容（企业常见面试题）

```
head -n 30 ett.txt|tail -n 11
grep 20 -A 10 ett.txt
grep 25 -C 5 ett.txt
grep 30 -B 10 ett.txt
sed -n '20,30'p ett.txt
awk 'NR>19&&NR<31' ett.txt
awk '{if(NR<31 && NR>19) printf$0"\n"}' ett.txt
重要说明：
	sed命令和awk命令在生产场景是非常重要的命令。
```

12. 分析图片服务日志，把日志（每个图片访问次数*图片大小的总和）排行，取top10，也就是计算每个url的总访问大小

说明：本题生产环境应用：这个功能可以用于IDC网站流量带宽很高，然后通过分析服务器日志那些元素占用流量过大，进而进行优化或剪裁该图片，压缩js等措施。

本题答案精讲：
[轻松精通AWK数组企业问题案例深度实战视频课程](http://edu.51cto.com/course/4319.html)

```
awk '{a[$6]++}END{for (j in a) print a[j],j}'|sort -n|tac|head -n 10 xxx.txt

awk '{print $7* *$10"' xxx.txt|grep /|sort|uniq -c|awk '{print $1* *$1*$3* *$2}'
```

13. 把/oldboy目录及其子目录下所有以扩展名.sh结尾的文件中包含oldboy的字符串全部替换为oldgirl

```
mkdir -p /oldboy/test
cd /oldboy
echo "oldboy">test/del.sh
echo "oldboy">test.sh
echo "oldboy">.sh
touch a b c

find /oldboy -type f -name "*.sh" |xargs sed -i 's/oldboy/oldgirl/g' 
sed -i 's/oldboy/oldgirl/g' `find /oldboy -type f -name "*.sh"`
```

***

本文考试看似简单，实际上，考察了一个合格运维人员的命令基本功，绝大多数都会的人想答对或给出3种以上的答案都是不容易的。
***


Linux 系统命令操作语法格式:

```
命令 参数选项 文件或路径
rm -f /etc/hosts
```

Linux命令总结

```
mkdir make direcotrys 创建目录 例子：mkdir /data 在根/创建data目录
	-p 递归创建目录。
	
ls list（列表） 列表目录文件 例子：ls / 列根/目录下的目录和文件
	-l（long）长格式，-d（directorys）查看目录
	
cd change directory 改变目录路径 例子：cd /etc 切换到etc目录下

相对路径和绝对路径
相对路径 data/log 
绝对路径/data/log 根开始的绝对路径 
```

>注重表达能力。


# 0062
```
pwd print working directory 打印工作目录（显示当前所在路径）
touch 创建文件或更新文件的时间戳，如果文件不存在，就建立新文件，如果存在，就改变文件的访问时间atime等时间戳信息。 例子touch /data/oldboy.txt
vi  文本编辑器 例子：vi oldboy.txt
vim 文本编辑器，vi的高级版，功能复杂，高亮，自动缩进
echo 打印输出内容，配合“>或>>“可以为文件覆盖及追加内容，还有一个较复杂不常用的类似命令printf。

特殊符号：
”>“意思为重定向，会清除文件里所有以前的数据。
”>>“为内容追加，只在文件尾部追加需要的内容。

#多行文本追加
cat >>/data/oldboy.txt<<EOF
I am studying linux.
EOF
```

>把文字变成图。

# 0063
特殊符号：

```
>或1> cat a>1.txt 输出重定向：把前面输出的东西输入到后面的文件中，会清除文件原有内容。
>>或1>> cat a>>1.txt 追加重定向：把前面输出的东西输入到后面的文件的尾部，不会清除文件原有内容。
<或0< 输入重定向：输入重定向用于改变命令的输入，后面指定输入内容，前面跟文件名。
<<或0<< 追加输入重定向：后跟字符串，用于表示“输入结束”，也可以用ctrl+d来结束输入
2> cat ls 2>1.txt错 误重定向：把错误信息输入到后边的文件中，会删除文件原有内容。
2>> 追加错误重定向:把错误信息输入到后边的文件的尾部，不会删除文件原有内容。
说明：
1. 箭头的指向就是数据的流向。
2. 数字说明：
1）标准输入（stdin）：代码为0，使用<或<<。数据从右流向左边。
2）标准正常输出（stdout）：代码为1，使用>或>>。数据从左流行右边。
3）标准错误输出（stderr）：代码为2，使用2>或2>>。

特殊重定向3中高级写法：
1）标准输出重定向到b.txt，将错误输出重定向到a.txt
echo oldboy 2>a.txt 1>b.txt
2) 2>&1 写法是把标准错误重定向到标准输出，既让错误的输出和正确的一样，正确的定向到哪，错误的就到哪。
echo oldboy >a.txt 2>&1
3）2>&1 的写法相当于 &> (常用的方法，推荐）
echo oldboy &>a.txt 
```

# 0064
```
cat 查看文件内容 例子：cat oldboy.txt
xargs 从标准输入获取内容创建和执行命令行 例子：xargs -n 1<a.txt
cp 复制文件或目录， 默认不能拷贝目录。
	-r 递归拷贝，用户复制目录。
	-p 连同档案的属性一起复制过去，而非使用默认属性
	-d 若源文件为连接文件（link file），则复制链接文件属性而非文档本身
	-f 强制，若目标档案已经存在且无法开启，则移除后在尝试。
	-i 若目标文件已经存在，在覆盖时会先询问。
	-a 相当于 -pdr
	-u 若文件目标存在，则目标文件比源文件旧时才复制。
	提示：如果源文件是多个，那么目的文件在最后，且是目录。
	
mv move 移动目录或文件 例子：mv /data /root/
rm remove 删除文件或目录 例子：rm oldboy.txt
	-f （force）强制删除
	-r（recursive）递归，用于删除目录

#使用find删除文件
find /data -type f -name "oldboy.txt" -exec rm {} \;
find /data -type -f name "*.txt"|xargs rm -f

rm可以设置别名提醒备份，然后使用绝对路径删除文档

find 查找 
	-type 按文件类型查找 f（file）d（directory）l（link），
	-name 按名字查找
	-mtime 按修改时间查找，+7七天以前，7第七天，-7最近七天
	！取反
	-a and 交集，并且。
	-o or 并集，或者。

特殊字符：
管道符“|”把前一个命令的输出作为后一个命令的参数。
```

[linux面试题：删除一个目录下的所有文件，但保留一个指定文件](http://oldboy.blog.51cto.com/2561410/1650380)

此题问题虽小，但是初学者还是很难给出合理的答案的！本文来自老男孩21期网络班学员

1. 方法一

```
# ! -name "file" 名字不是file的文件，感叹号是重点“！”取反。
find /xx -type f ! -name "file"|xargs rm -f

find /xx -type f ! -name "file" -exec rm -f {} \;
#这两种一个通过xargs传参，一个通过find的-exec执行命令参数来完成，都算作find吧
```

2. 方法二

```
rsync -az --delete --exclude "file" /null/ /xx/
```

3. 方法三

```
#开启bash的extglob功能(此功能的作用就是用rm !(*jpg)这样的方式来删除不包括号内文件的文件)
shopt -s extglob
rm -f !(file)
```

4. 方法四

```
find ./ -type f|grep -v "\file\b"|xargs rm -f
```

5. 方法五

```
rm -f `ls|grep -v "\file\b"`
```
>从运维角度，任何删除性的操作都应该事先备份后在执行或者确认有备份存在。

# 0065
```
#移动查找出来的文件
mv `find /data -type f -name "*.txt"` /tmp
find /data -type f -name "*.txt" -exec mv {} /tmp \;

特殊符号：
.. 上一级目录
. 当前目录

rmdir 删除目录，只有目录为空的时候才能删除。
```
>这个东西就是不太好掌握的，只有多练习才行。只要功夫深，铁柱磨成针。

总结find命令

# 0066
>多在使用中记忆。
>要让面试官相信你，工资才能高。

1997年工资 14400元工资
1990年 08年带的学生，开奥迪A6

```
grep linux三剑客之一老三，过滤需要的内容 -v排除内容，例子： grep -v “oldboy” 查找不包含oldboy的内容。
	-v 排除内容，匹配给出的字符串外的所有字符。
	-B 除了显示匹配的一行之外，并显示该行之前的num行
	-A 除了显示匹配的一行之外，并显示该行之后的num行
	-C 除了显示匹配的一行之外，并显示该行之前后各num行

head 查看文件开头的行，默认前10行。例子：head -10
tail 查看文件从结尾开始的的行，默认后10行。例子：tail -10

提示：三剑客是grep，awk，sed，它们都有过滤字符串的功能，grep最擅长，awk处理列擅长，sed擅长删除，修改，替换，添加。
```

# 0067
## 默认系统没有安装的常用命令
lrzsz、telnet、nmap、nc

```
yum install -y lrzsz telnet tree nmap nc
```
>Linux严格区分大小写

>cp mv rm 系统都是用的别名,都是加 -i 参数了。

[centos linux 因别名问题引起的麻烦及解决技巧](http://oldboy.blog.51cto.com/2561410/699046)
已知/tmp下已经存在test.txt文件，如何执行命令才能把/mnt/test.txt覆盖掉/tmp/test.txt而让系统不提示是否覆盖（root权限下）。

```
# 方法一
/bin/cp /mnt/test.txt /tmp/test.txt
#方法二
\cp /mnt/test.txt /tmp/test.txt
#方法三
unalias cp
#方法四
vi ~/.bashrc
#alias cp='cp -i'
```

别名的作用：
1）通过给危险命令加一些保护参数，防止人为误操作。
2）把很多复杂的字符串或命令变成一个简单的字符串或命令。

别名对应的命令：

```
alias 查看和设置别名，例子： 查看别名alias，设置别名alias cp='cp -i'
unalias 取消设置别名，例子：unalias cp
```
```
alias rm='echo "this command does not allow to use."'
```

定义别名永久生效：
/etc/profile 全局生效，所有用户都可以使用。
~/.bashrc 当前用户生效

## 中央财经大学系统安装总结
[中央财经大学系统安装总结](http://oldboy.blog.51cto.com/2561410/1402699)
***

今天老师安排我和刘XX同学到中央财经大学协助师兄为服务器安装CentOS6.4的系统，由于平时接触的都是虚拟机，这次是第一次接触真正的服务器，而且只有键盘，当师兄让我安装系统的时候，我显得有些手忙脚乱，有一些细节也忽略了，比如在选择时区时忘了取消System clock uses UTC这个选项。幸好师兄在一旁指点，让我对安装系统慢慢的熟悉起来。
我发觉给真正的服务器安装系统和用虚拟机安装系统虽然大致上是一样的，但还是会有些区别，比如在安装系统之前要进入BIOS调节SATA硬盘为RAID模式，而且由于这个Dell服务器是intel 2的芯片，还要按Ctrl+I创建RAID 5，由于我的知识有限，只能照着做，虽然不是很明白为什么要这么做。其他基本上和虚拟机的安装流程一致。安装完系统之后，接着就是对网卡进行配置，实现ping通外网，完成以上的步骤之后，接下来就是对4台服务器进行简单的优化，但在这里只需要优化其中几项，包括创建普通用户以及sudo提权、关闭SELINUX和防火墙、增大文件描述符、精简开机自启动的服务、同步系统时间并加入定时任务和更改ssh服务端的登录配置等，虽然我和建佐能完成这些操作，但是还没师兄一个人操作的快，让我深深感受到彼此的差距，自己还是练习的太少了。
通过这次的实战，让我明白到自己的不足之处还有很多，某些地方还有待提高，必须反复的练习、练习再练习，而且让我想起老师曾经引用过李小龙先生的一句话：“我不怕将一千个动作只练一遍的人，而是怕将一个动作练一千遍的人”，空有一身理论是没有用的，实践才是永恒的真理。
***

# 0068
>有能力的人有三种以上方法。

```
#生成100个数字
seq 100 
sed stream editor linux三剑客之一老二，流编辑器,实现对文件的增删改替换查。
	参数：
	-n 取消默认输出 p打印
	-e 允许多项编辑
	-i 修改文件内容
	
	功能：
	s 常说的查找并替换，用一个字符串替换成另一个
	g 与s联合使用，表示对当前行全局匹配替换
	例子： sed 's/oldboy/oldgirl/g' a.txt 用oldgirl替换oldboy。 
	“/”是分隔符，“/”可以使用“#”或者“@”替换。
	
awk 过滤、输出内容，awk是一门语言。 
	NR 行号
```

老男孩培训交流群08 384467551

到现在学习的命令至少有24个，分别是
必须掌握的命令：
man，touch，ls，mkdir，cp，cd，rm，mv，echo，pwd，cat，alias，unalias，head，tail，tree，rmdir

目标月薪超过5000需要总结的命令：
find，xargs，awk，sed，grep，vi，vim，seq

## 同学们回忆学习的命令：
1.mkdir
2.touch
3.ls
4.cd
5.echo
6.cp
7.vi
8.head
9.tail
10.rm
11.rmdir
12.cat
13.grep -A -B -C -v
14.sed -i -n sg
15.awk -F 指定分隔符 {print $1} 打印
16.find
17.xargs
18.alias
19.unalias
20.vim
21.seq -s指定分割符
22.pwd
23.tree
24.tr
25.mv
26.man

第一梯队 20人

## 帮助
man 命令名/配置文件，详细帮助，需要总结笔记，需要详细查看时候。
命令 --help 快速查一个命令。
搜索引擎
提示：文档及使用查百度，排错查谷歌。
help 命令名，特殊bash内置命令的获取帮助方法。
[01-老男孩linux技术分享-学会科学使用搜索引擎查找内容](http://video.tudou.com/v/XMjMzMTE3MDgyNA==.html)
bash 内置命令用 help

# 0070
bash特殊符号

|符号|作用|
|:|:|
|< 0<|输入重定向符。|
|<< 0<<|追加输入重定向符|
|&#124;|管道 就像一个真实管道一样，例如：水管左边进水，右边流出来。其他的功能，egrep "3306|1521" /etc/services|
|\|转义符，让有意义的字符，脱掉它代表的意义。例如：正则里$表示以...结尾，可以用\$表示$符号本身。|
|~|当前用户的家目录|
|-|用户上一次所在的目录，由OLDPWD变量控制。|
|.|当前目录|
|..|上一级目录|
|/|根目录，即linux里所有目录的顶点。也是路径分隔符。|
|;|命令分隔符|
|{}|生成字符或数字序列，类似seq，一般配合echo等命令使用，find里的{}意思是前面命令的结果。|
|!|1)!+字母 表示调出最近以此字母开头的命令。2）!!表示使用最近一次操作。3）!+数字 表示调出历史的第几条命令。4）!$ 表示这次命令使用上次命令以空格分开的最后一个字段。5）取反，find、shell里。|
|&&|并且|

# 0071
bash快捷键
[由SecureCRT命令行快捷键谈学习思想](http://oldboy.blog.51cto.com/blog/2561410/907098)
由学习linux SecureCRT命令行常用快捷键开始谈起！

1）老男孩说，抓重点（重点非难点）
    任何一个领域、学科，任何一个职位、工作，都有学不完的知识，优秀的学生总能抓住重点去学习，如果泛泛的去学，虽然学完了，结果大脑里还是一片空白。
    例如：老男孩老师在第一堂课时给学生留的课外总结，一部分学生在总结时，就是百度下，然后复制出来到文档里，好点的排个版，差点的直接交作业了。
    未经过自己的思维思考过滤过的知识，几乎没什么价值可言，在我们的脑袋里也不会有太多的印记。
    因此，在学技术时，尽量先学重点，学会了重点之后，如果还有时间在学次重点的内容。例如：linux终端下的常用快捷键老男孩推荐大家先记牢以下几个即可。
    
常用：
tab=补全
ctrl+k= 删除(剪切)此处至末尾所有内容
ctrl+u= 删除（剪切）此处至开始所有内容
Ctrl+a 移动到当前行的开头
Ctrl+e 移动到当前行的结尾
Ctrl+l 清屏
Ctrl+c 删除整行或停止当前任务
复制=ctrl-shift-c
粘贴=为ctrl-shift-v

   总结文档就像网站的缓存一样，数据写进来后，要把热点数据拉进缓存，下次使用时才快。这里说的缓存就是抓重点先学。
2）老男孩说，在使用中记忆
    当我们到达成年人以后，记忆力开始快速减退，理解能力慢慢的增强。因此，面对多如牛毛的运维技术，我们不能在像初高中背课文那样去背了，不但效率低，而且临时记住了，因为用的少，很快就忘掉了。
    例如：上面的快捷键看起来很简单，实际上能长时间记牢也不容易的，但如果在使用LINUX时，随时随地多使用上面的快捷键，不但能提高工作效率，而且，以后想忘记都困难。这是老男孩老师的亲身体验，也常把此法建议给学生，记住了，“多在使用中记忆”！，快捷键只是一个例子呦，实际很多命令都可以的。
3）老男孩说，重视交流、讨论与实践、总结
    据老男孩个人运维工作体验及多年教学经验感悟，学生在学习知识期间或学习知识后，能够多进行交流和讨论的学生，比单纯的被动听老师讲或自己去看去学的，记忆的效率和深度要高出几倍。
    
从我们吸收知识效率上大概排序为：
a.被动学习<主动学习               
b.被动学习排序：听讲 < 阅读 < 视听 < 演示
c.主动学习排序：交流讨论 < 实践总结 < 指导教授他人
d.整体排序 听讲 < 阅读 < 视听 < 演示 < 交流讨论 < 实践总结 < 指导教授他人。最高境界就是指导和教授他人了。
    上面的思想，也是老男孩在培训工作中一直去努力追求的目标，尽可能的让学生交流讨论，实践、总结，开口表达，指导帮助身边的同学，或者简单的内容分享也是好的。
老男孩说，一个人能走多远，完全取决于他的思维。
4）老男孩说，运维人员也困惑
    经常有朋友问老男孩，说工作中运维就是救火，感觉运维没什么前途。这个朋友的问题不是个例，而是很普遍的问题。
    老男孩还拿学习快捷键举例，平时时间忙，没时间掌握快捷键的使用，结果工作就很没效率。工作没效率，就要付出更多时间工作了，那么就更没时间学习快捷键了，如此恶性循环，不困惑才怪。
     一个有经验的运维负责人，会把工作分门别类，要适合的运维人员做适合的事，实际工作中，发现有的高级或者核心运维，还在做低级的运维工作（例如内网维护，装系统，配置熟的不能再熟的基础服务），从而整个运维团队看起来，新手闲的要死，核心骨干忙的要死，这样下来，天天救火、解决故障，响应开发和产品的需求就忙不完了，还哪有时间去思考，优化网站架构，运维自动化呢？
类似问题还很多：
    大学生毕业没什么经验，企业非要有经验的，没经验就没工作，没工作就更没经验，同样的怪圈！例子很多，不少朋友很久都想不明白，白白的浪费光阴和生命。
5）老男孩说，优秀的总结习惯很重要。
     还是拿总结快捷键举例，老男孩认为比较好的总结方法是，首先全部总结下（相当于放硬盘里，总结就是一次学习过程，放硬盘可以随时查询到），然后抽出重点（放缓存里，必须会的，提升效率的），网站优化的思路大家该不陌生的，当然了，老男孩这里的学生的运维重点就是老男孩指导把握了、带领大家练习把握了。
    在比如总结linux启动过程，老男孩认为比较好的总结方法可以分为四个阶段：
A.详细文字总结linux启动过程，便于随时查阅复习。
B.画详细图表总结，画图表脉络清晰，便于记忆，这不是老男孩讲课的专利，学生们总结也可以的。
C.精简文字总结，抓重点，易于理解的框架部分，便于记忆在脑袋里及口头表达。
D.画精简启动过程图，先不说画图过程是个最佳的学习方式，看一眼，可能半年都不会忘记，如果能搞个动画就更好了。
相关案例可参考老师提供的案例。
    记得网上有人把男人追女孩画了图，来描述TCP三次握手，还有人把饮水机上插桶来描述RAID的原理级别，等等都是最佳的学习总结的思路。只不过80%的人，看过了就当笑话了而已。（有看过的朋友可以提供下地址，我补到这里）。
6）老男孩说，“小事不爱做，大事做不了”
    现在的社会就是个浮躁的社会，前段时间受兼职公司邀请面试了10几个运维人员，发现了某些共同的特点：
a.很浮躁
浮躁的心态很可怕，还是踏踏实实的学习、工作吧，朋友们。
b.好高骛远
觉得自己很行，有的要薪水10几K。挑剔公司，不愿加班，傲气十足，结果浪费了面试机会。
c.眼高手低。
   有的朋友，一上来就说自己基本上运维那些东西都做过了，都很熟练，结果问一些最初级的问题还答不清楚。比如：给个网关地址，命令行添加默认网关都还不会，再说会什么高深的技术，还有什么用呢？
d.不了解自己
人最可怕的问题是不了解自身，这个值得我们大家注意（包括老男孩也在不断的自我警醒），扩大了说，对于一个企业也一样，和几个企业老板一起聊天，好多企业都走了弯路，什么好就做什么，结果做来做去，发现都不适合，才回过头定位，自己的企业到底适合做什么。认识自身，对于自己的未来发展非常关键。

bash 常用快捷键

|快捷键|作用|
|:|:|
|tab|命令或路径补全|
|ctrl+k|删除(剪切)此处至末尾所有内容|
|ctrl+u|删除（剪切）此处至开始所有内容|
|Ctrl+a|移动到当前行的开头|
|Ctrl+e移动到当前行的结尾|
|Ctrl+l|清屏，相当于clear命令|
|Ctrl+c|删除整行或停止当前任务|
|Ctrl+d|退出当前用户环境，相当于exit，logout|
|上下方向键|查看上一次执行的命令。并显示在bash终端里|

请大家根据自己的时间于本周内分别总结以上命令，作为作业提交，下周考试考上述命令及符号作用。

[命令查询大全](http://man.linuxde.net/)

# 0072 
## 区别32位系统和64位系统
当初设计时的定位不同 
需要大量的系统内存和浮点性能

安装要求配置不同 

运算速度不同 
64位CPU的GPRs（General-Purpose Registers，通用寄存器）的数据宽度为64位，64位指令集可以运行64位数据指令，也就是说处理器一次可提取64位数据（只要两个指令，一次提取8个字节的数据），比32位提高了一倍（32位需要四个指令，一次只能提取4个字节的数据），性能会相应提升。

内存支持不同

寻址能力不同。64位处理器的优势还体现在操作系统对内存的控制上。由于地址使用的是特殊整数，因此一个ALU（算术逻辑运算器）和寄存器可以处理更大的整数，32位理论最大只可支持4GB内存。当然32位系统可以通过扩展来支持大内存。扩展所采用的是PAE技术。

# 0073
查看是32位还是64位的命令

```
uname -m

#如果有lib64就代表是64位系统，32位系统一般没有lib64
ls -ld /lib64
```

```
uname 查看系统信息，
	-a 查看所有信息
	-m 查看系统位数
	-r 查看内核版本

#查看系统发行版系信息
cat /etc/redhat-release
```

# 0074
RAID和LVM

企业环境一般是使用硬件RAID
LVM和软件RAID性能差。

# 0075
网络模式

桥接 使用物理网卡的信息

NAT 

Host-only  

# 0076
硬盘使用前，一般要分区，分区后要格式化（创建文件系统）

分区：
主分区、扩展分区、逻辑分区
主分区+扩展分区的数量<=4,其中一个主分区可以用一个扩展分区替代，扩展分区最多只能有一个。扩展分区不能直接使用，还需要在上面创建逻辑分区，逻辑分区可有多个。

主分区+扩展分区 编号只能1-4，逻辑分区编号只能从5开始。

1. 常规分区：数据不是特别重要的业务（例如：集群的某个节点）
/boot 引导分区 200MB 主分区
swap 交换分区 内存的1.5倍，内存大于8GB，就给8-16GB
/ linux所有目录的顶点 主分区 剩余所有容量 主分区

2. 数据重要（数据库、存储服务器）
/boot 引导分区 200MB 主分区
swap 交换分区 内存的1.5倍，内存大于8GB，就给8-16GB
/ linux所有目录的顶点 主分区 100-200GB 主分区
/data 所有，存放数据

3. 特大网站，门户（产品线特别多，需求）
/boot 引导分区 200MB 主分区
swap 交换分区 内存的1.5倍，内存大于8GB，就给8-16GB
/ linux所有目录的顶点 主分区 100-200GB 主分区
剩余空间不分配，哪个部门领到了服务器，根据需求在进行分区。

# 0077
ide hda hdb
scsi sda sdb

逻辑分区永远是从编号5开始的

# 0078
Mount point 挂载点
File System Type 文件系统类型
ext2/ext3/ext4

centos6使用ext4就行
centos7默认 xfs

# 0079
课后作业20160308
1.今天讲的总结（最快总结），涉及的命令总结。
2.预习视频
周四上午上课：
讲命令补基础。

# 0080
## 学生讲解
1. 查看命令帮助的几种方法
pwd
不知道pwd命令的意思怎么办？
pwd --help 适用于一般命令，非内置命令
man pwd 适用于一般命令，非内置命令
help pwd 适用于内置命令
info pwd 

```
pwd -L 显示逻辑路径
pwd -P 显示物理路径
```

# 0081
2. mkdir
多动手，勤动手，做笔记。
man查看帮助，做笔记。忘记了还可以找回来。
大家要习惯看英文。

用结果反推命令作用。

命令太多，要有所取舍，抓重点。

{} 花括号的用法

```
echo 1 2 3 4 5
可以写成 
echo {1..10}

echo 14 15 16 24 25 26 34 35 46
可以写成
echo {1..3}{4..6}
```

# 0082
cd
内置命令没有--help
需要用help cp

路径：
绝对路径：从根/开始 /test/a/b
相对路径：不从根/开始 test/a/b

..：上一级目录
-：上一次目录，-是从OLDPWD变量提取的路径。
~：代表用户的家目录

>多敲多练，做笔记。

# 0083
tree

```
#显示所有文件，包括隐藏文件
tree -a
#只显示目录
tree -d
#只显示2层目录
tree -L 2 
#为每一个文件显示完整的路径
tree -f
#不显示路径的树枝或 不打印缩进行
tree -i
#如果是目录后面会加上/
tree -F
```

# 0084
touch 创建新文件，更新旧文件的时间戳

```
#显示文件的详细属性
stat

#更改文件的访问时间atime
touch -a oldboy.txt
会修改ctime
#只改变修改时间
touch -m oldboy.txt
会修改ctime
```

# 0085
[要学好linux运维请从排版画图开始](http://oldboy.blog.51cto.com/blog/2561410/1180894)

>只要一出手就必须是专业的、规范的！无论是技术、文档、画图，还是做人、做事，这是老男孩培训培养学生的重中之重，虽然不容易做到，但是只要我们努力，就可以无限接近目标，甩开竞争对手。。

网站运维交流群：385168604
架构师QQ交流群：390642196

为什么要绘制逻辑图
linux一切皆文件 抽象
一图胜千言 没有图的文档
老大喜欢看图呀

# 0086
如何画好专业逻辑图

- 每个知识点，必须上个图
- 模仿高手的图
- 不断逼自己去画图，百度 google 找知识点相关的图片，然后重新画一遍或者根据老师课上分享的图片，自己再画一次。
- 我也是从菜鸟过来的。

# 0087
亿图入门与提高
李泳道
2016年3月27日

目录
基础设置
常用命令及参考建议
实例1 图形 阴影 边框线

## 基础设置
1. 设置自动保存及优化
选项->常规->撤销的次数 999，保存自动备份 2分钟，自动检查更新 取消
2. 符号库快捷按键
新建空白绘图->视图->符号库

符号库：
背景
标题
标注
高光图形
箭头形状

什么是专业的原理图，为何要画原理图？
如何绘制专业原理图？
亿图基本配置及绘制原理图。
亿图原理图绘制小结。

# 0088
>运维嘛，就要学会小结。

基本操作方法
对齐排列大小
快捷方式小结
绘图转换为图片

# 0089
1. 排版问题
2. 作业文档目录结构---看清楚是哪一天的作业
3. 命令总结不行---大多数人只是“记录”了老师讲的---命令总结模版（填写就行）

>给别人节约时间，别人才能帮你解决问题。

上课总结
课后作业
命令总结
>现在写的文档，以后就是自己用的。

# 0090
[最专业逻辑图和最专业项目文档制作实战讲解](http://oldboy.blog.51cto.com/256140/1726744)

word基本排版讲解
[office的模版](http://oldboy.blog.51cto.com/256140/1180894)

老男孩教育额-课上课后总结normal 用于总结课堂笔记，课后作业，通用模版
老男孩教育-考试题-normal 用于总结考试题
命令总结-normal 用于总结命令（分类总结）

拼写和语法->键入时检查拼写

## 模版
简单、易用、高效

# 0091
核心信念、

>创业成败---关于挑战、机遇和创新

借鉴成功人的态度和习惯，你可以让你在任何想达到目标提高成功的概率！

学习不专心、上课期间少干别的。

上课保持最大化的输入，讨论让自己吧知识最大化的输出。

课下把知识最大化的输出

学一个点，共同讨论，互相讲解，靠一靠。

我看书，身边有笔和笔记本记下来。总结分享给别人。

没有行动学不会的，笔记录，讨论，和别人分享交流，讲解。

请教高手的习惯！

四个月之间交往圈子。

满足8大需求
赞美，重要性，爱与被爱。

你们知道了，而我做到了。

抓重点，记笔记，去把知识去实施行动（讨论，交流，讲解，分享）

# 0092
远程连接
通过IP地址访问。
端口的简单概念

一台主机上的不同服务，就是通过端口区分，让后让外部人员访问。

协议的概念
一台主机上的不同服务，就是通过端口区分，客户端和服务器之间通信，就可能使用不同的协议。

ip，port，protocol

排查故障：
物理网络，网线、网卡、IP
ping

# 0093
ping -t 检查网路通不通

sshd服务是否正常运行

telent IP 22

不同可能原因 服务器防火墙。服务器端没有监听链接的端口，服务器服务没有开启

```
netstat -lntup|grep 22
netstat -lntup|grep sshd
```

企业场景面试题：Linux系统如何优化？
企业场景面试题：SSH服务连不上，如何排查错误？
企业场景面试题：怎么区分32位还是64位系统？

思路

ssh服务端，ssh服务，sshd进程名，openssh，openssl加密
ssh客户端：xshell，secureCRT，putty，Zoc

批量管理操作


## 用户
root用户
普通用户
虚拟用户 进程及程序都必须属于用户。

```
useradd oldboy
tail -1 /etc/passwd
passwd oldboy
echo "123456"|passwd --stdin oldboy && history -c
su - oldboy
whoami
```

linux 命令提示符由PS1环境变量控制，可以通过全局变量配置/etc/profile文件调整

```
set|grep PS1
```

linxu运维方法
[su与su -的区别](http://oldboy.51cto.com/2561410/1053606)

```
useradd 添加用户 例子：useradd oldboy
passwd 为用户设置或修改密码 例子： passwd oldboy，直接passwd 是为当前用户设置密码
	--stdin 标准输入，非交互式修改密码。例子： echo "124"|passwd --stdin oldboy
	
uname 打印系统信息
	-r 显示内核信息
	-m 显示系统位数
	-n 显示主机名，相当于hostname命令。
	-a 显示所有信息
	
hostname 显示和设置主机名，默认是显示主机名。设置主机名可以 hostname oldboy

一般情况下，在企业生产环境中应尽量避免直接到root用户下操作，除非有超越普通用户权限的系统维护需求，使用完后立刻退回到普通用户

```

# 0094
## linux系统的基础优化
关闭SELinux功能

```
sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config

getenforce
setenforce 0
```

# 0095
运行级别

企业面试题：linux的7种运行级别
0 关机
1 单用户
2 没有nfs的多用户
3 多用户
4 没设置
5 x11
6 重启

```
cat /etc/inittab

#查看运行级别
runlevel

#设置运行级别 加数字0-6
init 6
init 0

shutdown 关机（halt init 0 关机）
reboot 重启 shutdown -r init 6 
```

linux系统从开机到登录之前的流程
硬件开机键
BIOS POST
BIOS 转 到 硬盘 mbr
mbr将引导权交给grub
系统initram 加载到内存
init初始化

精简开机系统启动服务

重要的开机自启动服务
根据老男孩多年的经验，企业环境新装linux系统之后有必要保留的开机自启动服务有5个，具体是
- sshd
远程连接linux服务器时需要用到这个服务程序，所以必须开启。
- rsyslog
日志相关软件，
- network
系统启动时，若想激活/关闭各个网络接口。则应开启。
- crond
定时任务
- sysstat
sysstat 是一个软件包，包含检测系统性能及效率的一组工具，这些工具对于我们收集系统性能数据很有帮助。
sysstat软件包主要工具：
iostat工具提供cpu使用率及硬盘io的数据
mpstat工具提供与单个或多个处理器相关的数据
sar工具负责收集、报告并储存系统活跃的信息

设置开机自启动服务的常见方法
1）ntsysv
2）setup->system service
3）chkconfig


关闭iptables防火墙

```
/etc/init.d/iptables stop
service iptables status
chkconfig iptables off
```

linux系统安全最小原则说明
多一事不如少一事。
安装linux系统最小化，yum安装软件包也要最少化。
开机自启动服务最小化，即无用服务不开启。
操作命令最小化，能用 "rm -f test.txt" 就不用 "rm -rf test.txt"
登录linux用户最小化，平时没有特殊需求不登录root，用普通用户登录即可。
普通用户授权权限最小化，即只给用户必须的管理命令，不能啥都可以干。
linux系统文件及目录的权限设置最小化，禁止随意创建、更改、删除文件。

更改ssh服务端远程登录的配置
修改默认22的ssh端口
禁止空密码登录
不允许root用户登录
不使用dns，因为会导致登录ssh的时候进行反向解析。就会变慢

linux中文显示

```
#备份
cp /etc/sysconfig/i18n /etc/sysconfig/i18n.ori
cp /etc/sysconfig/i18n /etc/sysconfig/i18n.bak
cat /etc/sysconfig/i18n
LANG="zh-CN.UTF-8"
source /etc/sysconfig/i18n
```

历史记录数及登录超时环境变量设置
设置闲置账号超时时间退出
 
``` 
export TMOUT=300
```

设置linxu命令历史记录数
永久生效的话添加到/etc/profile

```
#设置命令行只有5条历史记录
export HISTSIZE=5
#设置历史文件的记录数量
export HISTFILESIZE=10
```

history 历史记录

```
history 查看历史记录
	-c 清楚当前历史的记录，只有终端重启才会清楚bash_history文件。
	-d 删除指定的记录
```
网络状态说明及优化命令和优化细节参考资料请看
[yangrong](http://yangrong.blog.51cto.com/6945369/1321594/)
[oldboy](http://oldboy.blog.51cto.com/2561410/1336488)

隐藏linux系统信息
清空版本信息

```
cat /etc/issue
cat /etc/issue.net
cat /etc/redhat-release
```
 
# 0097
虚拟机快照

快照：
	打标记、可以恢复到打标记的地方。
	 20160311讲到linux系统优化完毕

克隆：
	复制一个一摸一样的虚拟机。
	一般使用链接克隆。省硬盘空间。
	克隆虚拟机网卡mac地址可能一样。更换mac就可以。
	
[vmware克隆centos6.4虚拟机网卡无法启动问题](http://oldboy.blog.51cto.com/2561410/1363853)

vi /etc/sysconfig/network-scripts/ifcfg-eth0
删除hwaddr和uuid

清空
/etc/udev/rules.d/70-persisten-net.rules

# 0098
day1 学习思想和方法，装了、虚拟机，装了系统。
day2 计算机硬件组成，操作系统历史发展，选择，VM安装，系统安装。
day3 crt连接，第一关考试题24个命令，若干特殊字符，快捷键
day4 SSH连接，简单优化。

## linux目录结构
目录层次标准FHS

linux目录的特点：
1、/是所有目录的顶点
2、目录结构想一颗倒挂的树
3、目录和磁盘分区是没有关联的。
4、/下不同的目录可能会对应不同的分区或磁盘
5、所有的目录都是按照规律放置的。按照FHS标准。
linux里设备不挂载是访问不了的
挂载点。

mount /dev/cdrom /mnt
/dev/cdrom实际是 /dev/sr0。
df -h

# 0099
>运维不要删文件。
/
/usr
的 bin sbin tmp 目录都一样
# 0100
目录层次标准[FHS](http://www.pathname.com/fhs/)（Filesystem Hierarchy Standard)
/bin 二进制命令所在的目录
which ls
/boot linux内核和引导程序
/dev 硬件设备
/etc 二进制软件安装包 yum和rpm安装的软件包的配置文件默认路径

分区挂载文件 /etc/fstab
登录前的提示信息 /etc/issue
登录后的提示信息 /etc/motd

/home 普通用户的家目录，除了root
用户外
/root root用户的家目录。
/proc 显示内核及进程信息的虚拟文件系统
/var 变化的目录，一般是日志文件，cache的目录
/usr 用户程序及数据、帮助文件、二进制命令等的目录
/sbin 和/usr/sbin 超级用户命令的目录


## TCP的十一种状态及变迁
[TCP的十一种状态及变迁](http://www.rfyy.net/archives/2624.html)
[TCP连接的几种状态说明](http://www.xiaomastack.com/2014/07/11/networktcp/)

Linux系统中用netstat查看网络连接时，State列的几种状态说明(参考网络上的一些文章然后结合实际生产所需，把需要的记下)：

LISTEN：侦听来自远方的TCP端口的连接请求；
SYN-SENT：在发送连接请求后等待匹配的连接请求；
SYN-RECEIVED：在收到和发送一个连接请求后等待对方对连接请求的确认；
ESTABLISHED：代表一个打开的连接，我们常用此作为并发连接数；
FIN-WAIT-1：等待远程TCP连接中断请求，或先前的连接中断请求的确认；
FIN-WAIT-2：从远程TCP等待连接中断请求；
CLOSE-WAIT：等待从本地用户发来的连接中断请求；
CLOSING：等待远程TCP对连接中断的确认；
LAST-ACK：等待原来发向远程TCP的连接中断的确认；
TIME-WAIT：等待足够的时间以确保远程TCP连接收到中断请求的确认；
CLOSED：没有任何连接状态；
